{"version":3,"file":"sidecar.min.js","mappings":"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","sources":["sidecar:///./node_modules/@sugarcrm/ventana/src/client.js","sidecar:///./node_modules/async/index.js","sidecar:///./node_modules/async/lib/async.js","sidecar:///./lib/sugar/sugar.liverelativedate.js","sidecar:///./lib/sugaranalytics/googleanalyticsconnector.js","sidecar:///./lib/sugaranalytics/pendoconnector.js","sidecar:///./lib/sugaranalytics/sugaranalytics.js","sidecar:///./src/core/acl.js","sidecar:///./src/core/before-event.js","sidecar:///./src/core/cache.js","sidecar:///./src/core/context.js","sidecar:///./src/core/controller.js","sidecar:///./src/core/error.js","sidecar:///./src/core/events.js","sidecar:///./src/core/language.js","sidecar:///./src/core/metadata-manager.js","sidecar:///./src/core/plugin-manager.js","sidecar:///./src/core/router.js","sidecar:///./src/core/routing.js","sidecar:///./src/core/user.js","sidecar:///./src/data/bean-collection.js","sidecar:///./src/data/bean.js","sidecar:///./src/data/data-manager.js","sidecar:///./src/data/mixed-bean-collection.js","sidecar:///./src/data/validation.js","sidecar:///./src/sidecar.js","sidecar:///./src/utils/cookie.js","sidecar:///./src/utils/currency.js","sidecar:///./src/utils/date.js","sidecar:///./src/utils/logger.js","sidecar:///./src/utils/math.js","sidecar:///./src/utils/underscore-mixins.js","sidecar:///./src/utils/utils.js","sidecar:///./src/view/alert-view.js","sidecar:///./src/view/alert.js","sidecar:///./src/view/component.js","sidecar:///./src/view/field.js","sidecar:///./src/view/hbs-helpers.js","sidecar:///./src/view/layout.js","sidecar:///./src/view/template.js","sidecar:///./src/view/view-manager.js","sidecar:///./src/view/view.js","sidecar:///./src/app.js","sidecar:///./lib/php-js/version_compare.js","sidecar:///./node_modules/backbone/backbone.js","sidecar:///./node_modules/big.js/big.js","sidecar:///./node_modules/crosstab/src/crosstab.js","sidecar:///./node_modules/handlebars/dist/handlebars.min.js","sidecar:///./node_modules/jquery-migrate/dist/jquery-migrate.min.js","sidecar:///./node_modules/jquery.iframe-transport/jquery.iframe-transport.js","sidecar:///./node_modules/jquery/dist/jquery.min.js","sidecar:///./node_modules/moment/min/moment.min.js","sidecar:///./node_modules/store/store.min.js","sidecar:///./node_modules/underscore/underscore-min.js","sidecar:///./node_modules/script-loader/addScript.js","sidecar:///./lib/php-js/version_compare.js?19ea","sidecar:///./node_modules/backbone/backbone.js?bdf1","sidecar:///./node_modules/big.js/big.js?1d22","sidecar:///./node_modules/crosstab/src/crosstab.js?a21a","sidecar:///./node_modules/handlebars/dist/handlebars.min.js?eb33","sidecar:///./node_modules/jquery-migrate/dist/jquery-migrate.min.js?3fc2","sidecar:///./node_modules/jquery.iframe-transport/jquery.iframe-transport.js?2ee3","sidecar:///./node_modules/jquery/dist/jquery.min.js?028e","sidecar:///./node_modules/moment/min/moment.min.js?5204","sidecar:///./node_modules/store/store.min.js?a6d1","sidecar:///./node_modules/underscore/underscore-min.js?a6a4","sidecar:///webpack/bootstrap","sidecar:///./src/entry.js"],"sourcesContent":["/*\n * Copyright (c) 2017 SugarCRM Inc. Licensed by SugarCRM under the Apache 2.0 license.\n */\n\nvar _instance;\nvar _methodsToRequest = {\n        'read': 'GET',\n        'update': 'PUT',\n        'create': 'POST',\n        'delete': 'DELETE'\n    };\nvar _baseActions = ['read', 'update', 'create', 'delete'];\nvar _refreshTokenSuccess = function(c) {c();};\nvar _bulkQueues = { };\nvar _state = { };\n\n/**\n * Represents AJAX error.\n *\n * See Jquery/Zepto documentation for details.\n * @see  http://api.jquery.com/jQuery.ajax/\n * @see  http://zeptojs.com/#$.ajax\n *\n * @class HttpError\n */\nvar HttpError = function(request, textStatus, errorThrown) {\n\n    request = request || {};\n    request.xhr = request.xhr || {};\n\n    /**\n     * AJAX request that caused the error.\n     *\n     * @member {HttpError} request\n     * @memberof HttpError\n     * @instance\n     */\n    this.request = request;\n\n    /**\n     * XHR status code.\n     *\n     * @member {string} status\n     * @memberof HttpError\n     * @instance\n     */\n    this.status = request.xhr.status;\n\n    /**\n     * XHR response text.\n     *\n     * @member {string} responseText\n     * @memberof HttpError\n     * @instance\n     */\n    this.responseText = request.xhr.responseText;\n\n    /**\n     * String describing the type of error that occurred.\n     *\n     * Possible values (besides null) are `\"timeout\"`, `\"error\"`, `\"abort\"`, and\n     *   `\"parsererror\"`.\n     * @member {string} textStatus\n     * @memberof HttpError\n     * @instance\n     */\n    this.textStatus = textStatus;\n\n    /**\n     * Textual portion of the HTTP status when HTTP error occurs.\n     *\n     * For example, `\"Not Found\"` or `\"Internal Server Error\"`.\n     * @member {string} errorThrown\n     * @memberof HttpError\n     * @instance\n     */\n    this.errorThrown = errorThrown;\n\n    // The response will not be always a JSON string\n\n    if (typeof(this.responseText) === 'string' && this.responseText.length > 0) {\n        try {\n            var contentType = this.request.xhr.getResponseHeader('Content-Type');\n            if (contentType && (contentType.indexOf('application/json') === 0)) {\n                this.payload = JSON.parse(this.responseText);\n                /**\n                 * Error code.\n                 *\n                 * Additional failure information. See SugarCRM REST API\n                 * documentation for a full list of error codes.\n                 * @member {string} code\n                 * @memberof HttpError\n                 * @instance\n                 */\n                this.code = this.payload.error;\n\n                /**\n                 * Error message.\n                 *\n                 * Localized message appropriate for display to end user.\n                 * @member {string} message\n                 * @memberof HttpError\n                 * @instance\n                 */\n                this.message = this.payload.error_message;\n            }\n        }\n        catch (e) {\n            // Ignore this error\n        }\n    }\n};\n\n_.extend(HttpError.prototype, {\n\n    /**\n     * Returns string representation of HTTP error.\n     *\n     * @return {string} HTTP error as a string.\n     * @memberof HttpError\n     * @instance\n     */\n    toString: function() {\n        return 'HTTP error: ' + this.status +\n            '\\ntype: ' + this.textStatus +\n            '\\nerror: ' + this.errorThrown +\n            '\\nresponse: ' + this.responseText +\n            '\\ncode: ' + this.code +\n            '\\nmessage: ' + this.message;\n    }\n\n});\n\n/**\n * Represents AJAX request.\n *\n * Encapsulates XHR object and AJAX parameters.\n *\n * @class HttpRequest\n */\nvar HttpRequest = function(params, debug) {\n    /**\n     * Request parameters.\n     *\n     * See Jquery/Zepto documentation for details.\n     *\n     * - http://api.jquery.com/jQuery.ajax/\n     * - http://zeptojs.com/#$.ajax\n     *\n     * @member {Object} params\n     * @memberof HttpRequest\n     * @instance\n     */\n    this.params = params; // TODO: Consider cloning\n\n    /**\n     * Flag indicating that a request must output debug information.\n     *\n     * @member {boolean} debug\n     * @memberof HttpRequest\n     * @instance\n     */\n    this.debug = debug;\n\n    /**\n     * The state object is used to store global enviroment conditions that may\n     * be relevant when processing this request but would not be passed to the\n     * server.\n     *\n     * @member {Object} state\n     * @memberof HttpRequest\n     * @instance\n     */\n    this.state = {};\n};\n\n_.extend(HttpRequest.prototype, {\n\n    /**\n     * Executes AJAX request.\n     *\n     * @param {string} token OAuth token. Must not be supplied for login\n     *   type requests.\n     * @param {string} mdHash current private metadata hash, used to\n     *   validate the client metadata against the server.\n     * @param {string} upHash Current User preferences hash, used to\n     *   validate the client user pref data against the server.\n     * @memberof HttpRequest\n     * @instance\n     */\n    execute: function(token, mdHash, upHash) {\n        if (token) {\n            this.params.headers = this.params.headers || {};\n            this.params.headers['OAuth-Token'] = token;\n        }\n        if (mdHash) {\n            this.params.headers = this.params.headers || {};\n            this.params.headers['X-Metadata-Hash'] = mdHash;\n        }\n        if (upHash) {\n            this.params.headers = this.params.headers || {};\n            this.params.headers['X-Userpref-Hash'] = upHash;\n        }\n\n        //The state object is used to store global enviroment conditions that may be relevent\n        //when processing this request but would not be passed to the server.\n        this.state = _.extend(this.state, _state);\n\n        if (this.debug) {\n            console.log('====== Ajax Request Begin ======');\n            console.log(this.params.type + ' ' + this.params.url);\n            var parsedData = this.params.data ? JSON.parse(this.params.data) : null;\n            if (parsedData && parsedData.password) parsedData.password = '***';\n            console.log('Payload: ', this.params.data ? parsedData : 'N/A');\n            var p = $.extend({}, this.params);\n            delete p.data;\n            console.log('params: ', p);\n            console.log('====== Request End ======');\n        }\n\n        /**\n         * XmlHttpRequest object.\n         *\n         * @member {XMLHttpRequest} xhr\n         * @memberof HttpRequest\n         * @instance\n         */\n        this.xhr = $.ajax(this.params);\n    }\n});\n\n/**\n * Fake jqXHR object because bulk calls do not have their own individual XHR\n * requests.\n *\n * @param {object} result object returned from the BulkAPI\n * @param {string|number} [result.status=200] The response status.\n * @param {Object} [result.status=200] The response headers.\n * @param {Object} [result.contents={}] The response contents.\n * @param {HttpRequest} parentReq bulk API request that this request is a part of.\n */\nvar bulkXHR = function(result, parentReq) {\n    var contents = result.contents || {};\n\n    this.status = result.status || 200;\n    this.statusText = result.status_text || '';\n    this.responseText = _.isObject(contents) ? JSON.stringify(contents) : contents;\n    this.readyState = 4;\n    this._parent = parentReq.xhr;\n    this.headers = result.headers;\n};\n\n_.extend(bulkXHR.prototype, {\n    isResolved: function() {\n        return this._parent.isResolved();\n    },\n    getResponseHeader: function(h) {\n        return this.headers[h];\n    },\n    getAllResponseHeaders: function() {\n        return _.reduce(this.headers, function(str, value, key) {\n            return str.concat(key + ': ' + value + '\\n');\n        }, '');\n    }\n});\n\n/**\n * The SugarCRM JavaScript API allows users to interact with SugarCRM instance\n * via its REST interface.\n *\n * Most Sugar API methods accept `callbacks` object:\n * ```\n * {\n *     success: function(data) {},\n *     error: function(error) {},\n *     complete: function() {},\n * }\n * ```\n *\n * @param {Object} args The configuration parameters for the instance.\n * @param {string} [args.serverUrl='/rest/v10'] Sugar REST URL end-point.\n * @param {string} [args.platform=''] Platform name (\"portal\", \"mobile\", etc.).\n * @param {Object} [args.keyValueStore] Reference to key/value store provider used\n *   to read/save auth token from/to. It must implement three methods:\n *   ```\n *   set: void function(String key, String value)\n *   get: String function(key)\n *   cut: void function(String key)\n *   ```\n *   The authentication tokens are kept in memory if the key/value store is not\n *   specified.\n * @param {number} [args.timeout] Request timeout in seconds.\n * @param {Function} [args.defaultErrorHandler] The default error handler.\n * @param {string} [args.clientID='sugar'] The clientID for oAuth.\n * @param {boolean} [args.disableBulkApi]\n * @param {Function} [args.externalLoginUICallback] The callback to be called if\n *  external login is activated.\n *\n * @class Api\n */\nfunction SugarApi(args) {\n    var _serverUrl,\n        _platform,\n        _keyValueStore,\n        _clientID,\n        _timeout,\n        _refreshingToken,\n        _defaultErrorHandler,\n        _externalLogin,\n        _allowBulk,\n        _externalLoginUICallback = null,\n        _accessToken = null,\n        _refreshToken = null,\n        _downloadToken = null,\n        // request queue\n        // used to support multiple request while in refresh token loop\n        _rqueue = [],\n        // dictionary of currently executed requests (keys are IDs)\n        _requests = {},\n        // request unique ID (counter)\n        _ruid = 0;\n\n    // if no key/value store is provided, the auth token is kept in memory\n    _keyValueStore = args && args.keyValueStore;\n    _serverUrl = (args && args.serverUrl) || '/rest/v10';\n    // there will only be a fallback default error handler if provided here\n    _defaultErrorHandler = (args && args.defaultErrorHandler) || null;\n    _platform = (args && args.platform) || '';\n    _clientID = (args && args.clientID) || 'sugar';\n    _timeout = ((args && args.timeout) || 30) * 1000;\n    _externalLogin = false;\n    _allowBulk = !(args && args.disableBulkApi);\n\n    if (args && args.externalLoginUICallback && _.isFunction(args.externalLoginUICallback)) {\n        _externalLoginUICallback = args.externalLoginUICallback;\n    }\n\n    if (_keyValueStore) {\n        if (!$.isFunction(_keyValueStore.set) ||\n            !$.isFunction(_keyValueStore.get) ||\n            !$.isFunction(_keyValueStore.cut))\n        {\n            throw new Error('Failed to initialize Sugar API: key/value store provider is invalid');\n        }\n\n        var init = function() {\n            _accessToken = _keyValueStore.get('AuthAccessToken');\n            _refreshToken = _keyValueStore.get('AuthRefreshToken');\n            _downloadToken = _keyValueStore.get('DownloadToken');\n        };\n\n        if ($.isFunction(_keyValueStore.initAsync)) {\n            _keyValueStore.initAsync(init);\n        } else {\n            init();\n        }\n\n        if ($.isFunction(_keyValueStore.on)) {\n            _keyValueStore.on('cache:clean', function(callback) {\n                callback(['AuthAccessToken', 'AuthRefreshToken', 'DownloadToken']);\n            });\n        }\n    }\n\n    _refreshingToken = false;\n\n    var _resetAuth = function(data) {\n        // data is the response from the server\n        if (data) {\n            _accessToken = data.access_token;\n            _refreshToken = data.refresh_token;\n            _downloadToken = data.download_token;\n            if (_keyValueStore) {\n                _keyValueStore.set('AuthAccessToken', _accessToken);\n                _keyValueStore.set('AuthRefreshToken', _refreshToken);\n                _keyValueStore.set('DownloadToken', _downloadToken);\n            }\n        } else {\n            _accessToken = null;\n            _refreshToken = null;\n            _downloadToken = null;\n            if (_keyValueStore) {\n                _keyValueStore.cut('AuthAccessToken');\n                _keyValueStore.cut('AuthRefreshToken');\n                _keyValueStore.cut('DownloadToken');\n            }\n        }\n    };\n\n    var _handleErrorAndRefreshToken = function(self, request, callbacks) {\n        return function(xhr, textStatus, errorThrown) {\n            // Don't handle aborted request as error\n            if (xhr.aborted || request.aborted) {\n                return;\n            }\n            var error = new HttpError(request, textStatus, errorThrown);\n            var onError = function() {\n                // Either regular request failed or token refresh failed\n                // Call original error callback\n                if (!_rqueue.length || self.refreshingToken(request.params.url) || !self.isRequestInQueue(request)) {\n                    if (callbacks.error) {\n                        callbacks.error(error);\n                    }\n                    else if ($.isFunction(self.defaultErrorHandler)) {\n                        self.defaultErrorHandler(error);\n                    }\n                } else {\n                    // Token refresh failed\n                    // Call original error callback for all queued requests\n                    for (var i = 0; i < _rqueue.length; ++i) {\n                        if (_rqueue[i]._oerror) _rqueue[i]._oerror(error);\n                    }\n                }\n                // duplicated due to other types of authentication\n                self.setRefreshingToken(false);\n            };\n\n            var r, refreshFailed = true;\n            if (self.needRefreshAuthToken(request.params.url, error.code)) {\n                //If we were unloading the queue when we got another 401, we should stop before we get into a loop\n                if (request._dequeuing) {\n                    if (request._oerror) request._oerror(error);\n                    //The tokens we have are bad, nuke them.\n                    self.resetAuth();\n                    return;\n                }\n                _rqueue.push(request);\n\n                self.setRefreshingToken(true);\n\n                var refreshCallbacks = {\n                    complete: function() {\n\n                        // Call original complete callback for all queued requests\n                        // only if token refresh failed\n                        // In case of requests succeed, complete callback is called by ajax lib\n                        if (refreshFailed) {\n                            r = _rqueue.shift();\n                            while (r) {\n                                if (r._ocomplete) {\n                                    r._ocomplete.call(this, r);\n                                }\n                                r = _rqueue.shift();\n                            }\n                        }\n                    },\n                    success: function() {\n                        self.setRefreshingToken(false);\n                        refreshFailed = false;\n                        _refreshTokenSuccess(function() {\n                            // Repeat original requests\n                            r = _rqueue.shift();\n                            while (r) {\n                                r._dequeuing = true;\n                                r.execute(self.getOAuthToken());\n                                r = _rqueue.shift();\n                            }\n                        });\n                    },\n                    error: onError\n                };\n\n                if (!('crosstab' in window) || !crosstab.supported) {\n                    self.login(null, {refresh: true}, {\n                        complete: refreshCallbacks.complete,\n                        success: refreshCallbacks.success,\n                        error: refreshCallbacks.error\n                    });\n                    return;\n                }\n\n                crosstab(function() {\n                    crosstab.on('auth:refresh:complete', function(event) {\n                        var status = event.data;\n                        switch (status) {\n                            case 'success':\n                                refreshCallbacks.success();\n                                break;\n                            case 'error':\n                                refreshCallbacks.error();\n                                break;\n                            case 'complete':\n                                refreshCallbacks.complete();\n                                crosstab.off('auth:refresh:complete');\n                                break;\n                        }\n                    });\n\n                    crosstab.broadcastMaster('auth:refresh');\n                });\n\n            } else if (self.needQueue(request.params.url)) {\n                // Queue subsequent request to execute it after token refresh completes\n                _rqueue.push(request);\n            } else if (_externalLogin && error.status == 401 && error.payload &&\n                error.payload.url && error.payload.platform == _platform\n            ) {\n                self.handleExternalLogin(request, error, onError);\n            } else {\n                onError();\n            }\n        };\n    };\n\n    return {\n        /**\n         * Client Id for oAuth.\n         *\n         * @type {string}\n         * @memberOf Api\n         * @instance\n         */\n        clientID: _clientID,\n\n        /**\n         * URL of Sugar REST end-point.\n         *\n         * @type {string}\n         * @memberOf Api\n         * @instance\n         */\n        serverUrl: _serverUrl,\n\n        /**\n         * Default fallback HTTP error handler. Used when api.call\n         * is not supplied with an error: function in callbacks parameter.\n         *\n         * @type {Function}\n         * @memberOf Api\n         * @instance\n         */\n        defaultErrorHandler: _defaultErrorHandler,\n\n        /**\n         * Request timeout (in milliseconds).\n         *\n         * @type {number}\n         * @memberOf Api\n         * @instance\n         */\n        timeout: _timeout,\n\n        /**\n         * Flag indicating if API should run in debug mode (console debugging\n         * of API calls).\n         *\n         * @type {boolean}\n         * @memberOf Api\n         * @instance\n         */\n        debug: false,\n\n        /**\n         * Aborts a request by ID.\n         *\n         * @param {string} id Request ID\n         * @memberOf Api\n         * @instance\n         */\n        abortRequest: function(id) {\n            var request = _requests[id];\n\n            if (request) {\n                request.aborted = true;\n                if (request.xhr) {\n                    request.xhr.aborted = true;\n                    request.xhr.abort();\n                }\n            }\n        },\n\n        /**\n         * Gets request by ID.\n         *\n         * @param {string} id Request ID\n         * @memberOf Api\n         * @instance\n         */\n        getRequest: function(id) {\n            return _requests[id];\n        },\n\n        /**\n         * Sets the callback to be triggered after a token refresh occurs.\n         *\n         * @param callback function to be called\n         * @memberOf Api\n         * @instance\n         */\n        setRefreshTokenSuccessCallback: function(callback) {\n            if (_.isFunction(callback))\n                _refreshTokenSuccess = callback;\n        },\n\n        /**\n         * Makes AJAX call via jQuery/Zepto AJAX API.\n         *\n         * @param {string} method CRUD action to make (read, create, update,\n         *   delete) are mapped to corresponding HTTP verb: GET, POST, PUT, DELETE.\n         * @param {string} url resource URL.\n         * @param {FormData|Object} [data] Request body contents. If not given as FormData,\n         *   will be stringified into JSON.\n         * @param {Object} [callbacks] callbacks object.\n         * @param {Object} [options] options for request that map\n         *   directly to the jquery/zepto Ajax options.\n         * @return {HttpRequest} AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        call: function(method, url, data, callbacks, options) {\n            var request,\n                args,\n                type = _methodsToRequest[method],\n                self = this,\n                token = this.getOAuthToken(),\n                triggerBulkRequest = false;\n\n            options = options || {};\n            callbacks = callbacks || {};\n\n            // by default use json headers\n            var params = {\n                type: type,\n                dataType: 'json',\n                headers: {},\n                timeout: options.timeout || this.timeout,\n                contentType: 'application/json'\n            };\n\n            // if we dont have a url from options take arg url\n            if (!options.url) {\n                params.url = url;\n            }\n\n            if (callbacks.success) {\n                params.success = function(data, status) {\n                    request.status = (data && data.status) ? data.status : status;\n                    callbacks.success(data, request);\n                };\n            }\n\n            params.complete = function() {\n\n                _requests[request.uid] = null;\n\n                // Do not call complete callback if we are in token refresh loop\n                // We'll call complete callback once the refresh completes\n                if (!_refreshingToken && callbacks.complete) {\n                    callbacks.complete(request);\n                }\n            };\n\n            //Process the iframe transport request\n            if (options.iframe === true) {\n                if (token) {\n                    data = data || {};\n                    data['OAuth-Token'] = token;\n                    params.data = data;\n                }\n            } else {\n                // set data for create, update, and delete\n                if (data && (method == 'create' || method == 'update' || method == 'delete')) {\n                    if (data instanceof FormData) {\n                        params.data = data;\n                    } else {\n                        params.data = JSON.stringify(data);\n                    }\n                }\n            }\n\n            // Don't process data on a non-GET request.\n            if (params.type !== 'GET') {\n                params.processData = false;\n            }\n\n            // Switching to bulk in case of GET URI size limit (2KB) reached, this allows to avoid server errors\n            if (params.type === 'GET' && !options.bulk && _allowBulk && params.url.length > 2048) {\n                options.bulk = _.uniqueId();\n                triggerBulkRequest = true;\n            }\n\n            // Clients may override any of AJAX options.\n            request = new HttpRequest(_.extend(params, options), this.debug);\n            params.error = _handleErrorAndRefreshToken(self, request, callbacks);\n            // Keep original error and complete callback for token refresh loop\n            request._oerror = callbacks.error;\n            request._ocomplete = callbacks.complete;\n\n            //add request to requests hash\n            request.uid = _ruid++;\n            _requests[request.uid] = request;\n\n            args = [\n                token,\n                options.skipMetadataHash ? null : this.getMetadataHash(),\n                options.skipMetadataHash ? null : this.getUserprefHash()\n            ];\n            // Login request doesn't need auth token\n            if (this.isLoginRequest(url)) {\n                request.execute();\n            } else if (this.isAuthRequest(url)) {\n                request.execute(token);\n            } else if (params.bulk && _allowBulk) {\n                var bulkQueue = _bulkQueues[params.bulk] || [];\n                if (!_bulkQueues[params.bulk]) {\n                    _bulkQueues[params.bulk] = bulkQueue;\n                }\n                bulkQueue.push({\n                    request: request,\n                    args: args\n                });\n\n                if (triggerBulkRequest) {\n                    this.triggerBulkCall(params.bulk);\n\n                    return request;\n                }\n            } else {\n                request.execute.apply(request, args);\n            }\n\n            return request;\n        },\n\n        /**\n         * Begins a BulkAPI request. Previous uses of call() should have\n         * options.bulk set to an ID.\n         *\n         * Calling triggerBulkCall with the same ID will combine all the\n         * previously queued requests into a single bulk call.\n         * @param {number|string} bulkId The id of the bulk request.\n         * @memberOf Api\n         * @instance\n         */\n        triggerBulkCall: function(bulkId) {\n            if (!_allowBulk) {\n                return;\n            }\n\n            bulkId = bulkId || true;\n            var queue = _bulkQueues[bulkId],\n                requests = [],\n                version = _.last(this.serverUrl.split('/'));\n\n            if (!queue) {\n                //TODO log an error here\n                return;\n            }\n            _.each(queue, function(r) {\n                var params = r.request.params,\n                    args = r.args,\n                    token = args[0],\n                    mdHash = args[1],\n                    upHash = args[2];\n\n                if (token) {\n                    params.headers = params.headers || {};\n                    params.headers['OAuth-Token'] = token;\n                }\n                if (mdHash) {\n                    params.headers = params.headers || {};\n                    params.headers['X-Metadata-Hash'] = mdHash;\n                }\n                if (upHash) {\n                    params.headers = params.headers || {};\n                    params.headers['X-Userpref-Hash'] = upHash;\n                }\n                //Url needs to be trimmed down to the version number.\n                if (!_.isEmpty(params.url)) {\n                    params.url = version + params.url.substring(this.serverUrl.length);\n                }\n\n                requests.push(params);\n            }, this);\n            this.call('create', this.buildURL('bulk'), {requests: requests}, {\n                success: function(o, parentReq) {\n                    _.each(queue, function(r, i) {\n                        var request = r.request,\n                            result = o[i],\n                            contents = result.contents || {},\n                            xhr = new bulkXHR(result, parentReq);\n                        request.xhr = xhr;\n\n                        if (request.aborted === true || contents.error) {\n                            request.status = 'error';\n                            if (_.isFunction(request.params.error)) {\n                                request.params.error.call(request.params, request, 'error', xhr.statusText);\n                            }\n                        }\n                        else {\n                            if (_.isFunction(request.params.success)) {\n                                request.params.success.call(request.params, contents, 'success');\n                            }\n                        }\n                        if (_.isFunction(request.params.complete)) {\n                            request.params.complete.call(request.params, request);\n                        }\n                    });\n                }\n            });\n            _bulkQueues[bulkId] = null;\n        },\n\n        /**\n         * Clears the bulk call queue.\n         *\n         * @memberOf Api\n         * @instance\n         */\n        clearBulkQueue: function() {\n            _bulkQueues = {};\n        },\n\n        /**\n         * Builds URL based on module name action and attributes of the format\n         * rooturl/module/id/action.\n         *\n         * The `attributes` hash must contain `id` of the resource being\n         * actioned upon for record CRUD and `relatedId` if the URL is build for\n         * relationship CRUD.\n         *\n         * @param {string} module module name.\n         * @param {string} action CRUD method.\n         * @param {Object} [attributes] object of resource being\n         *   actioned upon, e.g. `{name: \"bob\", id:\"123\"}`.\n         * @param {Object} [params] URL parameters.\n         * @return {string} URL for specified resource.\n         * @memberOf Api\n         * @instance\n         */\n        buildURL: function(module, action, attributes, params) {\n            params = params || {};\n            var parts = [];\n            var url;\n            parts.push(this.serverUrl);\n\n            if (module) {\n                parts.push(module);\n            }\n\n            if ((action != 'create') && attributes && attributes.id) {\n                parts.push(attributes.id);\n            }\n\n            if (attributes && attributes.link && action != 'file') {\n                parts.push('link');\n                if (_.isString(attributes.link)) {\n                    parts.push(attributes.link);\n                }\n            }\n\n            if (action && $.inArray(action, _baseActions) === -1) {\n                parts.push(action);\n            }\n\n            if (attributes) {\n                if (attributes.relatedId) {\n                    parts.push(attributes.relatedId);\n                }\n\n                if (action == 'file' && attributes.field) {\n                    parts.push(attributes.field);\n                    if (attributes.fileId) {\n                        parts.push(attributes.fileId);\n                    }\n                } else if (action === 'collection' && attributes.field) {\n                    parts.push(attributes.field);\n                }\n            }\n\n            url = parts.join('/');\n\n            // URL parameters\n            // remove nullish params\n            _.each(params, function(value, key) {\n                if (value === null || value === undefined) {\n                    delete params[key];\n                }\n            });\n\n            params = $.param(params);\n            if (params.length > 0) {\n                url += '?' + params;\n            }\n\n            return url;\n        },\n\n        /**\n         * Builds a file resource URL.\n         *\n         * The `attributes` hash must contain the following properties:\n         *\n         *     {\n         *         module: module name\n         *         id: record id\n         *         field: Name of the file field in the given module (optional).\n         *     }\n         *\n         * Example 1:\n         *\n         *     var url = app.api.buildFileURL({\n         *        module: 'Contacts',\n         *        id: '123',\n         *        field: 'picture'\n         *     });\n         *\n         *     // Returns:\n         *     'http://localhost:8888/sugarcrm/rest/v10/Contacts/123/file/picture?format=sugar-html-json&platform=base'\n         *\n         * The `field` property is optional. If omitted the method returns a\n         * URL for a list of file resources.\n         *\n         * Example 2:\n         *\n         *     var url = app.api.buildFileURL({\n         *        module: 'Contacts',\n         *        id: '123'\n         *     });\n         *\n         *     // Returns:\n         *     'http://localhost:8888/sugarcrm/rest/v10/Contacts/123/file?platform=base'\n         *\n         * @param {Object} attributes Hash with file information.\n         * @param {Object} [options] URL options hash.\n         * @param {boolean} [options.htmlJsonFormat] Flag indicating if\n         *   `sugar-html-json` format must be used (`true` by default if\n         *   `field` property is specified).\n         * @param {boolean} [options.passDownloadToken] Flag indicating if\n         *   download token must be passed in the URL (`false` by default).\n         * @param {boolean} [options.deleteIfFails] Flag indicating if\n         *   related record should be marked deleted:1 if file operation\n         *   unsuccessful.\n         * @param {boolean} [options.keep] Flag indicating if the temporary\n         *   file should be kept when issuing a `GET` request to the\n         *   `FileTempApi` (it is cleaned up by default).\n         * @return {string} URL for the file resource.\n         * @memberOf Api\n         * @instance\n         */\n        buildFileURL: function(attributes, options) {\n            var params = {};\n            options = options || {};\n            // We only concerned about the format if build URL for an actual file resource\n            if (attributes.field && (options.htmlJsonFormat !== false)) {\n                params.format = 'sugar-html-json';\n            }\n\n            if (options.deleteIfFails === true) {\n                params.delete_if_fails = true;\n            }\n\n            if (options.passDownloadToken) {\n                params.download_token = this.getDownloadToken();\n            }\n\n            if (!_.isUndefined(options.forceDownload)) {\n                params.force_download = (options.forceDownload) ? 1 : 0;\n            }\n\n            if (options.cleanCache === true) {\n                params[(new Date()).getTime()] = 1;\n            }\n\n            if (options.platform !== undefined) {\n                params.platform = options.platform;\n            } else if (_platform) {\n                params.platform = _platform;\n            }\n\n            if (options.keep === true) {\n                params.keep = 1;\n            }\n\n            return this.buildURL(attributes.module, 'file', attributes, params);\n        },\n\n        /**\n         * Returns the current access token.\n         *\n         * @return {string} The current access token.\n         * @memberOf Api\n         * @instance\n         */\n        getOAuthToken: function() {\n            return _keyValueStore ? _keyValueStore.get('AuthAccessToken') || _accessToken : _accessToken;\n        },\n\n        /**\n         * Returns the current refresh token.\n         *\n         * @return {string} The current refresh token.\n         * @memberOf Api\n         * @instance\n         */\n        getRefreshToken: function() {\n            return _keyValueStore ? _keyValueStore.get('AuthRefreshToken') || _refreshToken : _refreshToken;\n        },\n\n        /**\n         * Returns the current download token.\n         *\n         * @return {string} The current download token.\n         * @memberOf Api\n         * @instance\n         */\n        getDownloadToken: function() {\n            return _keyValueStore ? _keyValueStore.get('DownloadToken') || _downloadToken : _downloadToken;\n        },\n\n        /**\n         * Returns the current metadata hash.\n         *\n         * @return {string} The current metadata hash\n         * @memberOf Api\n         * @instance\n         */\n        getMetadataHash: function() {\n            return _keyValueStore ? _keyValueStore.get('meta:hash') : null;\n        },\n\n        /**\n         * Gets the user preference hash for use in checking state of change.\n         *\n         * @return {string} The user preference hash set from a /me response.\n         * @memberOf Api\n         * @instance\n         */\n        getUserprefHash: function() {\n            return _keyValueStore ? _keyValueStore.get('userpref:hash') : null;\n        },\n\n        /**\n         * Fetches metadata.\n         *\n         * @param {Objec} [options] Options to decide what to get from\n         *   the server.\n         * @param {Array} [options.types] Metadata types to fetch.\n         *   E.g.: `['vardefs','detailviewdefs']`\n         * @param {Array} [options.modules] Module names to fetch.\n         *   E.g.: `['accounts','contacts']`\n         * @param {Object} [options.callbacks] callback object.\n         * @param {Object} [options.public=false] Pass `true` to get the\n         *   public metadata.\n         * @param {Object} [options.params] Extra params to send to the\n         *   request.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        getMetadata: function(options) {\n\n            if (_.isString(options)) {\n                console.warn('`Api::getMetadata` has changed signature ' +\n                    'and will drop support for the old signature in a future release. Please update your code.');\n\n                var oldOpt = arguments[4] || {};\n                options = {\n                    types: arguments[1],\n                    modules: arguments[2],\n                    callbacks: arguments[3],\n                    public: oldOpt.getPublic,\n                    params: oldOpt.params,\n                };\n            }\n\n            options = options || {};\n            var params = options.params || {};\n\n            if (options.types) {\n                params.type_filter = options.types.join(',');\n            }\n\n            if (options.modules) {\n                params.module_filter = options.modules.join(',');\n            }\n\n            if (_platform) {\n                params.platform = _platform;\n            }\n\n            var method = 'read';\n\n            if (options.public) {\n                method = 'public';\n            } else {\n                options.callbacks = options.callbacks || {};\n                options.callbacks.success = _.wrap(options.callbacks.success, function (success, data, status) {\n                    if (data) {\n                        this._serverInfo = data.server_info;\n                    }\n\n                    if (success) {\n                        success(data, status);\n                    }\n                });\n            }\n\n            params.module_dependencies = 1;\n\n            var url = this.buildURL('metadata', method, null, params);\n            return this.call(method, url, null, options.callbacks);\n        },\n\n        /**\n         * Executes CRUD on records.\n         *\n         * @param {string} method operation type: create, read, update, or delete.\n         * @param {string} module module name.\n         * @param {Object} data request object. If it contains id, action,\n         *   link, etc., URI will be adjusted accordingly.\n         * If methods parameter is 'create' or 'update', the data object will be put in the request body payload.\n         * @param {Object} [params] URL parameters.\n         * @param {Object} [callbacks] callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        records: function(method, module, data, params, callbacks, options) {\n            var url = this.buildURL(module, method, data, params);\n            return this.call(method, url, data, callbacks, options);\n        },\n\n        /**\n         * Executes CRUD on relationships.\n         *\n         * The data paramerer represents relationship information:\n         * <pre>\n         * {\n         *    id: record ID\n         *    link: relationship link name\n         *    relatedId: ID of the related record\n         *    related: object that contains request payload (related record or relationship fields)\n         * }\n         * </pre>\n         *\n         * @param {string} method operation type: create, read, update, or delete.\n         * @param {string} module module name.\n         * @param {Object} data object with relationship information.\n         * @param {Object} [params] URL parameters.\n         * @param {Object} [callbacks] callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        relationships: function(method, module, data, params, callbacks, options) {\n            var url = this.buildURL(module, null, data, params);\n            return this.call(method, url, data.related, callbacks, options);\n        },\n\n        /**\n         * Fetch the lean count of related records.\n         *\n         * The data paramerer represents relationship information:\n         * <pre>\n         * {\n         *    id: record ID\n         *    link: relationship link name\n         *    relatedId: ID of the related record\n         *    related: object that contains request payload (related record or relationship fields)\n         * }\n         * </pre>\n         *\n         * @param {string} module module name.\n         * @param {Object} data object with relationship information.\n         * @param {Object} [params] URL parameters.\n         * @param {Object} [callbacks] callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        relatedLeanCount: function(module, data, params, callbacks, options) {\n            var url = this.buildURL(module, 'leancount', data, params);\n            return this.call('read', url, data.related, callbacks, options);\n        },\n\n        /**\n         * Fetches a collection field.\n         *\n         * @param {string} module Module name.\n         * @param {Object} data object containing information to build the url.\n         * @param {string} data.field The name of the collection field to fetch.\n         * @param {string} data.id The name of the bean id the collection field\n         *   belongs to.\n         * @param {Object} [params] URL parameters.\n         * @param {Object} [callbacks] callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        collection: function(module, data, params, callbacks, options) {\n            var url = this.buildURL(module, 'collection', data, params);\n            return this.call('read', url, null, callbacks, options);\n        },\n\n        /**\n         * Marks/unmarks a record as favorite.\n         *\n         * @param {string} module Module name.\n         * @param {string} id Record ID.\n         * @param {boolean} favorite Flag indicating if the record must be marked as favorite.\n         * @param {Object} [callbacks] Callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        favorite: function(module, id, favorite, callbacks, options) {\n            var action = favorite ? 'favorite' : 'unfavorite';\n            var url = this.buildURL(module, action, { id: id });\n            return this.call('update', url, null, callbacks, options);\n        },\n\n        /**\n         * Subscribe/unsubscribe a record changes.\n         *\n         * @param {string} module Module name.\n         * @param {string} id Record ID.\n         * @param {boolean} followed Flag indicates if wants to subscribe\n         *   the record changes.\n         * @param {Object} [callbacks] Callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        follow: function(module, id, followed, callbacks, options) {\n            callbacks = callbacks || {};\n            options = options || {};\n            var method = followed ? 'create' : 'delete',\n                action = followed ? 'subscribe' : 'unsubscribe',\n                url = this.buildURL(module, action, { id: id });\n            return this.call(method, url, null, callbacks, options);\n        },\n\n        /**\n         * Loads an enum field's options using the enum API.\n         *\n         * @param {string} module Module name.\n         * @param {string} field Name of enum field.\n         * @param {Object} [callbacks] Callback object\n         * @param {Object} [options] Options object\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        enumOptions: function(module, field, callbacks, options) {\n            var url = this.buildURL(module + '/enum/' + field);\n            return this.call('read', url, null, callbacks, options);\n        },\n\n        /**\n         * Calls API requests in bulk.\n         *\n         * @param {Object} data Object with requests array.\n         * @param {Object} callbacks\n         * @param {Object} [options] Options object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        bulk: function(data, callbacks, options) {\n            var url = this.buildURL('bulk');\n            return this.call('create', url, data, callbacks, options);\n        },\n\n        /**\n         * Given a url, attempts to download a file.\n         *\n         * @param {string} url url to call\n         * @param {Object} [callbacks] Callback object\n         * @param {Object} [options] Options object\n         *  - iframe: jquery element upon which to attach the iframe for download\n         *    if not specified we must fall back to window.location.href\n         * @memberOf Api\n         * @instance\n         */\n        fileDownload: function(url, callbacks, options) {\n            callbacks = callbacks || {};\n            options = options || {};\n            var internalCallbacks = {};\n\n            internalCallbacks.success = function(data) {\n                // start the download with the \"iframe\" hack\n                if (options.iframe) {\n                    options.iframe.prepend('<iframe class=\"hide\" src=\"' + url + '\"></iframe>');\n                } else {\n                    window.location.href = url;\n                }\n                if (_.isFunction(callbacks.success)) {\n                    callbacks.success.apply(arguments);\n                }\n            };\n\n            if (_.isFunction(callbacks.error)) {\n                internalCallbacks.error = callbacks.error;\n            }\n\n            if (_.isFunction(callbacks.complete)) {\n                internalCallbacks.complete = callbacks.complete;\n            }\n\n            // ping to make sure we have our token, then make an iframe and download away\n            return this.call('read', this.buildURL('ping'), {}, internalCallbacks, {processData: false});\n        },\n\n        /**\n         * This function uses native XMLHttpRequest to download File/Blob data from an endpoint.\n         * jQuery ajax struggles with Blob data, so this adds a Sugar-friendly way to do it.\n         *\n         * @param {String} url The URL to use for the XMLHttpRequest\n         * @param {Function} [callback] An optional callback function to call at the end of onload\n         */\n        xhrDownloadFile: function(url, callback) {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url, true);\n            xhr.responseType = 'arraybuffer';\n\n            xhr.onload = function() {\n                var fileName = '';\n                var disposition;\n                var fileNameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\n                var matches;\n                var contentType;\n                var blob;\n                var URL;\n                var downloadUrl;\n                var aEl;\n\n                if (this.status === 200) {\n                    disposition = xhr.getResponseHeader('Content-Disposition');\n                    contentType = xhr.getResponseHeader('Content-Type');\n\n                    if (disposition && disposition.indexOf('attachment') !== -1) {\n                        matches = fileNameRegex.exec(disposition);\n\n                        if (matches != null && matches[1]) {\n                            fileName = matches[1].replace(/['\"]/g, '');\n                        }\n                    }\n\n                    if (typeof File === 'function') {\n                        blob = new File([this.response], fileName, {\n                            type: contentType\n                        });\n                    } else {\n                        blob = new Blob([this.response], {\n                            type: contentType\n                        });\n                    }\n\n                    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n                        // this lets us work around IE's HTML7007 blob issue\n                        window.navigator.msSaveBlob(blob, fileName);\n                    } else {\n                        URL = window.URL || window.webkitURL;\n                        downloadUrl = URL.createObjectURL(blob);\n\n                        if (fileName) {\n                            // set up an anchor Element to take advantage of the download attribute\n                            aEl = document.createElement('a');\n                            aEl.download = fileName;\n                            aEl.target = '_blank';\n                            aEl.href = downloadUrl;\n                            // appends the anchor element to the dom\n                            document.body.appendChild(aEl);\n                            // clicks the actual anchor link to begin download process\n                            aEl.click();\n                        } else {\n                            window.location = downloadUrl;\n                        }\n\n                        // perform cleanup of removing the anchor element from the DOM\n                        // as well as revoking the ObjectURL to prevent minor memory leak\n                        setTimeout(function () {\n                            URL.revokeObjectURL(downloadUrl);\n                        }, 100);\n                    }\n\n                    if (_.isFunction(callback)) {\n                        callback(fileName);\n                    }\n                }\n            };\n\n            xhr.setRequestHeader('OAuth-Token', this.getOAuthToken());\n            xhr.setRequestHeader('Content-type', 'application/json');\n            xhr.send();\n        },\n\n        /**\n         * Executes CRUD on a file resource.\n         *\n         * @param {string} method operation type: create, read, update, or delete.\n         * @param {Object} data object with file information.\n         * <pre>\n         * {\n         *   module: module name\n         *   id: model id\n         *   field: Name of the file-type field.\n         * }\n         * </pre>\n         * The `field` property is optional. If not specified, the API fetches the file list.\n         * @param {Object} [$files] jQuery/Zepto DOM elements that carry the files to upload.\n         * @param {Object} [callbacks] callback object.\n         * @param {Object} [options] Request options hash.\n         * See {@link Api#buildFileURL} function for other options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        file: function(method, data, $files, callbacks, options) {\n            let ajaxParams = {\n                processData: false,\n                contentType: false,\n            };\n\n            let fd = new FormData();\n\n            // first we check if there was anything sent at all\n            if (data.field && $files) {\n                let attachedFile = $files[0];\n                // then we check if we really have files to work with\n                if (!_.isUndefined(attachedFile) && attachedFile.files && attachedFile.files.length) {\n                    fd.append(data.field, attachedFile.files[0]);\n                }\n            }\n\n            options = options || {};\n            options.htmlJsonFormat = false;\n\n            if (options.deleteIfFails !== false) {\n                options.deleteIfFails = true;\n            }\n\n            callbacks.success = _.wrap(callbacks.success, function(success, data) {\n                if (data.error && _.isFunction(callbacks.error)) {\n                    callbacks.error(data);\n                } else if (_.isFunction(success)) {\n                    success(data);\n                }\n            });\n\n            return this.call(method, this.buildFileURL(data, options), fd, callbacks, ajaxParams);\n        },\n\n        /**\n         * Fetches the total amount of records for a given module.\n         *\n         * Example 1:\n         *\n         *     app.api.count('Contacts', null, {\n         *         success: function(data) {\n         *             console.log('Total number of Contacts:' +\n         *                 data.record_count);\n         *         }\n         *     });\n         *\n         * Example 2:\n         *\n         *     app.api.count('Accounts', null,\n         *         {\n         *             success: function(data) {\n         *                 console.log('Total number of \"B\" Accounts:' +\n         *                     data.record_count);\n         *             }\n         *         },\n         *         {\n         *             filter: [{'name': {'$starts': 'B'}}]\n         *         }\n         *     );\n         *\n         * Example 3:\n         *\n         *     app.api.count('Accounts',\n         *         {\n         *             id: 'abcd',\n         *             link: 'cases'\n         *         },\n         *         {\n         *             success: function(data) {\n         *                 console.log('Total number of \"B\" cases related' +\n         *                     'to \"abcd\" account:' + data.record_count);\n         *             }\n         *         },\n         *         {\n         *             filter: [{'name': {'$starts': 'B'}}]\n         *         }\n         *     );\n         *\n         * @param {string} module Module to fetch the count for.\n         * @param {Object} [data] Data object containing relationship\n         *   information.\n         * @param {string} [data.link] The link module name.\n         * @param {string} [data.id] The id of the model.\n         * @param {function} [callbacks] Callback functions.\n         * @param {Object} [options] URL options hash.\n         * @param {Object} [options.filter] If supplied, the count of\n         *   filtered records will be returned, instead of the total number\n         *   of records.\n         * @return {HttpRequest} Result of {@link Api#call}.\n         * @memberOf Api\n         * @instance\n         */\n        count: function(module, data, callbacks, options) {\n            options = options || {};\n            var url = this.buildURL(module, 'count', data, options);\n\n            return this.call('read', url, null, callbacks);\n        },\n\n        /**\n         * Triggers a file download of the exported records.\n         *\n         * @param {Object} params Download parameters.\n         * @param {string} params.module Module name.\n         * @param {Array} params.uid Array of record ids to request export.\n         * @param {jQuery} $el JQuery selector to element.\n         * @param {Object} [callbacks] Various callbacks.\n         * @param {Function} [callbacks.success] Called on success.\n         * @param {Function} [callbacks.error] Called on failure.\n         * @param {Function} [callbacks.complete] Called when finished.\n         * @param {Object} [options] Request options hash.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        exportRecords: function(params, $el, callbacks, options) {\n            var self = this;\n            var recordListUrl = this.buildURL(params.module, 'record_list');\n\n            options = options || {};\n\n            return this.call(\n                'create',\n                recordListUrl,\n                {'records': params.uid},\n                {\n                    success: function(response) {\n                        params = _.omit(params, ['uid', 'module']);\n                        if (options.platform !== undefined) {\n                            params.platform = options.platform;\n                        } else if (_platform) {\n                            params.platform = _platform;\n                        }\n\n                        self.fileDownload(\n                            self.buildURL(response.module_name, 'export', {relatedId: response.id}, params),\n                            callbacks,\n                            { iframe: $el }\n                        );\n                    }\n                }\n            );\n        },\n\n        /**\n         * Searches for specified query.\n         *\n         * @param {Object} params Properties.\n         * @param {string} params.q Query.\n         * @param {string} [params.module_list] Comma-separated module list.\n         * @param {string} [params.fields] Comma-separated list of fields.\n         * @param {number} [params.max_num] Max number of records to return.\n         * @param {number} [params.offset] Initial offset into the results.\n         * @param {Object} callbacks Hash with success and error callbacks.\n         * @param {Function} callbacks.success Function called on success.\n         *   Takes one argument.\n         * @param {Function} callbacks.error Function called on failure.\n         *   Takes one argument.\n         * @param {Object} [options] Request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        search: function(params, callbacks, options) {\n            options = options || {};\n            //FIXME: This is a temporary change. SC-4253 will set it back to\n            //'search' once BR-2367 will be merged.\n            var data = null;\n            if (options.data) {\n                data = options.data;\n                delete options.data;\n            }\n            var method = 'read';\n            if (options.fetchWithPost) {\n                method = 'create';\n            }\n            var endpoint = options.useNewApi ? 'globalsearch' : 'search';\n            var url = this.buildURL(null, endpoint, null, params);\n\n            return this.call(method, url, data, callbacks, options);\n        },\n\n        /**\n         * Performs login.\n         *\n         * Credentials:\n         * <pre>\n         *     username: user's login name or email,\n         *     password: user's password in clear text\n         * </pre>\n         *\n         * @param {Object} credentials user credentials.\n         * @param {Object} [data] extra data to be passed in login request\n         *   such as client user agent, etc.\n         * @param {Object} [callbacks] callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        login: function(credentials, data, callbacks) {\n            var payload, success, error, method, url, self = this;\n\n            credentials = credentials || {};\n            callbacks = callbacks || {};\n\n            success = function(data) {\n                _resetAuth(data);\n                if (_externalLogin) {\n                    self.setRefreshingToken(false);\n                    _refreshTokenSuccess(\n                        function() {\n                            // Repeat original requests\n                            var r = _rqueue.shift();\n                            while (r) {\n                                r._dequeuing = true;\n                                r.execute(self.getOAuthToken());\n                                r = _rqueue.shift();\n                            }\n                        }\n                    );\n                }\n                if (callbacks.success) callbacks.success(data);\n            };\n\n            error = function(error) {\n                _resetAuth();\n                if (callbacks.error) callbacks.error(error);\n            };\n\n            if (data && data.refresh) {\n                payload = _.extend({\n                    grant_type: 'refresh_token',\n                    client_id: this.clientID,\n                    client_secret: '',\n                    refresh_token: this.getRefreshToken(),\n                    platform: _platform ? _platform : 'base'\n                }, data);\n            } else {\n                payload = _.extend({\n                    grant_type: 'password',\n                    username: credentials.username,\n                    password: credentials.password,\n                    client_id: this.clientID,\n                    platform: _platform ? _platform : 'base',\n                    client_secret: ''\n                }, data);\n                payload.client_info = data;\n            }\n\n            method = 'create';\n            url = this.buildURL('oauth2', 'token', payload, {\n                platform: _platform\n            });\n            return this.call(method, url, payload, {\n                success: success,\n                error: error,\n                complete: callbacks.complete\n            });\n        },\n\n        /**\n         * Executes CRUD on user profile.\n         *\n         * @param {string} method Operation type: read or update (reserved for\n         *   future use).\n         * @param {Object} [data] user Profile object.\n         * @param {Object} [params] URL parameters.\n         * @param {Object} [callbacks] Callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        me: function(method, data, params, callbacks) {\n            var url = this.buildURL('me', method, data, params);\n            return this.call(method, url, data, callbacks);\n        },\n\n        /**\n         * Makes a call to the CSS Api.\n         *\n         * @param {string} Platform\n         * @param {Object} ThemeName\n         * @param {Object} [callbacks] Callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        css: function(platform, themeName, callbacks) {\n            var params = {\n                platform: platform,\n                themeName: themeName\n            };\n            var url = this.buildURL('css', 'read', {}, params);\n            return this.call('read', url, {}, callbacks);\n        },\n\n        /**\n         * Performs logout.\n         *\n         * @param {Object} [callbacks] Callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        logout: function (callbacks, options) {\n\n            callbacks = callbacks || {};\n\n            var payload = {\n                token: this.getOAuthToken(),\n                refresh_token: this.getRefreshToken(),\n            };\n\n            // Stock sidecar sends refresh token on logout\n            // 6.7.x doesn't support it. See [NOMAD-2891]/[SI 72054]\n            // TODO remove this once we drop support on 6.x on Nomad\n            if (this._serverInfo && this._serverInfo.version.charAt(0) === '6') {\n                delete payload.refresh_token;\n            }\n\n            var url = this.buildURL('oauth2', 'logout', payload);\n\n            var originalComplete = callbacks.complete;\n            callbacks.complete = function () {\n                _resetAuth();\n                if (originalComplete) originalComplete();\n            };\n\n            return this.call('create', url, payload, callbacks, options);\n        },\n\n        /**\n         * Pings the server.\n         *\n         * The request doesn't send metadata hash by default.\n         * Pass `false` for \"skipMetadataHash\" option to override this behavior.\n         * @param {string} [action] Optional ping operation.\n         *   Currently, Sugar REST API supports \"whattimeisit\" only.\n         * @param {Object} [callbacks] callback object.\n         * @param {Object} [options] request options.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        ping: function(action, callbacks, options) {\n            return this.call(\n                'read',\n                this.buildURL('ping', action, null, {\n                    platform: _platform\n                }),\n                null,\n                callbacks,\n                _.extend({\n                    skipMetadataHash: true\n                }, options || {})\n            );\n        },\n\n        /**\n         * Performs signup.\n         *\n         * TODO: The signup action needs another endpoint to allow a guest to signup\n         *\n         * @param {Object} contactData user profile.\n         * @param {Object} [data] extra data to be passed in login request\n         *   such as client user agent, etc.\n         * @param {Object} [callbacks] callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        signup: function(contactData, data, callbacks) {\n            var payload = contactData;\n            payload.client_info = data;\n\n            var method = 'create';\n            var url = this.buildURL('Contacts', 'register', payload, {\n                platform: _platform\n            });\n            return this.call(method, url, payload, callbacks);\n        },\n\n        /**\n         * Is request in request queue.\n         *\n         * @param {HttpRequest} request\n         * @returns {boolean}\n         */\n        isRequestInQueue: function(request) {\n            return _rqueue.indexOf(request) > -1;\n        },\n\n        /**\n         * Verifies password.\n         *\n         * @param {Object} password The password to verify\n         * @param {Object} [callbacks] Callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        verifyPassword: function(password, callbacks) {\n            var payload = {\n                password_to_verify: password\n            };\n            var method = 'create'; //POST so we don't require query params\n            var url = this.buildURL('me/password', method);\n            return this.call(method, url, payload, callbacks);\n        },\n\n        /**\n         * Updates password.\n         *\n         * @param {Object} password The new password\n         * @param {Object} password The new password\n         * @param {Object} [callbacks] Callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        updatePassword: function(oldPassword, newPasword, callbacks) {\n            var payload = {\n                new_password: newPasword,\n                old_password: oldPassword\n            };\n            var method = 'update';\n            var url = this.buildURL('me/password', method);\n            return this.call(method, url, payload, callbacks);\n        },\n\n        /**\n         * Fetches server information.\n         *\n         * @param {Object} [callbacks] callback object.\n         * @return {HttpRequest} The AJAX request.\n         * @memberOf Api\n         * @instance\n         */\n        info: function(callbacks) {\n            var url = this.buildURL('ServerInfo');\n            return this.call('read', url, null, callbacks);\n        },\n\n        /**\n         * Checks if API instance is currently authenticated.\n         *\n         * @return {boolean} `true` if authenticated, `false` otherwise.\n         * @memberOf Api\n         * @instance\n         */\n        isAuthenticated: function() {\n            return typeof(this.getOAuthToken()) === 'string' && this.getOAuthToken().length > 0;\n        },\n\n        /**\n         * Clears authentication tokens.\n         *\n         * @memberOf Api\n         * @instance\n         */\n        resetAuth: function() {\n            _resetAuth();\n        },\n\n        /**\n         * Checks if authentication token can and needs to be refreshed.\n         *\n         * @param {string} url URL of the failed request.\n         * @param {string} errorCode Failure code.\n         * @return {boolean} `true` if the OAuth2 access token can be refreshed, `false` otherwise.\n         * @instance\n         * @memberOf Api\n         * @private\n         */\n        needRefreshAuthToken: function(url, errorCode) {\n            return (!_refreshingToken) &&\n                (typeof(this.getRefreshToken()) === 'string' && this.getRefreshToken().length > 0) &&\n                (!this.isAuthRequest(url)) &&    // must not be auth request\n                (errorCode === 'invalid_grant');    // means access token got expired or invalid\n        },\n\n        /**\n         * Checks if we need to queue a request while token refresh is in\n         * progress.\n         *\n         * @param {string} url\n         * @return {boolean} `true` if we need to queue the request\n         * @private\n         * @memberOf Api\n         * @instance\n         */\n        needQueue: function(url) {\n            return _refreshingToken && !this.isAuthRequest(url);    // must not be auth request\n        },\n\n        /**\n         * Checks if the request is authentication request.\n         *\n         * It could be either login (including token refresh) our logout request.\n         * @param {string} url\n         * @return {boolean} `true` if this is an authentication request,\n         *   `false` otherwise.\n         * @memberOf Api\n         * @instance\n         */\n        isAuthRequest: function(url) {\n            return new RegExp('\\/oauth2\\/').test(url);\n        },\n\n        /**\n         * Checks if request is a login request.\n         *\n         * @param {string} url\n         * @return {boolean} `true` if this is a login request, `false`\n         *   otherwise.\n         * @memberOf Api\n         * @instance\n         */\n        isLoginRequest: function(url) {\n            return new RegExp('\\/oauth2\\/token').test(url);\n        },\n\n        /**\n         * Checks if the request is the refresh token request\n         * @param {string} url url of the request to check\n         * @return {boolean} `true` if the request is the refresh token request,\n         *   `false` otherwise\n         * @memberOf Api\n         * @private\n         */\n        refreshingToken: function(url) {\n            return _refreshingToken && this.isAuthRequest(url);    // must be auth request\n        },\n\n        /**\n         * Sets a flag indicating that this API instance is in the process\n         * of authentication token refresh.\n         *\n         * @param {boolean} flag Flag indicating if token refresh is in\n         * progress (`true`).\n         * @instance\n         * @memberOf Api\n         * @private\n         */\n        setRefreshingToken: function(flag) {\n            _refreshingToken = flag;\n        },\n\n        /**\n         * Handles login with an external provider.\n         *\n         * @param {HttpRequest} request The request to trigger.\n         * @param {Object} error The error object with at least the\n         *   `payload` property.\n         * @param {Function} onError The function to call in case of Error\n         *   during the login request.\n         * @memberOf Api\n         * @instance\n         */\n        handleExternalLogin: function(request, error, onError) {\n            var self = this;\n\n            if (!self.isLoginRequest(request.params.url)) {\n                _rqueue.push(request);\n            }\n            // don't try to reauth again from here\n            self.setRefreshingToken(true);\n\n            $(window).on('message', function(event) {\n                if (!event.originalEvent.origin || event.originalEvent.origin !== window.location.origin) {\n                    // this is not our message, ignore it\n                    return;\n                }\n\n                var authData = $.parseJSON(event.originalEvent.data);\n                if (!authData.external_login) {\n                    // this is not our message, ignore it\n                    return;\n                }\n\n                $(window).on('message', null);\n                var loginFailed = !authData || !authData.access_token;\n\n                if (loginFailed) {\n                    onError();\n                }\n                self.setRefreshingToken(false);\n                _resetAuth(authData);\n                if (loginFailed) {\n                    // No success actions needed on failure. Proceed causes an infinite loop.\n                    return;\n                }\n                _refreshTokenSuccess(\n                    function() {\n                        // Repeat original requests\n                        var r = _rqueue.shift();\n                        while (r) {\n                            r.execute(self.getOAuthToken());\n                            r = _rqueue.shift();\n                        }\n                    }\n                );\n            });\n            if (_.isFunction(_externalLoginUICallback)) {\n                _externalLoginUICallback(error.payload.url, '_blank',\n                    'width=600,height=400,centerscreen=1,resizable=1');\n            }\n        },\n\n        /**\n         * Returns `true` when using an external login provider.\n         *\n         * @return {boolean} `true` when we are using an external\n         *   login provider, `false` otherwise.\n         * @memberOf Api\n         * @instance\n         */\n        isExternalLogin: function() {\n            return _externalLogin;\n        },\n\n        /**\n         * Sets a flag indicating that external login prodecure is used.\n         *\n         * This means that 401 errors would contain external URL that we should use for authentication.\n         * @param {Boolean} flag Flag indicating if external login is in effect\n         * @memberOf Api\n         * @instance\n         */\n        setExternalLogin: function(flag) {\n            _externalLogin = flag;\n        },\n\n        /**\n         * Sets a function as external login UI callback.\n         *\n         * @param {Function} callback\n         * @memberOf Api\n         * @instance\n         */\n        setExternalLoginUICallback: function(callback) {\n            if (_.isFunction(callback)) {\n                _externalLoginUICallback = callback;\n            }\n        },\n\n        /**\n         * Retrieve a property from the current state.\n         *\n         * @param {string} key\n         * @return {Mixed}\n         * @memberOf Api\n         * @instance\n         */\n        getStateProperty: function(key) {\n            return _state[key];\n        },\n\n        /**\n         * Set a property of the current state. The current state will be attached to all\n         * api request objects when they are sent. Modifications to the state after the request is sent\n         * but before the request completes will not affect that requests state.\n         *\n         * States should be used to track conditions or parameters that should be applied to all requests made\n         * regardless of their source.\n         *\n         * @param {string} key\n         * @param {*} value\n         * @memberOf Api\n         * @instance\n         */\n        setStateProperty: function(key, value) {\n            _state[key] = value;\n        },\n\n        /**\n         * Removes the given key from the current state.\n         *\n         * @param {string} key\n         * @memberOf Api\n         * @instance\n         */\n        clearStateProperty: function(key) {\n            delete _state[key];\n        },\n\n        /**\n         * Clears the current API request state object.\n         *\n         * @memberOf Api\n         * @instance\n         */\n        resetState: function() {\n            _state = {};\n        }\n    };\n}\n\n/**\n * Ventana module allows you to get an instance of the {@link Api} class.\n *\n * @module @sugarcrm/ventana\n */\nmodule.exports = {\n    /**\n     * Gets an instance of a {@link Api Sugar API class}.\n     *\n     * @param {Object} args The required arguments to instanciate the Sugar API class.\n     * @return {Api} An instance of Sugar API class.\n     */\n    getInstance: function(args) {\n        return _instance || this.createInstance(args);\n    },\n\n    /**\n     * Creates a new instance of a {@link Api Sugar API class}.\n     *\n     * @param {Object} args The required arguments to instanciate the Sugar API class.\n     * @return {Api} A new instance of Sugar API class.\n     */\n    createInstance: function(args) {\n        _instance = new SugarApi(args);\n\n        if (!('crosstab' in window) || !crosstab.supported) {\n            return _instance;\n        }\n\n        // this event should only be triggered on master tab and if\n        // crosstab library is loaded\n        crosstab(function() {\n            crosstab.on('auth:refresh', _.bind(function() {\n\n                // prevents concurrent events from multiple tabs asking for a\n                // refresh token\n                if (this._runningRefreshToken) {\n                    return;\n                }\n                this._runningRefreshToken = true;\n\n                var self = this;\n\n                this.login(null, { refresh: true }, {\n                    complete: function() {\n                        crosstab.broadcast('auth:refresh:complete', 'complete');\n                    },\n                    success: function() {\n                        delete self._runningRefreshToken;\n                        crosstab.broadcast('auth:refresh:complete', 'success');\n                    },\n                    error: function() {\n                        delete self._runningRefreshToken;\n                        crosstab.broadcast('auth:refresh:complete', 'error');\n                    }\n                });\n            }, _instance));\n        });\n\n        return _instance;\n    },\n\n    /**\n     * The HttpError class.\n     *\n     * @type {HttpError}\n     */\n    HttpError: HttpError,\n\n    /**\n     * The HttpRequest class.\n     *\n     * @type {HttpRequest}\n     */\n    HttpRequest: HttpRequest\n};\n","// This file is just added for convenience so this repository can be\n// directly checked out into a project's deps folder\nmodule.exports = require('./lib/async');\n","/*global setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root = this,\n        previous_async = root.async;\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    else {\n        root.async = async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    //// cross-browser compatiblity functions ////\n\n    var _forEach = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _forEach(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _forEach(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        async.nextTick = function (fn) {\n            setTimeout(fn, 0);\n        };\n    }\n    else {\n        async.nextTick = process.nextTick;\n    }\n\n    async.forEach = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _forEach(arr, function (x) {\n            iterator(x, function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed === arr.length) {\n                        callback(null);\n                    }\n                }\n            });\n        });\n    };\n\n    async.forEachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed === arr.length) {\n                        callback(null);\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    };\n\n    async.forEachLimit = function (arr, limit, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length || limit <= 0) {\n            return callback();\n        }\n        var completed = 0;\n        var started = 0;\n        var running = 0;\n\n        (function replenish () {\n            if (completed === arr.length) {\n                return callback();\n            }\n\n            while (running < limit && started < arr.length) {\n                started += 1;\n                running += 1;\n                iterator(arr[started - 1], function (err) {\n                    if (err) {\n                        callback(err);\n                        callback = function () {};\n                    }\n                    else {\n                        completed += 1;\n                        running -= 1;\n                        if (completed === arr.length) {\n                            callback();\n                        }\n                        else {\n                            replenish();\n                        }\n                    }\n                });\n            }\n        })();\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.forEach].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.forEachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (err, v) {\n                results[x.index] = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, results);\n        });\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.forEachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.forEach(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.forEach(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        if (!keys.length) {\n            return callback(null);\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            _forEach(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (_keys(results).length === keys.length) {\n                callback(null, results);\n                callback = function () {};\n            }\n        });\n\n        _forEach(keys, function (k) {\n            var task = (tasks[k] instanceof Function) ? [tasks[k]]: tasks[k];\n            var taskCallback = function (err) {\n                if (err) {\n                    callback(err);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    taskComplete();\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.nextTick(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    async.parallel = function (tasks, callback) {\n        callback = callback || function () {};\n        if (tasks.constructor === Array) {\n            async.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.forEach(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (tasks.constructor === Array) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.forEachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.whilst(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                async.until(test, iterator, callback);\n            });\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.queue = function (worker, concurrency) {\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            push: function (data, callback) {\n                if(data.constructor !== Array) {\n                    data = [data];\n                }\n                _forEach(data, function(task) {\n                    q.tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    if (q.saturated && q.tasks.length == concurrency) {\n                        q.saturated();\n                    }\n                    async.nextTick(q.process);\n                });\n            },\n            process: function () {\n                if (workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if(q.empty && q.tasks.length == 0) q.empty();\n                    workers += 1;\n                    worker(task.data, function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if(q.drain && q.tasks.length + workers == 0) q.drain();\n                        q.process();\n                    });\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            }\n        };\n        return q;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _forEach(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                callback.apply(null, memo[key]);\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n}());\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst DateUtils = require('../../src/utils/date');\n\n/**\n * LiveRelativeDate plugin is a jQuery/Zepto plugin for sidecar that converts a\n * date into a relative time with a timer to keep it relative to current time.\n *\n * To use it is simple, just run:\n *\n * ```\n * $('[data-relative-to]').liverelativedate();\n * ```\n *\n * To define the attribute where the ISO-8601 date can be found (defaults to\n * `datetime` attribute of used by `<time>` tag):\n *\n * ```\n * $('[data-my-iso-8601]').liverelativedate({\n *     'attr': 'data-my-iso-8601'\n * });\n * ```\n *\n * To get the current update interval configured:\n *\n * ```\n * $.liverelativedate('interval');\n * ```\n *\n * To change the current update interval, do:\n *\n * ```\n * $.liverelativedate('interval', 10e3);\n * ```\n *\n * This plugin has a hard dependency with {@link Utils.Date} functions\n * available in Sidecar library. If you wish to override that behavior,\n * provide the override on those utility functions.\n *\n */\n(function(plugin) {\n    plugin(window.jQuery || window.Zepto, DateUtils);\n}(function($, date) {\n\n    var updateInterval = 6e4, // every minute\n        $liveDates = $([]),\n        timeout;\n\n    /**\n     * This is the running cycle. It will automatically stop if we don't have\n     * dates to listen to.\n     */\n    var run = function() {\n        if (!$liveDates.length) {\n            return;\n        }\n        timeout = setTimeout(run, updateInterval);\n        liveRelativeDateGlobal.update();\n    };\n\n    /**\n     * List of methods available from the plugin directly. These are the global\n     * methods.\n     */\n    var liveRelativeDateGlobal = {\n\n        /**\n         * Updates provided Elements or all stored elements if none provided.\n         *\n         * On each update of an element, we check if the new date is different\n         * from the old (to minimize the DOM changes) and trigger an event\n         * `change.liveRelativeDate` if it is, to check if any subscribed\n         * listeners want to stop the DOM update.\n         *\n         * This method also keeps the `$liveDates` array clean from lost\n         * elements that weren't properly destroyed.\n         *\n         * @param {jQuery} [$el] The jQuery elements to update. If empty, will\n         *   update all stored elements.\n         */\n        update: function($el) {\n            $el = $el || $liveDates;\n\n            $el.each(function(i, el) {\n                var $this = $(el),\n                    options = $this.data('liveRelativeDate'),\n                    value;\n\n                if (!options) {\n                    // auto clean up in case some one forgot to destroy it.\n                    $liveDates = $liveDates.not(el);\n                    return;\n                }\n\n                value = options.date ? $this.data(options.date) : $this.attr('datetime');\n\n                var from = $this.html(),\n                    // TODO we need to support dateOnly which would show \"today\" if there is no time available\n                    to = date(value).fromNow();\n\n                if (from === to) {\n                    return;\n                }\n\n                var e = $.Event('change.liveRelativeDate');\n                $this.trigger(e, [from, to]);\n\n                if (!e.isDefaultPrevented()) {\n                    $this.html(to);\n                }\n            });\n        },\n\n        /**\n         * Pauses the relative date time update.\n         */\n        pause: function() {\n            clearTimeout(timeout);\n            timeout = null;\n        },\n\n        /**\n         * Resumes the live relative date auto update if it isn't already\n         * running.\n         */\n        resume: function() {\n            if (!timeout) {\n                run();\n            }\n        },\n\n        /**\n         * Sets the interval if the param is provided, returns the current\n         * configured interval if no param is given.\n         *\n         * @param {number} [interval] The interval to set. Pass `undefined` to\n         *   get the current value.\n         *\n         * @return {number|undefined} The current interval or `undefined` if\n         *   setting the value.\n         */\n        interval: function(interval) {\n            if (interval === undefined) {\n                return updateInterval;\n            }\n            updateInterval = interval;\n        }\n    };\n\n    /**\n     * List of methods that are available based on the provided jQuery\n     * elements.\n     */\n    var liveRelativeDateLocal = {\n\n        /**\n         * Adds a set of Elements to the current live relative dates list.\n         *\n         * Accepts options that will be stored in the element itself to be used\n         * during the update of its content.\n         * This might **not** trigger an update to the added elements\n         * automatically, but will make sure the timer is running for the new\n         * elements.\n         *\n         * @param {jQuery} $el The set of elements to add to the updater.\n         * @param {Object} options The list of options to use in the\n         *   {@link #update} method.\n         * @return {jQuery} The elements being added.\n         */\n        add: function($el, options) {\n\n            if (!$el || $el.length === 0) {\n                return $el;\n            }\n            options = options || {};\n\n            $el.data('liveRelativeDate', JSON.stringify(options));\n            $liveDates = $liveDates.add($el);\n\n            liveRelativeDateGlobal.resume();\n\n            return $el;\n        },\n\n        /**\n         * Clears a set of Elements from the list of live dates to update.\n         *\n         * Clears the data `live-relative-date` from the element.\n         * Doesn't restore the original value of the element when this plugin\n         * was applied.\n         *\n         * @param {jQuery} $el The jQuery elements to remove from the listener.\n         * @return {jQuery} The elements removed from the list of updates.\n         */\n        destroy: function($el) {\n\n            $liveDates = $liveDates.not($el);\n            $el.removeAttr('data-live-relative-date');\n            return $el;\n        },\n\n        /**\n         * Returns `true` if the passed Elements are being tracked/updated by\n         * this plugin.\n         *\n         * @param {jQuery} $els The elements to check.\n         * @return {Boolean} Returns `true` if all elements are being tracked\n         *   by the plugin, `false` otherwise.\n         */\n        isLiveRelativeDate: function($els) {\n\n            var tracked = true;\n            $.each($els, function(el) {\n                if ($(el).data('liveRelativeDate') === undefined) {\n                    tracked = false;\n                    return true;\n                }\n            });\n            return tracked;\n        }\n    };\n\n    $.liverelativedate = liveRelativeDateGlobal;\n\n    $.fn.liverelativedate = function(method, options) {\n\n        if (!liveRelativeDateLocal[method]) {\n            options = method;\n            method = 'add';\n        }\n\n        return liveRelativeDateLocal[method](this, options);\n    };\n}));\n","/*\n * @deprecated\n */\n/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n(function(app) {\n    var optOut;\n\n    app.analytics = app.analytics || {};\n    app.analytics.connectors = app.analytics.connectors || {};\n\n    // Use with newer Universal GA clients\n    app.analytics.connectors.GoogleAnalytics  = {\n\n        /* initialize()\n         *\n         * - called on app:init, load the analytics api.\n         *\n         * @member SUGAR.analytics.connectors.GoogleAnalytics\n         */\n        initialize: function() {\n            SUGAR.App.logger.warn(\"The method App.analytics.connectors.GoogleAnalytics.initialize() is deprecated and will be removed in a future Sugar release.\");\n            // this code is taken directly from Google's analytics.js API\n            // https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced\n            /* jshint ignore:start */\n            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n            /* jshint ignore:end */\n        },\n\n        /* start(id, options)\n         *\n         * - called on app:start, prepare or open the connection to the analytics system.\n         *\n         * @param {string} id Tracking id for the analytics system.\n         * @param {Object} options SUGAR.App.config.analytics configuration.\n         * @member SUGAR.analytics.connectors.GoogleAnalytics\n         */\n        start: function (id, options) {\n            SUGAR.App.logger.warn(\"The method App.analytics.connectors.GoogleAnalytics.start() is deprecated and will be removed in a future Sugar release.\");\n            options.gaOptions = options.gaOptions || {};\n            _.defaults(options.gaOptions, {\n                cookieDomain: 'none',\n                forceSSL: true,\n            });\n            ga('create', id, options.gaOptions);\n            this.enableIPAnonymization();\n            optOut = options.optOut;\n            if (optOut) {\n                window['ga-disable-' + id] = true;\n            }\n        },\n        /* trackPageView(pageURI)\n         *\n         * - track a change of page.\n         *\n         * @param {string} pageURI URI of the page viewed.\n         * @member SUGAR.analytics.connectors.GoogleAnalytics\n         */\n        trackPageView: function(pageUri) {\n            SUGAR.App.logger.warn(\"The method App.analytics.connectors.GoogleAnalytics.trackPageView() is deprecated and will be removed in a future Sugar release.\");\n            ga('send', 'pageview', pageUri);\n        },\n        /* trackEvent()\n         *\n         * - track an event on the page.\n         *\n         * @param {Object} event Google Analytics event to track.\n         * @param {string} event.category Category of the event.\n         * @param {string} event.action Action of the event.\n         * @param {string} event.label Always set to the route the user is on.\n         * @param {int} [event.value] Value of the event.\n         * @member SUGAR.analytics.connectors.GoogleAnalytics\n         */\n        trackEvent: function(event) {\n            SUGAR.App.logger.warn(\"The method App.analytics.connectors.GoogleAnalytics.trackEvent() is deprecated and will be removed in a future Sugar release.\");\n            ga('send', 'event', event.category, event.action, event.label, event.value);\n        },\n\n        /**\n         * Set tracker params.\n         * @param {string} key The param name.\n         * @param {Mixed} value The value to send to the tracker.\n         */\n        set: function(key, value) {\n            SUGAR.App.logger.warn(\"The method App.analytics.connectors.GoogleAnalytics.set() is deprecated and will be removed in a future Sugar release.\");\n            ga('set', key, value);\n        },\n\n        /**\n         * Enable IP anonymization on tracker.\n         *\n         * The last octet of client's (sender) IPv4 will be set to 0 (or the\n         * last 80 bits of IPv6 will be set to 0)\n         * Reference: https://support.google.com/analytics/answer/2763052\n         */\n        enableIPAnonymization: function() {\n            SUGAR.App.logger.warn(\"The method App.analytics.connectors.GoogleAnalytics.enableIPAnonymization() is deprecated and will be removed in a future Sugar release.\");\n            this.set('anonymizeIp', true);\n        }\n    };\n})(SUGAR.App);\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n(function(app) {\n    app.analytics = app.analytics || {};\n    app.analytics.connectors = app.analytics.connectors || {};\n\n    app.analytics.connectors.Pendo  = {\n        // disabling of IP address/geolocation tracking is handled by talking with Pendo directly\n        // see https://help.pendo.io/resources/support-library/analytics/disable-ip-address-and-geo-location-logging.html\n\n        /**\n         * List of default values needed for Pendo analytics\n         */\n        serverInfoDefaults: {\n            'si_id': 'unknown_si_id',\n            'si_name': 'unknown_si_name',\n            'si_type': 'unknown_si_type',\n            'si_license_current': false,\n            'si_license_serve': false,\n            'si_license_sell': false,\n            'si_tier': 'unknown_si_tier',\n            'si_customer_since': 'unknown_si_customer_since',\n            'si_sic_code': 'unknown_si_sic_code',\n            'si_employees_no': 'unknown_si_employees_no',\n            'si_managing_team': 'unknown_si_managing_team',\n            'si_partner_name': 'unknown_si_partner_name',\n            'si_partner_type': 'unknown_si_partner_type',\n            'si_account_record': 'unknown_si_account_record',\n            'si_customer_region': 'unknown_si_customer_region',\n            'si_billing_country': 'unknown_si_billing_country',\n            'si_billing_state': 'unknown_si_billing_state',\n            'si_billing_city': 'unknown_si_billing_city',\n            'si_postal_code': 'unknown_si_postal_code',\n            'si_cloud_instance': 'unknown_si_cloud_instance',\n            'si_usage_designation': 'unknown_si_usage_designation',\n            'si_no_of_licenses': 'unknown_si_no_of_licenses',\n            'si_cloud_region': 'unknown_si_cloud_region',\n            'si_upgrade_frequency': 'unknown_si_upgrade_frequency',\n            'si_db_size': 'unknown_si_db_size',\n            'si_file_system_size': 'unknown_si_file_system_size',\n            'si_sum_size': 'unknown_si_sum_size',\n            'si_rli_enabled': 'unknown_rli_enabled',\n            'si_forecasts_is_setup': 'unknown_forcasts_is_setup',\n            'si_product_list': 'unknown_product_list',\n            'portal_active': 'unknown_portal_activated'\n        },\n\n        /*\n         * Called on app:init.\n         *\n         * @member SUGAR.App.analytics.connectors.Pendo\n         */\n        initialize: function() {\n            // do nothing. pendo agent will be loaded by start() when id (apiKey) is available\n        },\n\n        /*\n         * Called on app:start, prepare or open the connection to the analytics system.\n         *\n         * @param {string} id Tracking id for the analytics system.\n         * @param {Object} options SUGAR.App.config.analytics configuration.\n         * @member SUGAR.App.analytics.connectors.Pendo\n         */\n        start: function (id, options) {\n            // this code is taken directly from Pendo\n            /* eslint-disable */\n            (function(apiKey){\n                (function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=[];\n                    v=['initialize','identify','updateOptions','pageLoad'];for(w=0,x=v.length;w<x;++w)(function(m){\n                        o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);\n                    y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.io/agent/static/'+apiKey+'/pendo.js';\n                    z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');\n            })(id);\n            /* eslint-enable */\n        },\n\n        /*\n         * Send user and account data.\n         *\n         * @member SUGAR.App.analytics.connector.Pendo\n         */\n        configure: function() {\n            // check consent for portal user\n            if (app.config.platform === 'portal' && !app.user.get('cookie_consent')) {\n                return;\n            }\n            pendo.initialize(this.getPendoMetadata());\n        },\n\n        /**\n         * Returns the pendo visitor and account info object\n         * @return {Object} visitor object, account-info\n         */\n        getPendoMetadata: function() {\n            // user data\n            const visitorId = app.user.get('site_user_id') || 'unknown_user';\n            const userType = app.user.get('type') || 'unknown_user_type';\n            const language = app.user.getLanguage() || 'unknown_language';\n            let rolesArray = app.user.get('roles');\n            let roles = Array.isArray(rolesArray)\n                ? (rolesArray.length >= 1 ? rolesArray.join(',') : 'no_roles')\n                : 'unknown_roles';\n            let licensesArray = app.user.get('licenses');\n            let licenses = Array.isArray(licensesArray) && licensesArray.length > 0\n                ? licensesArray.join(',')\n                : 'no_licenses';\n\n            // account data\n            const activityStreamsEnabled = app.config.activityStreamsEnabled ? 'True' : 'False';\n            const editablePreviewEnabled = app.config.previewEdit ? 'True' : 'False';\n            const listMaxEntriesPerPage = app.config.maxQueryResult || 'unknown_list_view_items_per_page';\n            const listMaxEntriesPerSubpanel = app.config.maxSubpanelResult || 'unknown_list_view_items_per_page';\n            const leadConversionOptions = app.config.leadConvActivityOpt || 'unknown_lead_conversion_options';\n            const systemDefaultCurrencyCode = app.currency.getBaseCurrency().iso4217 ||\n                'unknown_system_default_currency_code';\n            const systemDefaultLanguage = app.lang.getLanguage() || 'unknown_system_default_language';\n            const awsConnectInstanceName = app.config.awsConnectInstanceName || 'unknown_connect_instance_name';\n            const awsConnectUrl = app.config.awsConnectUrl || 'unknown_connect_url';\n\n            const serverInfo = app.metadata.getServerInfo();\n            const accountId = serverInfo.site_id || 'unknown_account';\n            const siteUrl = _.isFunction(app.utils.getSiteUrl) ? app.utils.getSiteUrl() : 'unknown_domain';\n            const version = serverInfo.version || 'unknown_version';\n            const flavor = serverInfo.flavor || 'unknown_edition';\n            const hostEnvironment = serverInfo.host_environment || 'on-premise';\n            const hostDesignation = serverInfo.host_designation || 'production';\n            const hostDBName = serverInfo.db_name || 'unknown_db_name';\n            const accountBasicInfo = {\n                id: accountId,\n                domain: siteUrl,\n                edition: flavor,\n                version: version,\n                activity_streams_enabled: activityStreamsEnabled,\n                editable_preview_enabled: editablePreviewEnabled,\n                list_view_items_per_page: listMaxEntriesPerPage,\n                subpanel_items_per_page: listMaxEntriesPerSubpanel,\n                lead_conversion_options: leadConversionOptions,\n                system_default_currency_code: systemDefaultCurrencyCode,\n                system_default_language: systemDefaultLanguage,\n                aws_connect_instance_name: awsConnectInstanceName,\n                aws_connect_url: awsConnectUrl,\n                host_environment: hostEnvironment,\n                host_designation: hostDesignation,\n                host_db_name: hostDBName,\n            };\n            const accountServerInfo = _.each(this.serverInfoDefaults, function (value, name, serverInfoList) {\n                serverInfoList[name] = serverInfo[name] || value;\n                return serverInfoList;\n            });\n\n            return {\n                visitor: {\n                    id: visitorId,\n                    user_type: userType,\n                    language: language,\n                    roles: roles,\n                    licenses: licenses,\n                    host_environment: hostEnvironment,\n                    host_designation: hostDesignation,\n                    host_db_name: hostDBName,\n                },\n                account: _.extend(accountBasicInfo, accountServerInfo)\n            };\n        },\n\n        /*\n         * Track an activity.\n         *\n         * Pendo auto-tracks most page interactions.\n         * See https://help.pendo.io/resources/support-library/api/index.html?bash#track-events\n         * @param {string} trackType Activity type.\n         * @param {Object} trackData Activity metadata.\n         * @member SUGAR.App.analytics.connectors.Pendo\n         */\n        track: function(trackType, trackData) {\n            app.logger.debug(`Pendo track => ${trackType}: ${trackData} `);\n\n            if (_.has(pendo, 'track')) {\n                pendo.track(trackType, trackData);\n            }\n        },\n\n        /*\n         * Track a change of page.\n         *\n         * @param {string} pageUri Uri of the page viewed.\n         * @member SUGAR.App.analytics.connectors.Pendo\n         */\n        trackPageView: function(pageUri) {\n            // Pendo automatically collects page view data\n            // see https://help.pendo.io/resources/support-library/api/index.html?bash#browser-interactions\n            this.track(pageUri);\n        },\n\n        /*\n         * Track an event on the page.\n         *\n         * @param {Object} event to track.\n         * @param {string} event.action Action of the event (ex. 'click').\n         * @param {string} event.category Category of the event (ex. 'quick_create').\n         * @param {string} event.label Human readable name of the event for Pendo.\n         * @param {string} event.currentLocation Always set to the route the user is on.\n         * @param {number} [event.value] Value of the event.\n         * @member SUGAR.App.analytics.connectors.Pendo\n         */\n        trackEvent: function(event) {\n            // Pendo Agent API allows us to track more events if needed\n            // see https://help.pendo.io/resources/support-library/api/index.html?bash#track-events\n            // see app.analytics.track();\n            if (!event?.action) {\n                throw new Error(`Invalid track event, event.action not valid. ${event}`);\n            }\n\n            // These two variables create a more readable event label from the action and category properties.\n            // For example, event.action = 'click' becomes 'Click' and event.category = 'quick_create' becomes 'quick\n            // create'. Therefore, 'click:quick_create' becomes 'Click quick create'.\n            const formattedAction = `${event?.action[0].toUpperCase()}${event?.action.slice(1)}`;\n            const parsedCategory = event?.category.split('_').join(' ');\n            const eventName = event?.label || `${formattedAction} ${parsedCategory}`;\n            app.logger.debug(`Pendo trackEvent => ${eventName}: ${event}`);\n            this.track(eventName, event);\n        },\n\n        /*\n         * Set tracker params.\n         *\n         * Currently do nothing.\n         * @param {string} key The param name.\n         * @param {*} value The configuration value to send to the tracker.\n         * @member SUGAR.App.analytics.connectors.Pendo\n         */\n        set: function(key, value) {\n            // do nothing\n        }\n    };\n})(SUGAR.App);\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * SugarCRM Analytics API allows user actions to be tracked via an analytics engine.\n *\n * The application event \"app:analytics:init\" will fire on app.start(). It is recommended that applications use a\n * universal handler to handle pave view changes. Please see the Page Tracking section below for an example of this.\n *\n * Connectors:\n *\n * Analytics connectors are loaded from SUGAR.App.analytics.connectors.\n *\n * Connectors implement the following functions:\n *\n * initialize()\n *\n * - called on app:init, load the analytics api.\n *\n * start(id, options)\n *\n * - called on app:start, prepare or open the connection to the analytics system.\n *\n * @param  {String}id, tracking id of for analytics system\n * @param  {Object}options, SUGAR.App.config.analytics configuration.\n *\n * trackPageView(pageURI)\n *\n * - track a change of page.\n *\n * @param  {String} pageURI.\n *\n * trackEvent()\n *\n * - track an event on the page.\n *\n * @param  {Object} event, with the following attributes: category, action, label, value. Label is always set as the current route the user is on.\n *\n * Below is a sample connector.\n * <pre>\n * (function(app) {\n * SUGAR.App.analytics = SUGAR.App.analytics || {};\n * SUGAR.App.analytics.connectors = SUGAR.App.analytics.connectors || {};\n * SUGAR.App.analytics.connectors[\"FakeConnector\"]  = {\n *     initialized: false,\n *     connectorId: null,\n *       pageLog: [],\n *       eventLog: [],\n *       initialize: function() {\n *           this.initialized = true;\n *       },\n *       start: function(id, options) {\n *           this.connectorId = id;\n *       },\n *       trackPageView: function(pageUri) {\n *           this.pageLog.push(pageUri);\n *       },\n *       trackEvent: function(event) {\n *           this.eventLog.push(event);\n *       }\n *   };\n * })(SUGAR.App);\n * </pre>\n *\n *\n * Configuration:\n *\n * Set the following in SUGAR.App.config.analytics. The entire config is passed to the connector start method as options.\n *\n * <pre>\n * {\n *     enabled: true,\n *     connector: \"GoogleAnalytics\",\n *     id: 'UA-XXXXXXXX-X'\n * }\n * </pre>\n *\n *\n * Page Tracking:\n *\n * Use SUGAR.App.analytics.trackPageView(uri); to track page views. An example of a universal way of handling page\n * tracking would be the following.\n *\n * <pre>\n * app.on(\"app:analytics:init\", function() {\n *     app.routing.before('route', function(options){\n *          options = options || {};\n *          var args = options.args || [];\n *          var subroute;\n *          if (args[0]) {\n *              var qpos = args[0].indexOf('?');\n *              subroute = qpos > -1 ? args[0].substring(0, args[0].indexOf('?')) : args[0];\n *          }\n *          var viewId = options.route + (subroute ? '/' + subroute : '');\n *\n *          app.analytics.currentViewId = viewId;\n *          app.analytics.trackPageView(app.analytics.currentViewId);\n *      }, this);\n * });\n * app.start();\n * </pre>\n *\n *\n * Event Tracking:\n *\n * Use SUGAR.App.analytics.trackEvent(category, action, event, value); to track events.\n *\n * The label will always be the app.analytics.currentViewId for any event.\n *\n * In JavaScript, this method can be called directly to track any event.\n *\n * In Templates, the analytics engine plugs into all views to look for elements with a track attribute on them.\n * The value of the attribute will contain the event data <category>:<action>.<css class to check>.\n * The event value is sent as 1 or 0 depending on if that css class is present on the element.\n *\n * <pre>\n *    <a href=\"#\" class=\"trackedClass\" track=\"click:home.trackedClass\">Home</a>\n * </pre>\n *\n * @class SUGAR.analytics\n */\n(function(app) {\n    const EVENT_ACTION = 0;\n    const EVENT_CATEGORY = 1;\n    const TYPE_PAGE_VIEW = 'pageview';\n    const TYPE_EVENT = 'event';\n\n    const _analytics = {\n\n        eventSplitter: /\\s{2,}/,\n        currentViewId: '',\n\n        /**\n         * Object containing the list of events to track, mapped to their\n         * respective DOM selector.\n         *\n         * @protected\n         * @type {Object}\n         */\n        _eventsHash: {\n            click: '[track^=click]',\n            swipeleft: '[track^=swipeleft]',\n            swiperight: '[track^=swiperight]'\n        },\n\n        init: function () {\n            if (!app.config.analytics || !app.config.analytics.enabled ||\n                !app.config.analytics.connector || app.config.analytics.connector === 'GoogleAnalytics' ||\n                !app.analytics.connectors[app.config.analytics.connector]\n            ) {\n                this.trackPageView = () => {};\n                this.trackEvent = () => {};\n                this.track = () => {};\n                return;\n            }\n\n            const self = this;\n            app.on('app:init', function () {\n                app.events.register('app:analytics:init', this);\n                app.analytics.connector = app.analytics.connectors[app.config.analytics.connector];\n                app.analytics.connector.initialize();\n\n                _.each(self._eventsHash, function (val, key) {\n                    $('html').on(key, val, function (e) {\n                        const data = self._parseTrackTag($(this).attr('track'));\n                        app.analytics.trackEvent(key, data?.action, e, data?.value);\n                    });\n                });\n            }).on('app:start', function () {\n\n                // Apps should do their initialization of page tracking based on the following event.\n                app.trigger('app:analytics:init');\n\n                let id = app.config.analytics.id;\n                // Keep backwards compatible with nomad\n                if (_.isObject(id)) {\n                    app.logger.warn('Analytics config id needs to be a valid tracking ID.');\n                    id = app.isNative ? id.native : id.web;\n                }\n\n                app.analytics.connector.start(id, app.config.analytics);\n\n            }).on('app:sync:complete', function () {\n                app.analytics.configure();\n            }).on('app:locale:change', function () {\n\n                app.analytics.connector.set('language', app.user.getLanguage());\n            }).on('app:view:change', function (layout, params) {\n                app.analytics.currentViewId = layout + (params.module ? '/' + params.module : '');\n                app.analytics.trackPageView(app.analytics.currentViewId);\n            });\n        },\n\n        /*\n         * Send user and account data.\n         *\n         * @member SUGAR.App.analytics\n         */\n        configure: function () {\n            if (_.isFunction(app.analytics.connector.configure)) {\n                app.analytics.connector.configure();\n                return;\n            }\n            // old connector\n            const serverInfo = app.metadata.getServerInfo();\n\n            app.analytics.connector.set('appName',\n                'SugarCRM:' + app.config.platform + ':' + (serverInfo.flavor || '').toLowerCase()\n            );\n            app.analytics.connector.set('appVersion', serverInfo.version + ':' + serverInfo.build);\n        },\n\n        /*\n         * Track an activity.\n         *\n         * @param {string} trackType Activity type (name).\n         * @param {Object} trackData Activity metadata.\n         * @member SUGAR.App.analytics\n         */\n        track: function (trackType = '', trackData = {}) {\n            if (_.isFunction(app.analytics.connector.track)) {\n                app.analytics.connector.track(trackType, trackData);\n                return;\n            }\n            // old connector\n            if (trackType === TYPE_PAGE_VIEW && !_.isEmpty(trackData.page)) {\n                app.analytics.trackPageView(trackData.page);\n            } else if (trackType === TYPE_EVENT) {\n                const category = _.isEmpty(trackData.category) ? '' : trackData.category;\n                const action = _.isEmpty(trackData.action) ? '' : trackData.action;\n                const event = _.isEmpty(trackData.event) ? null : trackData.event;\n                const value = _.isEmpty(trackData.value) ? '' : trackData.value;\n                app.analytics.trackEvent(category, action, event, value);\n            }\n        },\n\n        /**\n         * Track a page view.\n         *\n         * @param {string} page URI.\n         * @member SUGAR.analytics\n         */\n        trackPageView: function (page) {\n            app.logger.debug(`Page: ${page}`);\n            app.analytics.connector.trackPageView(page);\n        },\n\n        /**\n         * Track an event. Example:\n         * {\n         *     category: 'click',\n         *     action: 'quick_create',\n         *     location: '/Accounts/<id>',\n         *     event: '',\n         *     value: '',\n         * }\n         *\n         * @param {string} action Action of the event (ex. 'click').\n         * @param {string} category Category of the event (ex. 'quick_create').\n         * @param {Object} event Event to track.\n         * @param {number} [value] Value associated with the event.\n         * @member SUGAR.analytics\n         */\n        trackEvent: function (action, category, event, value) {\n            action = (_.isEmpty(action) && event ? event.currentTarget.id : action) || '[unknown]';\n            app.analytics.connector.trackEvent({\n                action: action,\n                category: category,\n                currentLocation: this.currentViewId,\n                value: value\n            });\n        },\n\n        /**\n         * Parses the `track` attribute.\n         *\n         * @param {String} track The value of the `track` attribute (ex. 'click:quick_create').\n         * @return {Object} The hash containing the data to pass to\n         *   {@link SUGAR.analytics#trackEvent}\n         * @return {string} return.action The action (example: 'mass_delete').\n         * @return {number|null} return.value The value corresponding to the action.\n         * @private\n         */\n        _parseTrackTag: function (track) {\n            const result = {action: '', value: null};\n            const pieces = track.split(':');\n            if (!pieces[EVENT_CATEGORY]) {\n                return result;\n            }\n            const actionValue = pieces[EVENT_CATEGORY].split('.');\n            result.action = actionValue[0];\n            if (actionValue[1]) {\n                result.value = actionValue[1];\n            }\n\n            return result;\n        },\n\n        /**\n         * @private\n         * @member SUGAR.analytics\n         */\n        _attachEvents: function (events, action, css, $el) {\n            if (events) {\n                $el.off(events);\n                $el.on(events, function (e) {\n                    app.analytics.trackEvent(e.type, action, e, (css && $(this).hasClass(css) ? 1 : 0));\n                });\n            }\n        },\n\n        dispose: function () {\n            app.off(null, null, this);\n        }\n    };\n\n    app.augment('analytics', _analytics);\n\n})(SUGAR.App);\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst User = require('./user');\n\n/**\n * Dictionary that maps actions to permissions.\n * FIXME: make this constant again\n * @private\n */\nlet Action2Permission = {\n    view: 'read',\n    readonly: 'read',\n    edit: 'write',\n    detail: 'read',\n    list: 'read',\n    disabled: 'read',\n};\n\n/**\n * ACL helper to convert ACLs data into booleans.\n *\n * @param {string} action Action name.\n * @param {Object} acls ACL hash.\n * @return {boolean} Flag indicating if the current user has access.\n * @private\n */\nfunction hasAccess(action, acls) {\n    let access;\n\n    if (acls.access === 'no') {\n        access = 'no';\n    } else {\n        access = acls[action];\n    }\n\n    return access !== 'no';\n}\n\n/**\n * ACL helper to convert ACLs data on fields into booleans.\n *\n * @param {string} action Action name.\n * @param {Object} acls ACL hash.\n * @param {string} field Name of the Module's field.\n * @return {boolean} Flag indicating if the current user has access.\n * @private\n */\nfunction hasAccessToField(action, acls, field) {\n    let access;\n\n    action = Action2Permission[action] || action;\n    if (acls.fields[field] && acls.fields[field][action]) {\n        access = acls.fields[field][action];\n    }\n\n    return access !== 'no';\n}\n\n/**\n * The ACL module provides methods to check ACLs for modules and fields.\n *\n * @module Core/Acl\n */\n\n/**\n * @alias module:Core/Acl\n */\nlet Acl = {\n    /**\n     * Checks ACLs to see if the current user can perform the given action on a\n     * given module or record.\n     *\n     * @param {string} action Action name.\n     * @param {string} module Module name.\n     * @param {Object} [options] Options.\n     * @param {string} [options.field] Name of the field to check access to.\n     * @param {string} [options.acls] Record's ACLs that take precedence over\n     *   the module's ACLs. These are normally supplied by the server as part\n     *   of the data response in `_acl`.\n     * @return {boolean} `true` if the current user has access to the given\n     *   `action`; `false` otherwise.\n     */\n    hasAccess: function(action, module, options) {\n        let field;\n        let recordAcls;\n\n        if (!_.isObject(options)) {\n            // TODO: Throw deprecation warning and remove this code.\n            field = arguments[3];\n            recordAcls = arguments[4];\n        } else {\n            field = options.field;\n            recordAcls = options.acls;\n        }\n\n        let acls = User.getAcls()[module];\n        if (!acls && !recordAcls) {\n            return true;\n        }\n\n        acls = acls || {};\n        if (recordAcls) {\n            let fieldAcls = _.extend({}, acls.fields, recordAcls.fields);\n            acls = _.extend({}, acls, recordAcls);\n            acls.fields = fieldAcls;\n        }\n\n        let access = hasAccess(action, acls);\n        if (access && field && acls.fields) {\n            access = hasAccessToField(action, acls, field);\n\n            // if the field is in a group, see if we have access to the group\n            let moduleMeta = SUGAR.App.metadata.getModule(module);\n            let fieldMeta = (moduleMeta && moduleMeta.fields) ? moduleMeta.fields[field] : null;\n            if (access && fieldMeta && fieldMeta.group) {\n                access = hasAccessToField(action, acls, fieldMeta.group);\n            }\n        }\n\n        return access;\n    },\n\n    /**\n     * Checks ACLs to see if the current user can perform the given action on a\n     * given model's field.\n     *\n     * @param {string} action Action name.\n     * @param {Object} model Model instance.\n     * @param {string} [field] Name of the model field.\n     * @return {boolean} `true` if the current user has access to the given\n     *   `action`; `false` otherwise.\n     */\n    hasAccessToModel: function(action, model, field) {\n        let id;\n        let module;\n        let acls;\n\n        if (model) {\n            id = model.id;\n            module = model.module;\n            acls = model.get('_acl') || { fields: {} };\n        }\n\n        if (action === 'edit' && !id) {\n            action = 'create';\n        }\n\n        return this.hasAccess(action, module, {field, acls});\n    },\n\n    /**\n     * Checks ACLs to see if the current user can perform the given\n     * action on any model.\n     *\n     * ```\n     * const Acl = require('./acl');\n     *\n     * // Check whether user has `admin` access for any module.\n     * Acl.hasAccessToAny('admin');\n     *\n     * // Check whether user has `developer` access for any module.\n     * Acl.hasAccessToAny('developer');\n     * ```\n     *\n     * @param {string} action Action name.\n     * @return {boolean} `true` if the current user has access to the given\n     *   `action`; `false` otherwise.\n     */\n    hasAccessToAny: function(action) {\n        return _.some(User.getAcls(), function(obj, module) {\n                return this.hasAccess(action, module);\n        }, this);\n    },\n\n    _hasAccess: function(action, acls) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Acl#_hasAccess is a private method that you are not allowed to access. ' +\n                'Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Acl#_hasAccess is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the ' +\n            'public API only.');\n\n        return hasAccess(action, acls);\n    },\n\n    _hasAccessToField: function(action, acls, field) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Acl#_hasAccessToField is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Acl#_hasAccessToField is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return hasAccessToField(action, acls, field);\n    },\n\n    /**\n     * This method has no effect. Do not use it.\n     *\n     * @deprecated since 7.10\n     */\n    clearCache: function() {\n        SUGAR.App.logger.warn('`Core.Acl#clearCache` is deprecated since 7.10 and will be removed in a future ' +\n            'release. This method has no effect. Please do not use it anymore');\n        this._accessToAny = {};\n    }\n};\n\nObject.defineProperty(Acl, 'action2permission', {\n    configurable: true,\n\n    get: function() {\n        SUGAR.App.logger.warn('`Core.Acl.action2permission` has been made private since 7.10 and you will not be able ' +\n            'to access it in the next release. Please do not use it anymore');\n        return Action2Permission;\n    },\n\n    set: function(val) {\n        SUGAR.App.logger.warn('`Core.Acl.action2permission` has been made private since 7.10 and you will not be able ' +\n            'to access it in the next release. Please do not use it anymore');\n        Action2Permission = val;\n    },\n});\n\n/**\n * Dummy _accessToAny variable.\n *\n * @deprecated\n * @private\n */\nlet dummyAccessToAny = {};\n\nObject.defineProperty(Acl, '_accessToAny', {\n    configurable: true,\n\n    get: function() {\n        SUGAR.App.logger.warn('`Core.Acl#_accessToAny` is deprecated since 7.10 and will be removed in a future ' +\n            'release. Please do not use it anymore');\n        return dummyAccessToAny;\n    },\n\n    set: function(val) {\n        SUGAR.App.logger.warn('`Core.Acl#_accessToAny` is deprecated since 7.10 and will be removed in a future ' +\n            'release. Please do not use it anymore');\n        dummyAccessToAny = val;\n    },\n});\n\nmodule.exports = Acl;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * Regular expression used to split event strings.\n *\n * @private\n * @type {RegExp}\n */\nconst eventSplitter = /\\s+/;\n\n/**\n * Events API used to process various event actions and handle inputs such\n * as event maps and space-separated event names.\n *\n * This is taken from the Backbone.js library to simplify event-handling.\n *\n * @param {Object} obj Scope in which the `action` will be executed.\n * @param {string} action The function being executed (e.g. 'triggerBefore')\n * @param {string|Object} name Event(s) to trigger before. Accepts\n *   multiple space-separated event names, or an event map.\n * @param {Array} [rest] List of arguments to be passed to the before event.\n * @return {boolean} `false` if an event map or space-separated event names\n *   were used, `true` otherwise.\n * @private\n */\nconst eventsApi = function (obj, action, name, rest) {\n    if (!name) return true;\n\n    // Handle event maps.\n    if (typeof name === 'object') {\n        for (let key in name) {\n            obj[action].apply(obj, [key, name[key]].concat(rest));\n        }\n\n        return false;\n    }\n\n    // Handle space separated event names.\n    if (eventSplitter.test(name)) {\n        let names = name.split(eventSplitter);\n        for (let i = 0, l = names.length; i < l; i++) {\n            obj[action].apply(obj, [names[i]].concat(rest));\n        }\n\n        return false;\n    }\n\n    return true;\n};\n\n/**\n * An optimized event-triggering method used to speed up common event calls\n * with 1, 2, or 3 arguments. Prevents the event from triggering if any\n * provided before callback returns `false`.\n *\n * This is taken from the Backbone.js library to simplify event-dispatching.\n *\n * @param {Array} events The list of before event listeners.\n * @param {Array} [args] Arguments passed to the before event callback.\n * @return {boolean} `true` if the before event should be triggered, `false`\n *   otherwise.\n * @private\n */\nconst triggerEvents = function (events, args) {\n    let stop = false;\n    let i = -1;\n    let l = events.length;\n    let ev;\n    switch (args.length) {\n        case 0:\n        case 1:\n        case 2:\n        case 3:\n            while (++i < l) stop = (ev = events[i]).callback.call(ev.ctx, args[0], args[1], args[2]) === false || stop;\n            break;\n        default:\n            while (++i < l) stop = (ev = events[i]).callback.apply(ev.ctx, args) === false || stop;\n    }\n\n    return !stop;\n};\n\n/**\n * `BeforeEvent` is a mixin that provides methods to create hooks that run\n * before a certain event.\n *\n * Usage Example:\n *\n * ```\n * const BeforeEvent = require('./before-event');\n * _.extend(MyObject, BeforeEvent);\n * ```\n *\n * @alias Core/BeforeEvent\n * @mixin\n */\nmodule.exports = {\n    /**\n     * Adds a callback/hook to be fired before an action is taken. If that\n     * callback returns `false`, the action should not be taken.\n     *\n     * The following example binds a callback function and passes the scope\n     * from the view component to use in that callback:\n     *\n     * ```\n     * model.before('save', this.doSomethingBeforeSave, this);\n     * ```\n     *\n     * Multiple space-separated event names can be bound to a single callback:\n     *\n     * ```\n     * view.before('save dispose', this.callback, this);\n     * ```\n     *\n     * This method also supports an event map syntax, as an alternative to\n     * positional arguments:\n     *\n     * ```\n     * this.before({\n     *     render: this.doSomethingBeforeRender,\n     *     dispose: this.doSomethingBeforeDispose,\n     * });\n     * ```\n     *\n     * @param {string|Object} name Event(s) to trigger before. Accepts multiple\n     *   space-separated event names or an event map.\n     * @param {Function} callback Function to be called.\n     * @param {Object} [context] Value to be assigned to `this` when the\n     *   callback is fired.\n     * @return {Object} Instance of this class.\n     */\n    before(name, callback, context) {\n        if (!eventsApi(this, 'before', name, [callback, context]) || !callback) {\n            return this;\n        }\n\n        this._before = this._before || {};\n        let events = this._before[name] || (this._before[name] = []);\n\n        events.push({\n            callback: callback,\n            context: context,\n            ctx: context || this,\n        });\n\n        return this;\n    },\n\n    /**\n     * Triggers the before callback for the given event `name` or list of\n     * events.\n     *\n     * The following example triggers the callback bound to the before `save`\n     * event given:\n     *\n     * ```\n     * this.triggerBefore('save');\n     * ```\n     *\n     * Multiple events can be triggered as well:\n     *\n     * ```\n     * this.triggerBefore('save render dispose');\n     * ```\n     *\n     * Custom arguments (e.g. `a`, `b`, `c`) can be passed to the callback:\n     *\n     * ```\n     * this.triggerBefore('save', a, b, c);\n     * ```\n     *\n     * @param {string} name The before event(s) to trigger.\n     * @return {boolean} Returns `true` if the event should be triggered,\n     *   `false` otherwise.\n     */\n    triggerBefore(name) {\n        let stop = false;\n\n        if (!this._before) {\n            return !stop;\n        }\n\n        let args = Array.prototype.slice.call(arguments, 1);\n\n        // Handle space separated event names.\n        if (eventSplitter.test(name)) {\n            let names = name.split(eventSplitter);\n            for (let i = 0, l = names.length; i < l; i++) {\n                stop = !this.triggerBefore.apply(this, [names[i]].concat(args)) || stop;\n            }\n\n            return !stop;\n        }\n\n        let events = this._before[name];\n        let allEvents = this._before.all;\n\n        if (events) {\n            stop = (triggerEvents(events, args) === false);\n        }\n\n        if (allEvents) {\n            stop = (triggerEvents(allEvents, args) === false) || stop;\n        }\n\n        return !stop;\n    },\n\n    /**\n     * Removes a previously-bound callback function from a before event.\n     *\n     * If no context is given, all of the versions of the callback with\n     * different contexts will be removed:\n     *\n     * ```\n     * this.offBefore('render', this.onRenderBefore);\n     * ```\n     *\n     * If no callback is given, all callbacks for the before event will\n     * be removed:\n     *\n     * ```\n     * this.offBefore('render');\n     * ```\n     *\n     * If no event is specified, all callbacks for all before events\n     * will be removed from the object:\n     *\n     * ```\n     * this.offBefore();\n     * ```\n     *\n     * @param {string} [name] Event(s) to remove the listeners for.\n     * @param {Function} [callback] Callback to remove specifically for\n     *   a given event.\n     * @param {Object} [context] Context to use when determining which\n     *   callback to remove.\n     * @return {Object} Instance of this class.\n     */\n    offBefore(name, callback, context) {\n        // This is taken from the Backbone.js library to simplify event-handling.\n        let retain;\n        let ev;\n        let events;\n        let names;\n\n        if (!this._before || !eventsApi(this, 'offBefore', name, [callback, context])) {\n            return this;\n        }\n\n        if (!name && !callback && !context) {\n            this._before = void 0;\n            return this;\n        }\n\n        names = name ? [name] : _.keys(this._before);\n        for (let i = 0, l = names.length; i < l; i++) {\n            name = names[i];\n            events = this._before[name];\n            if (events) {\n                this._before[name] = retain = [];\n                if (callback || context) {\n                    for (let j = 0, k = events.length; j < k; j++) {\n                        ev = events[j];\n                        if ((callback && callback !== ev.callback) || (context && context !== ev.ctx)) {\n                            retain.push(ev);\n                        }\n                    }\n                }\n\n                if (!retain.length) {\n                    delete this._before[name];\n                }\n            }\n        }\n\n        return this;\n    },\n};\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Events = require('./events');\n\n/**\n * Local storage manager. Provides handy methods to interact with local\n * storage in a cross-browser compatible way.\n *\n * By default, the cache manager uses store.js to manipulate items in the\n * `window.localStorage` object.\n *\n * The value of the key which is passed as a\n * parameter to `get/set/add` methods is prefixed with `<env>:<appId>:` string\n * to avoid clashes with other environments and applications running off the\n * same domain name and port. You can set environment and application ID in\n * the configuration file.\n *\n * @module Core/Cache\n */\n\n/**\n * Default key prefix.\n *\n * @private\n */\nlet keyPrefix = '';\n\n/**\n * The configuration object.\n *\n * @private\n */\nlet config = {};\n\n/**\n * Helper method to build a local storage key.\n *\n * @param {string} key The raw key.\n * @return {string} The prefixed key.\n * @private\n */\nlet buildKey = (key) => keyPrefix + key;\n\nlet sugarStore = _.extend({}, store, {\n    // make store compatible with stash\n    cut: store.remove,\n    cutAll: store.clear,\n});\n\n/**\n * Helper method used by `migrateOldKeys` for removing quotes from the previous\n * local storage library.\n *\n * @param {string} str The string to remove quote marks from.\n * @return {string} `str` with quotation marks removed.\n * @private\n */\nlet unquote = (str) => (new Function('return ' + str))(); // jshint ignore:line\n\n/**\n * Attempts to migrate values from Stash to Store.\n *\n * `stash.js` used to set values with single quotes in `localStorage`.\n * `store.js` uses double quotes (standard JSON encode/decode). Hence, we\n * need to update current values in `localStorage` to be compliant with the\n * new store.\n *\n * @param {Object} cache Cache object to work on.\n * @private\n */\nlet migrateStorage = function(cache) {\n    if (cache.has('uniqueKey')) {\n        return;\n    }\n\n    // We need to clone the local storage to not mess up with it during the\n    // iterations.\n    let store = {};\n    for (let i = 0, len = localStorage.length; i < len; i++) {\n        let key = localStorage.key(i);\n        store[key] = localStorage[key];\n    }\n\n    _.each(store, function(value, key) {\n        try {\n            JSON.parse(value);\n            value = cache.store.deserialize(value);\n        } catch (e) {\n            if (typeof value === 'string') {\n                // only call unquote if it's already quoted, or is an object-like string\n                if ((value[0] === \"'\" && value[value.length - 1] === \"'\")\n                    || (value[0] === '\"' && value[value.length - 1] === '\"')\n                    || (value[0] === \"{\" && value[value.length - 1] === \"}\")) {\n                    value = unquote(value);\n                }\n            } else {\n                value = unquote(value);\n            }\n        }\n\n        if (value === null) {\n            value = undefined;\n        }\n\n        cache.store.set(key, value);\n    });\n\n    cache.set('uniqueKey', config.uniqueKey);\n};\n\n/**\n * @alias:module Core/Cache\n * @function\n * @param {Object} cfg The configuration object.\n * @param {string} cfg.appId Application identifier.\n * @param {string} cfg.env Application environment.\n *   Possible values are 'dev', 'test', and 'prod'.\n * @param {string} cfg.uniqueKey Key used to prevent local storage\n *   values from leaking to other application instances.\n */\nconst Cache = _.extend({}, Backbone.Events, {\n    /**\n     * Storage provider.\n     *\n     * Default: store.js. See {@link https://github.com/marcuswestin/store.js}.\n     */\n    store: sugarStore,\n\n    /**\n     * Initializes the local storage manager.\n     */\n    init: function() {\n        keyPrefix = `${config.env}:${config.appId}:`;\n\n        migrateStorage(this);\n\n        if (this.get('uniqueKey') !== config.uniqueKey) {\n            // do not leak information to other instances\n            this.cutAll(true);\n            this.set('uniqueKey', config.uniqueKey);\n        }\n\n        Events.register('cache:clean', this);\n    },\n\n    /**\n     * Checks if the given item exists in local storage.\n     *\n     * @param {string} key Item key.\n     * @return {boolean} `true` if `key` exists in local storage; `false`\n     *   otherwise.\n     */\n    has: function(key) {\n        return this.store.has(buildKey(key));\n    },\n\n    /**\n     * Gets an item from local storage.\n     *\n     * @param {string} key Item key.\n     * @return {number|boolean|string|Array|Object} Item with the given key.\n     */\n    get: function(key) {\n        return this.store.get(buildKey(key));\n    },\n\n    /**\n     * Puts an item into local storage.\n     *\n     * @param {string} key Item key.\n     * @param {number|boolean|string|Array|Object} value Item to put.\n     */\n    set: function(key, value) {\n        key = buildKey(key);\n\n        try {\n            this.store.set(key, value);\n        } catch (e) {\n            if (e.name.toLowerCase().indexOf('quota') > -1) {\n                // Local storage is full; the app needs to handle this.\n                this.clean();\n                this.store.set(key, value);\n            }\n        }\n    },\n\n    /**\n     * Removes non-critical values to free up space. It should be called\n     * whenever local storage quota is exceeded.\n     * You can listen to the `cache:clean` event (passes callback as argument)\n     * in order to register keys to preserve after clean.\n     * Keys that are not vital should not be preserved during a cleanup.\n     *\n     * Example:\n     * ```\n     * ({\n     *     initialize: function(options) {\n     *         Events.on('cache:clean', function(callback) {\n     *             callback([\n     *                 'my_important_cache_key',\n     *                 'my_other_important_key',\n     *             ])\n     *         });\n     *     },\n     * });\n     * ```\n     *\n     * @fires cache:clean\n     */\n    clean: function() {\n        let preserveKeys = [];\n        let preservedValues = {};\n\n        //First get a list of all keys to keep\n        this.trigger('cache:clean', function(keys) {\n            preserveKeys = _.union(keys, preserveKeys);\n        });\n        //Now get those values\n        _.each(preserveKeys, function(key) {\n            preservedValues[key] = this.get(key);\n        }, this);\n        //nuke all the keys we own\n        this.cutAll();\n\n        //restore any vital values\n        _.each(preservedValues, function(value, key) {\n            if (!_.isUndefined(value)) {\n                this.set(key, value);\n            }\n        }, this);\n    },\n\n    /**\n     * Deletes an item from local storage.\n     *\n     * @param {string} key Item key.\n     */\n    cut: function(key) {\n        key = buildKey(key);\n        if (this.store.has(key)) {\n            this.store.cut(key);\n        }\n    },\n\n    /**\n     * Deletes all items from local storage.\n     *\n     * By default, this method deletes all items for the current app and\n     * environment. Pass `true` to this method to remove all items.\n     *\n     * @param {boolean} [all=false] Flag indicating if all items must be\n     *   deleted from local storage.\n     */\n    cutAll: function(all) {\n        if (all === true) {\n            return this.store.cutAll();\n        }\n\n        var obj = this.store.getAll();\n        _.each(obj, function(value, key) {\n            if (key.indexOf(keyPrefix) === 0) {\n                this.store.cut(key);\n            }\n        }, this);\n    }\n});\n\nmodule.exports = function(cfg) {\n    config = cfg || {};\n    return Cache;\n};\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Bean = require('../data/bean');\nconst BeanCollection = require('../data/bean-collection');\nconst DataManager = require('../data/data-manager');\n\n/**\n * Helper function to determine if {@link Core/Context#loadData} can be called\n * on this context.\n *\n * @return {boolean} `true` if {@link Core/Context#loadData} can be called.\n *   `false` otherwise.\n * @private\n */\nfunction shouldFetch() {\n    return (this.get('fetch') === void 0 || this.get('fetch')) &&\n        !this.isDataFetched() && !this.get('create');\n}\n\n/**\n * The Context object is a state variable to hold the current application state.\n * It extends `Backbone.Model`.\n *\n * The context contains various states of the current {@link View/View View} or\n * {@link View/Layout Layout} -- this includes the current model and collection,\n * as well as the current module focused and also possibly the url hash that was\n * matched.\n *\n * ### Instantiate a context.\n *\n * ```\n * const Context = require('./context');\n * let myContext = new Context();\n * ```\n *\n * ### Creating a child context or retrieving an existing one.\n * Assuming `myContext` is a context instance.\n *\n * ```\n * let childContext = myContext.getChildContext({cid: <contextId>});\n * ```\n *\n * If <contextId> does not match any child context, a new child context will be\n * created.\n *\n * ### Retrieving Data from the Context\n * A context is a Backbone Model, so its data is stored in the attributes:\n *\n * ```\n * var module = myContext.get('module'); // module = \"Contacts\"\n * ```\n *\n * @module Core/Context\n * @class\n */\nconst Context = Backbone.Model.extend({\n    /**\n     * Calls Backbone's `initialize` and initializes this context's properties.\n     *\n     * @param {Object} [attributes] The initial hash of attributes.\n     * @memberOf Core/Context\n     * @instance\n     */\n    initialize: function(attributes) {\n        Backbone.Model.prototype.initialize.call(this, attributes);\n        this.id = this.cid;\n        this.parent = null;\n        this.children = [];\n        this._fetchCalled = false;\n    },\n\n    /**\n     * Recursively clears this context and its children.\n     *\n     * Unbinds the event listeners, clears the attributes, aborts the request\n     * in progress if any, and resets the load flag (calls\n     * {@link Core/Context#resetLoadFlag}).\n     *\n     * @param {Object} [options] Standard `Backbone.Model` options.\n     * @memberOf Core/Context\n     * @instance\n     */\n    clear: function(options) {\n        var collection = this.get('collection');\n\n        if (collection) {\n            collection.abortFetchRequest();\n        }\n\n        _.each(this.children, function(child) {\n            child.clear(options);\n        });\n\n        this.children = [];\n        this.parent = null;\n\n        // Remove event listeners attached to models and collections in the\n        // context before clearing them.\n        _.each(this.attributes, function(value) {\n            if (value && (value.off === Backbone.Events.off)) {\n                value.off();\n                value.stopListening();\n                if (_.isFunction(value.dispose)) {\n                    value.dispose();\n                }\n            }\n        }, this);\n\n        this.off();\n        Backbone.Model.prototype.clear.call(this, options);\n\n        this.resetLoadFlag();\n    },\n\n    /**\n     * Resets `load-data` state for this context and its child contexts.\n     *\n     * The {@link Core/Context#loadData} method sets an internal boolean flag\n     * to prevent multiple identical requests to the server.\n     * This method resets this flag.\n     *\n     * @param {Object} [options] A hash of options.\n     * @param {boolean} [options.recursive = true] `true` to reset the child\n     * contexts too.\n     * @param {boolean} [options.resetModel = true] `true` to reset the flag on\n     * the model.\n     * @param {boolean} [options.resetCollection = true] `true` to reset the\n     * flag on the collection.\n     * @memberOf Core/Context\n     * @instance\n     */\n    resetLoadFlag: function (options) {\n        options = options || {};\n        var recursive = _.isUndefined(options.recursive) ? true : options.recursive;\n        var resetModel = _.isUndefined(options.resetModel) ? true : options.resetModel;\n        var resetCollection = _.isUndefined(options.resetCollection) ? true : options.resetCollection;\n\n        this._fetchCalled = false;\n\n        if (this.get('model') && resetModel) {\n            this.get('model').dataFetched = false;\n        }\n\n        if (this.get('collection') && resetCollection) {\n            this.get('collection').dataFetched = false;\n        }\n\n        if (recursive) {\n            _.each(this.children, function(child) {\n                child.resetLoadFlag();\n            });\n        }\n    },\n\n    /**\n     * Checks if this context is used for a create view.\n     *\n     * @return {boolean} `true` if this context has the `create` flag set.\n     * @memberOf Core/Context\n     * @instance\n     */\n    isCreate: function() {\n        return this.get(\"create\") === true;\n    },\n\n    /**\n     * Gets an existing related context or creates a new one.\n     *\n     * @param {Object} [def] Child context definition.\n     * @param {string} [def.cid] The id of the context to retrieve. This takes\n     *   precedence over the passed name, the link and the module.\n     * @param {string} [def.name] The name of the context to retrieve. This\n     *   takes precedence over passed the link and the module.\n     * @param {string} [def.link] The link name to retrieve a context from. This\n     *   takes precedence over the passed module name.\n     * @param {string} [def.module] The module name to retrieve a context from.\n     *   The first child context matching the module attribute will be returned.\n     * @param {boolean} [def.forceNew] `true` to force the creation a new\n     *   context, without trying to retrieve an existing one.\n     * @return {Core/Context} The child context.\n     * @memberOf Core/Context\n     * @instance\n     */\n    getChildContext: function(def) {\n        def = def || {};\n        var context;\n        var force = def.forceNew || false;\n\n        delete def.forceNew;\n\n        // Re-use a child context if it already exists\n        // We search by either link name or module name\n        // Consider refactoring the way we store children: hash v.s. array\n        var name = def.cid || def.name || def.link || def.module;\n        if (name && !force) {\n            context = _.find(this.children, function(child) {\n                return ((child.cid == name) || (child.get(\"link\") == name) || (child.get(\"module\") == name));\n            });\n        }\n\n        if (!context) {\n            def = _.extend({ fetch: this.get('fetch') }, def);\n            context = new Context(def);\n            this.children.push(context);\n            context.parent = this;\n        }\n\n        if (def.link) {\n            var parentModel = this.get(\"model\");\n            context.set({\n                parentModel: parentModel,\n                parentModule: parentModel ? parentModel.module : null\n            });\n        } else if(!def.module){\n            context.set({module:this.get(\"module\")});\n        }\n\n        this.trigger(\"context:child:add\", context);\n\n        return context;\n    },\n\n    /**\n     * Prepares instances of model and collection and sets them to this context.\n     *\n     * The method also create related contexts, based on the created bean fields:\n     * It creates child context for each `link` of each `collection` field\n     * present on the bean.\n     * This method does nothing if this context already contains an instance of\n     * a model or a collection.\n     *\n     * @param {boolean} [force] `true` to force the creation of the model and\n     *   collection.\n     * @param {boolean} prepareRelated `true` to always prepare related contexts.\n     * @return {Core/Context} Returns this context instance.\n     * @memberOf Core/Context\n     * @instance\n     */\n    prepare: function (force, prepareRelated) {\n        var link;\n        if (force || (!this.get('model') && !this.get('collection'))) {\n            var modelId = this.get('modelId');\n            var create = this.get('create');\n            link = this.get('link');\n\n            this.set(link ?\n                this._prepareRelated(link, modelId, create) :\n                this._prepare(modelId, create)\n            );\n        }\n\n        if ((force || !this._relatedCollectionsPopulated) && (!link || prepareRelated)) {\n            this._populateRelatedContexts();\n        }\n\n        return this;\n    },\n\n    /**\n     * Sets the `fetch` attribute recursively on the context and its children.\n     *\n     * A context with `fetch` set to `false` won't load the data.\n     *\n     * @param {boolean} fetch `true` to recursively set `fetch` to `true`\n     *   in this context and its children.\n     * @param {Object} [options] A hash of options.\n     * @param {boolean} [options.recursive] `true` to recursively set the\n     *   `fetch` boolean on the children.\n     * @memberOf Core/Context\n     * @instance\n     */\n    setFetch: function (fetch, options) {\n        options = options || {};\n        this.set('fetch', fetch);\n        var recursive = options.recursive === void 0 ? true : options.recursive;\n        if (recursive) {\n            _.each(this.children, (child) => { child.setFetch(fetch); });\n        }\n    },\n\n    /**\n     * Prepares instances of model and collection.\n     *\n     * This method assumes that the module name (`module`) is set on the context.\n     * If not, instances of standard `Backbone.Model` and `Backbone.Collection`\n     * are created.\n     *\n     * @param {string} modelId Bean ID.\n     * @param {boolean} create Create flag.\n     * @return {Object} State to set on this context.\n     * @private\n     * @memberOf Core/Context\n     * @instance\n     */\n    _prepare: function(modelId, create) {\n        var model, collection,\n            module = this.get(\"module\"),\n            mixed = this.get(\"mixed\"),\n            models;\n\n        if (modelId) {\n            model = DataManager.createBean(module, { id: modelId });\n            models = [model];\n        } else if (create === true) {\n            model = DataManager.createBean(module);\n            models = [model];\n        } else {\n            model = DataManager.createBean(module);\n        }\n\n        collection = mixed === true ?\n            DataManager.createMixedBeanCollection(models) :\n            DataManager.createBeanCollection(module, models);\n\n        return {\n            collection: collection,\n            model: model\n        };\n    },\n\n    /**\n     * Prepares instances of related model and collection.\n     *\n     * This method assumes that either a parent model (`parentModel`) or\n     * parent model ID (`parentModelId`) and parent model module name\n     * (`parentModule`) are set on this context.\n     *\n     * @param {string} link Relationship link name.\n     * @param {string} modelId Related bean ID.\n     * @param {boolean} create Create flag.\n     * @return {Object} State to set on this context.\n     * @private\n     * @memberOf Core/Context\n     * @instance\n     */\n    _prepareRelated: function(link, modelId, create) {\n        var model, collection,\n            parentModel = this.get(\"parentModel\");\n\n        parentModel = parentModel || DataManager.createBean(this.get(\"parentModule\"), { id: this.get(\"parentModelId\") });\n        if (modelId) {\n            model = DataManager.createRelatedBean(parentModel, modelId, link);\n            collection = DataManager.createRelatedCollection(parentModel, link, [model]);\n        } else if (create === true) {\n            model = DataManager.createRelatedBean(parentModel, null, link);\n            collection = DataManager.createRelatedCollection(parentModel, link, [model]);\n        } else {\n            model = DataManager.createRelatedBean(parentModel, null, link);\n            collection = DataManager.createRelatedCollection(parentModel, link);\n        }\n\n        if (!this.has(\"parentModule\")) {\n            this.set({ \"parentModule\": parentModel.module }, { silent: true });\n        }\n\n        if (!this.has(\"module\")) {\n            this.set({ \"module\": model.module }, { silent: true });\n        }\n\n        return {\n            parentModel: parentModel,\n            collection: collection,\n            model: model\n        };\n    },\n\n    /**\n     * Sets the `fields` attribute on this context by extending the current\n     * `fields` attribute with the passed-in `fieldsArray`.\n     *\n     * @param {string[]} fieldsArray The list of field names.\n     * @return {Core/Context} Instance of this model.\n     * @memberOf Core/Context\n     * @instance\n     */\n    addFields: function(fieldsArray) {\n       if (!fieldsArray) {\n           return;\n       }\n       var fields = _.union(fieldsArray, this.get('fields') || []);\n       return this.set('fields', fields);\n    },\n\n    /**\n     * Loads data (calls fetch on either model or collection).\n     *\n     * This method sets an internal boolean flag to prevent consecutive fetch\n     * operations. Call {@link Core/Context#resetLoadFlag} to reset the\n     * context's state.\n     *\n     * @param {Object} [options] A hash of options passed to\n     *   collection/model's fetch method.\n     * @param {boolean} [options.fetch] `true` to always fetch the data.\n     * @memberOf Core/Context\n     * @instance\n     */\n    loadData: function(options) {\n        options = options || {};\n        if (!options.forceFetch && !shouldFetch.call(this)) {\n            return;\n        }\n\n        delete options.forceFetch;\n\n        var objectToFetch,\n            modelId = this.get(\"modelId\"),\n            module = this.get(\"module\"),\n            defaultOrdering = (SUGAR.App.config.orderByDefaults && module) ? SUGAR.App.config.orderByDefaults[module] : null;\n\n        objectToFetch = modelId ? this.get(\"model\") : this.get(\"collection\");\n\n        // If we have an orderByDefaults in the config, and this is a bean collection,\n        // try to use ordering from there (only if orderBy is not already set.)\n        if (defaultOrdering &&\n            objectToFetch instanceof BeanCollection &&\n            !objectToFetch.orderBy)\n        {\n            objectToFetch.orderBy = defaultOrdering;\n        }\n\n        // TODO: Figure out what to do when models are not\n        // instances of Bean or BeanCollection. No way to fetch.\n        if (objectToFetch && (objectToFetch instanceof Bean ||\n            objectToFetch instanceof BeanCollection)) {\n\n            if (this.get('dataView') && _.isString(this.get('dataView'))) {\n                objectToFetch.setOption('view', this.get('dataView'));\n            }\n\n            if (this.get('fields')) {\n                objectToFetch.setOption('fields', this.get('fields'));\n            }\n\n            if (this.get('limit')) {\n                objectToFetch.setOption('limit', this.get('limit'));\n            }\n\n            if (this.get('module_list')) {\n                objectToFetch.setOption('module_list', this.get('module_list'));\n            }\n\n            // Track models that user is actively viewing\n            if (this.get('viewed')) {\n                objectToFetch.setOption('viewed', this.get('viewed'));\n            }\n\n            options.context = this;\n\n            if (this.get(\"skipFetch\") !== true) {\n                objectToFetch.fetch(options);\n            }\n\n            this._fetchCalled = true;\n        } else {\n            SUGAR.App.logger.warn(\"Skipping fetch because model is not Bean, Bean Collection, or it is not defined, module: \" + this.get(\"module\"));\n        }\n    },\n\n    /**\n     * Creates child context for each `link` of each `collection` field\n     * present on the bean.\n     *\n     * @private\n     * @memberOf Core/Context\n     * @instance\n     */\n    _populateRelatedContexts: function () {\n        if (!this.get('collection')) {\n            return;\n        }\n\n        this.get('collection').each(function(bean) {\n            var collectionFields = bean.fieldsOfType('collection');\n            if (!_.isEmpty(collectionFields)) {\n                _.each(collectionFields, function(field) {\n                    var links = field.links;\n                    if (_.isString(links)) {\n                        links = [links];\n                    }\n\n                    var linkCollections = {};\n                    _.each(links, function(link) {\n                        var rc = this.getChildContext({link: link});\n                        rc.prepare();\n                    }, this);\n                }, this);\n            }\n        }, this);\n\n        this._relatedCollectionsPopulated = true;\n    },\n\n    _shouldFetch: function() {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Context#_shouldFetch is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Context#_shouldFetch is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return shouldFetch.call(this);\n    },\n\n    /**\n     * Refreshes the context's data and refetches the new data if\n     * the `skipFetch` attribute is `true`.\n     *\n     * @param {Object} [options] Options for {@link Core/Context#loadData} and\n     *   the `reload` event.\n     * @fires reload\n     * @memberOf Core/Context\n     * @instance\n     */\n    reloadData: function(options) {\n        options = options || {};\n\n        this.resetLoadFlag(options);\n        this.loadData(options);\n\n        /**\n         * Triggered before and after the context is reloaded.\n         * @param {Core/Context} this The context instance where the event is\n         *   triggered.\n         * @param {Object} [options] The options passed during\n         *   {@link Core/Context#reloadData} call.\n         * @memberOf Core/Context\n         * @event reload\n         */\n        this.trigger('reload', this, options);\n    },\n\n    /**\n     * Checks if data has been successfully loaded.\n     *\n     * @return {boolean} `true` if data has been fetched, `false` otherwise.\n     * @memberOf Core/Context\n     * @instance\n     */\n    isDataFetched: function() {\n        var objectToFetch = this.get('modelId') ? this.get('model') : this.get('collection');\n        return this._fetchCalled || (objectToFetch && !!objectToFetch.dataFetched);\n    },\n});\n\nmodule.exports = Context;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Events = require('./events');\nconst Context = require('./context');\nconst ViewManager = require('../view/view-manager');\n\n/**\n * The controller manages the loading and unloading of layouts.\n *\n * ## Extending controller\n *\n * Applications may choose to extend the controller to provide a custom\n * implementation. Your custom controller class name should be the capitalized\n * {@link Config#appId|appID} for your application followed by the word\n * \"Controller\".\n *\n * Example:\n * ```\n * SUGAR.App.PortalController = SUGAR.App.controller.extend({\n *     loadView: function(params) {\n *        // Custom implementation of loadView\n *        // Should call super method:\n *        SUGAR.App.Controller.prototype.loadView.call(this, params);\n *     }\n * });\n * ```\n *\n * @module Core/Controller\n */\n\n/**\n * @alias module:Core/Controller\n */\nmodule.exports = Backbone.View.extend({\n    /**\n     * Instantiates the application's main context and binds global events.\n     *\n     * @memberOf module:Core/Controller\n     * @instance\n     */\n    initialize: function() {\n        /**\n         * The primary context of the app. This context is associated with the\n         * root layout.\n         *\n         * @type {Core/Context}\n         * @memberOf module:Core/Controller\n         * @alias context\n         * @instance\n         */\n        this.context = new Context();\n\n        Events.on('app:sync:complete', function() {\n            SUGAR.App.api.setStateProperty('loadingAfterSync', true);\n            _.each(SUGAR.App.additionalComponents, function(component) {\n                if (component && _.isFunction(component._setLabels)) {\n                    component._setLabels();\n                }\n                component.render();\n            });\n            SUGAR.App.router.reset();\n            SUGAR.App.api.clearStateProperty('loadingAfterSync');\n        });\n\n        Events.on('app:login:success', function() {\n            SUGAR.App.sync();\n        });\n    },\n\n    /**\n     * Loads a layout.\n     *\n     * Sets the context with the given params, creates the layout based on\n     * metadata, loads the data and renders it. It also disposes the previous\n     * displayed layout. This method is called by the router when the route is\n     * changed.\n     *\n     * @memberOf module:Core/Controller\n     * @param {Object} params Properties to set to the context and used to\n     *   determine the layout to load.\n     * @param {string} params.layout The layout name. It will be used to grab\n     *   the corresponding metadata.\n     * @param {string} params.module The module the layout belongs to.\n     * @param {boolean} [params.skipFetch=false] If `true`, do not fetch the\n     *   data.\n     * @instance\n     */\n    loadView: function(params) {\n        var oldLayout = this.layout;\n\n        //FIXME SC-5124 will trigger 'app:view:load', and add a deprecation warning for 'app:view:change'.\n        if (!SUGAR.App.triggerBefore('app:view:change') || !SUGAR.App.triggerBefore('app:view:load')) {\n            return;\n        }\n\n        // Reset context and initialize it with new params\n        this.context.clear({silent: true});\n        this.context.set(params);\n\n        // Prepare model and collection\n        this.context.prepare();\n        // Create an instance of the layout and bind it to the data instance\n        this.layout = ViewManager.createLayout({\n            name: params.layout,\n            module: params.module,\n            context: this.context\n        });\n\n        if (oldLayout && oldLayout.el) {\n            // Take out the previous layout element from the content container,\n            // and then keep it in the document fragment\n            // in order to destroy jQuery plugin safe.\n            var oldLayoutEl = document.createDocumentFragment();\n            oldLayoutEl.appendChild(oldLayout.el);\n        }\n\n        // Render the layout to the main element\n        // Since the previous element is already gone,\n        // .append is better way because .html requires\n        // additional cost for .empty().\n        SUGAR.App.$contentEl.append(this.layout.$el);\n\n        //initialize subcomponents in the layout\n        this.layout.initComponents();\n\n        // Fetch the data, the layout will be rendered when fetch completes\n        if (!params || (params && !params.skipFetch)) {\n            this.layout.loadData();\n        }\n\n        // Render the layout with empty data\n        this.layout.render();\n\n        if (oldLayout) {\n            oldLayout.dispose();\n        }\n\n        SUGAR.App.trigger('app:view:change', params.layout, params);\n    },\n\n    /**\n     * Creates, renders, and registers within the app additional components.\n     *\n     * @memberOf module:Core/Controller\n     * @param {Object} components The components to load. They will\n     *  be created using metadata view definitions and rendered on the page.\n     *  The components objects are cached in the the global `SUGAR.App` variable\n     *  under the `additionalComponents` property.\n     * @instance\n     */\n    loadAdditionalComponents: function(components) {\n        if (!_.isEmpty(SUGAR.App.additionalComponents)) {\n            SUGAR.App.logger.error('`Controller.loadAdditionalComponents` has already been called. ' +\n                'It can not be called twice.');\n            return;\n        }\n\n        SUGAR.App.additionalComponents = {};\n        _.each(components, function(component, name) {\n            if (component.target) {\n                var $el = this.$(component.target);\n                if (!$el.get(0)) {\n                    SUGAR.App.logger.error('Unable to place additional component \"' + name + '\": the target specified ' +\n                        'does not exist.');\n                    return;\n                }\n\n                if (component.layout) {\n                    SUGAR.App.additionalComponents[name] = ViewManager.createLayout({\n                        context: this.context,\n                        type: component.layout,\n                        el: $el,\n                    });\n                    SUGAR.App.additionalComponents[name].initComponents();\n                } else {\n                    SUGAR.App.additionalComponents[name] = ViewManager.createView({\n                        type: component.view || name,\n                        context: this.context,\n                        el: $el,\n                    });\n                }\n                SUGAR.App.additionalComponents[name].render();\n            } else {\n                SUGAR.App.logger.error('Unable to place additional component \"' + name + '\": no target specified.');\n            }\n        }, this);\n    }\n});\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * Error manager for XHR errors.\n *\n * This module allows you to provide custom handling depending on the\n * xhr error.\n * Below is the exhaustive list of functions you can implement, with the\n * description of the error it will handle:\n *\n * ### Authentication error handler functions\n *\n * OAuth2 uses 400 error to catch all authentication errors; see:\n * http://tools.ietf.org/html/draft-ietf-oauth-v2-20#section-5.2\n *\n * **handleInvalidGrantError**\n *\n * The provided authorization grant is invalid, expired, revoked, does\n * not match the redirection URI used in the authorization request, or\n * was issued to another client. Note that the server implementation\n * will override invalid_grant as needs_login as a special case (see below).\n *\n * **handleNeedLoginError**\n *\n * The server shall use this in place of invalid_grant to tell client to\n * handle error specifically as caused due to invalid credentials being\n * supplied. The reason server needs to use this is because an invalid_grant\n * oauth error may also be caused by invalid or expired token.\n * Using needs_login allows all clients to provide proper messaging to end\n * user without the need for extra logic.\n *\n * **handleInvalidClientError**\n *\n * Client authentication failed (e.g. unknown client, no client\n * authentication included, multiple client authentications included,\n * or unsupported authentication method).\n *\n * **handleInvalidRequestError**\n *\n * The request is missing a required parameter, includes an unsupported\n * parameter or parameter value, repeats a parameter, includes multiple\n * credentials, utilizes more than one mechanism for authenticating the\n * client, or is otherwise malformed.\n *\n * **handleUnauthorizedClientError**\n *\n * The authenticated client is not authorized to use this authorization\n * grant type.\n *\n * **handleUnsupportedGrantTypeError**\n *\n * The authorization grant type is not supported by the authorization\n * server.\n *\n * **handleInvalidScopeError**\n *\n * The requested scope is invalid, unknown, malformed, or exceeds the scope\n * granted by the resource owner.\n *\n * ### Other error handler functions.\n *\n * **handleTimeoutError**\n *\n * **handleUnspecified400Error**\n *\n * **handleUnauthorizedError**\n *\n * **handleForbiddenError**\n *\n * **handleNotFoundError**\n *\n * **handleMethodNotAllowedError**\n *\n * **handleMethodConflictError**\n *\n * **handleHeaderPreconditionFailed**\n *\n * **handleValidationError**\n *\n * **handleMethodFailure**\n *\n * **ErrorhandleServerError**\n *``\n * ### Example of usage:\n *```\n * const Handlers = {\n *     handleTimeoutError: function() {\n *         console.log('The request has timed out.')\n *     },\n *     handleServerError: function() {\n *         console.log('Something went wrong with the server, please contact\n *         your admin');\n *     }\n * }\n *\n * const ErrorHandler = _.extend(require('./error'), Handlers);\n *```\n *\n * @module Core/Error\n */\nconst Alert = require('../view/alert');\nconst Utils = require('../utils/utils');\nconst Language = require('./language');\n\n/**\n * Calls the given custom handler callback, or falls back to\n * {@link module:Core/Error#handleStatusCodesFallback the default one}\n *\n * @param {Api.HttpError} error AJAX error.\n * @param {Function} fn The custom handler callback.\n * @param {Object} params The params for the custom callback.\n * @private\n */\nfunction callCustomHandler(error, fn, params) {\n    if (fn) {\n        fn.apply(ErrorHandler, _.union([error], params || []));\n    } else {\n        ErrorHandler.handleStatusCodesFallback(error);\n    }\n};\n\n/**\n * Calls appropriate authentication error handler.\n *\n * @param {Api.HttpError} error HTTP error.\n * @param {Function} [alternativeCallback] If this does not match an\n *   expected oauth error then this callback will be called (if provided).\n * @private\n */\nfunction handleFineGrainedError(error, alternativeCallback) {\n    var handlerName = 'handle' + Utils.classify(error.code) + 'Error';\n    (ErrorHandler[handlerName] || alternativeCallback || ErrorHandler.handleStatusCodesFallback).call(ErrorHandler, error);\n};\n\n/**\n * @alias module:Core/Error\n */\nconst ErrorHandler = {\n    /**\n     * Binds a `window.onerror` callback to log error using sidecar's logger.\n     */\n    init: function() {\n        this.enableOnError();\n\n        Object.defineProperty(this, 'remoteLogging', {\n            get: function() {\n                SUGAR.App.logger.warn('`Core.Error#remoteLogging` property has been deprecated since 7.10.');\n                return false;\n            },\n            configurable: true\n        });\n    },\n\n    /**\n     * Sets properties and binds a `window.onerror` callback to log error using\n     * the logger.\n     *\n     * @param {Object} opts A hash of options.\n     * @deprecated since 7.10.\n     */\n    initialize: function(opts) {\n        SUGAR.App.logger.warn('The function `Core.Error#initialize` is deprecated in 7.10. ' +\n        'Please do not use it. The function initializing the component is `Core.Error#init`');\n        opts = opts || {};\n\n        this.statusCodes = (opts.statusCodes) ? _.extend(this.statusCodes, opts.statusCodes) : this.statusCodes;\n\n        if (!opts.disableOnError) {\n            this.enableOnError();\n        }\n    },\n\n    /**\n     * A hashmap of status codes mapping to their handler functions.\n     *\n     * Each status code calls a specific method that you need to implement if\n     * you want a custom handling. If you do not implement it,\n     * {@link module:Core/Error.handleStatusCodesFallback} will be used.\n     *\n     * @class\n     * @name Core/Error.StatusCodes\n     */\n\n    /**\n     * @type {Core/Error.StatusCodes}\n     */\n    statusCodes: {\n        /**\n         * If the error has `textStatus` property set to `timeout`, calls\n         * `handleTimeoutError`.\n         *\n         * @param {Api.HttpError} error The AJAX error.\n         * @param {Data/Bean|Data/BeanCollection} model The model or collection\n         *   on which the request was made.\n         * @param {Object} options A hash of options.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '0': function(error, model, options) {\n            if (error.textStatus === 'timeout') {\n                callCustomHandler(error, this.handleTimeoutError);\n            } else {\n                // TODO: Need invalid url, and any other possible status: 0 conditions\n                this.handleStatusCodesFallback(error, model, options);\n            }\n        },\n\n        /**\n         * Authentication or bad request error.\n         *\n         * Calls one of the authentication errors handlers, based on the error\n         * code. Please check the list of possible handlers function in the\n         * description of this module. If no authentication error handler is\n         * implemented, it calls `handleUnspecified400Error`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '400': function(error) {\n            handleFineGrainedError(error, this.handleUnspecified400Error);\n        },\n\n        /**\n         * Unauthorized.\n         *\n         * Calls one of the authentication errors handlers, based on the error\n         * code. Please check the list of possible handlers function in the\n         * description of this module. If no authentication error handler is\n         * implemented, it calls `handleUnauthorizedError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         */\n        '401': function(error) {\n            handleFineGrainedError(error, this.handleUnauthorizedError);\n        },\n\n        /**\n         * Forbidden.\n         *\n         * Calls `handleForbiddenError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '403': function(error) {\n            callCustomHandler(error, this.handleForbiddenError);\n        },\n\n        /**\n         * Not found.\n         *\n         * Calls `handleNotFoundError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '404': function(error) {\n            callCustomHandler(error, this.handleNotFoundError, _.rest(arguments));\n        },\n\n        /**\n         * Method not allowed.\n         *\n         * Calls `handleMethodNotAllowedError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '405': function(error) {\n            callCustomHandler(error, this.handleMethodNotAllowedError);\n        },\n\n        /**\n         * Conflict.\n         *\n         * Calls `handleMethodConflictError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '409': function(error) {\n            callCustomHandler(error, this.handleMethodConflictError);\n        },\n\n        /**\n         * Precondition failed.\n         *\n         * Calls `handleHeaderPreconditionFailed`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '412': function(error) {\n            callCustomHandler(error, this.handleHeaderPreconditionFailed);\n        },\n\n        /**\n         * Precondition failure.\n         *\n         * Clients can optionally sniff the error property in JSON for finer\n         * grained determination; the following values may be:\n         * missing_parameter, invalid_parameter\n         *\n         * Calls `handleValidationError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @param {Data/Bean|Data/BeanCollection} model The model or collection\n         *   on which the request was made.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '422': function(error, model) {\n            error.model = model;\n            callCustomHandler(error, this.handleValidationError, _.rest(arguments));\n        },\n\n        /**\n         * Request Method Failure.\n         *\n         * Calls `handleMethodFailureError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @param {Data/Bean|Data/BeanCollection} model The model or\n         *   collection on which the request was made.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '424': function(error, model) {\n            error.model = model;\n            callCustomHandler(error, this.handleMethodFailureError, _.rest(arguments));\n        },\n\n        /**\n         * Internal server error\n         *\n         * Calls `handleServerError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '500': function(error) {\n            callCustomHandler(error, this.handleServerError);\n        },\n\n        /**\n         * Bad Gateway\n         *\n         * Calls `handleServerError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '502': function(error) {\n            callCustomHandler(error, this.handleServerError);\n        },\n\n        /**\n         * Service Unavailable\n         *\n         * Calls `handleServerError`.\n         *\n         * @param {Api.HttpError} error HTTP error.\n         * @memberOf Core/Error.StatusCodes\n         */\n        '503': function(error) {\n            callCustomHandler(error, this.handleServerError);\n        }\n    },\n\n    /**\n     * Maps validator names to error labels.\n     */\n    errorName2Keys: {\n        'maxValue': 'ERROR_MAXVALUE',\n        'minValue': 'ERROR_MINVALUE',\n        'maxLength': 'ERROR_MAX_FIELD_LENGTH',\n        'minLength': 'ERROR_MIN_FIELD_LENGTH',\n        'datetime': 'ERROR_DATETIME',\n        'required': 'ERROR_FIELD_REQUIRED',\n        'email': 'ERROR_EMAIL',\n        'primaryEmail': 'ERROR_PRIMARY_EMAIL',\n        'duplicateEmail': 'ERROR_DUPLICATE_EMAIL',\n        'number': 'ERROR_NUMBER',\n        'isBefore': 'ERROR_IS_BEFORE',\n        'isAfter': 'ERROR_IS_AFTER',\n        'greaterThan': 'ERROR_IS_GREATER_THAN',\n        'lessThan': 'ERROR_IS_LESS_THAN'\n    },\n\n    /**\n     * Returns error strings given a error key and context.\n     *\n     * @param {string} errorKey The error key we want to get the error message\n     *   from.\n     * @param {Object} [context] The template context to pass to the\n     *   string/template.\n     * @return {string} The i18n error string associated with the given\n     *   `errorKey` and filled in by the `context`.\n     */\n    getErrorString: function(errorKey, context) {\n        var module = context.module || '';\n        return Language.get(this.errorName2Keys[errorKey] || errorKey, module, context);\n    },\n\n    /**\n     * Handles validation errors.\n     *\n     * By default this just pipes the error to the error logger.\n     *\n     * @param {Api.HttpError} error The AJAX error.\n     */\n    handleValidationError: function(error) {\n        var errors = error.responseText;\n        // TODO: Right now doesn't stringify the error, add it in when we finalize the\n        // structure of the error.\n\n        // TODO: Likely, we'll have a 'Saving...' alert, etc., and so we just dismiss all\n        // since we don't know the alert key. Ostensibly, validation errors will show\n        // field by field; so feedback will be provided as appropriate.\n        Alert.dismissAll();\n\n        _.each(errors, function(fieldError, key) {\n            var errorMsg = '';\n            if (_.isObject(fieldError)) {\n                _.each(fieldError, function(result, fieldName) {\n                    errorMsg += '(Message) ' + this.getErrorString(fieldName, result) + '\\n';\n                }, this);\n            } else {\n                errorMsg = fieldError;\n            }\n            SUGAR.App.logger.debug(\"validation failed for field `\" + key + \"`:\\n\" + errorMsg);\n        }, this);\n    },\n\n    /**\n     * Handles http errors returned from AJAX calls.\n     *\n     * This method calls the relevant handler function using\n     * {Core.Error#statusCodes}\n     *\n     * @param {Api.HttpError} error AJAX error.\n     * @param {Data/Bean|Data/BeanCollection} model The model or collection on\n     *   which the request was made.\n     * @param {Object} options A hash of options.\n     */\n    handleHttpError: function(error, model, options) {\n        // We use `ErrorHandler` instead of `this` because this function is set to\n        // `Api.defaultErrorHandler`. We want to make sure the scope is always\n        // the Core.Error object.\n        if (ErrorHandler.statusCodes[error.status]) {\n            ErrorHandler.statusCodes[error.status].call(ErrorHandler, error, model, options);\n        } else {\n            // TODO: Default catch all error code handler\n            // Temporarily going to the handleStatusCodesFallback handler but will probably need\n            // to go to a sensible \"all other errors\" type of handler.\n            ErrorHandler.handleStatusCodesFallback(error);\n        }\n    },\n\n    /**\n     * Handles unhandled javascript exceptions which are reported via\n     * `window.onerror` event.\n     *\n     * The default implementation logs the error with level `FATAL`.\n     *\n     * @param {string} message Error message.\n     * @param {string} url URL of script.\n     * @param {string} line Line number of script.\n     */\n    handleUnhandledError: function(message, url, line) {\n        SUGAR.App.logger.fatal(message + ' at ' + url + ' on line ' + line);\n    },\n\n    /**\n     * This is the fallback error handler if the custom status code specific\n     * handler is not implemented. To define custom error handlers, you should\n     * include your script from index page and do something like:\n     *\n     * @param {string} error The AJAX error.\n     */\n    handleStatusCodesFallback: function(error) {\n        SUGAR.App.logger.error(error.toString());\n    },\n\n    /**\n     * Handles render related errors.\n     *\n     * @param {View/Component} component The component that triggered\n     *   the error.\n     * @param {string} method The method that caught the error. Example:\n     *   `_renderHtml`.\n     * @param {string} [additionalInfo] Any additional information relevant\n     *   for that particular method.\n     */\n    handleRenderError: function(component, method, additionalInfo) {\n        var id = 'render_error_' + component.module + '_' + component.name;\n        var level = 'error'; //Default message level\n        var title;\n        var messages;\n        // TODO: Add corresponding language agnostic app strings for title/message and use that instead.\n        switch (method) {\n            case '_renderHtml':\n                title = Language.get('ERR_RENDER_FAILED_TITLE');\n                messages = [Language.get('ERR_RENDER_FAILED_MSG'),\n                            Language.get('ERR_CONTACT_TECH_SUPPORT')];\n                break;\n            case '_renderField':\n                title = Language.get('ERR_RENDER_FIELD_FAILED_TITLE');\n                messages = [Utils.formatString(Language.get('ERR_RENDER_FIELD_FAILED_MSG'),\n                    [additionalInfo.name]), Language.get('ERR_CONTACT_TECH_SUPPORT')];\n                break;\n            case 'view_render_denied':\n                title = Language.get('ERR_NO_VIEW_ACCESS_TITLE');\n                level = 'warning';  // This isn't an application error, this is ACL enforcement.\n                var module = Language.getModuleName(component.module, {plural: true});\n                messages = [Utils.formatString(Language.get('ERR_NO_VIEW_ACCESS_MSG'),[module])];\n                break;\n            case 'layout_render':\n                title = Language.get('ERR_LAYOUT_RENDER_TITLE');\n                messages = [Language.get('ERR_LAYOUT_RENDER_MSG')];\n                break;\n            default:\n                // This shouldn't happen\n                title = Language.get('ERR_GENERIC_TITLE');\n                messages = [Language.get('ERR_INTERNAL_ERR_MSG'),\n                            Language.get('ERR_CONTACT_TECH_SUPPORT')];\n                SUGAR.App.logger.error('handleRenderError called for render error caught in ' + method + ', but we have no corresponding handler!');\n                break;\n        }\n\n        Alert.show(id, {\n            level: level,\n            title: title,\n            messages: messages\n        });\n    },\n\n    /**\n     * Binds a custom handler for `window.onerror` event. Does nothing if it has\n     * already been overloaded.\n     *\n     * Calls the provided `handler`, or falls back to\n     * {Core.Error#handleUnhandledError} and then calls the original handler\n     * if defined.\n     *\n     * @param {Function} handler Callback function to call on error.\n     * @param {Object} context The scope of the handler.\n     * @return {boolean} `false` if onerror has already been overloaded.\n     */\n    enableOnError: function(handler, context) {\n        var originalHandler;\n        var self = this;\n\n        if (this.overloaded) {\n            return false;\n        }\n\n        originalHandler = window.onerror;\n\n        window.onerror = function(mesg, url, line) {\n            if (handler) {\n                handler.call(context);\n            } else {\n                self.handleUnhandledError(mesg, url, line);\n            }\n\n            if (originalHandler) {\n                originalHandler();\n            }\n        };\n\n        this.overloaded = true;\n\n        return true;\n    },\n\n\n    /**\n     * Inserts call stack string to Error message.\n     * `window.onerror` handler is not provided with Error object\n     * (4th argument) [in Safari][1].\n     *\n     * [1]: https://bugs.webkit.org/show_bug.cgi?id=55092\n     *\n     * @param {string|Error} error Error text or Error object.\n     * @param {boolean} [skipThrow=false] If `true`, skips exception\n     *   raising.\n     * @return {Error} Error object with stack trace inserted into\n     *   `Error.message` property.\n     * @deprecated since 7.10.\n     */\n    throwErrorWithCallStack: function(error, skipThrow) {\n        SUGAR.App.logger.warn('The function `Core.Error#throwErrorWithCallStack` is deprecated in 7.10. ' +\n        'Please do not use it.');\n\n        if (_.isString(error)) {\n            error = new Error(error);\n        }\n\n        error.message = error.message + '; ' + error.stack;\n\n        if (skipThrow) {\n            return error;\n        }\n\n        throw error;\n    },\n\n    _callCustomHandler: function(error, fn, params) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Error#_callCustomHandler is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Error#_callCustomHandler is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return callCustomHandler(error, fn, params);\n    },\n\n    _handleFineGrainedError: function(error, alternativeCallback) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Error#_handleFineGrainedError is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Error#_handleFineGrainedError is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return handleFineGrainedError(error, alternativeCallback);\n    }\n};\n\nmodule.exports = ErrorHandler;\n\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n/**\n * Events proxy object.\n * For inter-component communications, please register your events and please\n * subscribe to your events from the events hub. This reduces coupling between\n * components.\n *\n * Usage example:\n * ```\n * const Events = require('./Events');\n * var foo = {\n *     initialize: function() {\n *         // Register the event with the events hub.\n *         Events.register('mynamespaced:event', this);\n *     },\n *     action: function() {\n *         // Broadcast your event to the events hub.\n *         // The events hub will then broadcast this event to all its subscribers.\n *         this.trigger('mynamespaced:event');\n *     }\n * }\n *\n * var bar = {\n *     initialize: function() {\n *         // Call a callback when the event is received.\n *         Events.on('mynamespaced:event', function() {\n *             alert('Event!');\n *         });\n *     }\n * }\n *```\n * @module Core/Events\n */\n\n/**\n * List of deprecated events. A warning will be shown in console when a\n * component is listening to them.\n *\n * @property {Object} _deprecated\n * @property {string} [_deprecated.message] The custom deprecation message.\n * @private\n */\nlet _deprecated = {};\n\n/**\n * @alias module:Core/Events\n */\nconst Events = _.extend({}, Backbone.Events, {\n\n    /**\n     * Registers an event with the event proxy.\n     *\n     * @param {string} event The name of the event.\n     *   A good practice is to namespace your events with a colon.\n     *   For example: `app:start`.\n     * @param {Object} context The object that will trigger the event.\n     * @param {Object} [options] Optional params.\n     * @param {boolean} [options.deprecated=false] `true` if the event is\n     *   deprecated.\n     * @param {string} [options.message] The deprecation message to log. A\n     *   default message will be triggered if not defined.\n     */\n    register: function (event, context, options) {\n        if (options && options.deprecated) {\n            _deprecated[event] = _.pick(options, 'message');\n        }\n\n        context.on(event, function() {\n            var args = [].slice.call(arguments, 0);\n            args.unshift(event);\n            this.trigger.apply(this, args);\n        }, this);\n    },\n\n    /**\n     * Unregisters an event from the event proxy.\n     *\n     * @param {Object} context Source to be cleared from.\n     * @param {string} [event] Name of the event to be cleared. If not\n     *   specified, all events registered on `context` will be cleared.\n     */\n    unregister: function(context, event) {\n        context.off(event);\n    },\n\n    /**\n     * Subscribes to global ajax events.\n     */\n    registerAjaxEvents: function() {\n        var self = this;\n\n        // First unbind then rebind\n        $(document).off(\"ajaxStop\");\n        $(document).off(\"ajaxStart\");\n\n        $(document).on(\"ajaxStart\", function(args) {\n            self.trigger(\"ajaxStart\", args);\n        });\n\n        $(document).on(\"ajaxStop\", function(args) {\n            self.trigger(\"ajaxStop\", args);\n        });\n    },\n\n    /**\n     * Wraps [Backbone.Events#on](http://backbonejs.org/#Events-on)\n     * to throw a warning if the event listened to is deprecated.\n     *\n     * @function\n     */\n    on: _.wrap(Backbone.Events.on, function (fn, name, callback, context) {\n\n        if (_.has(_deprecated, name)) {\n            var warnMessage;\n            if (_deprecated[name].message) {\n                warnMessage = _deprecated[name].message;\n            } else {\n                warnMessage = 'The global event `' + name + '` is deprecated.';\n            }\n\n            if (context) {\n                warnMessage += '\\n' + context + ' should not listen to it anymore.';\n            }\n\n            SUGAR.App.logger.warn(warnMessage);\n        }\n\n        return fn.call(this, name, callback, context);\n    }),\n});\n\nmodule.exports = Events;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Template = require('../view/template');\nconst User = require('./user');\n\n/**\n * Language Helper.\n *\n * Provides convenient functions to pull language strings out of a\n * language label cache.\n *\n * @module Core/Language\n */\n\n/**\n * Retrieves a string of a given type.\n *\n * If the label is a template, it will be compiled and executed with the\n * given `context`.\n *\n * @param {string} type Type of string pack: `app_strings`,\n *   `app_list_strings` or `mod_strings`.\n * @param {string} key Key of the string to retrieve.\n * @param {string} [module] Module the label belongs to.\n * @param {string|boolean|number|Array|Object} [context] Template context.\n * @return {string|undefined} String for the given key.\n * @private\n */\nfunction get(type, key, module, context) {\n    var str,\n        bundle = SUGAR.App.metadata.getStrings(type);\n\n    bundle = module ? bundle[module] : bundle;\n    if (!bundle || !_.isString(bundle[key])) {\n        return;\n    }\n\n    str = sanitize(bundle[key]);\n\n    if (!_.isUndefined(context) && (str.indexOf('{{') > -1)) {\n        key = 'lang.' + (module ? key + '.' + module : key);\n        var tpl = Handlebars.templates[key];\n        str = tpl ? tpl(context) : Template.compile(key, str)(context);\n    }\n    return str;\n};\n\n/**\n * Sanitizes (strips a trailing colon from) a string.\n *\n * @param {string} str String to sanitize.\n * @return {string} Sanitized string or `str` parameter if it's not a\n *   string.\n * @private\n */\nfunction sanitize(str) {\n    return (str.slice(-1) === ':') ? str.slice(0, -1) : str;\n};\n\n/**\n * The default language defined by\n * {@link #setDefaultLanguage}. Use {@link #getDefaultLanguage} to\n * retrieve this setting.\n *\n * @property {string} defaultLanguage\n * @private\n */\nlet defaultLanguage;\n\n/**\n * The language that is loaded by the app and defined by\n * {@link #setCurrentLanguage}. Use {@link #getLanguage} to retrieve\n * this setting.\n *\n * @property {string} currentLanguage\n * @private\n */\nlet currentLanguage;\n\n/**\n * @alias module:Core/Language\n */\nmodule.exports = {\n    /**\n     * The display direction for the current language.\n     *\n     * @type {string}\n     */\n    direction: 'ltr',\n\n    /**\n     * Retrieves a string for a given key.\n     *\n     * This function searches the module strings first and falls back to the\n     * app strings.\n     *\n     * If the label is a template, it will be compiled and executed with the\n     * given `context`.\n     *\n     * @param {string} key Key of the string to retrieve.\n     * @param {string|Array} [module] Module the label belongs to. If an\n     *   array is passed, it will look through each module by the given\n     *   order, returning the first string whose key is found in the\n     *   module's language strings.\n     * @param {string|boolean|number|Array|Object} [context] The template\n     *   context to pass to the template in order to populate template variables.\n     * @return {string} String for the given key or the `key` parameter if\n     *   the key is not found in language pack.\n     */\n    get: function(key, module, context) {\n        var str = this.getModString(key, module, context) ||\n            this.getAppString(key, context) ||\n            key;\n\n        return str;\n    },\n\n    /**\n     * Searches the module strings for a given key.\n     *\n     * @param {string} key Key of the string to retrieve.\n     * @param {string|Array} [module] Module the label belongs to. If an\n     *   array is passed, it will look through each module by the given\n     *   order, returning the first string whose key is found in the\n     *   module's language strings.\n     * @param {string|boolean|number|Array|Object} [context] The template\n     *   context to pass to the template in order to populate template variables.\n     * @return {string|undefined} String for the given key from the module\n     *   language strings. `undefined` if not found.\n     */\n    getModString: function(key, module, context) {\n        var moduleString;\n\n        if (_.isArray(module)) {\n            _.find(module, function(moduleName) {\n                moduleString = get('mod_strings', key, moduleName, context);\n                return !_.isEmpty(moduleString);\n            }, this);\n        } else {\n            moduleString = get('mod_strings', key, module, context);\n        }\n\n        return moduleString;\n    },\n\n    /**\n     * Retrieves an application string for a given key.\n     *\n     * @param {string} key Key of the string to retrieve.\n     * @param {string|boolean|number|Array|Object} [context] The template\n     *   context to pass to the string/template in order to populate template\n     *   variables.\n     * @return {string|undefined} String for the given key from language\n     *   strings. `undefined` if not found.\n     */\n    getAppString: function(key, context) {\n        return get('app_strings', key, null, context);\n    },\n\n    /**\n     * Retrieves an application list string or object.\n     *\n     * @param {string} key Key of the string to retrieve.\n     * @return {string|Object} String or object for the given key. If key\n     *   is not found, an empty object is returned.\n     */\n    getAppListStrings: function(key) {\n        var list = SUGAR.App.metadata.getStrings('app_list_strings')[key] || {};\n        if (_.isArray(list)) {\n            var obj = {};\n            _.each(list, function(tuple) {\n                if (_.isString(tuple)) {\n                    obj[tuple] = tuple;\n                } else if (_.isArray(tuple) && tuple.length === 2) {\n                    obj[tuple[0]] = tuple[1];\n                }\n            });\n            list = obj;\n        }\n        return list;\n    },\n\n    /**\n     * Gets the translated module name (by default, in singular form).\n     *\n     * Falls back to the plural form if the singular form is not found, and\n     * eventually falls back to the `module` passed in.\n     *\n     * @param {string} module The module.\n     * @param {Object} [options] Options object for `getModuleName`.\n     * @param {boolean} [options.plural] Returns the plural form if `true`,\n     *   singular otherwise.\n     * @param {string} [options.defaultValue] Value to be returned if the\n     *   module language string is not found.\n     * @return {string} The module name.\n     */\n    getModuleName: function(module, options) {\n        options = options || {};\n        var name = !options.plural &&\n            this.getModString('LBL_MODULE_NAME_SINGULAR', module) ||\n            this.getModString('LBL_MODULE_NAME', module);\n\n        if (!name && !_.isUndefined(options.defaultValue)) {\n            name = this.get(options.defaultValue);\n        }\n\n        return name || module;\n    },\n\n    /**\n     * Returns the correct ordered array of strings for a given list.\n     *\n     * @param {string} listName Name of the strings array to retrieve.\n     * @return {Array} The array of strings.\n     */\n    getAppListKeys: function(listName) {\n        var keys = [],\n            list = SUGAR.App.metadata.getStrings('app_list_strings')[listName] || {};\n        if (_.isArray(list)) {\n            _.each(list, function(tuple) {\n                if (tuple.length === 2) {\n                    keys.push(tuple[0]);\n                }\n            });\n        } else if (_.isObject(list)) {\n            keys = _.keys(list);\n        }\n        return keys;\n    },\n\n    /**\n     * Gets the IETF's BCP 47 language code for the current app language.\n     *\n     * @return {string} The IETF's BCP 47 language code of the default language.\n     *   (e.g. `en_us`, `pt_PT`). Note: We use `_` instead of `-`.\n     */\n    getLanguage: function() {\n        return currentLanguage;\n    },\n\n    /**\n     * Sets app language code and syncs it with the server.\n     *\n     * @param {string} language language code such as `en_us`.\n     * @param {Function} [callback] Callback function to be called on\n     *   language set completes.\n     * @param {Object} [options] Extra options.\n     * @param {boolean} [options.noSync=false] `true` if you don't need to\n     *   fetch /metadata.\n     * @param {boolean} [options.noUserUpdate=false] `true` if you don't need\n     *   to update /me.\n     */\n    setLanguage: function(language, callback, options) {\n        var self = this;\n        options = options || {};\n        _.each(Handlebars.templates, function(value, key) {\n            if (key.indexOf('lang.') === 0) {\n                delete Handlebars.templates[key];\n            }\n        });\n        if (options.noSync === true) {\n            this.updateLanguage(language);\n            return;\n        }\n\n        SUGAR.App.sync({\n            callback: function(err) {\n                var langHasChanged = false;\n                if (!err) {\n                    self.updateLanguage(language);\n                    langHasChanged = !SUGAR.App.api.isAuthenticated() && !options.noUserUpdate;\n                    SUGAR.App.cache.set('langHasChanged', langHasChanged);//persist even after reloads\n                }\n                if (callback) callback(err);\n            },\n            getPublic: !SUGAR.App.api.isAuthenticated(),\n            noUserUpdate: options.noUserUpdate || false,\n            language: language,\n            forceRefresh: true,  // Needed to make sure new labels are injected\n            metadataTypes: ['labels']\n        });\n    },\n\n    /**\n     * Updates language code and the display direction.\n     *\n     * @param {string} language Language code as defined in Sugar.\n     *   (e.g. `en_us`, `pt_PT`)\n     */\n    updateLanguage: function(language) {\n        SUGAR.App.cache.set('lang', language);\n        User.setPreference('language', language);\n        this.setCurrentLanguage(language);\n        SUGAR.App.trigger('app:locale:change', language);\n\n        // Add the current language for improved screen reader accessibility\n        if (document && document.documentElement) {\n            var currentLanguageForDom = _.first(language.split('_'));\n            // Use the simple language code as per HTML qualifications\n            document.documentElement.lang = currentLanguageForDom;\n        }\n    },\n\n    /**\n     * Sets the app default language to the language specified. Use\n     * {@link #getDefaultLanguage} to get the current language.\n     *\n     * @param {string} language The IETF's BCP 47 language code to set the\n     *   default language to. (e.g. `en_us`, `pt_PT`).\n     *   Note: We use `_` instead of `-`.\n     */\n    setDefaultLanguage: function(language) {\n        defaultLanguage = language;\n    },\n\n    /**\n     * Gets the default language set in the system.\n     *\n     * @return {string} The IETF's BCP 47 language code of the default language.\n     *   (e.g. `en_us`, `pt_PT`). Note: We use `_` instead of `-`.\n     */\n    getDefaultLanguage: function() {\n        return defaultLanguage;\n    },\n\n    /**\n     * Sets the current language to the language specified. Use\n     * {@link #getLanguage} to get the current language.\n     *\n     * Calls {@link #setDirection} with the new language code.\n     *\n     * @param {string} language The language to set the current language to.\n     */\n    setCurrentLanguage: function(language) {\n        currentLanguage = language;\n        this.setDirection(language);\n    },\n\n    /**\n     * Sets the {@link #direction} to the desired direction according to\n     * the language code specified.\n     *\n     * @fires 'lang:direction:change' if the language direction has\n     *   changed.\n     *\n     * @param {string} lang Language code that the direction is based on.\n     */\n    setDirection: function(lang) {\n        //FIXME: SC-3358 Should be getting the RTL languages from metadata.\n        var rtlLanguages = ['he_IL', 'ar_SA'],\n            isRTL = _.contains(rtlLanguages, lang),\n            prevDirection = this.direction;\n\n        this.direction = isRTL ? 'rtl' : 'ltr';\n\n        if (this.direction !== prevDirection) {\n            SUGAR.App.trigger('lang:direction:change');\n        }\n    },\n\n    _get: function(type, key, module, context) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Language#_get is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Language#_get is a private method that you should not access to. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return get(type, key, module, context);\n    },\n\n    _sanitize: function(str) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.Language#_sanitize is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.Language#_sanitize is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return sanitize(str);\n    }\n};\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Acl = require('./acl');\nconst Events = require('./events');\nconst Template = require('../view/template');\nconst User = require('./user');\nconst Utils = require('../utils/utils');\nconst Language = require('./language');\nconst ViewManager = require('../view/view-manager');\nconst DataManager = require('../data/data-manager');\n\n// Key prefix used to identify metadata in the local storage.\nvar _keyPrefix = 'meta:';\n\n// Metadata memory cache\nvar _metadata = {};\n\n//History of md types we have loaded\nvar _mdLoaded = {};\n\n//Used to keep track if we are currently updating the metadata and prevent premature metadata validation from\n//interval functions.\nvar _syncing = false;\n\n// A set of promises that must be resolved before we can trigger the metadata:sync:complete event.\nvar externalSyncTasks = [];\n\nfunction _setHash(data, isPublic) {\n    var pKey = isPublic ? 'public:' : '';\n    SUGAR.App.cache.set(_keyPrefix + pKey + 'hash', data._hash);\n}\n\nfunction _cacheMeta(data) {\n    SUGAR.App.cache.set(_keyPrefix + 'data', data);\n}\n\nfunction _getCachedMeta() {\n    return SUGAR.App.cache.get(_keyPrefix + 'data');\n}\n\n// Adds the language strings to the server metadata object.\n// - serverMetadata Metadata from /metadata GET (public or not).\n// ** Note we take advantage of pass be reference thus no return\n// - labels Object which contains our language strings.\nfunction _injectLabels(serverMetadata, labels) {\n    _.each(labels, function(value, key) {\n        if (key !== '_hash') {\n            serverMetadata[key] = labels[key];\n        }\n    });\n    // meta.labels longer needed; don't want it in _metadata or cache!\n    delete serverMetadata.labels;\n}\n\n// Parses the labels property of metadata which contains\n// URL to a JSON file with our language strings.\n// - metadata Metadata returned from /metadata GET\nfunction _fetchLabels(metadata, language) {\n    if (!metadata.ordered_labels && !metadata.labels) {\n        return Promise.resolve();\n    }\n    return new Promise((r, e) => {\n        var labels;\n        var currentLanguage;\n        var langStringsUrl;\n        var userLang = User.getLanguage();\n\n        // Grab the lang strings\n        labels = metadata.ordered_labels || metadata.labels;\n\n        // Set the default language\n        Language.setDefaultLanguage(labels['default']);\n\n        // Since, at this stage, we may or may not have obtained our language yet,\n        // the labels property contains a 'default' property which we can use as a fallback.\n        if (language && labels[language]) {\n            currentLanguage = language;\n        } else if (labels[userLang]) {\n            currentLanguage = userLang;\n        } else {\n            currentLanguage = Language.getDefaultLanguage();\n            // since the user's preferred language does not exist, update it to the default language\n            if (User.id) {\n                User.updateLanguage(currentLanguage);\n            }\n        }\n\n        Language.setCurrentLanguage(currentLanguage);\n        langStringsUrl = Utils.buildUrl(labels[currentLanguage]);\n\n        SUGAR.App.api.call('read', langStringsUrl, null, {\n            success: function(labelsData) {\n                // In case server is not set up to serve mime-type correctly on .json files,\n                // e.g. honey-b seems to be misconfigured (probably a \"popular misconfiguration\")\n                try {\n                    labelsData = _.isString(labelsData) ? JSON.parse(labelsData) : labelsData;\n                    // Injects lang strings in server metadata. Must do this before the call to self.set in\n                    // case it's overridden by a client (bad!) which expects all meta properties in metadata.\n                    _injectLabels(metadata, labelsData);\n                }\n                catch (ex) {\n                    SUGAR.App.logger.fatal('Failed to parse labels data: ' + ex);\n                    return e({\n                        code: 'sync_failed',\n                        label: 'ERR_SYNC_FAILED'\n                    });\n                }\n\n                r(labelsData);\n            },\n            error: function(err) {\n                //Force a sync fail to prevent possible infinite loops\n                err.code = 'sync_failed';\n                err.label = 'ERR_SYNC_FAILED';\n                e(err);\n            }\n        });\n    })\n}\n\n// Initializes custom layouts/views templates and controllers\nfunction _initCustomComponents(module, moduleName) {\n    var self = this;\n    var platforms = (SUGAR.App.config.platform !== 'base') ? ['base', SUGAR.App.config.platform] : ['base'];\n\n    _.each({'layout': 'layout', 'view': 'view', 'fieldTemplate': 'field', 'data': 'data'}, function(type, key) {\n\n        // Order and initialize controllers. If this metadata is separated by platform, we need to\n        // sort each extended type, but, also take in to consideration the \"platform weighting\" of\n        // said type (hence, 'base' is always first platform!). Controllers are now only sent via jssource.\n        if (self._metaTypeIsSeparatedByPlatform(module, key, platforms)) {\n            _.each(platforms, function(platform) {\n                var components = module[key + 's'][platform];\n                self._sortAndDeclareComponents(components, type, moduleName, platform);\n            });\n        }\n\n        // Next pull any templates\n        _.each(module[key + 's'], function(def, name) {\n            if (type === 'view' && def.templates) {\n                _.each(def.templates, function(tplSource, tplName) {\n                    var force = (name === tplName);\n                    tplName = force ? tplName : name + '.' + tplName;\n                    Template.setView(tplName, moduleName, tplSource, true);\n                });\n            }\n            if (type === 'layout' && def.templates) {\n                _.each(def.templates, function(tplSource, key) {\n                    key = (name === key) ? key : name + '.' + key;\n                    Template.setLayout(key, moduleName, tplSource, true);\n                });\n            }\n            if (type === 'field' && def.templates) {\n                _.each(def.templates, function(template, view) {\n                    Template.setField(name, view, moduleName, template, true);\n                });\n            }\n        });\n    }, this);\n}\n\n/**\n * The metadata manager is responsible for parsing and returning various\n * metadata to components that request it.\n *\n * @module Core/MetadataManager\n */\nmodule.exports = {\n\n    /**\n     * Map of fields types.\n     *\n     * Specifies correspondence between field types and field widget types.\n     *\n     * @type {Object}\n     */\n    fieldTypeMap: {\n        varchar: 'text',\n        datetime: 'datetimecombo',\n        multienum: 'enum',\n        text: 'textarea',\n        decimal: 'float'\n    },\n\n    /**\n     * Patches view fields definitions.\n     *\n     * @param {string} moduleName The module name.\n     * @param {Object} module The module definition object.\n     * @return {Object} The patched module definition.\n     * @private\n     */\n    _patchMetadata: function(moduleName, module) {\n        if (!module || module._patched === true) {\n            return module;\n        }\n\n        _.each(module.views, function(view) {\n            if (view.meta) {\n                _.each(view.meta.panels, function(panel) {\n                    panel.fields = this._patchFields(moduleName, module, panel.fields);\n                }, this);\n            }\n        }, this);\n\n        _.each(module.dropdownViews, function(view) {\n            _.each(view, function(field) {\n                _.each(field, function(value) {\n                    if (value.meta) {\n                        _.each(value.meta.panels, function(panel) {\n                            panel.fields = this._patchFields(moduleName, module, panel.fields);\n                        }, this);\n                    }\n                }, this);\n            }, this);\n        }, this);\n\n        module._patched = true;\n        return module;\n    },\n\n    _patchFields: function(moduleName, module, fields) {\n        var self = this;\n        _.each(fields, function(field, fieldIndex) {\n            var name = _.isString(field) ? field : field.name;\n            var fieldDef = module.fields[name];\n\n            if (field.fields) {\n                field.fields = self._patchFields(moduleName, module, field.fields);\n                return;\n            }\n            if (field.subfields) {\n                field.subfields = self._patchFields(moduleName, module, field.subfields);\n                return;\n            }\n\n            if (!_.isEmpty(fieldDef)) {\n                // Create a definition if it doesn't exist\n                if (_.isString(field)) {\n                    field = { name: field };\n                }\n\n                // Flatten out the viewdef, i.e. put 'displayParams' onto the viewdef\n                // TODO: This should be done on the server-side on my opinion\n\n                if (_.isObject(fieldDef.displayParams)) {\n                    _.extend(field, fieldDef.displayParams);\n                }\n\n                if (_.isObject(field.displayParams)) {\n                    _.extend(field, field.displayParams);\n                    delete field.displayParams;\n                }\n\n                // Assign type\n                field.type = field.type || fieldDef.custom_type || fieldDef.type || 'base';\n                // Patch type\n                field.type = self.fieldTypeMap[field.type] || field.type;\n                // Patch label\n                field.label = field.label || fieldDef.vname || field.name;\n\n                fields[fieldIndex] = field;\n            }\n            else {\n                // patch filler string fields to empty base fields of detail view\n                if (field === '') {\n                    field = {\n                        view: 'detail'\n                    };\n                    fields[fieldIndex] = field;\n                }\n                // Ignore view fields that don't have module field definition\n            }\n\n        }, this);\n        return fields;\n    },\n\n    /**\n     * Sorts components in the order they should be declared as classes. This is\n     * required since a parent widget class must likewise be declared before a\n     * child that depends on it.\n     *\n     * @param {string} type Metadata type. e.g. field, view or layout.\n     * @param {Object} components List of components with their controller. Keys\n     *   are component names, values are objects containing the controller\n     *   object.\n     * @param {string} module The module name.\n     * @return {Array} Sorted components\n     * @private\n     */\n    _sortControllers: function(type, components, module) {\n        var updated = {}, nameMap = {}, entries = {},\n            updateWeights = function(entry) {\n                var controller = entry.controller;\n\n                // `base` will always be first\n                if (entry.type === 'base') {\n                    entries['Base' + Utils.capitalize(type)].weight = -99999;\n                }\n\n                // Here we decrement the weight of any extended components. Note, that if sorting platform\n                // specific components (e.g. portal), and one \"extends from\" a base component, that parent\n                // will have already been declared since _sortControllers first gets called with base components\n                if (_.isObject(controller) && _.isString(controller.extendsFrom) &&\n                    entries[controller.extendsFrom] && !updated[controller.extendsFrom]) {\n                    // Negative weights as we want to load those first\n                    entries[controller.extendsFrom].weight--;\n                    updated[controller.extendsFrom] = true;\n                    updateWeights(entries[controller.extendsFrom]);\n                }\n            };\n\n        // Start by creating a mapping from short name to final class name\n        // and precompiling all the controllers that are strings\n        _.each(components, function(entry, name) {\n            if (entry.controller) {\n                var controller = entry.controller,\n                    className = (module || '') + Utils.capitalizeHyphenated(name) + Utils.capitalize(type);\n\n                nameMap[className] = name;\n\n                if (_.isString(controller)) {\n                    try {\n                        controller = eval(\"[\" + controller + \"][0]\"); // jshint ignore:line\n                    } catch (e) {\n                        SUGAR.App.logger.error('Failed to eval view controller for ' + className + ': ' + e + ':\\n' + entry.controller);\n                    }\n                } else {\n                    /*\n                     * To create a layout or a view in a layout definition metadata file, the rules are:\n                     *     the name defines which metadata to use\n                     *     the type defines which js controller to use\n                     */\n                    // Log warnings when controllers for layouts/views have nothing else but \"extendsFrom\"\n                    var emptyController = type !== 'field' &&\n                        Object.getOwnPropertyNames(controller).length === 1 &&\n                        controller.hasOwnProperty('extendsFrom');\n                    if (emptyController) {\n                        SUGAR.App.logger.warn('Instead of creating an empty js controller `' + className +\n                            '` and specify the parent with extendsFrom, please use `type` property in the metadata `' + name +\n                            '`, to specify controller to use. It will allow you to delete your empty controllers and save memory.');\n                    }\n                }\n\n                entries[className] = {\n                    type: name,\n                    controller: controller,\n                    weight: 0\n                };\n            }\n        });\n\n        // Replace standard base class with custom one if it exists\n        _.each(entries, function(entry, className) {\n            var controller = entry.controller,\n                customExtendsFrom;\n            if (_.isObject(controller) && _.isString(controller.extendsFrom)) {\n                customExtendsFrom = 'Custom' + controller.extendsFrom;\n                if (customExtendsFrom in entries && className != customExtendsFrom) {\n                    controller.extendsFrom = customExtendsFrom;\n                }\n            }\n        });\n\n        //Next calculate all the weights\n        _.each(entries, function(entry) {\n            updated = {};\n            updateWeights(entry);\n        });\n\n        return _.sortBy(entries, 'weight');\n    },\n\n    /**\n     * Helper to sort and declare components.\n     *\n     * @param {Object} components List of components with their controller.\n     *   Keys are component names and values are objects containing the\n     *   controller object.\n     * @param  {string} type Type of component. e.g. view, field, etc.\n     * @param  {string} moduleName The module name.\n     * @param  {string} platform Platform name.\n     * @private\n     */\n    _sortAndDeclareComponents: function(components, type, moduleName, platform) {\n        var entries, self = this;\n\n        if (!_.isUndefined(components) && components) {\n            entries = self._sortControllers(type, components, moduleName);\n            if (type === 'data') {\n                var model, collection;\n                _.each(entries, function(entry) {\n                    if (entry.type === 'model') {\n                        model = entry.controller;\n                    } else if (entry.type === 'collection') {\n                        collection = entry.controller;\n                    }\n\n                });\n                DataManager.declareModelClass(moduleName, null, platform, model);\n                DataManager.declareCollectionClass(moduleName, platform, collection);\n            }\n            else {\n                _.each(entries, function(entry) {\n                    ViewManager.declareComponent(type, entry.type, moduleName, entry.controller, true, platform);\n                });\n            }\n        }\n    },\n\n    /**\n     * Helper to determine if the metadata type is separated by platforms\n     * e.g. <DATAOBJ>.views.portal.record.controller.\n     *\n     * @param {Object} data The object to check.\n     * @param {string} type The type of component to check. e.g 'view', 'field'\n     *   or 'layout'\n     * @param {Array} platforms List of currently loaded platforms.\n     *   e.g. ['base','portal']\n     * @return {boolean} Indicating whether or not this meta type is separated\n     *   by platform type\n     * @private\n     */\n    _metaTypeIsSeparatedByPlatform: function(data, type, platforms) {\n        if (!_.isUndefined(data[type + 's'])) {\n            // Iterate all possible platforms searching if meta type has a platform key\n            for (var i = 0; i < platforms.length; i++) {\n                if (!_.isUndefined(data[type + 's'][platforms[i]])) {\n                    // Edge case: we have a field.base and might eventually have view.base etc.\n                    // (the field is actually named 'base'!) we're instead looking for: fields.base.x.controller\n                    if (_.isUndefined(data[type + 's'][platforms[i]].controller)) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    },\n\n    /**\n     * Creates the component classes respecting inheritance prototype chain.\n     *\n     * @param {Object} data The data object containing the classes to declare.\n     * @private\n     */\n    _declareClasses: function(data) {\n        // Base components are always loaded first (so ordering of the following array matters!).\n        var self = this,\n            platforms = (SUGAR.App.config.platform !== 'base') ? ['base', SUGAR.App.config.platform] : ['base'];\n\n        // Our root level metadata views/fields/layouts do not have separate platforms (whereas our\n        // generated jssource controllers are separated by platform). Today, only jssource has controllers.\n        // Declare field, view, layout classes that have custom controllers\n        _.each(['field', 'view', 'layout', 'data'], function(type) {\n            var components;\n\n            // Our root level metadata views/fields/layouts are not separated by platforms (whereas the\n            // \"generated jssource controllers\" are). Today, only jssource has controllers.\n            if (self._metaTypeIsSeparatedByPlatform(data, type, platforms)) {\n                // Components of each platform are sorted amongst themselves. Base MUST be first (as defined in\n                // our platforms list above). This way, all base components are guaranteed to be initialized first.\n                _.each(platforms, function(platform) {\n                    components = data[type + 's'][platform];\n                    self._sortAndDeclareComponents(components, type, null, platform);\n                }, this);\n            }\n        }, this);\n\n        // Patch module metadata, compile templates, and declare components for custom layouts and views\n        _.each(data.modules, function(entry, module) {\n            _initCustomComponents.call(this, entry, module);\n        }, this);\n    },\n\n    /**\n     * Gets metadata for all modules.\n     *\n     * @return {Object} Metadata for all modules.\n     */\n    getModules: function() {\n        return _metadata.modules;\n    },\n\n    /**\n     * Gets the list of module names that need to be hidden in subpanels.\n     *\n     * @return {Object} Collection of module names that are hidden in subpanels.\n     */\n    getHiddenSubpanels: function() {\n        return _metadata.hidden_subpanels;\n    },\n\n    /**\n     * Gets module metadata.\n     *\n     * @param {string} module The module name.\n     * @param {string} [type] Metadata type. e.g 'fields', 'layouts', etc.\n     * @return {Object} Module metadata of specific type if type is\n     *   specified. Otherwise, module's overall metadata.\n     */\n    getModule: function(module, type) {\n        var metadata = this.getModules();\n        if (metadata) metadata = metadata[module];\n        if (metadata && type) metadata = metadata[type];\n        return metadata;\n    },\n\n    /**\n     * Gets a relationship definition.\n     *\n     * @param {string} name Relationship name.\n     * @return {Object} Relationship metadata or nothing if not found.\n     */\n    getRelationship: function(name) {\n        return _metadata.relationships ? _metadata.relationships[name] : null;\n    },\n\n    /**\n     * Gets a field metadata or all fields metadata.\n     *\n     * @param {Object} options A hash of options.\n     * @param {string} options.module The module that we want to get the\n     *   vardefs.\n     * @param {string} [options.name] The field name to get the field def.\n     * @return {Object|undefined} Field def for the given Module, or all\n     *   fields if no `options.name` is supplied.\n     */\n    getField: function (options) {\n        options = options || {};\n        if (!options.module) {\n            throw new Error('Cannot get vardefs without a module');\n        }\n\n        var fields = this.getModule(options.module, 'fields');\n        if (fields && options.name) {\n            return fields[options.name];\n        }\n\n        return fields;\n    },\n\n    /**\n     * Gets a view metadata or all views metadata.\n     *\n     * @param {string} module The module name.\n     * @param {string} [view] The view name.\n     * @param {string} [loadModule] The module that should be considered base.\n     *   Defaults to core metadata.\n     * @return {Object|null} View metadata if `view name` is specified.\n     *   Otherwise, metadata for all views of the given `module`.\n     *   If the optional view parameter is provided we instead return `null`\n     *   if view for module not found.\n     */\n    getView: function (module, view, loadModule) {\n\n        if (!module && !view) {\n            return _metadata.views;\n        }\n\n        var meta = this.getModule(module, 'views');\n\n        if (view) {\n            if (meta && meta[view] && meta[view].meta !== void 0) {\n                meta = meta[view].meta;\n            } else if (loadModule) {\n                meta = this.getModule(loadModule, 'views');\n                meta = meta && meta[view] ? meta[view].meta : null;\n            } else if (_metadata.views && _metadata.views[view]) {\n                meta = _metadata.views[view].meta;\n            } else {\n                meta = null;\n            }\n        }\n\n        return meta ? this.copy(meta, { module: module, view: view }) : meta;\n    },\n\n\n    /**\n     * Get the dropdown based views metadata if defined\n     *\n     * @param module module name\n     * @param view type of view (Record views to begin with, others will be added later)\n     * @return {*|null} returns the metadata for any dropdown based views available for a specific module.\n     * Returned meta object would be of the pattern dropdownViews[view][dropdownField][dropdownValue]\n     */\n    getDropdownViews: function (module, view) {\n\n        if (!module && !view) {\n            return null;\n        }\n\n        var meta = this.getModule(module, 'dropdownViews');\n\n        if (view) {\n            if (meta && meta[view]) {\n                meta = meta[view];\n            } else {\n                meta = null;\n            }\n        }\n\n        return meta ? this.copy(meta, { module: module, dropdownViews: view }) : meta;\n    },\n\n    /**\n     * Gets a layout metadata or all layouts metadata.\n     *\n     * @param {string} module The module name.\n     * @param {string} [layout] Layout name.\n     * @param {string} [loadModule] The module that should be considered base.\n     *   Defaults to core metadata.\n     * @return {Object|null} Layout metadata if `layout` name is specified.\n     *   Otherwise, metadata for all layouts of the given module. If the\n     *   optional `layout` parameter is provided we instead return `null` if\n     *   layout for module not found.\n     */\n    getLayout: function (module, layout, loadModule) {\n\n        if (!module && !layout) {\n            return _metadata.layouts;\n        }\n\n        var meta = this.getModule(module, 'layouts');\n\n        if (layout) {\n            if (meta && meta[layout] && meta[layout].meta !== void 0) {\n                meta = meta[layout].meta;\n            } else if (loadModule) {\n                meta = this.getModule(loadModule, 'layouts');\n                meta = meta && meta[layout] ? meta[layout].meta : null;\n            } else if (_metadata.layouts && _metadata.layouts[layout]) {\n                meta = _metadata.layouts[layout].meta;\n            } else {\n                meta = null;\n            }\n        }\n\n        return meta ? this.copy(meta, { module: module, layout: layout }) : meta;\n    },\n\n    /**\n     * Gets an array of module names.\n     *\n     * @param {Object} [options] A hash of options.\n     * @param {string} [options.filter] Returns only modules\n     *   that have this property enabled.\n     * @param {string} [options.access] Returns only modules\n     *   the user has permission to perform this given action on.\n     *\n     * @return {Array} List of module names sorted by user settings.\n     */\n    getModuleNames: function(options) {\n\n        // List of available filters (and opposite filters)\n        var filters = [\n            'enabled', '!enabled',\n            'visible', '!visible',\n            'display_tab', '!display_tab',\n            'show_subpanels', '!show_subpanels',\n            'quick_create', '!quick_create'\n        ];\n\n        options = options || {};\n        var moduleList = [];\n\n        // Clients may call an old version of the API that do not return\n        // _metadata.modules_info\n        var oldClient = _.isUndefined(_metadata.modules_info);\n        if (oldClient) {\n            moduleList = _.clone(User.get('module_list'));\n            if (options.access) {\n                moduleList = _.filter(moduleList, function(module) {\n                    return Acl.hasAccess(options.access, module);\n                });\n            }\n            return moduleList || [];\n        }\n\n        var filter,\n            displayTabFilter = false;\n        if (options.filter) {\n            if (!_.isArray(options.filter)) {\n                options.filter = [options.filter];\n            }\n            filter = [];\n            _.each(options.filter, function(f) {\n                if (f && _.indexOf(filters, f) > -1) {\n                    filter.push(f);\n                    displayTabFilter = (f === 'display_tab');\n                } else if (f) {\n                    SUGAR.App.logger.warn('Can\\'t filter getModuleNames by ' + f);\n                }\n            });\n            if (_.isEmpty(filter)) {\n                filter = undefined;\n            }\n        }\n\n        moduleList = _.chain(_metadata.modules_info)\n            .keys()\n            .without('_hash')\n            .value();\n\n        if (filter) {\n            _.each(filter, function(f) {\n                var opposite = f.charAt(0) === '!';\n                if (opposite) {\n                    // Get the opposite list and take the difference.\n                    var oppositeList = this.getModuleNames({\n                        filter: f.substring(1),\n                        access: options.access\n                    });\n                    moduleList = _.difference(moduleList, oppositeList);\n                } else {\n                    // Filter the list\n                    moduleList = _.filter(moduleList, function(module) {\n                        return _metadata.modules_info[module][f];\n                    });\n                }\n            }, this);\n        }\n\n        if (!_.isEmpty(User.get('module_list'))) {\n            if (displayTabFilter) {\n                moduleList = _.intersection(User.get('module_list'), moduleList);\n            } else if (!filter) {\n                // Preserve order of user list\n                moduleList = _.union(User.get('module_list'), moduleList);\n            }\n        }\n\n        if (options.access) {\n            moduleList = _.filter(moduleList, function(module) {\n                return Acl.hasAccess(options.access, module);\n            });\n        }\n\n        return moduleList;\n    },\n\n    /**\n     * Gets language strings for a given type.\n     *\n     * @param {string} type Type of string pack: `app_strings`,\n     *   `app_list_strings` or `mod_strings`.\n     * @return {Object} Dictionary of strings.\n     */\n    getStrings: function(type) {\n        return _metadata[type] || {};\n    },\n\n    /**\n     * Gets the full module list.\n     *\n     * @return {Object} Full module list. Keys and values are equal.\n     */\n    getFullModuleList: function() {\n        return _metadata.full_module_list || {};\n    },\n\n    /**\n     * Gets Config.\n     *\n     * @return {Object} Dictionary of Configs.\n     */\n    getConfig: function() {\n        return _metadata.config || {};\n    },\n\n    /**\n     * Gets the base currency Id. Currently it returns the hardcoded value `-99`.\n     *\n     * @return {string} The value `-99`;\n     */\n    getBaseCurrencyId: function() {\n        // TODO this should be set on the _metadata\n        return '-99';\n    },\n\n    /**\n     * Gets a currency.\n     *\n     * @param {string} currencyId Identifier for the currency to retrieve.\n     * @return {Object} The currency object.\n     */\n    getCurrency: function(currencyId) {\n        return this.getCurrencies()[currencyId];\n    },\n\n    /**\n     * Gets currencies.\n     *\n     * @return {Object} the currency dictionary.\n     */\n    getCurrencies: function() {\n        return _metadata.currencies || {};\n    },\n\n    /**\n     * Gets the company logo url.\n     *\n     * @param {boolean} isDarkMode True if we need to return the dark mode logo url\n     * @return {string} The logo url\n     */\n    getLogoUrl: function(isDarkMode) {\n        return isDarkMode ? _metadata.logo_url_dark : _metadata.logo_url;\n    },\n\n    /**\n     * Gets server information.\n     *\n     * @return {Object} Server information.\n     */\n    getServerInfo: function() {\n        return _metadata.server_info || {};\n    },\n\n    /**\n     * Checks if the server has one or more licenses.\n     * @param {string|Array} licenseType one or more licenses to check\n     * @param {boolean} hasAll if true, the server must have all the provided licenses\n     * @return {boolean} true if the server's licenses match the criteria, false otherwise\n     */\n    hasLicense: function(licenseType, hasAll = false) {\n        let licenses = this.getServerInfo().licenses;\n        if (!_.isArray(licenses)) {\n            return false;\n        }\n\n        if (_.isString(licenseType)) {\n            licenseType = [licenseType];\n        }\n\n        let licenseMatcher = license => licenses.includes(license);\n        return hasAll ? licenseType.every(licenseMatcher) : licenseType.some(licenseMatcher);\n    },\n\n    /**\n     * Checks if the server has a Sell license.\n     * @return {boolean}\n     */\n    hasSellLicense: function() {\n        return this.hasLicense('SUGAR_SELL');\n    },\n\n    /**\n     * Checks if the server has a Serve license.\n     * @return {boolean}\n     */\n    hasServeLicense: function() {\n        return this.hasLicense('SUGAR_SERVE');\n    },\n\n    /**\n     * Checks if the server has a Sell/Serve license. If hasBoth is true, then the server must\n     * have both licenses. If hasBoth is false (default), then having at least one license is enough.\n     * @param {boolean} hasBoth\n     * @return {boolean}\n     */\n    hasSellServeLicense: function(hasBoth = false) {\n        return this.hasLicense(['SUGAR_SELL', 'SUGAR_SERVE'], hasBoth);\n    },\n\n    /**\n     * Checks if the server has a Connect license.\n     * @return {boolean}\n     */\n    hasConnectLicense: function() {\n        return this.hasLicense('CONNECT');\n    },\n\n    /**\n     * Checks if the server has a Discover license.\n     * @return {boolean}\n     */\n    hasDiscoverLicense: function() {\n        return this.hasLicense('DISCOVER');\n    },\n\n    /**\n     * Checks if the server has a Hint license.\n     * @return {boolean}\n     */\n    hasHintLicense: function() {\n        return this.hasLicense('HINT');\n    },\n\n    /**\n     * Checks if the server has a Maps license.\n     * @return {boolean}\n     */\n    hasMapsLicense: function() {\n        return this.hasLicense('MAPS');\n    },\n\n    /**\n     * Checks if the server has an Advanced Forecasting license.\n     * @return {boolean}\n     */\n    hasAdvancedForecastingLicense: function() {\n        return this.hasLicense('ADVANCEDFORECAST');\n    },\n\n    /**\n     * Checks if the server has a Predict Advanced or Predict Premier license.\n     * @return {boolean}\n     */\n    hasPredictLicense: function() {\n        return this.hasPredictAdvancedLicense() || this.hasPredictPremierLicense();\n    },\n\n    /**\n     * Checks if the server has a Predict Advanced license.\n     * @return {boolean}\n     */\n    hasPredictAdvancedLicense: function() {\n        return this.hasLicense('PREDICT_ADVANCED');\n    },\n\n    /**\n     * Checks if the server has a Predict Premier license.\n     * @return {boolean}\n     */\n    hasPredictPremierLicense: function() {\n        return this.hasLicense('PREDICT_PREMIER');\n    },\n\n    /**\n     * Gets the module tab mapping for megamenu.\n     *\n     * @return {Object} Mapping object.\n     */\n    getModuleTabMap: function() {\n        return _metadata.module_tab_map || {};\n    },\n\n    /**\n     * Gets the mapped module name for a menu item if one exists. Otherwise\n     * gets the module that was passed in.\n     *\n     * @param {string} module The module to get the mapped module for.\n     * @return {string} The mapped module name.\n     */\n    getTabMappedModule: function(module) {\n        var map = this.getModuleTabMap();\n        return map[module] || module;\n    },\n\n    /**\n     * Gets the list of filter operators.\n     *\n     * If any filter operators of a certain field type are defined at module\n     * level, these will take precedence over the ones available on core,\n     * thus completely overriding the latter.\n     *\n     * @param {string} [module] The module to get the filters for.\n     * @return {Object} The list of filter operators.\n     */\n    getFilterOperators: function(module) {\n        var filters = _metadata.filters && _metadata.filters.operators && _metadata.filters.operators.meta || {};\n        var moduleData = module && this.getModule(module, 'filters');\n        var moduleFilters = moduleData && moduleData.operators && moduleData.operators.meta;\n\n        if (moduleFilters) {\n            return _.extend({}, filters, moduleFilters);\n        }\n\n        return filters;\n    },\n\n    /**\n     * Gets the whole metadata object returned by the server.\n     *\n     * @return {Object} The metadata object.\n     */\n    get: function() {\n        return _metadata;\n    },\n\n    /**\n     * Gets the list of dropdown keys that can be used when modifying a record.\n     *\n     * @param {string} dropdown The dropdown field to get the filter for.\n     * @return {Array[]|Object} The list of dropdown keys.\n     */\n    getEditableDropdownFilter: function(dropdown) {\n        var filters = _metadata.editable_dropdown_filters;\n        if (filters && filters[dropdown]) {\n            return this.copy(filters[dropdown]);\n        }\n\n        return {};\n    },\n\n    /**\n     * Copies a metadata fragment.\n     *\n     * The default implementation performs a deep copy. Client apps may override\n     * this behavior.\n     *\n     * @param {Object} meta Metadata object to be copied.\n     * @param {Object} [options] Options that describe the type of metadata to\n     *   copy. The default implementation does not use them as it always\n     *   performs deep copy regardless of metadata type.\n     * @return {Object} Copy of the given metadata object.\n     */\n    copy: function(meta, options) {\n        return Utils.deepCopy(meta);\n    },\n\n    /**\n     * Sets the metadata.\n     *\n     * By default this function is used by MetadataManager to translate server\n     * responses into metadata usable internally. The currently set metadata is\n     * preserved and extended by new metadata unless `reset` parameter equals to\n     * `true`.\n     *\n     * @param {Object} data Metadata payload returned by the server.\n     * @param {boolean} isPublic Flag indicating if the public metadata must be\n     *   fetched.\n     * @param {boolean} reset Flag indicating if the the current metadata must\n     *   be deleted.\n     */\n    set: function(data, isPublic, reset) {\n\n        // Patch module metadata, compile templates, and declare components for custom layouts and views\n        _.each(data.modules, function(entry, module) {\n            this._patchMetadata(module, entry);\n        }, this);\n\n        this._declareClasses(data);\n\n        // Update application configuration\n        if (data.config) {\n            SUGAR.App.setConfig(data.config);\n        }\n\n        // Compile templates if metadata has been changed\n        Template.set(data, (data._hash && data._hash != this.getHash(isPublic)));\n\n        if (!_.isEmpty(data._hash))\n            _setHash(data, isPublic);\n\n        if (!reset) {\n            var overrideKeys = data._override_values || [];\n            delete(data._override_values);\n            // Keep whatever we have and extend it with new stuff\n            _.each(data, function(value, key) {\n                _metadata[key] = (_.isObject(value) && !_.contains(overrideKeys, key)) ?\n                    _.extend(_metadata[key] || {}, value) :\n                    value;\n            });\n        }\n        else {\n            _metadata = data;\n        }\n\n        if (SUGAR.App.config.cacheMeta && !isPublic) {\n            _cacheMeta(_metadata);\n        }\n\n        if (SUGAR.App.config.env != 'prod') {\n            this._dev_data = _metadata;\n        }\n    },\n\n    /**\n     * Gets metadata hash.\n     *\n     * @param {boolean} isPublic Flag indicating if the public metadata hash is\n     *   requested.\n     * @return {string} Metadata hash.\n     */\n    getHash: function(isPublic) {\n        var key = isPublic ? (_keyPrefix + 'public:hash') : (_keyPrefix + 'hash');\n        return SUGAR.App.cache.get(key) || _metadata._hash || '';\n    },\n\n    /**\n     * Syncs metadata from the server. Saves the metadata to the local cache.\n     *\n     * @param {Function} [callback] Callback function to be executed after sync\n     *   completes.\n     * @param {Object} [options] A hash of options.\n     * @param {boolean} [options.getPublic] `true` to sync the public metadata.\n     *   Defaults to `false`.\n     * @param {string[]} [options.metadataTypes] The metadata types to sync. If\n     *   omitted, the ones specified in the config will be used.\n     */\n    sync: function(callback, options) {\n        _syncing = true;\n        options = options || {};\n        options.params = options.params || {};\n\n        var self = this,\n            metadataTypes = options.metadataTypes || (options.getPublic ? SUGAR.App.config.publicMetadataTypes : SUGAR.App.config.metadataTypes) || [],\n            errorCallback = function(error) {\n                SUGAR.App.logger.debug('Failed fetching metadata');\n                if (!options.getPublic) {\n                    SUGAR.App.error.handleHttpError(error);\n                }\n                callback.call(self, error);\n            },\n            cb = callback;\n\n        // Force _syncing to be false no matter how we exit this function\n        callback = function(p) {\n            _syncing = false;\n            if (_.isFunction(cb)) cb(p);\n        };\n\n        SUGAR.App.api.getMetadata({\n            types: metadataTypes,\n            callbacks: {\n                success: function (metadata) {\n                    var compatible;\n                    options = options || {};\n\n                    if (!_.isEmpty(metadata)) {\n                        SUGAR.App.logger.debug('Updating metadata');\n                        if (_mdLoaded[options.getPublic ? 'public:md' : 'md'] &&\n                            self.getHash(options.getPublic) == metadata._hash && !options.forceRefresh\n                        ) {\n                            SUGAR.App.logger.debug('Skipping update as metadata hash matches');\n                            callback();\n                        }\n\n                        //If the response contains server_info, we need to run a compatibility check\n                        if (_.isEmpty(metadataTypes) || _.include(metadataTypes, 'server_info') && !options.getPublic) {\n                            compatible = SUGAR.App.isServerCompatible(metadata.server_info);\n                            //If compatible wasn't true, it will be set to an error string and we need to bomb out\n                            if (compatible !== true) {\n                                return errorCallback(compatible)\n                            }\n                        }\n                        _mdLoaded[options.getPublic ? 'public:md' : 'md'] = true;\n\n                        Promise.all(_.union([\n                                self._loadJSSource(metadata, options),\n                                _fetchLabels(metadata, options)\n                            ],\n                            //Convert any synchronous callbacks to promises\n                            _.map(externalSyncTasks, task => Promise.resolve(task(metadata, options)))\n                        )).then(() => {\n                            self.set(metadata, options.getPublic);\n                            callback()\n                        }).catch(error => errorCallback(error));\n                    } else {\n                        errorCallback({\n                            code: 'sync_failed',\n                            label: 'ERR_SYNC_FAILED'\n                        });\n                    }\n                },\n                error: errorCallback\n            }, public: options.getPublic, params: options.params\n        });\n    },\n\n    /**\n     * Used to check if a metadata sync is currently in progress.\n     *\n     * @return {boolean} `true` if a sync is in progress.\n     */\n    isSyncing: function() {\n        return _syncing;\n    },\n\n    /**\n     * Adds a task/file/app to be fetched and synced\n     *\n     * @param {Promise|function} task\n     */\n    addSyncTask: function(task) {\n        if (!_.find(externalSyncTasks, task)) {\n            externalSyncTasks.push(task);\n        }\n\n        return task;\n    },\n\n    /**\n     * Removes a task/file/app from being fetched and synced\n     *\n     * @param {Promise|function} task\n     */\n    removeSyncTask: function (task) {\n        externalSyncTasks = _.without(externalSyncTasks, task);\n    },\n\n    /**\n     * Loads a JS file from the given `metadata.jssource`\n     *\n     * @param {Object} metadata JS File metadata\n     * @param {Object} options Any options being passed\n     * @return {*}\n     * @private\n     */\n    _loadJSSource: function(metadata, options) {\n        const self = this;\n        if (!metadata.jssource) {\n            return Promise.resolve(self);\n        }\n\n        return new Promise(res => {\n            var scriptEl;\n            var loadJS = self._checkJSSourceUpdated(metadata, !!options.getPublic);\n\n            //In the event of a hard reload, we can just stop the metadata sync\n            if (loadJS === 'reload') {\n                return Utils.hardRefresh();\n            }\n            else if (loadJS) {\n                SUGAR.jssource = false;\n                scriptEl = document.createElement(\"script\");\n                scriptEl.src = Utils.buildUrl(metadata.jssource);\n                document.head.appendChild(scriptEl);\n                Utils.doWhen('SUGAR.jssource', function() {\n                    self._declareClasses(SUGAR.jssource);\n                    res(self);\n                });\n            } else {\n                res(self);\n            }\n        });\n    },\n\n    /**\n     * Verifies that the jssource URL is new. If js was already loaded, 'reload'\n     * is returned to ensure the page loads the new javascript classes correctly.\n     *\n     * @param {object} metadata The metadata object.\n     * @param {boolean} isPublic `true` to check the public metadata.\n     * @return {boolean|string} `true` if the jssource should be loaded, `false`\n     *   if the jssource was already loaded, and 'reload' if jssource was\n     *   previously loaded from another URL.\n     * @private\n     */\n    _checkJSSourceUpdated: function(metadata, isPublic) {\n        if (isPublic) {\n            //If we already loaded a JS source, we either need to clear memory for the new one,\n            //or we don't need to load the js file because it hasn't changed\n            if (this._publicJSSourceFile) {\n                if (this._publicJSSourceFile != metadata.jssource) {\n                    return 'reload';\n                }\n                return false;\n            } else {\n                this._publicJSSourceFile = metadata.jssource;\n                return true;\n            }\n        }\n        //In private reload, if public changed, we still need a refresh\n        if (metadata.jssource_public && this._publicJSSourceFile &&\n            metadata.jssource_public != this._publicJSSourceFile\n        ) {\n            Utils.hardRefresh();\n            return 'reload';\n        }\n        //Finally verify the private jssource file\n        if (this._jsSourceFile) {\n            if (this._jsSourceFile != metadata.jssource) {\n                return 'reload';\n            }\n            return false;\n        }\n        // Update the private jssource file so that we don't reload it again\n        this._jsSourceFile = metadata.jssource;\n        return true;\n    },\n\n    /**\n     * Binds an event listeners on `cache:clean` global event and on the\n     * window `storage` event.\n     *\n     * When `storage` is triggered by `window`, we will check re-sync the app if\n     * necessary. If `cacheMeta` config property is set to `true`, we grab the\n     * metadata from the local storage.\n     */\n    init: function() {\n        _.bindAll(this, 'storageHandler');\n\n        // For more information about the `storage` event, see\n        // https://developer.mozilla.org/en-US/docs/Web/Events/storage\n        window.addEventListener('storage', this.storageHandler);\n\n        // Load metadata from local storage upon app initialization\n        if (SUGAR.App.config.cacheMeta) {\n            var data = _getCachedMeta();\n            if (data) this.set(data, false);\n        }\n\n        Events.on('cache:clean', function(cb) {\n            cb([\n                _keyPrefix + 'public:hash',\n                _keyPrefix + 'hash',\n                _keyPrefix + 'data'\n            ]);\n        });\n    },\n\n    /**\n     * Checks to see if the metadata needs to sync with the server.\n     */\n    storageHandler: function() {\n\n        if (!_syncing && ((this.getHash() != _metadata._hash && _mdLoaded.md) ||\n            (\n                SUGAR.App.api.getUserprefHash() && User.get('_hash') &&\n                SUGAR.App.api.getUserprefHash() != User.get('_hash')\n            )\n        )) {\n            _syncing = true;\n            _mdLoaded.md = false;\n            SUGAR.App.sync({\n                getPublic: !SUGAR.App.api.isAuthenticated()\n            });\n        }\n    },\n\n    /**\n     * Purges metadata from the persistent cache.\n     */\n    clearCache: function() {\n        SUGAR.App.cache.cut(_keyPrefix + 'public:hash');\n        SUGAR.App.cache.cut(_keyPrefix + 'hash');\n        SUGAR.App.cache.cut(_keyPrefix + 'data');\n    },\n\n    /**\n     * Resets internal memory cache and clears persistent storage.\n     */\n    reset: function() {\n        _metadata = {};\n        this.clearCache();\n    }\n};\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * Plugin manager.\n *\n * Example:\n *\n * ```\n * const PluginManager = require('./plugin-manager');\n *\n * PluginManager.register('fast-click-highlight', ['view', 'field'], {\n *     color : \"red\",\n *     events: {\n *         'click .fast-click-highlighted': 'onClickItem'\n *     },\n *     onClickItem: function(e) {\n *         alert(1)\n *     },\n *\n *     // The onAttach function will be called every time the plugin is\n *     // attached to a new component. It will be executed from the scope of\n *     // the component being attached to.\n *     //Applied after the plugin has been mixed into the component.\n *     onAttach: function(component, plugin) {\n *         this.on('render', function(){\n *             //same as plugin.color and component.$el.css\n *             this.$el.css('color', this.color);\n *         });\n *     }\n * });\n * ```\n *\n * If you want to use the current plugin for a view, you have to declare the\n * plugin in it:\n *\n * ```\n * const ViewManager = require('../view/view-manager');\n * var MyView = ViewManager.View.extend({\n *     initialize: function(options) {},\n *     plugins: ['fast-click-highlight'],\n *      ...,\n * });\n *\n * // or\n *\n * $plugins: [{\n *     'fast-click-highlight': {\n *         events: {\n *             'click article' : 'onClickItem'\n *         }\n *     }\n * }],\n *\n * onClickItem: function() {\n *     alert(2);\n * }\n * ```\n *\n * If you want to disable a plugin, you have to use the `disabledPlugins`\n * property as in the following example:\n *\n * ```\n * var MyView = ViewManager.View.extend({\n *     initialize: function(options) {},\n *     disabledPlugins: ['fast-click-highlight'],\n *     ...,\n * });\n * ```\n * @module Core/PluginManager\n */\n\n/**\n * Gets a plugin by name.\n *\n * @param {string} name The plugin name.\n * @param {string} type The component type. Can be one of the following:\n *   'view', 'layout', 'field', 'model' or 'collection'.\n * @return {Object} The desired plugin object.\n * @private\n */\nfunction get(name, type) {\n    if (PluginManager.plugins[type] && PluginManager.plugins[type][name]) {\n        return PluginManager.plugins[type][name];\n    }\n};\n\n/**\n * Checks if a plugin is disabled.\n *\n * @param {View/Component|Data/Bean|Data/BeanCollection} component The\n *   component.\n * @param {string} pluginName The plugin name.\n * @return {boolean} `true` if the plugin is disabled; `false` otherwise.\n * @private\n */\nfunction isPluginDisabled(component, pluginName) {\n    return !!_.find(component.disabledPlugins, function(name) {\n        return name === pluginName;\n    });\n};\n\n/**\n * @alias module:Core/PluginManager\n */\nconst PluginManager = {\n    /**\n     * A hash map containing all registered plugins.\n     */\n    plugins: {\n        view: {},\n        field: {},\n        layout: {},\n        model: {},\n        collection: {}\n    },\n\n    /**\n     * Attaches a plugin to a view.\n     *\n     * @param {View/Component|Data/Bean|Data/BeanCollection} component The\n     *   component.\n     * @param {string} type The component type. Can be one of the following:\n     *   'view', 'layout', 'field', 'model' or 'collection'.\n     */\n    attach: function(component, type) {\n        _.each(component.plugins, function(pluginName) {\n            var prop = null;\n            if (_.isObject(pluginName)) {\n                var n = _.keys(pluginName)[0];\n                prop = pluginName[n];\n                pluginName = n;\n            }\n\n            var p = get(pluginName, type);\n            if (p && !isPluginDisabled(component, pluginName)) {\n                var events = _.extend({}, (_.isFunction(component.events)) ?\n                    component.events() : component.events, p.events);\n\n                _.extend(component, p);\n\n                if (prop) {\n                    _.extend(component, prop);\n\n                    if (prop.events) {\n                        _.extend(events, prop.events);\n                    }\n                }\n\n                component.events = events;\n\n                //If a plugin has an onAttach function, call it now so that the plugin can initialize\n                if (_.isFunction(p.onAttach)) {\n                    p.onAttach.call(component, component, p);\n                }\n            }\n        }, this);\n    },\n\n    /**\n     * Detaches plugins and calls the `onDetach` method on each one.\n     *\n     * @param {View/Component|Data/Bean|Data/BeanCollection} component The\n     *   component.\n     * @param {string} type The component type. Can be one of the following:\n     *   'view', 'layout', 'field', 'model' or 'collection'.\n     */\n    detach: function(component, type) {\n        _.each(component.plugins, function(name) {\n            var plugin = get(name, type);\n            if (plugin && _.isFunction(plugin.onDetach)) {\n                plugin.onDetach.call(component, component, plugin);\n            }\n        }, this);\n    },\n\n    /**\n     * Registers a plugin.\n     *\n     * @param {string} name The plugin name.\n     * @param {string|string[]} validTypes The list of component types this\n     *   plugin can be applied to ('view', 'field', 'layout', 'model' and/or\n     *   'collection').\n     * @param {Object} plugin The plugin object.\n     */\n    register: function(name, validTypes, plugin) {\n        if (!_.isArray(validTypes)) {\n            validTypes = [validTypes];\n        }\n\n        _.each(validTypes , function(type) {\n            this.plugins[type] = this.plugins[type] || {};\n            this.plugins[type][name] = plugin;\n        }, this);\n    },\n\n    _isPluginDisabled: function(component, pluginName) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.pluginManager#_isPluginDisabled is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.pluginManager#_isPluginDisabled is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n       return isPluginDisabled(component, pluginName);\n    },\n\n    _get: function(name, type) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Core.pluginManager#_get is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Core.pluginManager#_get is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return get(name, type);\n    }\n};\n\nmodule.exports = PluginManager;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Acl = require('./acl');\nconst Alert = require('../view/alert');\nconst Utils = require('../utils/utils');\nconst Language = require('./language');\nconst ErrorHandler = require('./error');\nconst Events = require('./events');\nconst Routing = require('./routing');\nconst User = require('./user');\n\n/**\n * App router. It extends the standard Backbone.js router.\n *\n * The router manages the watching of the address hash and routes to the correct\n * handler. You need to add your routes with their callback using `addRoutes`\n * method.\n * To add your routes, you have to listen to the `router:init` event.\n *\n * Example:\n * ```\n * const Events = require('./events');\n * Events.on('router:init', function(router) {\n *     var routes = [\n *         {\n *             route: 'MyModule/my_custom_route',\n *             name: 'MyModule',\n *             callback: MyModule\n *         }\n *     ];\n *     SUGAR.App.router.addRoutes(routes);\n * });\n * ```\n *\n * @module Core/Router\n */\nconst Router = Backbone.Router.extend({\n    /**\n     * Sets custom routes and binds them if available.\n     *\n     * @param {Object} [opts] options to initialize the router.\n     */\n    initialize: function(opts) {\n        opts = opts || {};\n\n        /**\n         * The previous fragment.\n         *\n         * @type {string}\n         * @private\n         */\n        this._previousFragment = '';\n\n        /**\n         * The current fragment.\n         *\n         * @type {string}\n         * @private\n         */\n        this._currentFragment = '';\n    },\n\n    /**\n     * Calls {@link Core.Routing#before} before invoking a route handler\n     * and {@link Core.Routing#after} after the handler is invoked.\n     *\n     * @param {Function} handler Route callback handler.\n     * @private\n     */\n    _routeHandler: function(handler) {\n        var args = Array.prototype.slice.call(arguments, 1),\n            route = handler.route;\n\n        if (Routing.beforeRoute(route, args)) {\n            this._previousFragment = this._currentFragment;\n            this._currentFragment = this.getFragment();\n            handler.apply(this, args);\n            Routing.after(route, args);\n        }\n    },\n\n    /**\n     * Checks if a module exists and displays 404 error screen if it does not.\n     *\n     * @param {string} module The module to check.\n     * @return {boolean} `true` if module exists, `false` otherwise.\n     * @private\n     */\n    _moduleExists: function(module) {\n        if (module && _.isUndefined(SUGAR.App.metadata.getModule(module))) {\n            ErrorHandler.handleHttpError({status: 404});\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Adds the `notFound` route.\n     *\n     * @private\n     */\n    _addDefaultRoutes: function() {\n        var defaultRoutes = [\n            {\n                name: 'notFound',\n                route: /^.*$/,\n                callback: function () {\n                    // no matching routes (e.g.: '#//' or '#unkown/path/route)\n                    ErrorHandler.handleHttpError({status: 404});\n                }\n            }\n        ];\n        this.addRoutes(defaultRoutes);\n    },\n\n    /**\n     * Checks if the last page can be stored on the login process\n     *\n     * @return {boolean} true if page can be stored, false otherwise\n     * @private\n     */\n    _canStoreExternalAuthLastPage: function() {\n        const fragmentsToNotStore = ['stsAuthError'];\n        return Backbone.history.fragment && !_.contains(fragmentsToNotStore, Backbone.history.fragment);\n    },\n\n    /**\n     * Registers a handler for a named route.\n     *\n     * This method wraps the handler into {@link Core.Router#_routeHandler}\n     * method.\n     *\n     * @param {string} route Route expression.\n     * @param {string} name Route name.\n     * @param {Function} [callback] Route handler. If not supplied, will\n     *   use the method name that matches the `name` param.\n     */\n    route: function (route, name, callback) {\n        if (!name) {\n            throw new Error('You need to provide a route name.');\n        } else if (!_.isEmpty(this._routes[name])) {\n            SUGAR.App.logger.error('Route \"' + name + '\" is being overridden. This is highly NOT advisable.');\n        }\n\n        this._routes[name] = callback;\n\n        if (!callback) {\n            callback = this[name];\n        }\n\n        callback.route = name;\n        callback = _.wrap(callback, this._routeHandler);\n        Backbone.Router.prototype.route.call(this, route, name, callback);\n    },\n\n    /**\n     * Gets the current Backbone fragment.\n     *\n     * @return {string} The current Backbone history fragment.\n     */\n    getFragment: function() {\n        return Backbone.history.getFragment();\n    },\n\n    /**\n     * Updates the URL with the given fragment.\n     *\n     * @param {string} fragment The fragment to navigate to.\n     * @param {Object} [options] The options hash.\n     * @param {boolean} [options.trigger] `true` to fire the route callback.\n     * @param {boolean} [options.replace] `true` to modify the current URL\n     *   without adding an entry to the `window.history` object.\n     * @return {Core.Router} This router.\n     */\n    navigate: function(fragment, options) {\n        Backbone.Router.prototype.navigate.apply(this, arguments);\n        if (!(options && options.trigger)) {\n            this._previousFragment = this._currentFragment;\n            this._currentFragment = this.getFragment();\n        }\n        return this;\n    },\n\n    /**\n     * Gets the previous Backbone fragment.\n     *\n     * @return {string} The previous Backbone fragment.\n     */\n    getPreviousFragment: function() {\n        return this._previousFragment;\n    },\n\n    /**\n     * Navigates to the previous route in history.\n     */\n    goBack: function() {\n        window.history.back();\n    },\n\n    /**\n     * Navigates the window history.\n     *\n     * @param {number} steps Number of steps to navigate (can be negative).\n     */\n    go: function(steps) {\n        window.history.go(steps);\n    },\n\n    /**\n     * Initializes the router.\n     */\n    init: function() {\n        /**\n         * Routes hashmap by name. See {@link#get} for more info.\n         *\n         * @type {Object}\n         * @private\n         */\n        this._routes = {};\n        this._addDefaultRoutes();\n\n        Events.trigger('router:init');\n    },\n\n    /**\n     * Starts Backbone history which in turn starts routing the hashtag.\n     *\n     * See Backbone.history documentation for details.\n     */\n    start: function() {\n        if (!Backbone.History.started) {\n            Backbone.history.start();\n        }\n    },\n\n    /**\n     * Stops `Backbone.history`.\n     */\n    stop: function() {\n        Backbone.history.stop();\n    },\n\n    /**\n     * Resets the router.\n     *\n     * Stops `Backbone.history` and cleans up routes. Then initializes and\n     * starts the router again.\n     */\n    reset: function() {\n        var old = this._previousFragment;\n        SUGAR.App.router.stop();\n        Backbone.history.handlers = [];\n        SUGAR.App.router.init();\n        SUGAR.App.router.start();\n        this._previousFragment = old;\n    },\n\n    /**\n     * Add routes into the router.\n     *\n     * Currently, Backbone stops after the first matching route.\n     * Therefore, the order of how custom routes are added is important.\n     * In general, the developer should add the more specific route first,\n     * so that the intended route gets called.\n     *\n     * For example, the route `MyRoute/create` will call `myRouteCreate` in\n     * the following code snippet:\n     * ```\n     * var routes = [\n     *     {\n     *         name: 'myRouteCreate',\n     *         route: 'MyRoute/create',\n     *         callback: myRouteCreate\n     *     },\n     *     {\n     *         name: 'myRoute',\n     *         route: \"MyRoute(/:my_custom_route)\",\n     *         callback: myRoute\n     *     }\n     * ];\n     * ```\n     * If the order of `myRouteCreate` and `myRoute` is reversed, triggering\n     * `MyRoute/create` will call `myRoute` with `:my_custom_route` set to\n     * `create`, which may not be intended.\n     *\n     * @param {Array} routes The ordered list of routes.\n     */\n    addRoutes: function(routes) {\n        if (!routes) {\n            return;\n        }\n\n        var newRoutes = routes.reverse();\n        _.each(newRoutes, function(route) {\n            this.route(route.route, route.name, route.callback);\n        }, this);\n    },\n\n    /**\n     * Retrieves the callback associated with the given route name.\n     *\n     * @param {string} name The route to get the callback function.\n     * @return {Function} The callback associated with this route name.\n     */\n    get: function (name) {\n        return this._routes[name];\n    },\n\n    /**\n     * Re-triggers the current route.\n     * Used to refresh the current layout/page without doing a hard refresh.\n     */\n    refresh: function(){\n        Backbone.history.loadUrl(Backbone.history.fragment);\n    },\n\n    /**\n     * Builds a route.\n     *\n     * This is a convenience function.\n     * If you need to override this, define a `customBuildRoute` function on\n     * {@link Utils/Utils} and return an empty string if you want to\n     * fall back to this definition of `buildRoute`.\n     *\n     * @param {Core/Context|string} moduleOrContext The name of the module\n     *   or a context object to extract the module from.\n     * @param {string} [id] The model's ID.\n     * @param {string} [action] Action name.\n     * @return {string} route The built route.\n     */\n    buildRoute: function(moduleOrContext, id, action) {\n        var route;\n\n        if (_.isFunction(Utils.customBuildRoute)) {\n            route = Utils.customBuildRoute.apply(this, arguments);\n            if (!_.isEmpty(route)) {\n                return route;\n            }\n        }\n\n        if (moduleOrContext) {\n            // If module is a context object, then extract module from it\n            route = (_.isString(moduleOrContext)) ? moduleOrContext : moduleOrContext.get(\"module\");\n\n            if (id) {\n                route += \"/\" + id;\n            }\n\n            if (action) {\n                route += \"/\" + action;\n            }\n        } else {\n            route = action;\n        }\n\n        return route;\n    },\n\n    redirect: function(route, options) {\n        this.navigate(route, _.extend({trigger: true, replace: true}, options));\n    },\n\n    // ----------------------------------------------------\n    // Route handlers\n    // ----------------------------------------------------\n\n    /**\n     * Handles the `index` route.\n     *\n     * Loads `home` layout for the `Home` module or `list` route with default\n     * module defined in `SUGAR.App.config`.\n     * For external authentication it will try to load the page visited when auth was triggered.\n     */\n    index: function() {\n        SUGAR.App.logger.debug(\"Route changed to index\");\n        if (SUGAR.App.config.externalLogin) {\n            const lastPage = SUGAR.App.cache.get('externalAuthLastPage');\n            if (lastPage) {\n                SUGAR.App.cache.cut('externalAuthLastPage');\n                this.navigate(lastPage, {trigger: true});\n                return;\n            }\n        }\n        if (SUGAR.App.config.defaultModule) {\n            this.navigate(SUGAR.App.config.defaultModule, {trigger:true});\n        }\n        else if (Acl.hasAccess('read', 'Home')) {\n            this.navigate('Home', {trigger:true});\n        }\n    },\n\n    /**\n     * Handles the `list` route.\n     *\n     * @param {string} module Module name.\n     */\n    list: function(module) {\n        if (!this._moduleExists(module)) {\n            return;\n        }\n        SUGAR.App.logger.debug(\"Route changed to list of \" + module);\n        SUGAR.App.controller.loadView({\n            module: module,\n            layout: \"records\"\n        });\n    },\n\n    /**\n     * Handles arbitrary layout for a module that doesn't have a record\n     * associated with the layout.\n     *\n     * @param {string} module Module name.\n     * @param {string} layout Layout name.\n     */\n    layout: function(module, layout) {\n        if (!this._moduleExists(module)) {\n            return;\n        }\n        SUGAR.App.logger.debug(\"Route changed to layout: \" + layout + \" for \" + module);\n        SUGAR.App.controller.loadView({\n            module: module,\n            layout: layout\n        });\n    },\n\n    /**\n     * Handles the `create` route.\n     *\n     * @param {string} module Module name.\n     */\n    create: function(module) {\n        if (!this._moduleExists(module)) {\n            return;\n        }\n        SUGAR.App.logger.debug(\"Route changed: create \" + module);\n        SUGAR.App.controller.loadView({\n            module: module,\n            create: true,\n            layout: \"edit\"\n        });\n    },\n\n    /**\n     * Routes to the login page.\n     *\n     * You have to implement a `login` layout to use it.\n     *\n     * @fires app:login\n     * @fires app:login:success after a successful external login.\n     */\n    login: function() {\n        SUGAR.App.logger.debug(\"Logging in\");\n        SUGAR.App.controller.loadView({\n            module: \"Login\",\n            layout: \"login\",\n            create: true\n        });\n\n        // Need to hide the megamenu here otherwise we get a login screen\n        // with a megamenu. This is done AFTER the login view loading since\n        // loadView fires a _render call on login.js, which rerenders the\n        // header in refreshAdditionalComponents().\n        Events.trigger('app:login');\n\n        if(SUGAR.App.config.externalLogin) {\n            if (this._canStoreExternalAuthLastPage()) {\n                SUGAR.App.cache.set('externalAuthLastPage', Backbone.history.fragment);\n            }\n            // This will attempt reauth\n            SUGAR.App.api.ping(null, {\n                success: function() {\n                    // If we have success then show the megamenu again\n                    Events.trigger('app:login:success');\n                    SUGAR.App.router.refresh();\n                }\n            });\n        }\n    },\n\n    /**\n     * Logs out the user and routes to the login page.\n     *\n     * @param {boolean} clear Refreshes the page once logout is complete to\n     *   clear any sensitive data from browser tab memory.\n     * @fires 'app:logout:success'\n     */\n    logout: function(clear) {\n        let logoutComplete = function(clear) {\n            SUGAR.App.router.navigate(\"#\");\n            if (!SUGAR.App.config.externalLogin) {\n                if (clear) {\n                    //We have to reload to clear any sensitive data from browser tab memory.\n                    window.location.reload();\n                } else {\n                    SUGAR.App.router.login();\n                }\n            } else {\n                SUGAR.App.controller.loadView({\n                    module: 'Login',\n                    layout: 'logout',\n                    skipFetch: true,\n                    create: true\n                });\n            }\n        };\n\n        if (!SUGAR.App.api.isAuthenticated()) {\n            logoutComplete(false);\n            return;\n        }\n\n        clear = (clear === \"1\");\n\n        SUGAR.App.logger.debug(\"Logging out: \" + clear);\n        SUGAR.App.logout({\n            complete() {\n                logoutComplete(clear);\n            },\n            success(data) {\n                Events.trigger('app:logout:success', data);\n            },\n        }, clear);\n    },\n\n    /**\n     * Handles the `record` route.\n     *\n     * @param {string} module Module name.\n     * @param {string} id Record ID. If `id` is `create`, it will load the create view.\n     * @param {string} [action] Action name (`edit`, etc.). Defaults to `detail` if not specified.\n     * @param {string} [layout] The layout to use for this route. Defaults to `record` if not specified.\n     */\n    record: function(module, id, action, layout) {\n        if (!this._moduleExists(module)) {\n            return;\n        }\n\n        var oldCollection = SUGAR.App.controller.context.get('collection'),\n            oldListCollection = SUGAR.App.controller.context.get('listCollection'),\n            opts = {\n                module: module,\n                layout: layout || \"record\",\n                action: (action || \"detail\")\n            };\n\n        if (id !== \"create\") {\n            _.extend(opts, {modelId: id});\n        } else {\n            _.extend(opts, {create: true});\n            opts.layout = \"create\";\n        }\n\n        //If we come from a list view, we get the current collection\n        if (oldCollection && oldCollection.module === module && oldCollection.get(id)) {\n            opts.listCollection = oldCollection;\n        }\n\n        //If we come from a detail view, we need to get the cached collection\n        if (oldListCollection && oldListCollection.module === module && oldListCollection.get(id)) {\n            opts.listCollection = oldListCollection;\n        }\n\n        SUGAR.App.controller.loadView(opts);\n    },\n});\n\nmodule.exports = Router;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst BeforeEvent = require('./before-event');\nconst Events = require('./events');\n\n/**\n * Manages routing behavior.\n *\n * The default implementation provides `before` and `after` callbacks that are\n * executed before and after a route gets triggered.\n *\n * @module Core/Routing\n * @mixes Core/BeforeEvent\n */\n/**\n * @alias module:Core/Routing\n */\nconst Routing = {\n    /**\n     * Checks if a user is authenticated before triggering a route.\n     *\n     * @param {string} route Route name.\n     * @param {Array} [args] Route parameters.\n     * @return {boolean} `true` if the route should be triggered; `false`\n     *   otherwise.\n     */\n    beforeRoute: function (route, args) {\n        if (!this.triggerBefore('route', { route:route, args:args })) {\n            return false;\n        }\n\n        // skip this check for all white-listed routes (SUGAR.App.config.unsecureRoutes)]\n        if (_.indexOf(SUGAR.App.config.unsecureRoutes, route) >= 0) {\n            return true;\n        }\n\n        // Check if a user is un-authenticated and redirect him to login\n        if (!SUGAR.App.api.isAuthenticated()) {\n            SUGAR.App.router.login();\n            return false;\n        } else if (!SUGAR.App.isSynced) {\n            Backbone.history.stop();\n            SUGAR.App.sync();\n            return false;\n        }\n\n        return true;\n    },\n\n    /**\n     * Gets called after a route gets triggered.\n     *\n     * The default implementation does nothing.\n     *\n     * @param {string} route Route name.\n     * @param {Array} [args] Route parameters.\n     */\n    after: function (route, args) {\n        // Do nothing\n    },\n\n    /**\n     * Creates a router instance, attaches it to the App object and starts it.\n     *\n     * @fires 'router:start'\n     */\n    start: function() {\n        var opts = {};\n        SUGAR.App.augment(\"router\", new SUGAR.App.Router(opts), false);\n        Events.trigger(\"router:start\", SUGAR.App.router);\n        SUGAR.App.router.init();\n        SUGAR.App.router.start();\n    },\n\n    /**\n     * Internal use only - for unit testing Routers.\n     *\n     * Disables `Backbone.history` temporarily.\n     *\n     * @deprecated since 7.10. Please use {@link Core.Router#stop} instead.\n     */\n    stop: function() {\n        SUGAR.App.logger.warn('`Core.Routing#stop` method is deprecated since 7.10. Please use ' +\n            '`Core.Router#stop` instead.');\n        SUGAR.App.router.stop();\n    }\n};\n\n//Mix in the beforeEvents\n_.extend(Routing, BeforeEvent);\n\nmodule.exports = Routing;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Events = require('./events');\n\nfunction makeLastState() {\n    var keySeparator = ':',\n        keyPrefix = 'last-state',\n        lastStates = {},\n        preservedKeys = [ ];\n\n    var buildLastStateKeyForStorage = function(key) {\n        var keyParts = key.split(keySeparator);\n        var storedKey = [SUGAR.App.user.id, keyPrefix];\n\n        storedKey = storedKey.concat(keyParts);\n\n        return storedKey.join(keySeparator);\n    };\n\n    var getLastStateId = function(component) {\n        var lastStateId;\n\n        if (component.meta && component.meta.last_state) {\n            lastStateId = component.meta.last_state.id;\n        }\n\n        return lastStateId;\n    };\n\n    /**\n     * Allows interactions with the last state values, which are used to\n     * implement last application states or \"stickiness\".\n     * @class\n     * @name Core/User.LastState\n     */\n\n    /**\n     * @type {Core/User.LastState}\n     * @name lastState\n     * @memberOf module:Core/User\n     */\n    return {\n        /**\n         * Get the last state value given a key. If it doesn't exist,\n         * return the default value as specified in the component\n         * metadata.\n         *\n         * @param {string} key The local storage key.\n         * @return {*} The last state\n         *   value.\n         * @memberOf Core/User.LastState\n         */\n        get: function(key) {\n            var result, storedKey;\n\n            if (!_.isUndefined(key)) {\n                storedKey = buildLastStateKeyForStorage(key);\n                result = SUGAR.App.cache.get(storedKey);\n                result = result === void 0 ? this.defaults(key) : result;\n            }\n\n            return result;\n        },\n\n        /**\n         * Saves the last state in local storage.\n         *\n         * @param {string} key The local storage key.\n         * @param {string} value The value to associate with `key`.\n         * @param {boolean} updateDbValue (optional) if true, updates the key in the DB as well\n         * @memberOf Core/User.LastState\n         */\n        set: function(key, value, updateDbValue = true) {\n            if (!_.isUndefined(key) && !_.isUndefined(value)) {\n                var storedKey = buildLastStateKeyForStorage(key);\n                SUGAR.App.cache.set(storedKey, value);\n\n                if (updateDbValue &&\n                    SUGAR.App.api.isAuthenticated() &&\n                    SUGAR.App.user.get('type') !== 'support_portal'\n                ) {\n                    this.changesToSync = this.changesToSync || {};\n                    this.changesToSync[key] = value;\n                    this._syncDb();\n                }\n            }\n        },\n\n        /**\n         * Registers a state as important (should survive a cache clean).\n         *\n         * @param {string} key The key of the state to preserve.\n         * @memberOf Core/User.LastState\n         */\n        preserve: function(key) {\n            if (!_.isUndefined(key)) {\n                preservedKeys.push(key);\n            }\n        },\n\n        /**\n         * Gets the key for a given component, which is used as a key\n         * for CRUD operations on last state values.\n         *\n         * @param {string} name State type name.\n         * @param {Object} component Component name.\n         * @return {string} A last state key corresponding to the\n         *   given values.\n         * @memberOf Core/User.LastState\n         */\n        key: function(name, component) {\n            var lastStateId = getLastStateId(component);\n            return this.buildKey(name, lastStateId, component.module);\n        },\n\n        /**\n         * Builds the key for a given name, lastStateId, and\n         * (optionally) module, which is used as a key for CRUD\n         * operations on last state values.\n         *\n         * @param {string} name State type name.\n         * @param {string} lastStateId Last state identifier.\n         * @param {string} [module] Module name.\n         * @return {string} A last state key corresponding to the\n         *   given values.\n         * @memberOf Core/User.LastState\n         */\n        buildKey: function(name, lastStateId, module) {\n            var keyString, keyParts = [];\n\n            if (lastStateId) {\n                if (module) {\n                    keyParts.push(module);\n                }\n                keyParts.push(lastStateId, name);\n                keyString = keyParts.join(keySeparator);\n            }\n\n            return keyString;\n        },\n\n        /**\n         * Gets the default last state for a key.\n         *\n         * @param {string} key A last state key.\n         * @return {string} The default last state for the given `key`.\n         * @memberOf Core/User.LastState\n         */\n        defaults: function(key) {\n            return lastStates[key];\n        },\n\n        /**\n         * Registers last states default values given a component.\n         * The default value is specified in the component metadata.\n         *\n         * @param {Object} component Component to register default\n         *   states for.\n         * @memberOf Core/User.LastState\n         */\n        register: function(component) {\n            var lastStateId = getLastStateId(component);\n            if (lastStateId){\n                _.each(component.meta.last_state.defaults, function(defaultState, key) {\n                    lastStates[this.key(key, component)] = defaultState;\n                }, this);\n            }\n        },\n\n        /**\n         * Deletes last state from local storage.\n         *\n         * @param {string} key The state to remove from local storage.\n         * @memberOf Core/User.LastState\n         */\n        remove: function(key) {\n            var storedKey;\n            if (!_.isUndefined(key)) {\n                storedKey = buildLastStateKeyForStorage(key);\n                SUGAR.App.cache.cut(storedKey);\n            }\n        },\n\n        /**\n         * Fetch the user's last state from the DB\n         *\n         * @param callback\n         */\n        load: function(callback) {\n            SUGAR.App.api.call('read', SUGAR.App.api.buildURL('me/last_states'), null, {\n                success: (data) => {\n                    if (!_.isEmpty(data)) {\n                        Object.entries(data).forEach(([key, value]) => {\n                            this.set(key, value, false);\n                        });\n                    }\n                    if (_.isFunction(callback)) {\n                        callback();\n                    }\n                },\n                error: (err) => {\n                    SUGAR.App.error.handleHttpError(err);\n                    if (_.isFunction(callback)) {\n                        callback(err);\n                    }\n                }\n            });\n        },\n\n        /**\n         * Retrieves a list of important last value keys in the cache.\n         *\n         * @return {Array} List of high value keys in cache.\n         * @private\n         * @memberOf Core/User.LastState\n         */\n        _getPreservedKeys: function() {\n            var ret = [];\n            _.each(preservedKeys, function(key) {\n                ret.push(buildLastStateKeyForStorage(key));\n            });\n            return ret;\n        },\n\n        /**\n         * Syncs the current lastState data for the user with the DB\n         */\n        _syncDb: _.debounce(function() {\n            if (!this.isUpdating) {\n                // Allow one DB update at a time to prevent issues with concurrent saves\n                this.isUpdating = true;\n\n                // Get the changed lastStates since the last sync\n                let args = {\n                    values: Object.assign({}, this.changesToSync)\n                };\n                this.changesToSync = {};\n\n                // On success, check to see if we need to save again (if another\n                // change was made since the last save call was triggered)\n                let callbacks = {\n                    success: () => {\n                        this.isUpdating = false;\n                        if (this.resave) {\n                            this.resave = false;\n                            this._syncDb();\n                        }\n                    },\n                    error: (err) => {\n                        SUGAR.App.error.handleHttpError(err);\n                    }\n                };\n\n                SUGAR.App.user.syncTimezone();\n\n                SUGAR.App.api.call('update', SUGAR.App.api.buildURL('me/last_states'), args, callbacks);\n            } else {\n                // A save is already in progress. Since another change has been made,\n                // mark this to trigger another save after the current one is complete\n                this.resave = true;\n            }\n        }, 500),\n    };\n}\n\n/**\n * Represents application's current user object.\n *\n * The user object contains settings that are fetched from the server\n * and whatever settings the application wants to store.\n *\n * ```\n * // Sample user object that is fetched from the server:\n * {\n *      id: \"1\",\n *      full_name: \"Administrator\",\n *      user_name: \"admin\",\n *      preferences: {\n *          timezone: \"America\\/Los_Angeles\",\n *          datepref: \"m\\/d\\/Y\",\n *          timepref: \"h:ia\"\n *      }\n * }\n *\n * // Use it like this:\n * const User = require('./user');\n * var userId = User.get('id');\n * // Set app specific settings\n * User.set('sortBy:Cases', 'case_number');\n *\n * // Bind event handlers if necessary\n * User.on('change', function() {\n *     // Do your thing\n * });\n * ```\n *\n * @module Core/User\n */\nvar User = Backbone.Model.extend({\n    /**\n     * Retrieves and sets the user preferences.\n     *\n     * @param {Function} [callback] Callback called when update completes.\n     */\n    load: function(callback) {\n        SUGAR.App.api.me('read', null, null, {\n            success: _.bind(function(data) {\n                let useCallback = true;\n                if (data && data.current_user) {\n                    // Set the user pref hash into the cache for use in\n                    // checking user pref state change\n                    if (data.current_user._hash) {\n                        SUGAR.App.cache.set('userpref:hash', data.current_user._hash);\n                    }\n                    this.set(data.current_user);\n                    var language = this.getPreference('language');\n                    if (SUGAR.App.lang.getLanguage() !== language) {\n                        SUGAR.App.lang.setLanguage(language, null, {\n                            noUserUpdate: true,\n                            noSync: SUGAR.App.isSynced || SUGAR.App.metadata.isSyncing()\n                        });\n                    }\n\n                    // After the user object is fetched, load the user's last state as well.\n                    if (data.current_user.type !== 'support_portal') {\n                        useCallback = false;\n                        this.lastState.load(callback);\n                    }\n                }\n\n                if (callback && useCallback) {\n                    callback();\n                }\n            }, this),\n            error: function(err) {\n                SUGAR.App.error.handleHttpError(err);\n                if (callback) callback(err);\n            }\n        });\n    },\n\n    /**\n     * Update timezone in user's preferences.\n     *\n     * @return {void}\n     */\n    syncTimezone: function() {\n        if (!this.attributes ||\n            !this.attributes.preferences) {\n            return;\n        }\n\n        const clientPref = this.getClientTimezonePref();\n        const serverPref = _.pick(this.get('preferences'), [\n            'timezone',\n            'tz_offset',\n            'tz_offset_sec',\n        ]);\n\n        if (!_.isEqual(clientPref, serverPref)) {\n            const updateCallback = () => {\n                if (this.isSetupCompleted()) {\n                    SUGAR.App.alert.show('success-timezone-update', {\n                        level: 'success',\n                        messages: SUGAR.App.lang.get('LBL_TIMEZONE_UPDATED'),\n                    });\n                }\n            }\n\n            this.updatePreferences(clientPref, updateCallback);\n        }\n    },\n\n    /**\n     * Return client's timezone params.\n     *\n     * @return {Object}\n     **/\n    getClientTimezonePref: function() {\n        const secOffset = new Date().getTimezoneOffset() * 60;\n        const tzOffsetSec = (secOffset === 0) ? secOffset : -secOffset;\n        const tzOffset = (new Date()).toString().match(/([-\\+][0-9]+)\\s/)[1];\n        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n        return {\n            timezone: timezone,\n            tz_offset: tzOffset,\n            tz_offset_sec: tzOffsetSec,\n        };\n    },\n\n    // Fixme This doesn't belong in user. See TY-526.\n    /**\n     * Loads the current user's locale.\n     *\n     * @param {Function} [callback] Called when loading the locale completes.\n     */\n    loadLocale: function(callback) {\n        SUGAR.App.api.call('read', SUGAR.App.api.buildURL('locale'), null, {\n            success: function(data) {\n                if (callback) callback(data);\n            },\n            error: function(err) {\n                SUGAR.App.error.handleHttpError(err);\n                if (callback) callback(err);\n            }\n        });\n    },\n\n    /**\n     * Retrieves the current user's preferred language.\n     *\n     * @return {string} The current user's preferred language.\n     */\n    getLanguage: function() {\n        return this.getPreference('language') || SUGAR.App.cache.get('lang');\n    },\n\n    /**\n     * Updates the user's preferred language.\n     *\n     * @param {string} language Language key.\n     * @param {Function} [callback] Callback called when update completes.\n     */\n    updateLanguage: function(language, callback) {\n        //Note that `err` is only relevant here when called for error case\n        var done = function(err) {\n            if (!err) SUGAR.App.lang.updateLanguage(language);\n            if (callback) callback(err);\n        };\n        this.update(\"update\", {preferred_language: language}, done);\n    },\n\n    /**\n     * Updates the user's profile.\n     *\n     * @param {Object} attributes The model attributes to update for user.\n     * @param {Function} [callback] Callback called when update completes.\n     */\n    updateProfile: function(attributes, callback) {\n        //Note that `err` is only relevant here when called for error case\n        var done = function(err) {\n            if (callback) callback(err);\n        };\n        this.update('update', attributes, done);\n    },\n\n    /**\n     * Updates the user's preferences.\n     *\n     * @param {Object} attributes The attributes to update for user.\n     * @param {Function} [callback] Callback called when update completes.\n     */\n    updatePreferences: function(attributes, callback) {\n        var self = this;\n        if (SUGAR.App.api.isAuthenticated()) {\n            SUGAR.App.api.call('update', SUGAR.App.api.buildURL('me/preferences'), attributes, {\n                success: function(data) {\n                    if (data._hash) {\n                        SUGAR.App.cache.set('userpref:hash', data._hash);\n                        self.set({'_hash': data._hash});\n                    }\n                    //Immediately update our user's preferences to reflect latest changes\n                    _.each(attributes, function(val, key) {\n                        if (!_.isUndefined(data[key])) {\n                            self.setPreference(key, data[key]);\n                        }\n                    });\n                    if (callback) callback();\n                },\n                error: function(err) {\n                    SUGAR.App.error.handleHttpError(err);\n                    if (callback) callback(err);\n                }\n            });\n        } else {\n            if (callback) callback();\n        }\n    },\n\n    /**\n     * Updates the user.\n     *\n     * @param {string} method Operation type: either 'read', 'update',\n     *   'create', or 'delete'. {@see SUGAR.Api#me}.\n     * @param {Object} payload An object literal with payload.\n     * @param {Object} callback Callback called when update completes. In\n     *   case of error, `App.error.handleHttpError` will be called here.\n     */\n    update: function(method, payload, callback) {\n        if (SUGAR.App.api.isAuthenticated()) {\n            SUGAR.App.api.me(method, payload, null, {\n                success: _.bind(function(data) {\n                    if (data.current_user) {\n                        if (data.current_user._hash) {\n                            SUGAR.App.cache.set('userpref:hash', data.current_user._hash);\n                        }\n                        this.set(data.current_user);\n                    }\n                    if (callback) callback();\n                }, this),\n                error: function(err) {\n                    SUGAR.App.error.handleHttpError(err);\n                    if (callback) callback(err);\n                }\n            });\n        } else {\n            callback();\n        }\n    },\n\n    /**\n     * Gets ACLs.\n     * Precondition: either the user is logged in or an `_reset` call has\n     * set the user manually.\n     *\n     * @return {Object} Dictionary of ACLs.\n     */\n    getAcls: function() {\n        return this.get('acl') || {};\n    },\n\n    /**\n     * Gets a preference by name.\n     *\n     * @param {string} name The preference name.\n     * @return {*} The value of the user preference, or `name` if no\n     *   corresponding preference value exists.\n     *\n     * @todo support category parameter for preferences.\n     */\n    getPreference: function(name) {\n        var preferences = this.get('preferences') || {};\n        return preferences[name];\n    },\n\n    /**\n     * Set preference by name. Will only be stored locally.\n     *\n     * @param {string} name The preference name.\n     * @param {*} value The new preference value.\n     * @return {Object} The instance of this user.\n     *\n     * @todo support category parameter for preferences.\n     * @todo support save preferences on server.\n     */\n    setPreference: function(name, value) {\n        var preferences = this.get('preferences') || {};\n        preferences[name] = value;\n        return this.set('preferences', preferences);\n    },\n\n    /**\n     * Returns an object with all the user's currency preferences.\n     * If the user hasn't specified any preferences,\n     * these default to system currency preferences.\n     *\n     * @return {Object} The user's currency preferences.\n     */\n    getCurrency: function() {\n        var preferences = this.get('preferences'),\n            currencyObj = {};\n\n        if (preferences) {\n            preferences.currency_create_in_preferred = preferences.currency_create_in_preferred || false;\n            currencyObj = _.pick(\n                preferences,\n                'currency_id',\n                'currency_iso',\n                'currency_name',\n                'currency_rate',\n                'currency_show_preferred',\n                'currency_create_in_preferred',\n                'currency_symbol'\n            );\n        }\n\n        return currencyObj;\n    },\n\n    /**\n     * Checks if the user has one or more licenses.\n     * @param {string|Array} licenseType one or more licenses to check\n     * @param {boolean} hasAll if true, the user must have all the provided licenses\n     * @return {boolean} true if the user's licenses match the criteria, false otherwise\n     */\n    hasLicense: function(licenseType, hasAll = false) {\n        let userLicenses = this.get('licenses');\n        if (!_.isArray(userLicenses)) {\n            return false;\n        }\n\n        if (_.isString(licenseType)) {\n            licenseType = [licenseType];\n        }\n\n        let licenseMatcher = license => userLicenses.includes(license);\n        return hasAll ? licenseType.every(licenseMatcher) : licenseType.some(licenseMatcher);\n    },\n\n    /**\n     * Gets a list of all the product codes of products in use by the user\n     *\n     * @return {Array} the unique list of product codes\n     */\n    getProductCodes: function() {\n        return _.uniq(_.pluck(this.get('products'), 'product_code'));\n    },\n\n    /**\n     * Gets a list of all the readable names of products in use by the user\n     *\n     * @return {Array} the unique list of product names\n     */\n    getProductNames: function() {\n        return _.uniq(_.pluck(this.get('products'), 'product_name'));\n    },\n\n    /**\n     * Checks if the user has a Sell license.\n     * @return {boolean}\n     */\n    hasSellLicense: function() {\n        return this.hasLicense('SUGAR_SELL');\n    },\n\n    /**\n     * Checks if the user has a Serve license.\n     * @return {boolean}\n     */\n    hasServeLicense: function() {\n        return this.hasLicense('SUGAR_SERVE');\n    },\n\n    /**\n     * Checks if the user has a Sell/Serve license. If hasBoth is true, then the user must\n     * have both licenses. If hasBoth is false (default), then having at least one license is enough.\n     * @param {boolean} hasBoth\n     * @return {boolean}\n     */\n    hasSellServeLicense: function(hasBoth = false) {\n        return this.hasLicense(['SUGAR_SELL', 'SUGAR_SERVE'], hasBoth);\n    },\n\n    /**\n     * Checks if the user has a Connect license.\n     * @return {boolean}\n     */\n    hasConnectLicense: function() {\n        return this.hasLicense('CONNECT');\n    },\n\n    /**\n     * Checks if the user has a Discover license.\n     * @return {boolean}\n     */\n    hasDiscoverLicense: function() {\n        return this.hasLicense('DISCOVER');\n    },\n\n    /**\n     * Checks if the user has a Hint license.\n     * @return {boolean}\n     */\n    hasHintLicense: function() {\n        return this.hasLicense('HINT');\n    },\n\n    /**\n     * Checks if the user has a Sugar Automate license.\n     * @return {boolean}\n     */\n     hasAutomateLicense: function() {\n        return this.hasLicense('AUTOMATE');\n    },\n\n    /**\n     * Checks if the user has a Maps license.\n     * @return {boolean}\n     */\n    hasMapsLicense: function() {\n        return this.hasLicense('MAPS');\n    },\n\n    /**\n     * Checks if the user has an Advanced Forecasting license.\n     * @return {boolean}\n     */\n    hasAdvancedForecastingLicense: function() {\n        return this.hasLicense('ADVANCEDFORECAST');\n    },\n\n    /**\n     * Checks if the user has a Predict Advanced or Predict Premier license.\n     * @return {boolean}\n     */\n    hasPredictLicense: function() {\n        return this.hasPredictAdvancedLicense() || this.hasPredictPremierLicense();\n    },\n\n    /**\n     * Checks if the user has a Predict Advanced license.\n     * @return {boolean}\n     */\n    hasPredictAdvancedLicense: function() {\n        return this.hasLicense('PREDICT_ADVANCED');\n    },\n\n    /**\n     * Checks if the user has a Predict Premier license.\n     * @return {boolean}\n     */\n    hasPredictPremierLicense: function() {\n        return this.hasLicense('PREDICT_PREMIER');\n    },\n\n    /**\n     * Checks if the user has completed their set up steps\n     * @return {boolean}\n     */\n    isSetupCompleted: function() {\n        return !this.get('show_wizard');\n    },\n\n    lastState: makeLastState()\n});\n\nconst MyUser = new User();\n\nEvents.on('app:logout', function(clear) {\n    SUGAR.App.cache.cut('userpref:hash');\n    if (clear === true) {\n        MyUser.clear({silent: true});\n    }\n});\n\nEvents.on('cache:clean', function(cb) {\n    cb(MyUser.lastState._getPreservedKeys());\n});\n\nmodule.exports = MyUser;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Bean = require('./bean');\nconst PluginManager = require('../core/plugin-manager');\n\n/**\n * Base bean collection class. It extends `Backbone.Collection`.\n *\n * A bean collection is a collection of beans. To instantiate a bean collection,\n * you need to use {@link Data/DataManager#createBeanCollection}.\n *\n * Example of usage:\n *\n * The following snippet will create a collection of bean which belongs to the\n * module 'Accounts':\n *\n * ```\n * const DataManager = require('./data-manager');\n * let accounts = DataManager.createBeanCollection('Accounts');\n * accounts.add({name: 'account1', industry: 'Banking'});\n * ```\n *\n * **Filtering and searching**\n *\n * The collection's {@link Data/BeanCollection#fetch} method supports filter and\n * search options. For example, to search favorite accounts that have the string\n * `\"Acme\"` in their name:\n * ```\n * const DataManager = require('./data-manager');\n * let accounts = DataManager.createBeanCollection('Accounts');\n * accounts.fetch({\n *     favorites: true,\n *     query: \"Acme\"\n * });\n * ```\n *\n * @module Data/BeanCollection\n * @class\n */\nconst BeanCollection = Backbone.Collection.extend({\n    /**\n     * The request object that is currently syncing against the server.\n     *\n     * This object is needed to determine if a fetch request should be\n     * aborted for the collection (e.g. if a new fetch request returns a\n     * response prior to a previous fetch request).\n     *\n     * @private\n     * @type {SUGAR.HttpRequest}\n     * @memberOf Data/BeanCollection\n     */\n    _activeFetchRequest: null,\n\n    /**\n     * The default model of a bean collection is a {@link Data/Bean}.\n     *\n     * @readonly\n     * @type {Data/Bean}\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    model: Bean,\n\n    /**\n     * Prepares related bean collections and attach collection plugins.\n     *\n     * @param {Object[]|Data/Bean[]} models Initial array of models.\n     * @param {Object} [options] A hash of options.\n     * @param {Object} [options.link] A link specification.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    constructor: function(models, options) {\n        PluginManager.attach(this, 'collection');\n        if (options && options.link) {\n            /**\n             * Reference to a relationship.\n             *\n             * @type {Object}\n             * @memberOf Data/BeanCollection\n             * @instance\n             * @name link\n             */\n            this.link = options.link;\n            delete options.link;\n        }\n        Backbone.Collection.prototype.constructor.call(this, models, options);\n    },\n\n    /**\n     * Sets the given options persistently on the bean collection. They will be\n     * used by {@link Data/BeanCollection#fetch}.\n     *\n     * @param {Object[]|Data/Bean[]} models Initial array of models.\n     * @param {Object} options Backbone collection options.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    initialize: function(models, options) {\n        /**\n         * List of persistent fetch options.\n         *\n         * @type {Object}\n         * @private\n         */\n        this._persistentOptions = {};\n\n        /**\n         * Object keeping track of new models added to the collection\n         * that are to be created and linked to their parent bean.\n         * It contains an array of attribute hashes.\n         *\n         * @type {Array}\n         */\n        this._create = [];\n\n        /**\n         * Object keeping track of removed models from the collection that\n         * are to be unlinked from their parent bean. It contains an array\n         * of ids.\n         *\n         * @type {Array}\n         */\n        this._delete = [];\n\n        /**\n         * Object keeping track of added models to the collection that are\n         * to be linked to their parent bean. It contains an array of ids.\n         *\n         * @type {Array}\n         */\n        this._add = [];\n\n        this.setOption(options);\n        this._bindCollectionEvents();\n\n        Backbone.Collection.prototype.initialize.call(this, models, options);\n\n        /**\n         * Readonly property for the total records in server.\n         *\n         * Use {@link Data/BeanCollection#fetchTotal} to get the current total.\n         *\n         * @type {number}\n         * @readOnly\n         * @memberOf Data/BeanCollection\n         * @name total\n         * @instance\n         */\n        this.total = null;\n    },\n\n    /**\n     * Bind collection events to activeRequest.\n     *\n     * @private\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    _bindCollectionEvents: function() {\n        this.on('data:sync:complete', function() {\n            var activeFetchRequest = this.getFetchRequest();\n            if (activeFetchRequest) {\n                this._activeFetchRequest = null;\n            }\n        }, this);\n\n        this.on('remove', this._decrementTotal, this);\n        if (!this.link) {\n            return;\n        }\n\n        this.on('sync', this.resetDelta, this);\n    },\n\n    /**\n     * Decrements the {@link Data/BeanCollection#total collection total}.\n     *\n     * @protected\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    _decrementTotal: function() {\n        if (this.total) {\n            this.total--;\n        }\n    },\n\n    /**\n     * Keeps track of the added models.\n     *\n     * @param {Object|Object[]|Data/Bean|Data/Bean[]} models The models to add.\n     * @param {Object} options A hash of options.\n     * @return {Data/Bean|Data/Bean[]} The added models.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    add: function (models, options) {\n        models = Backbone.Collection.prototype.add.call(this, models, options);\n\n        if (_.isUndefined(models) || !this.link || (options && options.method)) {\n            return models;\n        }\n\n        models = _.isArray(models) ? models : [models];\n\n        _.each(models, (model) => {\n            if (!model) {\n                return;\n            }\n\n            if (model.isNew()) {\n                this._create.push(model);\n            } else {\n                const toDelete = _.find(this._delete, model);\n                if (toDelete) {\n                    this._delete = _.without(this._delete, toDelete);\n                } else {\n                    this._add.push(model);\n                }\n            }\n        }, this);\n\n        return models.length === 1 ? models[0] : models;\n    },\n\n    /**\n     * Keeps track of the removed models.\n     *\n     * @param {Object|Object[]|Data/Bean|Data/Bean[]} models The models to\n     *   remove.\n     * @param {Object} options A hash of options.\n     * @return {Data/Bean|Data/Bean[]} The removed models.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    remove: function (models, options) {\n        models = Backbone.Collection.prototype.remove.call(this, models, options);\n\n        if (_.isUndefined(models) || !this.link) {\n            return models;\n        }\n\n        models = _.isArray(models) ? models : [models];\n\n        _.each(models, (model) => {\n            if (!model) {\n                return;\n            }\n\n            if (model.isNew()) {\n                this._create = _.without(this._create, model);\n            } else if (_.contains(this._add, model)) {\n                this._add = _.without(this._add, model);\n            } else {\n                this._delete.push(model);\n            }\n        }, this);\n\n        return models.length === 1 ? models[0] : models;\n    },\n\n    /**\n     * Keeps track of the unsynced changes on this collection.\n     *\n     * @param {Object|Object[]|Data/Bean|Data/Bean[]} models The models to\n     *   reset the collection with.\n     * @param {Object} options A hash of options.\n     * @return {Data/Bean|Data/Bean[]} The model(s) you have reset the\n     *   collection with.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    reset: function(models, options) {\n        this.resetDelta();\n\n        return Backbone.Collection.prototype.reset.call(this, models, options);\n    },\n\n    /**\n     * Gets a hash of unsynced changes operated on the collection.\n     *\n     * Adds the relationship fields for records to be linked.\n     *\n     * @return {Object} A hash representing the unsynced changes.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getDelta: function() {\n        let delta = {};\n        delta.create = _.invoke(this._create, 'toJSON');\n\n        // Gets the link field name of the relationship between the parent bean\n        // and the collection from this collection's module vardefs.\n        let oppositeLink = SUGAR.App.data.getOppositeLink(this.link.bean.module, this.link.name);\n        let relationshipFields = SUGAR.App.data.getRelationFields(this.module, oppositeLink);\n\n        delta.add = _.map(this._add, (model) => {\n            let objToAdd = {id: model.id};\n            _.each(relationshipFields, (relationshipField) => {\n                if (model.get(relationshipField)) {\n                    objToAdd[relationshipField] = model.get(relationshipField);\n                }\n            });\n\n            return objToAdd;\n        });\n\n        delta.delete = _.pluck(this._delete, 'id');\n\n        return delta;\n    },\n\n    /**\n     * Checks if there is anything in the deltas.\n     *\n     * @return {boolean} `true` if some records are to be created, linked\n     * or unlinked to the bean.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    hasDelta: function() {\n        return !_.all([this._add, this._delete, this._create], _.isEmpty);\n    },\n\n    /**\n     * Resets the delta object representing the unsaved collection changes.\n     *\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    resetDelta: function() {\n        this._create = [];\n        this._add = [];\n        this._delete = [];\n    },\n\n    /**\n     * Disposes this collection.\n     *\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    dispose: function() {\n        PluginManager.detach(this, 'collection');\n    },\n\n    /**\n     * Prepares the model to be added to the collection.\n     *\n     * @param {Data/Bean} model Model to be added to the collection.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/Bean} prepared model.\n     * @private\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    _prepareModel: function(model, options) {\n        var searchInfo = model._search;\n        delete model._search;\n\n        model = Backbone.Collection.prototype._prepareModel.call(this, model, options);\n        if (model && !model.link) model.link = this.link;\n        if (searchInfo) {\n            /**\n             * FTS search results.\n             *\n             * Example:\n             * ```\n             * {\n             *     highlighted: {\n             *         account_name: {\n             *             label: 'LBL_ACCOUNT_NAME',\n             *             module: \"Leads\",\n             *             text: 'Kings Royalty &lt;span class=\"highlight\"&gt;Trust&lt;/span&gt;'\n             *         }\n             *     },\n             *     score: 1\n             * }\n             * ```\n             *\n             * @memberOf Data/Bean\n             * @type {Object}\n             * @name searchInfo\n             * @instance\n             */\n            model.searchInfo = searchInfo;\n        }\n        return model;\n    },\n\n    /**\n     * Fetches beans. See {@link Data/BeanCollection#paginate} for details\n     * about pagination options.\n     *\n     * Only one fetch request can be executed at a time - previous fetch\n     * requests will be aborted.\n     *\n     * @param {Object} [options] Fetch options.\n     * @param {boolean} [options.relate] `true` if relationships should be\n     *   fetched. `false` otherwise.\n     * @param {boolean} [options.myItems] `true` if only records assigned to\n     *   the current user should be fetched. `false` otherwise.\n     * @param {boolean} [options.favorites] `true` if favorited records should\n     *   be fetched. `false` otherwise.\n     * @param {boolean} [options.add] `true` if new records should be appended\n     *   to the collection. `false` otherwise.\n     * @param {string} [options.query] Search query string.\n     * @param {Function} [options.success] The success callback to execute.\n     * @param {Function} [options.error] The error callback to execute.\n     * @return {SUGAR.HttpRequest} The created fetch request.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    fetch: function(options) {\n        options = _.extend({}, this.getOption(), options);\n\n        this.abortFetchRequest();\n        /**\n         * Field names.\n         *\n         * A list of fields that are populated on collection members.\n         * This property is used to build the `fields` URL parameter when\n         * fetching beans.\n         *\n         * @memberOf Data/BeanCollection\n         * @name fields\n         * @type {Array}\n         * @instance\n         */\n        options.fields = this.fields = options.fields || this.fields || null;\n        options.myItems = _.isUndefined(options.myItems) ? this.myItems : options.myItems;\n        options.favorites = _.isUndefined(options.favorites) ? this.favorites : options.favorites;\n        options.query = _.isUndefined(options.query) ? this.query : options.query;\n\n        // FIXME SC-5596: This option is temporary, and was added as part of\n        // SC-2703. It will be removed when we update our sidecar components\n        // to listen on `update` instead of reset.\n        options.reset = _.isUndefined(options.reset) ? true : options.reset;\n\n        this._activeFetchRequest = Backbone.Collection.prototype.fetch.call(this, options);\n        return this.getFetchRequest();\n    },\n\n    /**\n     * Gets the currently active fetch request.\n     *\n     * @return {SUGAR.HttpRequest} The currently active http fetch request.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getFetchRequest: function () {\n        if (_.isFunction(this._activeFetchRequest)) {\n            return this._activeFetchRequest();\n        } else {\n            return this._activeFetchRequest;\n        }\n    },\n\n    /**\n     * Aborts the currently active fetch request.\n     *\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    abortFetchRequest: function () {\n        var activeFetchRequest = this.getFetchRequest();\n        if (activeFetchRequest) {\n            SUGAR.App.api.abortRequest(activeFetchRequest.uid);\n            this._activeFetchRequest = null;\n        }\n    },\n\n    /**\n     * Resets pagination properties on this collection to initial values.\n     *\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    resetPagination: function() {\n        this.offset = this.getOption('offset') || 0;\n        this.next_offset = 0;\n        this.page = this.getOption('page') || 1;\n    },\n\n    /**\n     * Paginates a collection. This methods calls\n     * {@link Data/BeanCollection#fetch}, hence it\n     * supports the same options as well as the one described below.\n     *\n     * @param {Object} [options] Fetch options.\n     * @param {number} [options.page=1] Page index from the current page to\n     *   paginate to.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    paginate: function(options) {\n        options = options || {};\n        var maxSize = options.limit || SUGAR.App.config.maxQueryResult;\n        options.page = options.page || 1;\n\n        // Since we're paginating, we want the Collection.set method to be\n        // invoked instead of `reset`.\n        options.reset = _.isUndefined(options.reset) ? false : options.reset;\n\n        // fix page number since our offset is already at the end of the collection subset\n        options.page--;\n\n        if (!_.isUndefined(options.strictOffset) && options.strictOffset === true) {\n            options.offset = options.page * maxSize;\n        } else if (maxSize && _.isNumber(this.offset)) {\n            options.offset = this.offset + (options.page * maxSize);\n        }\n\n        if (options.add){\n            options = _.extend({update:true, remove:false}, options);\n        }\n\n        this.fetch(options);\n    },\n\n    /**\n     * Fetches the total amount of records on the bean collection, and sets\n     * it on the {@link Data/BeanCollection#total} property.\n     *\n     * Returns the total amount of filtered records if a `filterDef`\n     * property is set on the collection.\n     *\n     * @param {Object} [options] Fetch total options.\n     * @param {Function} [options.success] Success callback.\n     * @param {Function} [options.complete] Complete callback.\n     * @param {Function} [options.error] Error callback.\n     * @return {SUGAR.HttpRequest|undefined} Result of {@link SUGAR.Api#call},\n     *   or `undefined` if {@link Data/BeanCollection#total} is not `null`.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    fetchTotal: function(options) {\n        options = options || {};\n\n        if (!_.isNull(this.total) && _.isFunction(options.success)) {\n            options.success.call(this, this.total);\n            return;\n        }\n\n        options.success = _.wrap(options.success, _.bind(function(orig, data) {\n            this.total = parseInt(data.record_count, 10);\n            if (orig && _.isFunction(orig)) {\n                orig(this.total);\n            }\n        }, this));\n\n        var module = this.module;\n        var data = null;\n        options.filter = options.filterDef || this.filterDef;\n\n        if (this.link) {\n            data = {\n                id: this.link.bean.id,\n                link: this.link.name\n            };\n            module = this.link.bean.module;\n        }\n\n        var callbacks = _.pick(options, 'success', 'complete', 'error');\n        options = _.omit(options, 'success', 'complete', 'error');\n\n        return SUGAR.App.api.count(module, data, callbacks, options);\n    },\n\n    /**\n     * A convenience method that checks to see if there are at least the\n     * amount of records passed in `amount`. Also passes to a provided\n     * success callback the length of records up to `amount`, and if there\n     * are more records to be fetched (`hasMore`).\n     *\n     * Fetches the partial amount of filtered records if a `filterDef`\n     * property is set on the collection.\n     *\n     * @param {number} amount The number of records to check if there are a\n     *   minimum of.\n     * @param {Object} [options] Fetch partial total options.\n     * @param {Object} [options.filterDef] Filter definition to be applied.\n     * @param {Function} [options.success] Success callback.\n     * @param {Function} [options.complete] Complete callback.\n     * @param {Function} [options.error] Error callback.\n     * @return {SUGAR.HttpRequest} Result of {@link SUGAR.Api#call}.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    hasAtLeast: function(amount, options) {\n        options = options || {};\n        var method = 'read';\n        options.fields = ['id'];\n        delete options.view;\n        options.silent = true;\n        options.success = _.wrap(options.success, _.bind(function(orig, data) {\n            var length = this.link ? data.record_count : data.records.length;\n            var hasAtLeastAmount = length >= amount;\n            var properties = {\n                length: length,\n                hasMore: this.link ? data.has_more : data.next_offset !== -1\n            };\n\n            if (_.isFunction(orig)) {\n                orig(hasAtLeastAmount, properties);\n            }\n\n            this.reset(null, {silent: true});\n        }, this));\n\n        var module = this.module;\n        var data = null;\n        var endpoint = 'records';\n        options.filter = options.filterDef || this.filterDef;\n        options.limit = options.limit || amount;\n\n        if (this.link) {\n            data = {\n                id: this.link.bean.id,\n                link: this.link.name\n            };\n            module = this.link.bean.module;\n            endpoint = 'relatedLeanCount';\n        }\n\n        var callbacks = _.pick(options, 'success', 'complete', 'error');\n        options = _.omit(options, 'success', 'complete', 'error');\n        options = SUGAR.App.data.parseOptionsForSync(method, this, options);\n\n        if (this.link) {\n            return SUGAR.App.api[endpoint](module, data, options.params, callbacks, options.apiOptions);\n        }\n        return SUGAR.App.api[endpoint](method, module, data, options.params, callbacks, options.apiOptions);\n\n    },\n\n    /**\n     * Gets the current page of collection being displayed depending on the\n     * offset.\n     *\n     * @param {Object} [options] Fetch options used when paginating.\n     * @param {number} [options.limit=App.config.maxQueryResult] The size of\n     *   each page.\n     * @return {number} The current page number.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getPageNumber: function(options) {\n        var pageNumber = 1;\n        var maxSize = SUGAR.App.config.maxQueryResult;\n        if(options){\n            maxSize = options.limit || maxSize;\n        }\n        if (this.offset && maxSize) {\n            pageNumber = Math.ceil(this.offset / maxSize);\n        }\n        return pageNumber;\n    },\n\n    /**\n     * Returns string representation useful for debugging.\n     *\n     * Format:\n     * <code>coll:[module-name]-[length]</code>  or\n     * <code>coll:[related-module-name]/[id]/[module-name]-[length]</code>\n     * if it's a collection of related beans.\n     *\n     * @return {string} The string representation of this collection.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    toString: function() {\n        return \"coll:\" + (this.link ?\n            (this.link.bean.module + \"/\" + this.link.bean.id + \"/\") : \"\") +\n            this.module + \"-\" + this.length;\n    },\n\n    /**\n     * Returns the next model in a collection, paginating if needed.\n     *\n     * @param {Object} current Current model or id of a model.\n     * @param {Object} callback Callback for success call.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getNext: function(current, callback) {\n        var ind = -1;\n        var nextFn = () => { callback.apply(this, [this.at(ind + 1), 'next']); };\n\n        if (this.hasNextModel(current)) {\n            ind = this.getModelIndex(current);\n            if (ind + 1 >= this.length) {\n                this.paginate({\n                    add: true,\n                    success: nextFn,\n                });\n            } else {\n                nextFn();\n            }\n        }\n    },\n\n    /**\n     * Finds the previous model in a collection and calls a function on it.\n     *\n     * @param {Object} current Current model or id of a model.\n     * @param {Function} callback Callback for success call.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getPrev: function (current, callback) {\n        var ind = -1,\n            result = null,\n            self = this;\n        if (this.hasPreviousModel(current)) {\n            ind = this.getModelIndex(current);\n            result = this.at(ind - 1);\n        }\n        callback.apply(self, [result, 'prev']);\n    },\n\n    /**\n     * Checks whether is there next model in collection.\n     *\n     * @param {Object} current Current model or id of a model.\n     * @return {boolean} `true` if has next model, `false` otherwise.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    hasNextModel: function(current) {\n        var index = this.getModelIndex(current),\n            offset = !_.isUndefined(this.next_offset) ? parseInt(this.next_offset, 10) : -1;\n        return index >= 0 && ((this.length > index + 1 ) || offset !== -1);\n    },\n\n    /**\n     * Checks whether is there previous model in this collection.\n     *\n     * @param {Object} current Current model or id of a model.\n     * @return {boolean} `true` if has previous model, `false` otherwise.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    hasPreviousModel: function (current) {\n        return this.getModelIndex(current) > 0;\n    },\n\n    /**\n     * Returns the index of the model in this collection.\n     *\n     * @param {Object} model Current model.\n     * @return {number} The index of the passed `model` in this array.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getModelIndex: function (model) {\n        return this.indexOf(this.get(model.id));\n    },\n\n    /**\n     * Sets the default fetch options (one or many) on the model.\n     *\n     * @param {string|Object} key The name of the attribute, or a hash of\n     *   attributes.\n     * @param {*} [val] The default value for the `key` argument.\n     * @return {Data/BeanCollection} This instance.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    setOption: function(key, val) {\n        var attrs;\n        if (_.isObject(key)) {\n            attrs = key;\n        } else {\n            (attrs = {})[key] = val;\n        }\n\n        _.extend(this._persistentOptions, attrs);\n        return this;\n    },\n\n    /**\n     * Unsets a default fetch option (or all).\n     *\n     * @param {string|Object} [key] The name of the option to unset, or\n     *   nothing to unset all options.\n     * @return {Data/BeanCollection} This instance.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    unsetOption: function(key) {\n        if (key) {\n            this.setOption(key, void 0);\n        } else {\n            this._persistentOptions = {};\n        }\n\n        return this;\n    },\n\n    /**\n     * Gets one or all persistent fetch options.\n     *\n     * @param {string|Object} [key] The name of the option to retrieve, or\n     *   nothing to retrieve all options.\n     * @return {*} A specific option, or the list of options.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    getOption: function(key) {\n        if (key) {\n            return this._persistentOptions[key];\n        }\n        return this._persistentOptions;\n    },\n\n    /**\n     * Clones the collection including the {@link Data/BeanCollection#link} and\n     * all the persistent options.\n     *\n     * @return {Data/BeanCollection} The new collection with an identical\n     *   list of models as this one.\n     * @memberOf Data/BeanCollection\n     * @instance\n     */\n    clone: function() {\n        var newCol = Backbone.Collection.prototype.clone.call(this);\n        newCol.link = _.clone(this.link);\n        newCol.setOption(_.clone(this.getOption()));\n        return newCol;\n    }\n});\n\nmodule.exports = BeanCollection;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * Base bean class. Beans extend `Backbone.Model`.\n *\n * Use {@link Data.DataManager} to create instances of beans.\n *\n * **CRUD**\n *\n * Use standard Backbone's `fetch`, `save`, and `destroy`\n * methods to perform CRUD operations on beans. See the\n * {@link Data.DataManager} class for details.\n *\n * **Validation**\n *\n * This class does not override `Backbone.Model.validate`.\n * The validation is done in the `save` method. If the bean is invalid the save\n * is rejected. Use {@link Data/Bean#isValidAsync} to check if the bean\n * is valid in other situations. Failed validations trigger an\n * `app:error:validation:<field-name>` event.\n *\n * @module Data/Bean\n * @class\n */\n\nconst PluginManager = require('../core/plugin-manager');\nconst Utils = require('../utils/utils');\nconst Validation = require('./validation');\n\n/**\n * Calls a given callback function with the result of validating this model.\n *\n * @param {Array|Object} fields A hash of field definitions or array of field\n *   names to validate.\n * @param {Function} callback Function called with the `isValid` flag once the\n *   validation is complete.\n * @private\n */\nBackbone.Model.prototype.doValidate = function(fields, callback) {\n    callback(this.isValid());\n};\n\n/**\n * Adds validation errors to the passed in error object.\n *\n * @param {Object} errors Validation errors object to fill in.\n * @param {Object} result Validation result.\n * @param {string} fieldName Name of the field that failed validation.\n * @param {string} validatorName Name of the validator that failed.\n * @private\n */\nfunction _addValidationError(errors, result, fieldName, validatorName) {\n    if (_.isUndefined(result)) return;\n\n    if (_.isUndefined(errors[fieldName])) {\n        errors[fieldName] = {};\n    }\n    errors[fieldName][validatorName] = result;\n}\n\nconst Bean = Backbone.Model.extend({\n    /**\n     * Extends `Backbone.Model#constructor`. Attaches model plugins to allow\n     * `initialize()` to be overridden.\n     *\n     * @param {Object} [attributes] Standard Backbone model attributes.\n     * @param {Object} [options] Standard Backbone model options.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    constructor: function(attributes, options) {\n        PluginManager.attach(this, 'model');\n        Backbone.Model.prototype.constructor.call(this, attributes, options);\n    },\n\n    /**\n     * Initializes this bean. Extends `Backbone.Model#initialize`.\n     *\n     * @param {Object} [attributes] Standard Backbone model attributes.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    initialize: function(attributes) {\n        Backbone.Model.prototype.initialize.call(this, attributes);\n\n        // assume our attributes from creation are synced\n        this.setSyncedAttributes(this.attributes);\n\n        this._bindEvents();\n        this._relatedCollections = this._relatedCollections || null;\n\n        /**\n         * List of persistent fetch options.\n         *\n         * @type {Object}\n         * @private\n         */\n        this._persistentOptions = {};\n\n        /**\n         * The request object that is currently syncing against the server.\n         *\n         * This object is needed to determine if a fetch request should be\n         * aborted for the collection (e.g. if a new fetch request returns a\n         * response prior to a previous fetch request).\n         *\n         * @private\n         * @memberOf Data/Bean\n         * @type {SUGAR.Api.HttpRequest}\n         */\n        this._activeFetchRequest = null;\n\n        // Populate with default values only if the model is new and has not yet been populated\n        if (this.isNew() && this._defaults) {\n            _.each(this._defaults, function(value, key) {\n                if (!this.has(key)) {\n                    if (_.isObject(value)) {\n                        value = SUGAR.App.utils.deepCopy(value);\n                    }\n                    this.set(key, value, { silent: true });\n                }\n            }, this);\n        }\n\n        //Clone the fields to allow dynamic changes to vardefs per bean instance\n        if (this.fields) {\n            this.fields = Utils.deepCopy(this.fields);\n        }\n\n        this.addValidationTask('sidecar', _.bind(this._doValidate, this));\n    },\n\n    /**\n     * Extends `Backbone.Model#fetch`.\n     *\n     * Only one fetch request can be executed at a time - previous fetch\n     * requests will be aborted.\n     *\n     * @param {Object} [options] Fetch options.\n     * @param {Function} [options.success] The success callback to execute.\n     * @param {Function} [options.error] The error callback to execute.\n     * @return {SUGAR.Api.HttpRequest} The active fetch request.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    fetch: function(options) {\n        options = _.extend({}, this.getOption(), options);\n        this.abortFetchRequest();\n        this._activeFetchRequest = Backbone.Model.prototype.fetch.call(this, options);\n        return this._activeFetchRequest;\n    },\n\n    /**\n     * Retrieves the currently active fetch request.\n     *\n     * @return {SUGAR.Api.HttpRequest} The active fetch request.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getFetchRequest: function() {\n        return this._activeFetchRequest;\n    },\n\n    /**\n     * Aborts the currently active fetch request.\n     *\n     * @memberOf Data/Bean\n     * @instance\n     */\n    abortFetchRequest: function() {\n        var req = this.getFetchRequest();\n        if (req) {\n            SUGAR.App.api.abortRequest(req.uid);\n        }\n    },\n\n    /**\n     * Overrides `Backbone.Model#set` to add specific logic for `collection`\n     * fields.\n     *\n     * @param {string|Object} key The key. Can also be an object with the\n     *   key/value pair.\n     * @param {string} val The value to set.\n     * @param {Object} options A hash of options.\n     * @return {Data/Bean} This bean instance.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    set: function (key, val, options) {\n        if (_.isUndefined(key) || _.isNull(key)) {\n            return this;\n        }\n\n        var attrs;\n        if (typeof key === 'object') {\n            attrs = key;\n            options = val;\n        } else {\n            (attrs = {})[key] = val;\n        }\n\n        options = options || {};\n\n        var collections = this.getCollectionFields(attrs);\n        attrs = _.omit(attrs, _.keys(collections));\n        Backbone.Model.prototype.set.call(this, attrs, options);\n        this._setCollectionFieldValues(collections, options);\n\n        return this;\n    },\n\n    /**\n     * Extends `Backbone.Model#get` to create a mixed bean collection for\n     * `collection` fields if there is none yet.\n     *\n     * @param {string} attr The attribute name.\n     * @return {string} The value of the requested attribute.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    get: function(attr) {\n        var value = Backbone.Model.prototype.get.call(this, attr);\n\n        // If the field is not a `collection` field\n        // or the field has been initialized.\n        if (!this.fields || !this.fields[attr] || this.fields[attr].type !== 'collection' ||\n            value instanceof SUGAR.App.MixedBeanCollection) {\n            return value;\n        }\n\n        // If the field is a `collection` field and has not been initialized.\n        value = this._createMixedBeanCollectionField(attr);\n        Backbone.Model.prototype.set.call(this, _.object([attr], [value]), {silent: true});\n\n        return value;\n    },\n\n    /**\n     * Adds `collection` fields records to the mixed bean collection. If\n     * a mixed bean collection does not exist yet, it will be created.\n     *\n     * @param {Object} collections Object containing collections fields\n     *   attributes.\n     * @param {Object} options A hash of options.\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _setCollectionFieldValues: function (collections, options) {\n        _.each(collections, function (records, key) {\n            //If a collection field is being set to a collection, we should just accept it.\n            if (records instanceof SUGAR.App.MixedBeanCollection) {\n                if (this.get(key) !== records) {\n                    this.stopListening(this.get(key));\n                    Backbone.Model.prototype.set.call(this, _.object([key], [records]), options);\n                    this.listenTo(records, 'update reset', function (collection, options) {\n                        this.trigger('change:' + key, this, collection, options);\n                    });\n\n                    this.off('sync', records.resetDelta, records);\n                    this.on('sync', records.resetDelta, records);\n                }\n            } else {\n                var colOptions = {};\n                var collection = this.get(key);\n\n                //Record list populated from a `collection` field response\n                if (_.isObject(records) && records.records) {\n                    colOptions = _.extend(colOptions, _.omit(records, 'records'));\n                    records = records.records;\n                }\n\n                //We need a collection to add the models to.\n                _.each(colOptions, function (v, k) {\n                    collection[k] = v;\n                });\n\n                collection.offset = collection.next_offset;\n                collection.reset(records, options);\n            }\n        }, this);\n    },\n\n    /**\n     * Creates a mixed bean collection passing the related link bean\n     * collections of this `collection` field.\n     *\n     * @param {string} field A `collection` type field.\n     * @param {Object[]|Data/Bean[]} models The models to add to the collection.\n     * @return {Data/MixedBeanCollection} The newly created mixed bean\n     *   collection.\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _createMixedBeanCollectionField: function (field, models) {\n        var fieldDef = this.fields[field];\n        if (fieldDef && fieldDef.links) {\n            var links = fieldDef.links;\n            if (_.isString(links)) {\n                links = [links];\n            }\n\n            var linkCollections = {};\n            _.each(links, function (link) {\n                if (_.isObject(link) && _.has(link, 'name')) {\n                    link = link.name;\n                }\n\n                if (_.isString(link)) {\n                    linkCollections[link] = this.getRelatedCollection(link);\n                }\n            }, this);\n            var collection = SUGAR.App.data.createMixedBeanCollection(models || [],\n                {links: linkCollections, parentBean: this, collectionField: field}\n            );\n\n            this.listenTo(collection, 'update reset', function(collection, options) {\n                this.trigger('change:' + field, this, collection, options);\n            });\n\n            this.off('sync', collection.resetDelta, collection);\n            this.on('sync', collection.resetDelta, collection);\n\n            return collection;\n        }\n    },\n\n    /**\n     * Binds events on {@link Data/Bean the model}.\n     *\n     * @protected\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _bindEvents: function() {\n        this.on('sync', function() {\n            this._checkAcl();\n            this.setSyncedAttributes(this.attributes);\n        }, this);\n    },\n\n    /**\n     * Checks if the `_acl` attribute has changed from its synced value on\n     * {@link Data/Bean the model}.\n     *\n     * @fires <b>acl:change</b> If the at least one field had its ACLs changed.\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _checkAcl: function() {\n        var changedFieldAcls = this._checkFieldAcls();\n\n        if (_.size(changedFieldAcls) || !_.isEqual(\n            _.omit(this.get('_acl'), 'fields'),\n            _.omit(this.getSynced('_acl'), 'fields')\n        )) {\n            this.trigger('acl:change', changedFieldAcls);\n        }\n    },\n\n    /**\n     * Triggers the `acl:change:<fieldname>` event on all the fields whose\n     * ACLs have changed. All events are triggered on\n     * {@link Data/Bean the model}.\n     *\n     * @return {Object} The hash of fields that had ACL changes.\n     * @fires <b>acl:change:<fieldname></b> For each field whose ACL changed.\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _checkFieldAcls: function () {\n        var changedFieldAcls = {};\n        var fieldsProp = _.property('fields');\n        var syncedFieldAcls = fieldsProp(this.getSynced('_acl')) || {};\n        var fieldAcls = fieldsProp(this.get('_acl')) || {};\n        var fields = _.extend({}, syncedFieldAcls, fieldAcls);\n\n        _.each(fields, function (field, fieldName) {\n            if (!_.isEqual(syncedFieldAcls[fieldName], fieldAcls[fieldName])) {\n                this.trigger('acl:change:' + fieldName);\n                changedFieldAcls[fieldName] = true;\n            }\n        }, this);\n\n        return changedFieldAcls;\n    },\n\n    /**\n     * Disposes this bean.\n     *\n     * @memberOf Data/Bean\n     * @instance\n     */\n    dispose: function() {\n        PluginManager.detach(this, 'model');\n    },\n\n    /**\n     * Caches a collection of related beans in this bean instance.\n     *\n     * @param {string} link Relationship link name.\n     * @param {Data/BeanCollection} collection A collection of related beans to\n     *   cache.\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _setRelatedCollection: function(link, collection) {\n        if (!this._relatedCollections) this._relatedCollections = {};\n        this._relatedCollections[link] = collection;\n    },\n\n    /**\n     * Gets a collection of related beans.\n     *\n     * This method returns a cached in memory instance of the collection. If\n     * the collection doesn't exist in the cache, it will be created using the\n     * {@link Data.DataManager#createRelatedCollection} method.\n     * Use the {@link Data.DataManager#createRelatedCollection} method to get a\n     * new instance of a related collection.\n     *\n     * Example of usage:\n     * ```\n     * var contacts = opportunity.getRelatedCollection('contacts');\n     * contacts.fetch({ relate: true });\n     * ```\n     *\n     * @param {string} link Relationship link name.\n     * @return {Data/BeanCollection} Previously created collection or a new\n     *   collection of related beans.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getRelatedCollection: function(link) {\n        if (this._relatedCollections && this._relatedCollections[link]) {\n            return this._relatedCollections[link];\n        }\n\n        return SUGAR.App.data.createRelatedCollection(this, link);\n    },\n\n    /**\n     * Validates a bean asynchronously.\n     *\n     * This method simply runs validation on the bean and calls the callback\n     * with the result - it does not fire any events or display any alerts.\n     * If you need events and alerts, use {@link Data/Bean#doValidate}.\n     *\n     * Validation is view-agnostic.\n     *\n     * Note: This method is different from `Backbone.Model#isValid`\n     * which does not support the asynchronous validation we require.\n     *\n     * @param {string[]|Object} [fields=this.fields] A hash of field\n     *   definitions or array of field names to validate. If not specified, all\n     *   fields will be validated. Keys are field names, values are field\n     *   definitions (combination of viewdefs and vardefs).\n     * @param {Function} [callback] Function called with `isValid` flag and\n     *   any errors once the validation is complete.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    isValidAsync: function(fields, callback) {\n        fields = fields || this.fields;\n\n        async.waterfall(\n            // run all validation tasks\n            _.flatten([\n                function(waterfallCallback) {\n                    waterfallCallback(null, fields, {});\n                },\n                _.sortBy(this._validationTasks)\n            ]),\n            // waterfall callback\n            function(didWaterfallFail, fields, errors) {\n                if (!didWaterfallFail) {\n                    var isValid = _.isEmpty(errors);\n                    if (_.isFunction(callback)) {\n                        callback(isValid, errors);\n                    }\n                }\n            }\n        );\n    },\n\n    /**\n     * Validates a bean asynchronously - firing events on start, complete,\n     * and failure.\n     *\n     * This method is called before {@link Data/Bean#save}.\n     *\n     * @param {Array|Object} [fields] A hash of field definitions or array\n     *   of field names to validate. If not specified, all fields will be\n     *   validated. View-agnostic validation will be run. Keys are field\n     *   names, values are field definitions (combination of viewdefs and\n     *   vardefs).\n     * @param {Function} [callback] Function called with `isValid` flag once\n     *   the validation is complete.\n     * @fires <b>validation:success</b> If validation passes.\n     * @fires <b>error:validation</b> If validation fails.\n     * @fires <b>validation:complete</b> When validation is finished.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    doValidate: function(fields, callback) {\n        var self = this;\n\n        this.trigger('validation:start');\n\n        this.isValidAsync(fields, function(isValid, errors) {\n            if (isValid) {\n                self.trigger('validation:success');\n            }\n            self.trigger('validation:complete', self._processValidationErrors(errors));\n\n            if (_.isFunction(callback)) {\n                callback(isValid, errors);\n            }\n        });\n    },\n\n    /**\n     * Validates fields.\n     *\n     * @param {Array|Object} fields A hash of field definitions or array of\n     *   field names to validate.\n     * @param {Object} errors Hashmap of field names to error definitions,\n     *   which may be either primitive types or objects, depending on validator.\n     * @param {Function} callback Async.js waterfall callback.\n     *\n     * Example:\n     * ```\n     * {\n     *    first_name: {\n     *       maxLength: 20,\n     *       someOtherValidatorName: { some complex error definition... }\n     *    },\n     *    last_name: {\n     *       required: true\n     *    }\n     * }\n     * ```\n     *\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _doValidate: function(fields, errors, callback) {\n        var value;\n\n        // fields can be either array or object\n        _.each(fields, function(field, fieldName) {\n            if (_.isString(field)) {\n                fieldName = field;\n                field = this.fields[fieldName];\n            }\n\n            value = this.get(fieldName);\n\n            if (field) { // Safeguard against missing field definitions\n                _addValidationError(errors,\n                    Validation.requiredValidator(field, field.name, this, value), fieldName, 'required');\n\n                if (value || value === 0) { // \"0\" must have validation\n                    _.each(Validation.validators, function(validator, validatorName) {\n                        // FIXME: remove this when Data/Validation.validators.url is removed\n                        if (validatorName === 'url') {\n                            return;\n                        }\n\n                        _addValidationError(errors, validator(field, value, this), fieldName, validatorName);\n                    }, this);\n                }\n            }\n        }, this);\n\n        callback(null, fields, errors);\n    },\n\n    /**\n     * Adds a validation task to the validation waterfall.\n     *\n     * @param {string} taskName The name of the task.\n     * @param {Function} validate The validation task.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    addValidationTask: function(taskName, validate) {\n        this._validationTasks = this._validationTasks || {};\n\n        this._validationTasks[taskName] = validate;\n    },\n\n    /**\n     * Removes a specified validation task from the bean.\n     *\n     * @param {string} taskName The name of the task.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    removeValidationTask: function(taskName) {\n        if (this._validationTasks) {\n            this._validationTasks = _.omit(this._validationTasks, taskName);\n        }\n    },\n\n    /**\n     * Processes validation errors and triggers validation error events.\n     *\n     * @param {Object} errors Validation errors.\n     * @return {boolean} `true` if `errors` is empty; `false` otherwise.\n     * @private\n     * @memberOf Data/Bean\n     * @instance\n     */\n    _processValidationErrors: function(errors) {\n        var isValid = true;\n        if (!_.isEmpty(errors)) {\n            SUGAR.App.error.handleValidationError(this, errors);\n            _.each(errors, function(fieldErrors, fieldName) {\n                this.trigger(\"error:validation:\" + fieldName, fieldErrors);\n            }, this);\n            this.trigger(\"error:validation\", errors);\n            isValid = false;\n        }\n\n        return isValid;\n    },\n\n    /**\n     * Overrides `Backbone.Model#save`\n     * so we can run asynchronous validation outside of the\n     * standard validation loop.\n     *\n     * This method checks if this bean is valid only if `options` hash\n     * contains `fieldsToValidate` parameter.\n     *\n     * @param {Object} [attributes] The model attributes.\n     * @param {Object} [options] Standard Backbone save options.\n     * @param {Array} [options.fieldsToValidate] List of field names to\n     *   validate.\n     * @return {SUGAR.Api.HttpRequest} Returns an HTTP request if\n     *   there are no fields to validate or `undefined` if validation needs\n     *   to happen first.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    save: function(attributes, options) {\n        if (!options || !options.fieldsToValidate) {\n            return Backbone.Model.prototype.save.call(this, attributes, options);\n        }\n\n        this.doValidate(options.fieldsToValidate, (isValid) => {\n            if (isValid) {\n                return Backbone.Model.prototype.save.call(this, attributes, options);\n            }\n        });\n    },\n\n    /**\n     * Checks if this bean can have attachments.\n     *\n     * @return {boolean} `true` if this bean's field definition has\n     *   an `attachment_list` field.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    canHaveAttachments: function() {\n        return _.has(this.fields, 'attachment_list');\n    },\n\n    /**\n     * Fetches a list of files (attachments).\n     *\n     * @param {Object} callbacks Hash of callbacks.\n     * @param {Function} [callbacks.success] Called on success.\n     * @param {Function} [callbacks.error] Called on error.\n     * @param {Function} [callbacks.complete] Called on completion.\n     * @param {Object} [options] Request options. See\n     *   {@link SUGAR.Api#file} for details.\n     * @return {Object} XHR object.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getFiles: function(callbacks, options) {\n        options = options || {};\n        // The token will be passed in the header\n        options.passOAuthToken = false;\n        return SUGAR.App.api.file('read', {\n            module: this.module,\n            id: this.id\n        }, null, callbacks, options);\n    },\n\n    /**\n     * Copies fields from a given bean into this bean.\n     *\n     * This method does not copy the `id` field, `link`-type fields, or fields\n     * whose values are auto-incremented (metadata field definition has\n     * `auto_increment === true`).\n     *\n     * @param {Data/Bean} source The bean to copy the fields from.\n     * @param {Array} [fields] The fields to copy. All fields are copied if\n     *   not specified.\n     * @param {Object} [options] Standard Backbone options that should be\n     *   passed to the `Backbone.Model#set` method.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    copy: function(source, fields, options) {\n        var attrs = {};\n        var vardefs = SUGAR.App.metadata.getModule(this.module).fields;\n        fields = fields || _.pluck(vardefs, \"name\");\n\n        // Iterate over fields and copy everything except auto_increment fields, links, ID,\n        // or any field with an explicit duplicate_on_record_copy set to 'no'\n        _.each(fields, function(name) {\n                var def = vardefs[name],\n                    permitCopy;\n\n                if (!def || def.duplicate_on_record_copy === 'no') {\n                    return;\n                }\n\n                permitCopy = (def.duplicate_on_record_copy === 'always') ||\n                    (name !== 'id' && def.type !== 'link' &&\n                        !def.auto_increment);\n\n                if (permitCopy && source.has(name)) {\n\n                    var value = source.get(name);\n                    // Perform deep copy in case the value is not a primitive type\n                    if (_.isObject(value)) {\n                        value = Utils.deepCopy(value);\n                    }\n                    attrs[name] = value;\n                }\n            }\n        );\n\n        this.set(attrs, options);\n        this.isCopied = true;\n    },\n\n    /**\n     * Checks whether this bean was populated as a result of a copy.\n     *\n     * @return {boolean} `true` if this bean was populated as a result of a\n     *   copy; `false` otherwise.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    isCopy: function() {\n        return (this.isCopied === true);\n    },\n\n    /**\n     * Uploads a file.\n     *\n     * @param {string} fieldName Name of the file field.\n     * @param {Array} $files List of DOM elements that contain file inputs.\n     * @param {Object} [callbacks={}] Callback hash.\n     * @param {Object} [options={}] Upload options. See the\n     *   {@link SUGAR.Api#file} method for details.\n     * @return {Object} XHR object.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    uploadFile: function(fieldName, $files, callbacks, options) {\n        callbacks = callbacks || {};\n        options = options || {};\n\n        return SUGAR.App.api.file(\n            'create',\n            {\n                //Set id to temp if we save a temporary file to reach correct API\n                id: (options.temp !== true) ? this.id : 'temp',\n                module: this.module,\n                field: fieldName\n            },\n            $files,\n            callbacks,\n            options\n        );\n    },\n\n    /**\n     * Favorites or unfavorites this bean.\n     *\n     * @param {boolean} flag If `true`, marks this bean as a favorite.\n     * @param {Object} [options] Standard Backbone options for\n     *   `Backbone.Model#save` operation.\n     * @return {SUGAR.Api.HttpRequest} The request to update this bean.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    favorite: function(flag, options) {\n        options = options || {};\n        options.favorite = true;\n        return this.save({ my_favorite: !!flag }, options);\n    },\n\n    /**\n     * Subscribes or unsubscribes to record changes.\n     *\n     * @param {boolean} flag If `true`, subscribes to record changes. If\n     *   `false`, unsubscribes from record changes.\n     * @param {Object} [options={}] Options for `Backbone.Model#save`.\n     * @return {Object} `jqXHR` object or `false` if error occurs.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    follow: function(flag, options) {\n        options = options || {};\n        flag = flag || false;\n        options.following = true;\n        return this.save({ following: flag }, options);\n    },\n\n    /**\n     * Checks if this bean is favorited.\n     *\n     * @return {boolean} `true` if this bean is favorited, `false`\n     *   otherwise.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    isFavorite: function() {\n        var flag = this.get(\"my_favorite\");\n        return (flag === \"1\" || flag === true);\n    },\n\n    /**\n     * Calculates the difference between backup and changed model for restoring\n     * model.\n     *\n     * @param {Object} original Hash of original (backed up) values.\n     * @param {Array} exclude List of fields to exclude from comparison.\n     * @return {Object} Difference between original and the current model\n     *   attributes.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getChangeDiff: function(original, exclude) {\n        var diff = {};\n        original = original || {};\n        exclude = exclude || [];\n\n        _.each(this.attributes, function(value, key) {\n            if (_.contains(exclude, key)) return;\n            var previousValue = original[key];\n            if (!_.isEqual(previousValue, value)) {\n                diff[key] = previousValue;\n            }\n        });\n\n        return diff;\n    },\n\n    /**\n     * Checks if this bean has changed.\n     *\n     * @param {string} [attr] The attribute to check. If not specified,\n     *   checks all attributes.\n     * @return {boolean} `true` if at least one attribute has changed.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    hasChanged: function(attr) {\n        if (this.get(attr) instanceof SUGAR.App.MixedBeanCollection) {\n            return this.get(attr).hasDelta();\n        }\n\n        return Backbone.Model.prototype.hasChanged.call(this, attr);\n    },\n\n    /**\n     * Returns an object of attributes, containing what needs to be sent to\n     * the server when saving the bean . This method is called when\n     * `JSON.stringify()` is called on this bean.\n     *\n     * @param {Object} [options] Serialization options.\n     * @param {Object} [options.fields] List of field names to be included\n     *   in the object of attributes. It retrieves all fields by default.\n     * @return {Object} A hashmap of attribute names to attribute values.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    toJSON: function(options) {\n        var fields = (options && options.fields) ? options.fields : _.keys(this.attributes),\n            json = {};\n\n        _.each(fields, function(fieldName) {\n            let val = this.get(fieldName);\n            if (val instanceof SUGAR.App.MixedBeanCollection) {\n                _.each(val.getDelta(), (val, linkName) => {\n                    json[linkName] = val;\n                });\n            } else {\n                if (_.isObject(val) && _.isFunction(val.toJSON)) {\n                    SUGAR.App.logger.warn('Calling `toJSON` on object attributes is deprecated in 7.9 and will be ' +\n                        'removed in 7.10');\n                    val = val.toJSON(options);\n                }\n\n                json[fieldName] = val;\n            }\n        }, this);\n\n        return json;\n    },\n\n    /**\n     * Returns a string representation useful for debugging, in the form\n     * `bean:[module-name]/[id]`.\n     *\n     * @return {string} A string representation of this bean.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    toString: function() {\n        return \"bean:\" + this.module + \"/\" + (this.id ? this.id : \"<no-id>\");\n    },\n\n    /**\n     * Reverts model attributes to the last values from last sync or values on creation.\n     *\n     * @fires <b>attributes:revert</b> If `options.silent` is falsy.\n     *\n     * @param {Object} options Options are passed onto set.\n     * @param {boolean} [options.silent=false] If `true`, do not trigger\n     *   `attributes:revert`.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    revertAttributes: function(options) {\n        options = options || {};\n        options.revert = true;\n        let changedAttr = this.changedAttributes(this.getSynced());\n        let collections = this.getCollectionFields(changedAttr);\n        this.set(Utils.deepCopy(changedAttr) || {}, options);\n        _.each(collections, (val, key) => {\n            this.get(key).resetDelta();\n        }, this);\n        if (!options.silent) {\n            this.trigger('attributes:revert');\n        }\n    },\n\n    /**\n     * Gets changed attributes.\n     *\n     * @param {Object} [attrs] A hash of attributes to compare the current\n     *   bean attributes against.\n     * @return {Object|boolean} `false` if nothing has changed. An object\n     *   containing the attributes passed in parameters that are different\n     *   from the bean ones.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    changedAttributes: function (attrs) {\n        let collections = this.getCollectionFields(attrs);\n        if (!_.isUndefined(attrs)) {\n            attrs = _.omit(attrs, _.keys(collections));\n        }\n\n        let changed = Backbone.Model.prototype.changedAttributes.call(this, attrs);\n\n        _.each(collections, (val, key) => {\n            if (this.get(key).hasDelta()) {\n                changed = changed || {};\n                changed[key] = val;\n            }\n        }, this);\n\n        return changed;\n    },\n\n    /**\n     * Sets internal synced attribute hash that's used in `revertAttributes`.\n     *\n     * @param {Object} attributes Attributes of model to setup.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    setSyncedAttributes: function(attributes) {\n        this._syncedAttributes = attributes ? Utils.deepCopy(attributes) : {};\n    },\n\n    /**\n     * Gets the value of the synced attribute for the given key. If no key\n     * is passed, all synced attributes are returned.\n     *\n     * @param {string} [key] The attribute name.\n     * @return {*} The synced attribute's value.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getSynced: function(key) {\n        return key ? this._syncedAttributes[key] : this._syncedAttributes;\n    },\n\n    /**\n     * Gets the default value of an attribute.\n     *\n     * @param {string} [key] The name of the attribute. If unspecified, the\n     *   default values of all attributes are returned.\n     * @return {*} The default value if you passed a `key`, or the hash of\n     *   default values.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getDefault: function(key) {\n        var defaults = _.clone(this._defaults) || {};\n        if (_.isUndefined(key)) {\n            return defaults;\n        }\n        return defaults[key];\n    },\n\n    /**\n     * Sets the default values (one or many) on the model, and fill in\n     * undefined attributes with the default values.\n     *\n     * @param {string|Object} key The name of the attribute, or a hash of\n     *   attributes.\n     * @param {*} [val] The default value for the `key` argument.\n     * @return {Data/Bean} This bean instance.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    setDefault: function(key, val) {\n        var attrs;\n        if (_.isObject(key)) {\n            attrs = key;\n        } else {\n            (attrs = {})[key] = val;\n        }\n        this._defaults = _.extend({}, this._defaults, attrs);\n        this.attributes = _.defaults(this.attributes, attrs);\n        return this;\n    },\n\n    /**\n     * Sets the default fetch options (one or many) on the model.\n     *\n     * @param {string|Object} key The name of the option, or an hash of\n     * options.\n     * @param {*} [val] The value for the `key` option.\n     * @return {Data/Bean} This bean instance.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    setOption: function(key, val) {\n        var attrs;\n        if (_.isObject(key)) {\n            attrs = key;\n        } else {\n            (attrs = {})[key] = val;\n        }\n\n        /**\n         * List of persistent fetch options.\n         *\n         * @type {Object}\n         * @private\n         * @memberOf Data/Bean\n         */\n        this._persistentOptions = _.extend({}, this._persistentOptions, attrs);\n        return this;\n    },\n\n    /**\n     * Unsets a default fetch option (or all).\n     *\n     * @param {string|Object} [key] The name of the option to unset, or\n     *   nothing to unset all options.\n     * @return {Data/Bean} This bean instance.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    unsetOption: function(key) {\n        if (key) {\n            this.setOption(key, void 0);\n        } else {\n            this._persistentOptions = {};\n        }\n        return this;\n    },\n\n    /**\n     * Gets one or all persistent fetch options.\n     *\n     * @param {string|Object} [key] The name of the option to retrieve. If\n     *   unspecified, retrieves all options.\n     * @return {*} A specific option, or the list of options.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getOption: function(key) {\n        if (key) {\n            return this._persistentOptions[key];\n        }\n        return this._persistentOptions;\n    },\n\n    /**\n     * Gets all fields of a given type.\n     *\n     * @param {string} type The type of the field to search for.\n     * @return {Array} List of fields filtered by the given type.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    fieldsOfType: function(type) {\n        return _.where(this.fields, {type: type});\n    },\n\n    /**\n     * Gets a hash of collection fields attributes.\n     *\n     * @param {Object} [attrs=this.attributes] The hash of attributes to get\n     *   the collection fields from.\n     * @return {Object} A hash of collection fields attributes.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    getCollectionFields: function(attrs) {\n        return _.pick(attrs, _.pluck(this.fieldsOfType('collection'), 'name'));\n    },\n\n    /**\n     * Merges changes into a bean's attributes.\n     *\n     * The default implementation overrides attributes with changes.\n     *\n     * @param {Object} attributes Bean attributes.\n     * @param {Object} changes Object hash with changed attributes.\n     * @param {string} [module] Module name.\n     * @return {Object} Merged attributes.\n     * @memberOf Data/Bean\n     * @instance\n     */\n    merge: function(attributes, changes, module) {\n        return _.extend(attributes, changes);\n    }\n});\n\nmodule.exports = Bean;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Acl = require('../core/acl');\nconst Utils = require('../utils/utils');\nconst Bean = require('./bean');\nconst BeanCollection = require('./bean-collection');\nconst MixedBeanCollection = require('./mixed-bean-collection');\n\n/**\n * The data manager handles the beans and collections life cycle. It provides\n * an API to declare data classes, instantiate them, and synchronize the data\n * with the server. It relies on the data structure defined by the application\n * metadata.\n *\n * ** The data manager provides:**\n *\n * - An interface to declare bean and collection classes from metadata\n * - Factory methods for creating instances of beans and bean collections\n * - Factory methods for creating instances of bean relations and relation\n *   collections\n * - A custom implementation of `Backbone.sync`\n *\n * **Data model metadata**\n *\n * The metadata is used to describe the data model. It contains information\n * about module fields and relationships.\n * From the following sample metadata, the data manager would declare two\n * classes: Opportunities and Contacts.\n * ```\n * var metadata = {\n *     modules: {\n *         Opportunities: {\n *             fields: {\n *                 name: { ... },\n *                 ...\n *             }\n *         },\n *         Contacts: { ... }\n *    },\n *    relationships: {\n *        opportunities_contacts: { ... },\n *        ...\n *    }\n * };\n * ```\n *\n * **Working with beans**\n *\n * Declare bean classes from metadata payload.\n * `declareModels` should be called at application start-up and whenever the\n * metadata changes:\n * ```\n * const DataManager = require('./data-manager');\n * DataManager.declareModels(metadata);\n * ```\n * You may now create bean instances using factory methods.\n *\n * ```\n * var opportunity = DataManager.createBean(\n *     'Opportunities',\n *     { name: 'Cool opportunity' }\n * );\n * // You can save a bean using the standard `Backbone.Model.save` method.\n * // The save method will use the data manager's sync method to communicate\n * // changes to the remote server.\n * opportunity.save();\n *\n * // Create an empty collection of contacts.\n * var contacts = DataManager.createBeanCollection('Contacts');\n * // Fetch a list of contacts\n * contacts.fetch();\n * ```\n *\n * **Working with relationships**\n *\n * ```\n * var attrs = {\n *     firstName: 'John',\n *     lastName: 'Smith',\n *     // relationship field\n *     opportunityRole: 'Influencer'\n * }\n * // Create a new instance of a contact related to an existing opportunity\n * var contact = DataManager.createRelatedBean(opportunity, null, 'contacts', attrs);\n * // This will save the contact and create the relationship\n * contact.save(null, { relate: true });\n *\n * // Create an instance of contact collection related to an existing opportunity\n * var contacts = DataManager.createRelatedCollection(opportunity, 'contacts');\n * // This will fetch related contacts\n * contacts.fetch({ relate: true });\n *\n * ```\n *\n * @module Data/DataManager\n */\n\n// Bean class cache\nvar _models = {};\n\n// Bean collection class cache\nvar _collections = {};\n\n/**\n * Gets the relationship name given the module and the link name.\n *\n * @param {string} module The module name.\n * @param {string} link The link name.\n * @return {string|boolean} relationship The relationship name or `false` if it\n *   is empty or undefined.\n * @private\n */\nconst getRelationshipName = function(module, link) {\n    let vardefs = SUGAR.App.metadata.getModule(module);\n    let relationship = vardefs.fields[link] && vardefs.fields[link].relationship;\n    if (!relationship) {\n        return false;\n    }\n\n    return relationship;\n};\n\n/**\n * @alias module:Data/DataManager\n */\nconst DataManager = _.extend({\n    /**\n     * Reference to the base bean model class constructor. Defaults to\n     * {@link Data/Bean}.\n     *\n     * @type {Function}\n     */\n    beanModel: Bean,\n\n    /**\n     * Reference to the base bean collection class constructor. Defaults to\n     * {@link Data/BeanCollection}.\n     *\n     * @type {Function}\n     */\n    beanCollection: BeanCollection,\n\n    /**\n     * Reference to the base mixed bean collection class constructor. Defaults\n     * to {@link Data/MixedBeanCollection}.\n     *\n     * @type {Function}\n     */\n    mixedBeanCollection: MixedBeanCollection,\n\n    /**\n     * Initializes the data manager.\n     */\n    init: function() {\n        var sync = _.bind(this.sync, this);\n        this.beanModel.prototype.sync = sync;\n        this.beanCollection.prototype.sync = sync;\n\n        SUGAR.App.events.register(\n            /**\n             * Fires when the sync operation starts.\n             *\n             * Three parameters are passed to the callback:\n             *\n             *  * operation name (`method`)\n             *  * reference to the model/collection\n             *  * options\n             *\n             * ```\n             * const Events = require('../core/events');\n             * Events.on('data:sync:start', function(method, model, options) {\n             *     SUGAR.App.logger.debug('Started operation ' + method + ' on ' + model);\n             * });\n             * ```\n             * @event data:sync:start\n             */\n            \"data:sync:start\",\n            this\n        );\n\n        SUGAR.App.events.register(\n            /**\n             * Fires when the sync operation ends.\n             *\n             * Four parameters are passed to the callback:\n             *\n             *  * operation name (`method`)\n             *  * reference to the model/collection\n             *  * options\n             *  * request (SUGAR.Api.HttpRequest)\n             *\n             * ```\n             * const Events = require('../core/events');\n             * Events.on('data:sync:complete', function(method, model, options, request) {\n             *     SUGAR.App.logger.debug(\"Finished operation \" + method + \" on \" + model);\n             * });\n             * ```\n             * @event data:sync:complete\n             */\n            \"data:sync:complete\",\n            this\n        );\n\n        SUGAR.App.events.register(\n            /**\n             * Fires when the sync operation ends successfully.\n             *\n             * Four parameters are passed to the callback:\n             *\n             *  - operation name (`method`)\n             *  - reference to the model/collection\n             *  - options\n             *  - request (SUGAR.Api.HttpRequest)\n             *\n             * ```\n             * const Events = require('../core/events');\n             * Events.on('data:sync:success', function(method, model, options, request) {\n             *     SUGAR.App.logger.debug('Finished operation ' + method + ' on ' + model);\n             * });\n             * ```\n             * @event data:sync:success\n             */\n            \"data:sync:success\",\n            this\n        );\n\n        SUGAR.App.events.register(\n            /**\n             * Fires when the sync operation ends unsuccessfully.\n             *\n             * Four parameters are passed to the callback:\n             *\n             *  * operation name (`method`)\n             *  * reference to the model/collection\n             *  * options\n             *  * error (SUGAR.Api.HttpError)\n             *\n             * ```\n             * const Events = require('../core/events');\n             * Events.on('data:sync:error', function(method, model, options, error) {\n             *     SUGAR.App.logger.debug('Operation failed ' + method + ' on ' + model);\n             * });\n             * ```\n             * @event data:sync:error\n             */\n            \"data:sync:error\",\n            this\n        );\n\n        SUGAR.App.events.register(\n            /**\n             * Fires when the sync operation was aborted.\n             *\n             * Four parameters are passed to the callback:\n             *\n             *  * operation name (`method`)\n             *  * reference to the model/collection\n             *  * options\n             *  * request {@link SUGAR.Api.HttpRequest}\n             *\n             * ```\n             * const Events = require('../core/events');\n             * SUGAR.App.events.on('data:sync:abort', function(method, model, options, request) {\n             *     SUGAR.App.logger.debug('Operation aborted ' + method + ' on ' + model);\n             * });\n             * ```\n             * @event data:sync:abort\n             */\n            'data:sync:abort',\n            this\n        );\n    },\n\n    /**\n     * Resets class declarations.\n     *\n     * @param {string} [module] The module name from which to remove the bean\n     *   and collection class. If not specified, resets bean and collection\n     *   classes of all modules.\n     */\n    reset: function (module) {\n        this.resetModel(module);\n        this.resetCollection(module);\n    },\n\n    /**\n     * Resets bean class declarations.\n     *\n     * @param {string} [module] The module name from which to remove the bean\n     *   class. If not specified, resets bean classes of all modules.\n     */\n    resetModel: function (module) {\n        if (module) {\n            delete _models[module];\n        } else {\n            _models = {};\n        }\n    },\n\n    /**\n     * Resets collection class declarations.\n     *\n     * @param {string} [module] The module name from which to remove the\n     *   collection class. If not specified, resets collection classes of all\n     *   modules.\n     */\n    resetCollection: function (module) {\n        if (module) {\n            delete _collections[module];\n        }  else {\n            _collections = {};\n        }\n    },\n\n    /**\n     * Declares bean model and collection classes for a given module and caches\n     * them.\n     *\n     * @param {string} moduleName Module name.\n     * @param {Object} module Module metadata object.\n     * @param {string} platform The platform name.\n     * @param {Object} [modelController] The bean controller to declare.\n     * @param {Object} [collectionController] The collection controller to declare.\n     */\n    declareModel: function(moduleName, module, platform, modelController, collectionController) {\n        // Bug 54814 init fields to something sane if module metadata is empty\n        platform = platform || SUGAR.App.config.platform || 'base';\n\n        this.declareModelClass(moduleName, module, platform, modelController);\n        this.declareCollectionClass(moduleName, platform, collectionController);\n    },\n\n    /**\n     * Declares the bean model class for a given module.\n     *\n     * @param {string} moduleName The module name.\n     * @param {string} module The module metadata.\n     * @param {string} platform The platform name.\n     * @param {Object} [modelController] The model controller.\n     * @return {Function} The created class.\n     */\n    declareModelClass: function(moduleName, module, platform, modelController) {\n        var platformNamespace = Utils.capitalize(platform);\n        moduleName = moduleName || platformNamespace + 'Model';\n\n        this.resetModel(moduleName);\n\n        var fields = module ? module.fields : {};\n        var defaults = null;\n\n        _.each(_.values(fields), function(field) {\n            if (!_.isUndefined(field['default'])) {\n                if (defaults === null) {\n                    defaults = {};\n                }\n                defaults[field.name] = field['default'];\n            }\n        });\n\n        var baseProperties = {\n            /**\n             * The hash of field names and default values.\n             *\n             * This hash should be used instead of the `Backbone.Model#default`\n             * property. Setting default values is done in\n             * {@link Data/Bean#initialize} only if the given model is new.\n             *\n             * @memberOf Data/Bean\n             * @type {Object}\n             * @instance\n             */\n            _defaults: defaults,\n\n            /**\n             * The module name.\n             *\n             * @memberOf Data/Bean\n             * @type {string}\n             * @instance\n             * @readonly\n             */\n            module: moduleName,\n\n            /**\n             * The list of fields and their vardefs.\n             *\n             * @memberOf Data/Bean\n             * @type {Object}\n             * @instance\n             * @readonly\n             */\n            fields: fields\n        };\n\n        var superModel = _models[platformNamespace + 'Model'] ||\n            _models.BaseModel ||\n            this.beanModel;\n\n        modelController = _.extend(modelController || {}, baseProperties);\n\n        return Utils.extendClass(_models, superModel, moduleName, modelController, platformNamespace);\n    },\n\n    /**\n     * Declares bean collection class for a given module.\n     *\n     * @param {string} moduleName The module name.\n     * @param {string} platform The platform name.\n     * @param {Object} [collectionController] The controller.\n     * @return {Function} The created class.\n     */\n    declareCollectionClass: function(moduleName, platform, collectionController) {\n        var platformNamespace = Utils.capitalize(platform);\n        var modelName = moduleName || platformNamespace + 'Model';\n        var model = _models[modelName];\n\n        moduleName = moduleName || platformNamespace + 'Collection';\n\n        if (!model) {\n            return;\n        }\n        this.resetCollection(moduleName);\n\n        var baseCollectionProperties = {\n            model: model,\n\n            /**\n             * The module name.\n             *\n             * @memberOf Data/BeanCollection\n             * @type {string}\n             * @instance\n             * @readonly\n             */\n            module: moduleName,\n\n\n            /**\n             * Current collection offset for pagination.\n             *\n             * @memberOf Data/BeanCollection\n             * @type {number}\n             * @instance\n             * @readonly\n             */\n            offset: 0\n        };\n\n        var superCollection = _collections[platformNamespace + 'Collection'] ||\n            _collections.BaseCollection ||\n            this.beanCollection;\n\n        collectionController = _.extend(collectionController || {}, baseCollectionProperties);\n\n        return Utils.extendClass(\n            _collections,\n            superCollection,\n            moduleName,\n            collectionController,\n            platformNamespace\n        );\n    },\n\n    /**\n     * Merges a model with its metadata.\n     *\n     * @param {string} name The module name.\n     * @param {Object} [module] The module metadata.\n     */\n    mergeModel: function(name, module) {\n        var fields = module ? module.fields : {};\n        var defaults = null;\n\n        _.each(_.values(fields), function(field) {\n            if (!_.isUndefined(field['default'])) {\n                if (defaults === null) {\n                    defaults = {};\n                }\n                defaults[field.name] = field['default'];\n            }\n        });\n\n        var baseProperties = {\n            /**\n             * Same as {@link Data/Bean#_defaults}\n             * @inheritdoc\n             */\n            _defaults: defaults,\n\n            /**\n             * Same as {@link Data/Bean#module}\n             * @inheritdoc\n             */\n            module: name,\n\n            /**\n             * Same as {@link Data/Bean#fields}\n             * @inheritdoc\n             */\n            fields: fields\n        };\n\n        _.extend(_models[name].prototype, baseProperties);\n    },\n\n    /**\n     * Gets all bean classes.\n     *\n     * @return {Object} The hash of bean classes.\n     */\n    getModelClasses: function() {\n        return _models;\n    },\n\n    /**\n     * Gets all collection classes.\n     *\n     * @return {Object} The hash of collection classes.\n     */\n    getCollectionClasses: function() {\n        return _collections;\n    },\n\n    /**\n     * Declares bean models and collections classes for each module definition.\n     *\n     * Data manager uses {@link Core.MetadataManager#getModules} method to get\n     * metadata if `modules` parameter is not specified.\n     *\n     * @param {Object} [modules] metadata hash in which keys are module names\n     *   and values are module definitions.\n     */\n    declareModels: function(modules) {\n        modules = modules || SUGAR.App.metadata.getModules();\n        _.each(modules, function(module, name) {\n            if (!_models[name]) {\n                this.declareModel(name, module);\n            } else {\n                this.mergeModel(name, module);\n            }\n        }, this);\n    },\n\n    /**\n     * Gets a bean class.\n     *\n     * @param {string} module The module name to get the bean class from.\n     * @return {Object} The bean class for the given `module`, or\n     *   `this.beanModel` if not found.\n     */\n    getBeanClass: function(module) {\n        return _models[module] || this.beanModel;\n    },\n\n    /**\n     * Creates an instance of a bean. Example of usage:\n     *\n     * ```\n     * // Create an account bean. The account's name property will be set to\n     * // \"Acme\".\n     * const DataManager = require('./data-manager');\n     * var account = DataManager.createBean('Accounts', { name: 'Acme' });\n     *\n     * // Create a team set bean with a given ID\n     * var teamSet = DataManager.createBean('TeamSets', { id: 'xyz' });\n     *\n     * ```\n     *\n     * @param {string} module The module name.\n     * @param {Object} [attrs] Initial values of bean attributes, which\n     *   will be set on the bean.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/Bean} A new instance of a bean.\n     */\n    createBean: function(module, attrs, options) {\n        return _models[module] ? new _models[module](attrs, options) : new DataManager.beanModel(attrs, options);\n    },\n\n    /**\n     * Creates instance of a bean collection. Example of usage:\n     *\n     * ```\n     * const DataManager = require('./data-manager');\n     * // Creates an empty collection of account beans.\n     * var accounts = DataManager.createBeanCollection('Accounts');\n     * ```\n     *\n     * @param {string} module The module name.\n     * @param {Data/Bean[]} [models] Initial array or collection of models.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/BeanCollection} A new instance of a bean collection.\n     */\n    createBeanCollection: function(module, models, options) {\n        return _collections[module] ?\n            new _collections[module](models, options) :\n            new DataManager.beanCollection(models, options);\n    },\n\n    /**\n     * Creates an instance of related {@link Data/Bean} or updates an\n     * existing bean with link information.\n     *\n     * ```\n     * // Create a new contact related to the given opportunity.\n     * const DataManager = require('./data-manager');\n     * var contact = DataManager.createRelatedBean(opportunity, '1', 'contacts', {\n     *    'first_name': 'John',\n     *    'last_name': 'Smith',\n     *    'contact_role': 'Decision Maker'\n     * });\n     * contact.save(null, { relate: true });\n     * ```\n     *\n     * @param {Data/Bean} bean1 Instance of the first bean.\n     * @param {Data/Bean|string} beanOrId2 Instance or ID of the second\n     *   bean. A new instance is created if this parameter is `null`.\n     * @param {string} link Relationship link name.\n     * @param {Object} [attrs] Bean attributes hash.\n     * @return {Data/Bean} A new instance of the related bean or existing\n     *   bean instance updated with relationship link information.\n     */\n    createRelatedBean: function(bean1, beanOrId2, link, attrs) {\n        var relatedModule = this.getRelatedModule(bean1.module, link);\n\n        attrs = attrs || {};\n        if (_.isString(beanOrId2)) {\n            attrs.id = beanOrId2;\n            beanOrId2 = this.createBean(relatedModule, attrs);\n        }\n        else if (_.isNull(beanOrId2)) {\n            beanOrId2 = this.createBean(relatedModule, attrs);\n        }\n        else {\n            beanOrId2.set(attrs);\n        }\n\n        /**\n         * Relationship link information.\n         *\n         * <pre>\n         * {\n         *     name: link name,\n         *     bean: reference to the related bean\n         *     isNew: flag indicating that it is a new relationship\n         * }\n         * </pre>\n         *\n         * The `link.isNew` flag is used to distinguish between an existing\n         * relationship and a relationship that is about to be created. Please\n         * refer to REST API specification for details. In brief, REST API\n         * supports creating a new relationship for two existing records as\n         * well as updating an existing relationship (updating relationship\n         * fields). The `link.isNew` flag equals to `true` by default. The flag\n         * is set to `false` by data manager once a relationship is created and\n         * whenever relationships are fetched from the server.\n         *\n         * @memberOf Data/Bean\n         * @type {Object}\n         * @name link\n         * @instance\n         */\n        beanOrId2.link = {\n            name: link,\n            bean: bean1,\n            isNew: true\n        };\n\n        beanOrId2.setOption('relate', true);\n\n        return beanOrId2;\n    },\n\n    /**\n     * Creates a new instance of related bean collection.\n     *\n     * ```\n     * // Create contacts collection for an existing opportunity.\n     * const DataManager = require('./data-manager');\n     * var contacts = DataManager.createRelatedCollection(opportunity, 'contacts');\n     * contacts.fetch({ relate: true });\n     *\n     * ```\n     *\n     * The newly created collection is cached in the given bean instance.\n     *\n     * @param {Data/Bean} bean Bean to link the related beans to.\n     * @param {string} link Relationship link name.\n     * @param {Array|Data/BeanCollection} [models] An array of related beans to\n     *   populate the newly created collection with.\n     * @return {Data/BeanCollection} The created bean collection.\n     */\n    createRelatedCollection: function(bean, link, models) {\n        var relatedModule = this.getRelatedModule(bean.module, link);\n        var collection = this.createBeanCollection(relatedModule, models, {\n            /**\n             * Link information.\n             *\n             * <pre>\n             * {\n             *     name: link name,\n             *     bean: reference to the related bean\n             * }\n             * </pre>\n             *\n             * @memberOf Data/BeanCollection\n             * @instance\n             */\n            link: {\n                name: link,\n                bean: bean\n            }\n        });\n\n        collection.setOption('relate', true);\n\n        bean._setRelatedCollection(link, collection);\n        return collection;\n    },\n\n    /**\n     * Creates a collection of beans of different modules.\n     *\n     * @param {Array|Data/BeanCollection} [models] A list of models to\n     *   populate the new collection with.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/MixedBeanCollection} Collection of mixed modules\n     *   collection.\n     */\n    createMixedBeanCollection: function(models, options) {\n        return new DataManager.mixedBeanCollection(models, options);\n    },\n\n    /**\n     * Checks if a given module can have multiple relationships via a given\n     * link.\n     *\n     * @param {string} module Name of the module to do the check for.\n     * @param {string} link Relationship link name.\n     * @return {boolean} `true` if the module's link is a\n     *   `many`-type relationship, `false` otherwise.\n     */\n    canHaveMany: function(module, link) {\n        var meta = SUGAR.App.metadata.getModule(module);\n        if (!meta || !meta.fields || !meta.fields[link]) {\n            return false;\n        }\n\n        var linkType = meta.fields[link].link_type || meta.fields[link]['link-type'];\n        if (linkType) {\n            return linkType === 'many';\n        }\n        var name = meta.fields[link].relationship;\n        var relationship = SUGAR.App.metadata.getRelationship(name);\n        var rel = relationship.true_relationship_type || relationship.relationship_type;\n        var t = rel.split('-');\n        var type;\n        if (meta.fields[link].side) {\n            type = meta.fields[link].side === 'left' ? t[0] : t[2];\n        } else if (relationship.lhs_module !== relationship.rhs_module) {\n            type = module === relationship.rhs_module ? t[0] : t[2];\n        } else {\n            type = (t[0] === 'many' || t[2] === 'many') ? 'many' : 'one';\n        }\n        return type === 'many';\n    },\n\n    /**\n     * Gets fields of type `relate` for a given link.\n     *\n     * Example:\n     *\n     * Assumptions:\n     * - We have 2 modules `Accounts` and `Cases`.\n     * - `Accounts` has a link field named `cases`, which represents a 1-to-many\n     *   relationship between the 2 modules: A case is linked to one account and\n     *   a account can be linked to many cases.\n     *\n     * To retrieve the field that matches this relationship on the Cases side,\n     * you can call:\n     * ```\n     * var relateField = DataManager.getRelateField('Accounts', 'cases');\n     * ```\n     * and you would get the definition of the Cases field that exposes the\n     * parent Account bean.\n     *\n     * @param {string} parentModuleName Name of the module that has a link field\n     *   named `link`.\n     * @param {string} link Link name.\n     * @return {Array} Definitions of the `relate` fields if found or empty\n     *   array if not found.\n     */\n    getRelateFields: function(parentModuleName, link) {\n        //Overridden to provide safeguard against exception filed in NOMAD-2979\n        //We couldn't reproduce the issue or find out exact place where data/metadata is inconsistent\n        var parentModuleDef = SUGAR.App.metadata.getModule(parentModuleName);\n        if (!parentModuleDef.fields[link]) {\n            SUGAR.App.logger.error(`Calling 'getRelateFields' on '${parentModuleName}' with link '${link}' but no fields` +\n                ` have been found. Please fix your metadata.`);\n            return [];\n        }\n\n        var relationship = parentModuleDef.fields[link].relationship;\n        var relatedModule = this.getRelatedModule(parentModuleName, link);\n        var fields = SUGAR.App.metadata.getModule(relatedModule).fields;\n\n        // Find the opposite link field on related module\n        var f = _.find(fields, function(field) {\n            return field.type == \"link\" && field.relationship == relationship;\n        });\n\n        if (f) {\n            f = _.filter(fields, function(field) {\n                return field.type == \"relate\" && field.link == f.name;\n            });\n        }\n\n        return f || [];\n    },\n\n    /**\n     * Gets relationship fields for a complex relationship.\n     *\n     * Some relationships may have relationship fields, that only makes sense in\n     * the context of the relationship between 2 modules.\n     * Use the the following, to get the relationships fields definition of a\n     * relationship:\n     * ```\n     * let relationshipFields = DataManager.getRelationshipFields('Opportunities', 'contacts');\n     * ```\n     *\n     * @param {string} parentModule Name of the module that has a link field\n     *   called `link`.\n     * @param {string} link Link name.\n     * @return {Array} Relationship fields.\n     * @deprecated\n     */\n    getRelationshipFields: function(parentModule, link) {\n        SUGAR.App.logger.warn('DataManager#getRelationshipFields is deprecated since 7.10. It will be removed ' +\n            'in a future release. Please use DataManager#getRelationFields instead');\n        var ff = null;\n        var linkField = SUGAR.App.metadata.getModule(parentModule).fields[link];\n        if (linkField.rel_fields) {\n            var relationship = linkField.relationship;\n            var relatedModule = this.getRelatedModule(parentModule, link);\n            var fields = SUGAR.App.metadata.getModule(relatedModule).fields;\n\n            // Find the opposite link field on related module\n            var f = _.find(fields, function(field) {\n                return field.type == \"link\" && field.relationship == relationship;\n            });\n\n            // Find relationship_info field\n            if (f) {\n                f = _.find(fields, function(field) {\n                    return field.link == f.name && field.link_type == \"relationship_info\";\n                });\n            }\n\n            // Extract relationship fields\n            if (f && f.relationship_fields) {\n                var fieldNames = _.keys(linkField.rel_fields);\n                _.each(f.relationship_fields, function(field, name) {\n                    if (_.include(fieldNames, name)) {\n                        if (!ff) ff = [];\n                        ff.push(field);\n                    }\n                });\n            }\n        }\n\n        return ff;\n\n    },\n\n    /**\n     * Gets relationship fields for a complex relationship.\n     *\n     * Some relationships may have relationship fields, that only makes sense in\n     * the context of the relationship between 2 modules.\n     * Use the the following, to get the relationships fields definition of a\n     * relationship:\n     * ```\n     * let relationshipFields = DataManager.getRelationFields('Opportunities', 'contacts');\n     * ```\n     *\n     * @param {string} module Name of the module that has a link field\n     *   called `link`.\n     * @param {string} link Link name.\n     * @return {Array|boolean} Relationship fields. `false` if no fields are\n     *   found.\n     */\n    getRelationFields: function(module, link) {\n        let moduleFields = SUGAR.App.metadata.getModule(module) && SUGAR.App.metadata.getModule(module).fields;\n        if (!moduleFields) {\n            return false;\n        }\n\n        let fields = _.filter(moduleFields, (field) => {\n            return field.link === link && !_.isUndefined(field.rname_link);\n        });\n\n        if (!fields) {\n            return false;\n        }\n\n        return _.pluck(fields, 'name');\n    },\n\n    /**\n     * Given a module and a link field name, this method gets the link field\n     * name of the other module of the relationship.\n     *\n     * @param {string} module The module name.\n     * @param {string} link The link name for the given module.\n     * @return {string|boolean} oppositeLink The link field name of the other module\n     *   of the relationship. `false` if not found.\n     */\n    getOppositeLink: function(module, link) {\n        let relationshipName = getRelationshipName(module, link);\n        let relatedModule = this.getRelatedModule(module, link);\n        let relatedVardefs = SUGAR.App.metadata.getModule(relatedModule);\n        if (!relatedVardefs || !relatedVardefs.fields) {\n            return false;\n        }\n\n        let oppositeLink = _.findWhere(relatedVardefs.fields, {type: 'link', relationship: relationshipName});\n\n        if (!oppositeLink) {\n            return false;\n        }\n\n        return oppositeLink.name;\n    },\n\n    /**\n     * Gets related module name.\n     *\n     * @param {string} module Name of the parent module.\n     * @param {string} link Relationship link name.\n     * @return {string|boolean} The name of the related module. `false` if not\n     *   found.\n     */\n    getRelatedModule: function(module, link) {\n        var meta = SUGAR.App.metadata.getModule(module);\n        if (!meta || !meta.fields || !meta.fields[link]) {\n            return false;\n        }\n\n        let relationship = SUGAR.App.metadata.getRelationship(getRelationshipName(module, link));\n        if (!relationship) {\n            return meta.fields[link].module || false;\n        }\n\n        return meta.fields[link].module || (module === relationship.rhs_module ?\n            relationship.lhs_module : relationship.rhs_module);\n    },\n\n    /*\n     * Returns field definition of a given field.\n     *\n     * @param {string} module The module the field belongs to.\n     * @param {string} idFieldName Name of the field to retrieve.\n     */\n    getRelatedNameField: function(module, idFieldName) {\n        return _.find(SUGAR.App.metadata.getModule(module).fields, function(field) {\n            if (field.name !== idFieldName && field.id_name === idFieldName) {\n                return field;\n            }\n        }, this);\n    },\n\n    /**\n     * Gets editable fields.\n     *\n     * @param {Data/Bean|Data/BeanCollection} model The bean or collection to\n     *   get fields from.\n     * @param {Array} [fields] Field names to be checked.\n     * @return {Object} Hash of editable fields.\n     */\n    getEditableFields: function(model, fields) {\n        var editableFields = ['id'], //Always have the id included (without the id, the routing will not work correctly)\n            ignoreTypeList = [\"parent\", \"relate\"];\n\n        fields = fields || [];\n\n        // No fields were specified, try the model's attributes instead\n        if (!fields.length) {\n            fields = _.keys(model.attributes);\n        }\n\n        // Editable fields are fields that are either DB fields, such as\n        // name, or related fields that do have a real DB field behind them,\n        // such as opportunity_role (contact_role), that the user has access to edit.\n        // The following code will filter out fields such as assigned_user_name.\n        _.each(fields, function(fieldName) {\n            var fieldValue;\n\n            if(model.has(fieldName) && // Model has that field AND\n                (model.fields[fieldName] && // Field exists in the model AND\n                    (!model.fields[fieldName].source || // (The field does not have a source specified OR\n                        model.fields[fieldName].source !== 'non-db' || // the field's source is something other than 'non-db' OR\n                        !model.fields[fieldName].type || // The field does not have a field type specified OR\n                        ignoreTypeList.indexOf(model.fields[fieldName].type) === -1)) && // The field's source is 'non-db', but the field's type is not in our ignore list) AND\n                Acl.hasAccessToModel(\"edit\", model, fieldName)) { // The user has access to edit the field\n\n                fieldValue = model.get(fieldName);\n                //FIXME: This if condition is deprecated. It relies on a\n                //format created by VirtualCollection Mango plugin which\n                //sidecar does not know about and needs to be be removed.\n                if (fieldValue && (model.fields[fieldName].type === 'collection') &&\n                    !_.isEmpty(fieldValue.links)) {\n                    _.each(fieldValue.links, function(link) {\n                        editableFields.push(link.link.name);\n                    });\n                } else {\n                    editableFields.push(fieldName);\n                }\n            }\n        });\n\n        return model.toJSON({\n            fields: editableFields\n        });\n    },\n\n    /**\n     * Custom implementation of `Backbone.sync` pattern. Syncs models with\n     * the remote server using {@link SUGAR.Api}.\n     *\n     * @param {string} method The CRUD method: 'create', 'read', 'update', or\n     *   'delete'.\n     * @param {Data/Bean|Data/BeanCollection} model The bean/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @return {Sugar.HttpRequest|boolean} The sync request, or `false` if you\n     *   attempted to load a linked context with no id on a linked bean.\n     * @fires <b>data:sync:start</b> globally and on the bean, before the\n     *   sync call is made.\n     */\n    sync: function(method, model, options) {\n        SUGAR.App.logger.trace('data-sync-' + (options.relate ? 'relate-' : '') + method + \": \" + model);\n        options       = this.parseOptionsForSync(method, model, options);\n        var callbacks = this.getSyncCallbacks(method, model, options),\n            request = null;\n\n        model.dataFetched = false;\n        // trigger global data:sync:start event\n        this.trigger(\"data:sync:start\", method, model, options);\n\n        /**\n         * Fires on model when the sync operation starts.\n         *\n         * Two parameters are passed to the callback:\n         *\n         *  * operation name (`method`)\n         *  * options\n         *\n         * ```\n         * model.on('data:sync:start', function(method, options) {\n         *     SUGAR.App.logger.debug('Started operation ' + method + ' on ' + model);\n         * });\n         * ```\n         * @event data:sync:start\n         */\n        model.trigger(\"data:sync:start\", method, options);\n\n        if (_.isFunction(options.endpoint)) {\n            request = options.endpoint(\n                method,\n                model,\n                options,\n                callbacks\n            );\n        }\n        else if (model.link && model.link.bean && options.relate === true) {\n            // Related data is an object should contain:\n            // - related bean (including relationship fields) in case of create method\n            // - just relationship fields in case of update method\n            // - null for read/delete method\n            var relatedData = null;\n            if (method == \"create\" || method == \"update\") {\n                // Pass all fields: bean fields + relationship fields\n                relatedData = this.getEditableFields(model, options.fields);\n                // Change 'update' method to 'create' if the relationship is a new one\n                if (method == \"update\" && model.link.isNew) {\n                    method = \"create\";\n                }\n            }\n\n            if (!model.link.bean.id) {\n                SUGAR.App.logger.error('Attempted to load linked context with no id on the linked bean: ' +\n                    model.link.bean);\n                return false;\n            }\n\n            request = SUGAR.App.api.relationships(\n                method,\n                model.link.bean.module,\n                {\n                    id: model.link.bean.id,\n                    link: model.link.name,\n                    relatedId: model.id,\n                    related: relatedData\n                },\n                options.params,\n                callbacks,\n                options.apiOptions\n            );\n        }\n        else if (options.favorite) {\n\n            request = SUGAR.App.api.favorite(\n                model.module,\n                model.id,\n                model.isFavorite(),\n                callbacks,\n                options.apiOptions\n            );\n        } else if (options.following) {\n            request = SUGAR.App.api.follow(\n                model.module,\n                model.id,\n                model.get('following'),\n                callbacks,\n                options.apiOptions\n            );\n        } else if (options.collectionField) {\n            request = SUGAR.App.api.collection(\n                options.module,\n                {\n                    id: options.beanId,\n                    field: options.collectionField\n                },\n                options.params,\n                callbacks,\n                options.apiOptions\n            );\n        } else {\n            // Use global search API whenever a query is specified or a mixed collection is used\n            if (options.query || (model instanceof MixedBeanCollection)) {\n                request = SUGAR.App.api.search(\n                    options.params,\n                    callbacks,\n                    options.apiOptions\n                );\n            }\n            else if (model.module) {\n                request = SUGAR.App.api.records(\n                    method,\n                    model.module,\n                    method == \"update\" || method == \"create\" ? this.getEditableFields(model, options.fields) : model.attributes,\n                    options.params,\n                    callbacks,\n                    options.apiOptions\n                );\n            } else {\n                SUGAR.App.logger.error(\"Unable to sync model with no module\");\n            }\n        }\n\n        return request;\n    },\n\n    /**\n     * Builds and returns the options to pass to the `sync` request.\n     *\n     * @param  {string} method The CRUD method.\n     * @param {Data/Bean|Data/BeanCollection} model The bean/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @return {Object} A hash of options.\n     */\n    parseOptionsForSync: function(method, model, options) {\n        options = options || {};\n        options.params = _.extend({}, options.params);\n        options.filterDef = options.filter || model.filterDef;\n        options.method = method;\n\n        if (options.view && _.isString(options.view) && method == \"read\") {\n            options.params.view = options.view;\n        }\n\n        if (options.fields && method == \"read\") {\n            options.params.fields = options.fields.join(\",\");\n        }\n\n        // Track as recently viewed\n        if(options.viewed === true){\n            options.params.viewed = \"1\";\n        }\n\n        if ((method == \"read\") && (model instanceof BeanCollection)) {\n            if (options.offset && options.offset !== 0) {\n                options.params.offset = options.offset;\n            }\n\n            if (options.limit || (SUGAR.App.config && SUGAR.App.config.maxQueryResult)) {\n                options.params.max_num = options.limit || SUGAR.App.config.maxQueryResult;\n            }\n\n            if (model.orderBy && model.orderBy.field) {\n                options.params.order_by = model.orderBy.field + \":\" + model.orderBy.direction;\n            }\n\n            if (options.myItems === true) {\n                options.params.my_items = \"1\";\n            }\n\n            if (options.favorites === true) {\n                options.params.favorites = \"1\";\n            }\n\n            if (!_.isEmpty(options.filterDef)) {\n                var filterDef = Utils.deepCopy(options.filterDef);\n\n                // We want to assign to params.filter the filter definition\n                // itself (the value assigned to the \"filter\" key).\n                if (_.has(filterDef, \"filter\")) {\n                    filterDef = filterDef.filter;\n                }\n\n                if (!_.isArray(filterDef)) {\n                    filterDef = [filterDef];\n                }\n                options.params.filter = filterDef;\n            }\n\n            if (!_.isEmpty(options.query)) {\n                options.params.q = options.query;\n                if (_.isEmpty(options.module_list) && model.module) {\n                    // Set module list to be the collection's module\n                    options.module_list = [model.module];\n                }\n            }\n\n            if (options.module_list) {\n                options.params.module_list = options.module_list.join(\",\");\n            }\n        }\n\n        if ((method === 'update') && (options.lastModified)) {\n            options.apiOptions = options.apiOptions || {};\n            options.apiOptions.headers = options.apiOptions.headers || {};\n            options.apiOptions.headers['X-TIMESTAMP'] = options.lastModified;\n        }\n\n        return options;\n    },\n\n    /**\n     * Gets the `sync` callback functions.\n     *\n     * @param  {string} method The CRUD method.\n     * @param {Data/Bean|Data/BeanCollection} model The bean/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @return {Object} A hash containing the fallowing callback functions:\n     *   'success', 'error', 'complete', 'abort'.\n     */\n    getSyncCallbacks: function(method, model, options) {\n        return {\n            success: this.getSyncSuccessCallback(method, model, options),\n            error: this.getSyncErrorCallback(method, model, options),\n            complete: this.getSyncCompleteCallback(method, model, options),\n            abort: this.getSyncAbortCallback(method, model, options)\n        };\n    },\n\n    /**\n     * Gets the `success` callback function for the {@link #sync} method.\n     *\n     * @param  {string} method The CRUD method.\n     * @param {Data/Bean|Data/BeanCollection} model The bean/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @return {Function} The `success` callback function.\n     * @fires <b>data:sync:success</b> globally and on the bean, once the\n     *   sync call is made and is successful.\n     */\n    getSyncSuccessCallback: function(method, model, options) {\n        var self = this;\n        return function(data, request) {\n            model.inSync = true;\n            model.original_assigned_user_id = model.get(\"assigned_user_id\");\n            if ((method == \"read\") && (model instanceof BeanCollection)) {\n                var offset = options.offset || 0;\n                data = data || {};\n\n                if (_.isNumber(data.next_offset)) {\n                    model.offset = data.next_offset != -1 ? data.next_offset : offset + (data.records || []).length;\n                    model.next_offset = data.next_offset;\n                    model.page = model.getPageNumber(options);\n                }\n\n                if (!options.update) {\n                    // We need to invalidate the cached version of the total\n                    // when a reset is fired on the collection from actions\n                    // such as filtering. If however, the total is being\n                    // populated from the server response, that will be\n                    // used instead.\n                    model.total = _.isNumber(data.total) ? data.total : null;\n                }\n\n                if (model instanceof MixedBeanCollection) {\n                    // We need `xmod_aggs` property which are the facets\n                    // for search.\n                    model.xmod_aggs = data.xmod_aggs || null;\n                    model.tags = data.tags || null;\n\n                    // In a case of a collection field fetch, `next_offset` is\n                    // an object containing the next_offset of each link.\n                    if (_.isObject(data.next_offset)) {\n                        model.offset = data.next_offset;\n                        model.next_offset = data.next_offset;\n                    }\n                }\n\n                data = data.records || [];\n\n                // Update collection filter/search properties on success\n                self._updateCollectionProperties(model, options);\n            }\n\n            if (options.relate === true) {\n                // Reset the flag to indicate that relationship(s) do exist.\n                model.link.isNew = false;\n\n                if (method != \"read\") {\n                    // The response for create/update/delete relationship contains updated beans\n                    if (model.link.bean) {\n                        var syncedAttributes = model.link.bean.getSynced(),\n                            updatedAttributes = _.reduce(data.record, function(memo, val, key) {\n                                if (!_.isEqual(syncedAttributes[key], val)) {\n                                    memo[key] = val;\n                                }\n                                return memo;\n                            }, {});\n                        model.link.bean.set(updatedAttributes);\n                        //Once parent model is reset, reset internal synced attributes as well\n                        model.link.bean.setSyncedAttributes(data.record);\n                    }\n\n                    data = data.related_record;\n                    // Attributes will be set automatically for create/update but not for delete\n                    // Also, break the link\n                    if (method == \"delete\") {\n                        model.set(data);\n                        delete model.link;\n                    }\n                }\n            }\n\n            model.dataFetched = true;\n            if (options.success) options.success(data);\n            // trigger global data:sync:success event\n            self.trigger(\"data:sync:success\", method, model, options, request);\n            model.inSync = null;\n        };\n\n    },\n\n    /**\n     * Gets the `error` callback function for the sync {@link #sync} method.\n     *\n     * Triggers the global `data:sync:complete` event (registered on\n     * {@link Core.Events SUGAR.App.events}), as well as on the `model`.\n     *\n     * Executes the abort callback if we are aborting from a previous\n     * collection fetch request.\n     *\n     * @param {string} method The CRUD method.\n     * @param {Data/Bean|Data/BeanCollection} model The model/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @param {Object} [options.error] Custom `error` callback function to be\n     *   executed.\n     * @return {Function} The wrapped `error` callback function.\n     * @fires <b>data:sync:error</b> globally and on the bean, if the\n     *   sync call returned an error.\n     */\n    getSyncErrorCallback: function(method, model, options) {\n        return _.bind(function(error) {\n            if (error.request && error.request.aborted) {\n                var abortCallback = this.getSyncAbortCallback(method, model, options);\n                return abortCallback(error.request);\n            }\n            SUGAR.App.error.handleHttpError(error, model, options);\n            this.trigger('data:sync:error', method, model, options, error);\n            /**\n             * Fires on model when the sync operation ends unsuccessfully.\n             *\n             * Three parameters are passed to the callback:\n             *\n             *  - operation name (`method`)\n             *  - options\n             *  - error {@link SUGAR.Api.HttpError}\n             *\n             * ```\n             * model.on('data:sync:error', function(method, options, error) {\n             *     SUGAR.App.logger.debug('Operation failed:' + method + ' on ' + model);\n             * });\n             * ```\n             *\n             * @event data:sync:error\n             */\n            model.trigger('data:sync:error', method, options, error);\n\n            if (_.isFunction(options.error)) {\n                options.error(error);\n            }\n        }, this);\n    },\n\n    /**\n     * Gets the `complete` callback function for the sync {@link #sync} method.\n     *\n     * @param {string} method The CRUD method.\n     * @param {Data/Bean|Data/BeanCollection} model The bean/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @param {Object} [options.complete] Custom `complete` callback\n     *   function to be executed.\n     * @return {Function} The wrapped `complete` callback function.\n     * @fires <b>data:sync:complete</b> globally and on the bean/collection,\n     *   once the sync call was complete.\n     */\n    getSyncCompleteCallback: function(method, model, options) {\n        return _.bind(function(request) {\n            this.trigger('data:sync:complete', method, model, options, request);\n            /**\n             * Fires on model when the sync operation ends.\n             *\n             * Three parameters are passed to the callback:\n             *\n             *  - operation name (`method`)\n             *  - options\n             *  - request {@link SUGAR.Api.HttpRequest}\n             *\n             * ```\n             * model.on('data:sync:complete', function(method, options, request) {\n             *     SUGAR.App.logger.debug('Finished operation ' + method + ' on ' + model);\n             * });\n             * ```\n             *\n             * @event data:sync:complete\n             */\n            model.trigger('data:sync:complete', method, options, request);\n\n            if (_.isFunction(options.complete)) {\n                options.complete(request);\n            }\n\n            // Prevent memory leaking\n            options.previousModels = null;\n            options = {};\n        }, this);\n    },\n\n    /**\n     * Gets the `abort` callback function for the sync {@link #sync} method.\n     *\n     * @param {string} method The CRUD method.\n     * @param {Data/Bean|Data/BeanCollection} model The model/collection to\n     *   be synced/read.\n     * @param {Object} [options] A hash of options.\n     * @param {Object} [options.abort] Custom `abort` callback\n     *   function to be executed.\n     * @return {Function} The wrapped `abort` callback function.\n     * @fires <b>data:sync:abort</b> globally and on the bean/collection, if the\n     *   sync request was aborted.\n     */\n    getSyncAbortCallback: function(method, model, options) {\n        return _.bind(function(request) {\n            this.trigger('data:sync:abort', method, model, options, request);\n            /**\n             * Fires on model when the sync operation ends.\n             *\n             * Three parameters are passed to the callback:\n             *\n             *  - operation name (`method`)\n             *  - options\n             *  - request {@link SUGAR.Api.HttpRequest}\n             *\n             * ```\n             * model.on('data:sync:abort', function(method, options, request) {\n             *     SUGAR.App.logger.debug('Operation aborted ' + method + ' on ' + model);\n             * });\n             * ```\n             *\n             * @event data:sync:abort\n             */\n            model.trigger('data:sync:abort', method, options, request);\n        }, this);\n    },\n\n    /**\n     * Updates various properties on the bean collection passed.\n     *\n     * @param {Data/BeanCollection} model The collection.\n     * @param {Object} [options] A hash of options.\n     * @private\n     */\n    _updateCollectionProperties: function (model, options) {\n        options = options || {};\n\n        /**\n         * Flag indicating if a collection contains items assigned to the\n         * current user.\n         *\n         * @memberOf Data/BeanCollection\n         * @type {boolean}\n         * @name myItems\n         * @instance\n         * @readonly\n         */\n        model.myItems = options.myItems;\n\n        /**\n         * Flag indicating if a collection contains current user's favorite\n         * items.\n         *\n         * @memberOf Data/BeanCollection\n         * @type {boolean}\n         * @name favorites\n         * @instance\n         * @readonly\n         */\n        model.favorites = options.favorites;\n\n        /**\n         * Search query.\n         *\n         * @memberOf Data/BeanCollection\n         * @type {string}\n         * @name query\n         * @instance\n         * @readonly\n         */\n        model.query = options.query;\n\n        /**\n         * List of modules searched.\n         *\n         * @memberOf Data/MixedBeanCollection\n         * @type {string}\n         * @name modelList\n         * @instance\n         * @readonly\n         */\n        model.modelList = options.modelList;\n\n        /**\n         * Filter definition to filter the collection by.\n         *\n         * @memberOf Data/BeanCollection\n         * @type {Array}\n         * @name filterDef\n         * @instance\n         */\n        model.filterDef = options.filterDef;\n    }\n}, Backbone.Events);\n\nmodule.exports = DataManager;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Bean = require('./bean');\nconst BeanCollection = require('./bean-collection');\n\n/**\n * Mixed collection class.\n *\n * Supports wrapping multiple related collections by link to allow aggregated\n * interactions across multiple bean relationships. Does not support direct\n * fetch at this time except in search mode.\n *\n * **Filtering and searching**\n *\n * The collection's {@link Data/BeanCollection#fetch} method supports filter and\n * search options. For example, to search across accounts, opportunities, and\n * contacts for favorite records that have the string `\"Acme\"` in their\n * searchable fields:\n * ```\n * const DataManager = require('./data-manager');\n * var records = SUGAR.App.data.getMixedBeanCollection();\n * records.fetch({\n *     favorites: true,\n *     query: 'Acme',\n *     module_list: 'Accounts,Opportunities,Contacts'\n * });\n * ```\n *\n * @module Data/MixedBeanCollection\n * @class\n * @extends Data/BeanCollection\n */\nmodule.exports = BeanCollection.extend({\n    /**\n     * Creates a bean collection for each one of the links passed in the options.\n     * The mixed bean collection will keep those collection in sync with\n     * the mixed bean collection.\n     *\n     * @param {Array} models The initial models of the mixed bean collection.\n     * @param {Object} [options] A hash of options.\n     * @param {Array} [options.links] The links related to the mixed bean\n     *   collection. A link is a collection of a particular module linked to a\n     *   Bean. It represents a 1-to-many or many-to-many relationship. If this\n     *   argument is provided, the mixed bean collection will handle\n     *   synchronization between its records and the ones in its link\n     *   collections. This allows a bean to have a mixed bean collection as part\n     *   of its attributes to handle modification on its 1-to-many and\n     *   many-to-many relationships.\n     * @param {Data/Bean} [options.parentBean] The parent bean. It is required\n     *   in the case where the MixedBeanCollection is used for a collection\n     *   field.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    initialize: function (models, options) {\n        this._linkedCollections = {};\n\n        options = options || {};\n        if (options.links) {\n            if (!options.parentBean) {\n                SUGAR.App.logger.error('You cannot instantiate a mixed-bean-collection with linked collections ' +\n                    'but without a parent bean.');\n                return;\n\n            }\n\n            /**\n             * The parent bean. It exists in the case where a\n             * MixedBeanCollection is used for a collection field.\n             *\n             * @property {Data/Bean}\n             * @private\n             */\n            this._parentBean = options.parentBean;\n            /**\n             * The name of the collection field for which the mixed bean\n             * collection is used.\n             *\n             * @property {string}\n             * @private\n             */\n            this._collectionField = options.collectionField;\n\n            _.each(options.links, function(collection, link) {\n                //Check if collection is a module name rather than an existing collection\n                if (_.isString(collection)) {\n                    this._linkedCollections[link] = SUGAR.App.data.createBeanCollection(collection);\n                } else {\n                    this._linkedCollections[link] = collection;\n                }\n\n                this.listenTo(this._linkedCollections[link], 'add', this._onLinkAdd);\n                this.listenTo(this._linkedCollections[link], 'remove', this._onLinkRemove);\n                this.listenTo(this._linkedCollections[link], 'reset', this._onLinkReset);\n            }, this);\n\n            delete options.links;\n        }\n\n        BeanCollection.prototype.initialize.call(this, models, options);\n    },\n\n    /**\n     * Sets the `model` class to match the given model.\n     *\n     * @param {Data/Bean|Object} model The bean to be added to the collection.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/Bean} The prepared bean.\n     * @private\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    _prepareModel: function (model, options) {\n        var module = model instanceof Bean ? model.module : model._module;\n        this.model = SUGAR.App.data.getBeanClass(module);\n        return BeanCollection.prototype._prepareModel.call(this, model, options);\n    },\n\n    /**\n     * Adds a bean to this collection when it got added to a\n     * linked collection.\n     *\n     * @param {Data/Bean} model The bean to add.\n     * @param {Data/BeanCollection} collection The collection where the\n     *   bean got added.\n     * @param {Object} [options] A hash of options.\n     * @private\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    _onLinkAdd: function(model, collection, options) {\n        if (this._updating) {\n            return;\n        }\n\n        BeanCollection.prototype.set.call(this, model, {merge: false, add: true, remove: false});\n    },\n\n    /**\n     * Removes a bean from this collection when it gets removed\n     * from a linked collection.\n     *\n     * @param {Data/Bean} model The bean to remove.\n     * @param {Data/BeanCollection} collection The collection from which the\n     *   bean got removed.\n     * @param {Object} [options] A hash of options.\n     * @private\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    _onLinkRemove: function (model, collection, options) {\n        if (this._updating) {\n            return;\n        }\n\n        BeanCollection.prototype.remove.call(this, model);\n    },\n\n    /**\n     * Updates this collection when a linked collection gets reset.\n     *\n     * @param {Data/BeanCollection} collection The linked collection that\n     *   got reset.\n     * @private\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    _onLinkReset: function (collection) {\n        let groupedBeans = _.groupBy(this.models, function (model) {\n            return model instanceof Bean ? model.get('_link') : model._link;\n        });\n\n        let linkName = _.findKey(this._linkedCollections, val => val === collection);\n\n        let removeOptions = {};\n        let setOptions = {merge: false, add: true, remove: false};\n        // If `_updating` is `true`, it means we called `reset` on this\n        // collection, so we do not want to trigger `add` neither `remove`.\n        if (this._updating) {\n            _.extend(removeOptions, {silent: true});\n            _.extend(setOptions, {silent: true});\n        }\n\n        BeanCollection.prototype.remove.call(this, groupedBeans[linkName], removeOptions);\n        BeanCollection.prototype.set.call(this, collection.models, setOptions);\n    },\n\n    /**\n     * Adds models to the matching linked collections.\n     *\n     * @param {Data/Bean[]|Object[]} models The beans to be added to the\n     *   collection.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/Bean[]} The beans added to the collection.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    set: function (models, options) {\n        // We don't call the BeanCollection method because a mixed bean\n        // collection does not need to track it's own deltas.\n        models = Backbone.Collection.prototype.set.call(this, models, options);\n        if (!this._parentBean) {\n            return models;\n        }\n\n        this._updating = true;\n        options = options || {};\n\n        if (!_.isUndefined(models) && !_.isArray(models)) {\n            models = [models];\n        }\n\n        _.each(models, function (model) {\n            var link = model.get('_link');\n            if (!link) {\n                return;\n            }\n\n            if (this._linkedCollections[link]) {\n                this._linkedCollections[link].add(model, options);\n            }\n        }, this);\n\n        this._updating = false;\n\n        return models;\n    },\n\n    /**\n     * Removes models from the matching linked collections.\n     *\n     * @param {Data/Bean[]|Object[]} models The beans to be removed from the\n     *   collection.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/Bean[]} The beans removed from the collection.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    remove: function (models, options) {\n        // We don't call the BeanCollection method because a mixed bean\n        // collection does not need to track it's own deltas.\n        models = Backbone.Collection.prototype.remove.call(this, models, options);\n\n        if (!this._parentBean) {\n            return models;\n        }\n\n        this._updating = true;\n        options = options || {};\n\n        if (!_.isUndefined(models) && !_.isArray(models)) {\n            models = [models];\n        }\n\n        _.each(models, function (model) {\n            var link = model.get('_link');\n\n            if (link) {\n                if (this._linkedCollections[link]) {\n                    this._linkedCollections[link].remove(model, options);\n                }\n            } else {\n                _.each(this._linkedCollections, function (collection) {\n                    var modelModule = model instanceof Bean ? model.get('module') : model._module;\n                    if (collection.module === modelModule) {\n                        collection.remove(model, options);\n                    }\n                });\n            }\n        }, this);\n\n        this._updating = false;\n\n        return models;\n    },\n\n    /**\n     * Resets all linked collections.\n     *\n     * @param {Data/Bean[]|Object[]} models The beans to reset the\n     *   collection with.\n     * @param {Object} [options] A hash of options.\n     * @return {Data/Bean[]} The beans set to the collection.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    reset: function (models, options) {\n        if (!this._parentBean) {\n            // We don't call the BeanCollection method because a mixed bean\n            // collection does not need to track it's own deltas.\n            return Backbone.Collection.prototype.reset.call(this, models, options);\n        }\n\n        options = options ? _.clone(options) : {};\n        if (!_.isUndefined(models) && !_.isArray(models)) {\n            models = [models];\n        }\n\n        var sortedBeans = _.groupBy(models, function (model) {\n            return model instanceof Bean ? model.get('_link') : model._link;\n        });\n\n        this._updating = true;\n        _.each(this._linkedCollections, function(collection, link) {\n            // When a collection field's collection is reset silently, we still\n            // want the linked collections to trigger `reset` so `_onLinkReset`\n            // is called and the records of this mixed bean collection reflects\n            // the ones presents in the linked collection.\n            collection.reset(sortedBeans[link], _.omit(options, 'silent'));\n        }, this);\n        this._updating = false;\n        if (!options.silent) {\n            this.trigger('reset', this, options);\n        }\n\n        return models;\n    },\n\n    /**\n     * Gets changes made on the linked collections.\n     *\n     * @return {Object} The object representing the changes made on the\n     * linked collections since the last sync.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    getDelta: function() {\n        var result = {};\n        // TODO: SC-6145 will add `add` and `delete` arrays.\n        _.each(this._linkedCollections, (val, linkName) => {\n            if (!val.hasDelta()) {\n                return;\n            }\n\n            result[linkName] = val.getDelta();\n        }, this);\n\n        return result;\n    },\n\n    /**\n     * Checks if at least one of the linked collections has a delta.\n     *\n     * @return {boolean} `true` if at least 1 linked collection has a delta.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    hasDelta: function() {\n        return _.some(this._linkedCollections, (coll) => {\n            return coll.hasDelta();\n        });\n    },\n\n    /**\n     * Resets the delta object on each linked collection.\n     *\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    resetDelta: function() {\n        _.each(this._linkedCollections, (val, linkName) => {\n            val.resetDelta();\n        });\n    },\n\n    /**\n     * Fetches records.\n     *\n     * This method performs global search across multiple modules.\n     *\n     * @param {Object} [options] Fetch options.\n     * @param {string} [options.module_list] Comma-delimited list of\n     *   modules to search across. The default is a list of all displayable\n     *   modules.\n     * @return {SUGAR.HttpRequest} The created fetch request.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    fetch: function(options) {\n        options = options || {};\n        // We set a list of all modules by default\n        options.module_list = this.module_list = options.module_list || this.module_list || SUGAR.App.metadata.getModuleNames({filter: 'visible'});\n        return BeanCollection.prototype.fetch.call(this, options);\n    },\n\n    /**\n     * Groups models by module name.\n     *\n     * @return {Object} Sets of models. Key is module name, value is array of\n     *   models.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    groupByModule: function() {\n        return _.groupBy(this.models, function(model) {\n            return model.module;\n        });\n    },\n\n    /**\n     * Returns string representation of this collection.\n     *\n     * The format is:\n     * ```mcoll:[length]```\n     *\n     * @return {string} String representation of this collection.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    toString: function() {\n        return \"mcoll:\" + this.length;\n    },\n\n    /**\n     * Paginates the collection. In the use case of a collection field, we\n     * pass `collectionField` option in order to hit the collection API.\n     *\n     * @param {Object} [options] A hash of options.\n     * @param {string[]} [options.storedFilter] An array of existing filters to\n     *   be applied.\n     * @param {string} [options.view] If you are paginating a collection field,\n     *   passing the `view` option will make sure we read the field definition\n     *   specified in the view defs. It is especially important in order to use\n     *   the same `order_by` value that was used for the first fetch of the\n     *   collection.\n     * @return {SUGAR.HttpRequest} The created fetch request.\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    paginate: function(options) {\n        options = options || {};\n        if (this._parentBean) {\n            _.extend(options,\n                {\n                    collectionField: this._collectionField,\n                    beanId: this._parentBean.id,\n                    module: this._parentBean.module,\n                    offset: this.offset\n                }\n            );\n        }\n\n        return BeanCollection.prototype.paginate.call(this, options);\n    },\n\n    /**\n     * In a use case of a collection field, we set the `offset` and\n     * `next_offset` to an empty object. In other use cases, we call the parent.\n     *\n     * @memberOf Data/MixedBeanCollection\n     * @instance\n     */\n    resetPagination: function() {\n        if (!this._parentBean) {\n            return BeanCollection.prototype.resetPagination.call(this);\n        }\n\n        this.offset = this.next_offset = {};\n    }\n});\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst DateUtils = require('../utils/date');\nconst User = require('../core/user');\nconst Utils = require('../utils/utils');\nconst Language = require('../core/language');\n\n/**\n * Validation module.\n *\n * The validation module is used by {@link Data/Bean#doValidate}.\n * Each bean field is validated by each of the validators specified in the\n * {@link Data.Validation.validators} hash.\n *\n * The bean is also checked for required fields by\n * {@link Data.Validation#requiredValidator}.\n *\n * @module Data/Validation\n */\n\nfunction makeValidators() {\n    /**\n     * Validates whether the given value meets a max/min value requirement.\n     *\n     * @param {Object} field Bean field metadata.\n     * @param {string} value Bean field value (a number).\n     * @param {string} type The type of requirement that must be met. Possible\n     *   choices are 'max', 'min', 'greaterthan', and 'lessthan'.\n     * @return {number|undefined} The numerical value of the limit if the\n     *   requirement is not met and `undefined` if it is.\n     * @private\n     */\n    var _minMaxValue = function(field, value, type) {\n        var limit = _.isUndefined(field[type]) ?\n            (field.validation ? field.validation[type] : null) : field[type];\n        if (_.contains(['int', 'float', 'decimal', 'currency'], field.type) && _.isFinite(limit)) {\n            if (field.type == 'int') {\n                value = parseInt(value);\n            } else {\n                value = parseFloat(value);\n            }\n            if (type == 'max') {\n                if (value > limit) return limit;\n            } else if (type == 'min') {\n                if (value < limit) return limit;\n            } else if (type == 'greaterthan') {\n                if (value <= limit) return limit;\n            } else if (type == 'lessthan') {\n                if (value >= limit) return limit;\n            }\n        }\n    };\n\n    // Helper that validates the given date is before/after the date of another field\n    var _isBeforeAfter = function(field, value, type, model) {\n        var validatableTypes = ['date', 'datetimecombo'];\n        if(field.validation && field.validation.type === type &&\n            ((field.validation.datatype && _.contains(validatableTypes, field.validation.datatype)) ||\n                (_.contains(validatableTypes, field.type)))) {\n            var compareTo = model.fields[field.validation.compareto];\n            if(!_.isUndefined(compareTo) &&\n                ((field.validation.datatype && _.contains(validatableTypes, field.validation.datatype)) ||\n                    (_.contains(validatableTypes, compareTo.type)))) {\n                var compareToValue = Date.parse(model.get(compareTo.name));\n                value = Date.parse(value.toString());\n                if(!_.isNaN(compareToValue) && !_.isNaN(value)) {\n                    var compareToLabel = Language.get(compareTo.label || compareTo.vname || compareTo.name,\n                        model.module);\n                    if(type == \"isbefore\") {\n                        return compareToValue < value ? compareToLabel : undefined;\n                    }\n                    if(type == \"isafter\") {\n                        return compareToValue > value ? compareToLabel : undefined;\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * A hash of validators. Each validator function must return an error\n     * definition if validation fails and `undefined` if it succeeds.\n     *\n     * Error definitions can be primitives value such as max length or an\n     * array, such as a range's lower and upper limits.\n     * Validator functions accept field metadata and the value to be validated.\n     *\n     * @class\n     * @name Data/Validation.Validators\n     */\n    return {\n        /**\n         * Validates the maximum length of a given value.\n         *\n         * @param {string} field Bean field metadata.\n         * @param {string|number} value Bean field value.\n         * @return {number|undefined} Maximum length or `undefined` if the\n         *   field is valid.\n         * @memberOf Data/Validation.Validators\n         */\n        maxLength: function(field, value) {\n            if(_.isNumber(value)){\n                value = value.toString();\n            }\n            if (_.isNumber(field.len)  && _.isString(value)) {\n                var maxLength = field.len;\n                value = value || \"\";\n                value = value.toString();\n                if (value.length > maxLength) {\n                    return maxLength;\n                }\n            }\n        },\n\n        /**\n         * Validates the minimum length of a given value.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Bean field value.\n         * @return {number|undefined} Minimum length or `undefined` if the\n         *   field is valid.\n         * @memberOf Data/Validation.Validators\n         */\n        minLength: function(field, value) {\n            if (_.isNumber(field.minlen)) { // TODO: Not sure what the proper property is if there is one\n                var minLength = field.minlen;\n                value = value || \"\";\n                value = value.toString();\n\n                if (value.length < minLength) {\n                    return minLength;\n                }\n            }\n        },\n\n        /**\n         * Validates that a given value is a valid URL.\n         * Note that is impossible to do full validation of URLs in JavaScript.\n         *\n         * **This function has been a no-op since 6.7. Do NOT use it.**\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Bean field value.\n         * @deprecated Since 7.10\n         * @memberOf Data/Validation.Validators\n         */\n        url: function(field, value) {\n            SUGAR.App.logger.warn('The function `app.validation.validators.url()` is deprecated since 7.10 ' +\n                'because it has no effect.');\n        },\n\n        /**\n         * Validates that a given value contains only valid email address.\n         * Note that it is impossible to do full validation of email addresses\n         * in JavaScript.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {Object[]} emails Bean field value which is an array of email\n         *   objects.\n         * @return {string[]|undefined} Array of invalid email addresses or\n         *   `undefined` if the addresses are all valid.\n         * @memberOf Data/Validation.Validators\n         */\n        email: function(field, emails) {\n            var results;\n            if (field.type == 'email' || field.type === 'email-text') {\n                if (emails.length > 0) {\n                    _.each(emails, function(email) {\n                        // if email is blank but not required, let it go\n                        if (email.email_address === '' && (_.isUndefined(field.required) || !field.required)) {\n                            return;\n                        }\n                        if (!Utils.isValidEmailAddress(email.email_address)) {\n                            if (!results) results = [];\n                            results.push(email.email_address);\n                        }\n                    });\n                }\n                if (results && results.length > 0) {\n                    return results;\n                }\n            }\n        },\n\n        /**\n         * Validates that a given email array has at least one email set as the\n         * primary email.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {Object[]} emails Bean field value which is an array of email\n         *   objects.\n         * @return {boolean|undefined} `true` if there is no primary email set\n         *   or `undefined` if at least one of the emails is the primary\n         *   email.\n         * @memberOf Data/Validation.Validators\n         */\n        primaryEmail: function(field, emails) {\n            if (field.type == \"email\") {\n                if (emails.length > 0 &&\n                    !_.find(emails, function(email) { return email.primary_address == \"1\"; })) {\n                    return true;\n                }\n            }\n        },\n\n        /**\n         * Validates that a given email array has no duplicate email addresses.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {object[]} emails Bean field value which is an array of email\n         *   objects.\n         * @return {string[]|undefined} Array of duplicated email addresses or\n         *   `undefined` if there are no duplicates.\n         * @memberOf Data/Validation.Validators\n         */\n        duplicateEmail: function(field, emails) {\n            if (field.type == \"email\") {\n                var values = _.pluck(emails, \"email_address\"),\n                    duplicates = [],\n                    n = values.length,\n                    i, j;\n                // to ensure the fewest possible comparisons\n                for (i = 0; i < n; i++) {                      // outer loop uses each item i at 0 through n\n                    for (j = i + 1; j < n; j++) {              // inner loop only compares items j at i+1 to n\n                        if (values[i] == values[j]) duplicates.push(values[i]);\n                    }\n                }\n                if (duplicates && duplicates.length > 0) {\n                    return duplicates;\n                }\n            }\n        },\n\n        /**\n         * Validates that a given value is a real date or datetime.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Date or datetime value as string.\n         * @return {string|undefined} The invalid date/datetime or `undefined`\n         *   if it is a valid date.\n         * @memberOf Data/Validation.Validators\n         */\n        datetime: function(field, value){\n            var val, invalidNumberOfDigits, format, sep, formatParts, parts, i, len;\n\n            function inRange(val, min, max) {\n                var value = parseInt(val, 10);\n                return (!isNaN(value) && value >= min && value <= max);\n            }\n\n            if(field.type === \"date\" || field.type === \"datetimecombo\") {\n                // First check will short circuit (falsy) if the value is a valid server ISO date string.\n                // For datepicker values, however, we need the second check since Safari chokes on '.', '-'\n                if(_.isNaN(Date.parse(value)) && _.isNaN(Date.parse(value.replace(/[\\.\\-]/g, '/')))) {\n                    return value;\n                } else {\n\n                    // Check for valid date parts for non ISO dates as IE and FF both successfully parse\n                    // 2014/13/22 simply wrapping extra months around to following year (so previous example\n                    // becomes 2015/01/22).\n                    if (!DateUtils.isIso(value)) {\n                        // The first set of Date.parse conditionals will negate three digit days or months\n                        // but 3 digit years are valid for JavaScript dates so they'll slip through. The reason\n                        // we explicitly invalidate 3 digit years is datepicker auto corrects 1 and 2 digit years\n                        // in yyyy but cannot do anything sensible with 3 digit years. Moreover, it was decided\n                        // that it's much more likely a 3 digit years is a user entry error; they don't really\n                        // intend to enter a date year (e.g. 100-999 A.D.). Also any part > 4 digits is considered\n                        // invalid as well since we only support:\n                        // 2010-12-23, Y-m-d\n                        // 12-23-2010, m-d-Y\n                        // 23-12-2010, d-m-Y\n                        // 2010/12/23, Y/m/d\n                        // 12/23/2010, m/d/Y\n                        // 23/12/2010, d/m/Y\n                        // 2010.12.23, Y.m.d\n                        // 23.12.2010, d.m.Y\n                        // 12.23.2010, m.d.Y\n                        parts = value.replace(/[\\.\\-]/g, '/').split('/');\n                        invalidNumberOfDigits = _.filter(parts,\n                            (part) => part.length === 3 || part.length > 4\n                        );\n\n                        if (invalidNumberOfDigits.length) {\n                            return value;\n                        }\n\n                        // Invalidate consecutive separators e.g. 12--23--2013\n                        if (/([\\.\\/\\-])\\1/.test(value) === true) {\n                            return value;\n                        }\n\n                        // Lastly, validate month and day ranges\n                        format = User.getPreference('datepref');\n                        sep = format.match(/[.\\/\\-\\s].*?/);\n                        formatParts = format.split(sep);\n                        for(i=0, len=formatParts.length; i<len; i++) {\n                            val = parts[i];\n                            switch(formatParts[i].toLowerCase().charAt(0)) {\n                                case 'm':\n                                    if (!inRange(val, 1, 12)) {\n                                        return value;\n                                    }\n                                    break;\n                                case 'd':\n                                    if (!inRange(val, 1, 31)) {\n                                        return value;\n                                    }\n                                    break;\n                            }\n                        }\n                    } else {\n                        // The datepicker plugin will leave 3 digit years and this validation is supposed to\n                        // invalidate; but to iso date will turn that to something like: 0201-01-31T08:00:00.000Z\n                        // We have to reject 100-999 to be consistent with the rest of our date year validation.\n                        if (value.charAt(0) === '0') return value;\n                    }\n                }\n            }\n        },\n\n        /**\n         * Validates minimum integer values.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Field value which is a number.\n         * @return {number|undefined} Value of the actual min if the limit is\n         *   not met and `undefined` if it is.\n         * @memberOf Data/Validation.Validators\n         */\n        minValue: function(field, value) {\n            return _minMaxValue(field, value, 'min');\n        },\n\n        /**\n         * Validates maximum integer values.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Field value which is a number.\n         * @return {number|undefined} Value of the actual max if the limit is\n         *   not met and `undefined` if it is.\n         * @memberOf Data/Validation.Validators\n         */\n        maxValue: function(field, value) {\n            return _minMaxValue(field, value, 'max');\n        },\n\n        /**\n         * Validates a value to make sure it's larger than a given value.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Field value which is a number.\n         * @return {number|undefined} Value that must be exceeded if the limit\n         *   is not met and `undefined` if it is.\n         * @memberOf Data/Validation.Validators\n         */\n        greaterThan: function(field, value) {\n            return _minMaxValue(field, value, 'greaterthan');\n        },\n\n        /**\n         * Validates a value to make sure it's less than a given value.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Field value which is a number.\n         * @return {number|undefined} Value that `value` must be less than if\n         *   the limit is not met and `undefined` if it is.\n         * @memberOf Data/Validation.Validators\n         */\n        lessThan: function(field, value) {\n            return _minMaxValue(field, value, 'lessthan');\n        },\n\n        /**\n         * Validates numeric values.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value field value which is an integer\n         * @return {boolean|undefined} `true` if `value` is invalid,\n         *   `undefined` otherwise.\n         * @memberOf Data/Validation.Validators\n         */\n        number: function(field, value) {\n            if (_.indexOf(['int', 'float', 'decimal', 'currency'], field.type) != -1) {\n                return (_.isBoolean(value) || (_.isString(value) && !value.trim().length) ||\n                isNaN(parseFloat(value)) || !_.isFinite(value)) ?\n                    true : undefined;\n            }\n        },\n\n        /**\n         * Validates that the given date is before the date of another field.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Field value which is an integer.\n         * @param {Object} model Model.\n         * @return {string|undefined} Compare field label if it is invalid\n         *   and `undefined` otherwise.\n         * @memberOf Data/Validation.Validators\n         */\n        isBefore: function(field, value, model) {\n            return _isBeforeAfter(field, value, 'isbefore', model);\n        },\n\n        /**\n         * Validates that the given date is after the date of another field.\n         *\n         * @param {Object} field Bean field metadata.\n         * @param {string} value Field value which is an integer.\n         * @param {Object} model Model.\n         * @return {string} Compare field label if is invalid, `undefined`\n         *   otherwise.\n         * @memberOf Data/Validation.Validators\n         */\n        isAfter: function(field, value, model) {\n            return _isBeforeAfter(field, value, 'isafter', model);\n        }\n    };\n}\n\n/**\n * Checks if the given array contains only empty values.\n *\n * @param {Array} value Array to check.\n * @return {boolean} `true` if all of the array's elements are empty\n *   and `false` otherwise.\n * @private\n */\nfunction isArrayEmpty(value) {\n    return _.every(value, _.isEmpty);\n}\n\n/**\n * @alias module:Data/Validation\n */\nconst Validation = {\n    /**\n     * @type {Data/Validation.Validators}\n     */\n    validators: makeValidators(),\n\n    /**\n     * Validates if the required field is set on a bean or about to be set.\n     *\n     * @param {Object} field Bean field metadata.\n     * @param {string} fieldName Bean field name.\n     * @param {Data/Bean} model Bean instance.\n     * @param {string} value Value to be set.\n     * @return {boolean} `true` if the validation fails, `undefined` otherwise.\n     */\n    requiredValidator: function(field, fieldName, model, value) {\n        // Image type fields have their own requiredValidator\n        if ((field.required === true) && (fieldName !== 'id') &&\n            (field.type !== 'image') &&\n            _.isUndefined(field.auto_increment)\n        ) {\n            var currentValue = model.get(fieldName);\n            var currentUndefined = _.isUndefined(currentValue);\n            var valueEmpty = _.isNull(value) ||\n                value === '' ||\n                value === false ||\n                (_.isArray(value) && isArrayEmpty(value)) ||\n                (value instanceof Backbone.Collection && !value.length);\n\n            // Remove validation for relate/flex relate if name is erased\n            if (field.id_name && model.get(field.id_name)) {\n                return;\n            }\n\n            if ((currentUndefined && _.isUndefined(value)) || valueEmpty) {\n                return true;\n            }\n        }\n    },\n\n    _isArrayEmpty: function(value) {\n        if (!SUGAR.App.config.sidecarCompatMode) {\n            SUGAR.App.logger.error('Data.Validation#_isArrayEmpty is a private method that you are not allowed ' +\n                'to access. Please use only the public API.');\n            return;\n        }\n\n        SUGAR.App.logger.warn('Data.Validation#_isArrayEmpty is a private method that you should not access. ' +\n            'You will NOT be allowed to access it in the next release. Please update your code to rely on the public ' +\n            'API only.');\n\n        return isArrayEmpty(value);\n    }\n};\n\nmodule.exports = Validation;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nvar SUGAR = require('imports-loader?SUGAR=>window.SUGAR!exports-loader?SUGAR!app.js');\nwindow.SUGAR = SUGAR;\n\nSUGAR.Api = require('@sugarcrm/ventana');\nrequire('./utils/utils.js');\nrequire('./utils/date.js');\nrequire('./utils/math.js');\nrequire('./utils/currency.js');\n\nrequire('./core/before-event.js');\nrequire('./core/cache.js');\nrequire('./core/events.js');\nrequire('./core/error.js');\n\nrequire('./view/template.js');\n\nrequire('./core/context.js');\nrequire('./core/controller.js');\nrequire('./core/router.js');\nrequire('./core/routing.js');\nrequire('./core/language.js');\nrequire('./core/metadata-manager.js');\nrequire('./core/acl.js');\nrequire('./core/user.js');\nrequire('./core/plugin-manager.js');\n\nrequire('./utils/logger.js');\n\nrequire('./data/bean.js');\nrequire('./data/bean-collection.js');\nrequire('./data/mixed-bean-collection.js');\nrequire('./data/data-manager.js');\nrequire('./data/validation.js');\n\nrequire('./view/hbs-helpers.js');\nrequire('./view/view-manager.js');\nrequire('./view/component.js');\nrequire('./view/view.js');\nrequire('./view/field.js');\nrequire('./view/layout.js');\nrequire('./view/alert.js');\n\nrequire('./utils/underscore-mixins.js');\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Utils = require('./utils');\n\nlet path = window.location.pathname.replace(/\\/[^\\/]*$/, '/cookie.html');\nlet getCookie = function() {\n    return {};\n};\n\n/**\n * Cookie storage for authentication data.\n *\n * @module Utils/Cookie\n */\n\n/**\n * @alias module:Utils/Cookie\n */\nconst Cookie = {\n    /**\n     * Initializes cookie support and executes code after it is ready.\n     *\n     * @param {Function} callback Called after cookie support is ready.\n     */\n    initAsync: function(callback) {\n        var frame = document.createElement('iframe');\n        frame.style.display = 'none';\n        frame.src = path;\n        document.body.appendChild(frame);\n\n        frame.contentWindow.onload = function() {\n            getCookie = function() {\n                return frame.contentWindow.getCookie();\n            };\n            callback();\n        };\n    },\n\n    /**\n     * Checks if the item exists in storage.\n     *\n     * @param {string} key Item key.\n     * @return {boolean} Whether the item exists in storage.\n     */\n    has: function(key) {\n        return key in getCookie();\n    },\n\n    /**\n     * Gets an item from storage.\n     *\n     * @param {string} key Item key.\n     * @return {string} Item with the given key.\n     */\n    get: function(key) {\n        return getCookie()[key];\n    },\n\n    /**\n     * Puts an item into storage.\n     *\n     * @param {string} key Item key.\n     * @param {string} value Item to put.\n     */\n    set: function(key, value) {\n        Utils.cookie.setCookie(key, value, null, path);\n    },\n\n    /**\n     * Deletes an item from storage.\n     *\n     * @param {string} key Item key.\n     */\n    cut: function(key) {\n        Utils.cookie.setCookie(key, '', -1, path);\n    }\n};\n\nmodule.exports = Cookie;\n","\n/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst math = require('./math');\nconst User = require('../core/user');\nconst Utils = require('./utils');\n\n/**\n * Currency module provides utility methods for working with currencies.\n *\n * @module Utils/Currency\n */\n module.exports = {\n    /**\n     * Gets the base currency id.\n     *\n     * @return {string} The base currency id.\n     */\n    getBaseCurrencyId: function() {\n        return SUGAR.App.metadata.getBaseCurrencyId();\n    },\n\n    /**\n     * Gets the system's base currency.\n     *\n     * @return {Object} The base currency data.\n     */\n    getBaseCurrency: function() {\n        var currId = SUGAR.App.metadata.getBaseCurrencyId(),\n            currencyObj = SUGAR.App.metadata.getCurrency(currId);\n\n        // add currency_id to returned data\n        currencyObj.currency_id = currId;\n\n        return currencyObj;\n    },\n\n    /**\n     * Returns a map of currency IDs to the result of applying the\n     * given Handlebars template to them.\n     *\n     * Example for the `template` param:\n     * ```\n     *   getCurrenciesSelector(Handlebars.compile('{{symbol}} ({{iso}})'));\n     * ```\n     *\n     * @param {Function} template How to format the values returned.\n     * @return {Object} Map from currency IDs to formatted currency data.\n     */\n    getCurrenciesSelector: function(template) {\n        var currencies = {};\n\n        _.each(SUGAR.App.metadata.getCurrencies(), function(currency, id) {\n            currencies[id] = template(currency);\n        });\n        return currencies;\n    },\n\n    /**\n     * Gets the symbol for the given currency ID.\n     *\n     * @param {string}  currencyId Currency identifier.\n     * @return {string} The currency display symbol (e.g. \"$\").\n     */\n    getCurrencySymbol: function (currencyId) {\n        var currency = SUGAR.App.metadata.getCurrency(currencyId);\n        return currency ? currency.symbol : '';\n    },\n\n    /**\n     * Formats a currency amount.\n     *\n     * @param {number} amount The amount to be formatted.\n     * @param {string} [currencyId] The currency id to be used. If not\n     *     specified, the system default will be used.\n     * @param {number} [decimalPrecision=2] The number of digits for\n     *     decimal precision.\n     * @param {string} [numberGroupingSeparator=','] The thousands separator.\n     * @param {string} [decimalSeparator='.'] The decimal separator (string\n     *     between number and decimal digits).\n     * @param {string} [symbolSeparator=''] The string between the symbol and\n     *     the amount.\n     * @return {string} The formatted currency amount.\n     */\n    formatAmount: function(\n        amount,\n        currencyId,\n        decimalPrecision,\n        numberGroupingSeparator,\n        decimalSeparator,\n        symbolSeparator\n    ) {\n        // we don't want to format non-numbers\n        if (!_.isFinite(amount)) {\n            return amount;\n        }\n        var currencySymbol;\n        var config = SUGAR.App.metadata.getConfig();\n        // default to base currency\n        currencyId = currencyId || this.getBaseCurrencyId();\n        symbolSeparator = symbolSeparator || '';\n        // use reasonable defaults if none exist\n        if (!_.isFinite(decimalPrecision)) {\n            if (_.isFinite(config.defaultCurrencySignificantDigits)) {\n                decimalPrecision = config.defaultCurrencySignificantDigits;\n            }\n            else {\n                decimalPrecision = 2;\n            }\n        }\n\n        decimalSeparator = decimalSeparator || config.defaultDecimalSeparator || '.';\n        // if the numberGroupingSeparator is truly undefined we need to get the defaults, if it's an empty string\n        // we need to use the empty string as it's a valid value.\n        numberGroupingSeparator = (!_.isUndefined(numberGroupingSeparator)) ?\n            numberGroupingSeparator : config.defaultNumberGroupingSeparator || ',';\n\n        currencySymbol = this.getCurrencySymbol(currencyId) || this.getCurrencySymbol(this.getBaseCurrencyId());\n        amount = Utils.formatNumber(\n            amount,\n            decimalPrecision,\n            decimalPrecision,\n            numberGroupingSeparator,\n            decimalSeparator\n        );\n        return currencySymbol + symbolSeparator + amount;\n    },\n\n    /**\n     * Formats a currency amount according to the current user's locale.\n     *\n     * @param {number} amount The amount to format.\n     * @param {string} [currencyId] The currency id to use. If not\n     *   specified, the system default will be used.\n     * @param {string} [decimalPrecision] The number of decimal digits to use.\n     *   If not specified, the user preference will be used.\n     * @return {string} formatted currency amount.\n     */\n    formatAmountLocale: function (amount, currencyId, decimalPrecision) {\n        // get user preferred formatting\n        var decimalSeparator = User.getPreference('decimal_separator');\n        var numberGroupingSeparator = User.getPreference('number_grouping_separator');\n        var userDecimalPrecision = User.getPreference('decimal_precision');\n        decimalPrecision = (_.isFinite(decimalPrecision)) ? decimalPrecision : userDecimalPrecision;\n        return this.formatAmount(\n            amount,\n            currencyId,\n            decimalPrecision,\n            numberGroupingSeparator,\n            decimalSeparator\n        );\n    },\n\n    /**\n     * Unformats a currency amount.\n     *\n     * @param {string} amount The amount to unformat.\n     * @param {string} numberGroupingSeparator Thousands separator.\n     * @param {string} decimalSeparator The string between number and decimals.\n     * @param {boolean} [toFloat=false] If `true`, convert string to float\n     *   value.\n     * @return {string} The unformatted currency amount.\n     */\n    unformatAmount:function (amount, numberGroupingSeparator, decimalSeparator, toFloat) {\n        toFloat = toFloat || false;\n        // strip off currency symbol, or anything prefixed that is not a digit or separator\n        amount = amount.toString().replace(/^[^\\d\\.\\,-]+/, '');\n        return Utils.unformatNumberString(\n            amount,\n            numberGroupingSeparator,\n            decimalSeparator,\n            toFloat\n        );\n    },\n\n    /**\n     * Unformats the currency amount according to the current user's locale.\n     *\n     * @param {string} amount Amount to unformat.\n     * @param {boolean} toFloat If `true`, convert string to float value.\n     * @return {string} The unformatted currency amount.\n     */\n    unformatAmountLocale:function (amount, toFloat) {\n        var decimalSeparator,\n            numberGroupingSeparator,\n            config = SUGAR.App.metadata.getConfig();\n        // use user locale or reasonable defaults\n        decimalSeparator = User.getPreference('decimal_separator') || config.defaultDecimalSeparator || '.';\n        var userNumGroupingSeparator = User.getPreference('number_grouping_separator');\n        numberGroupingSeparator = userNumGroupingSeparator || config.defaultNumberGroupingSeparator || ',';\n        return this.unformatAmount(\n            amount,\n            numberGroupingSeparator,\n            decimalSeparator,\n            toFloat\n        );\n    },\n\n    /**\n     * Converts from one currency to another.\n     *\n     * @param {number|string} amount Base currency amount.\n     * @param {string} fromId Source currency id.\n     * @param {string} toId Target currency id.\n     * @return {string} The converted amount.\n     */\n    convertAmount: function(amount, fromId, toId) {\n        var currency1;\n        var currency2;\n        if (fromId == toId) {\n            return math.round(amount, undefined, true);\n        }\n        currency1 = SUGAR.App.metadata.getCurrency(fromId);\n        currency2 = SUGAR.App.metadata.getCurrency(toId);\n        return this.convertWithRate(amount, currency1.conversion_rate, currency2.conversion_rate);\n    },\n\n    /**\n     * Converts a currency to the base currency.\n     *\n     * @param {number|string} amount The amount in the source currency.\n     * @param {string} fromId Source currency id.\n     * @return {string} The converted amount.\n     */\n    convertToBase: function (amount, fromId) {\n        return this.convertAmount(amount, fromId, this.getBaseCurrencyId());\n    },\n\n    /**\n     * Converts from the base currency to another currency.\n     *\n     * @param {number|string} amount The amount in the base currency.\n     * @param {string} toId Target currency id.\n     * @return {string} The converted amount.\n     */\n    convertFromBase:function (amount, toId) {\n        return this.convertAmount(amount, this.getBaseCurrencyId(), toId);\n    },\n\n    /**\n     * Converts a currency with given conversion rates.\n     *\n     * @param {number|string} amount The amount in the origin currency.\n     * @param {number} fromRate The origin conversion rate relative to the base\n     *   currency.\n     * @param {number} toRate The target conversion rate relative to the base\n     *   currency.\n     * @return {string} The converted amount.\n     */\n    convertWithRate: function(amount, fromRate, toRate) {\n        fromRate = fromRate || 1.0;\n        toRate = toRate || 1.0;\n        return math.mul(math.div(amount, fromRate, undefined, true), toRate, undefined, true);\n    }\n};\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst User = require('../core/user');\nconst Language = require('../core/language');\n\nvar date = moment;\n\n/**\n * Extends {@link https://momentjs.com/|moment.js} with additional features.\n *\n * Also provides a backwards compatibility layer for existing code; however,\n * this is deprecated and you are strongly advised not to use it.\n *\n * @module Utils/Date\n * @class\n */\n_.extend(date, {\n    /**\n     * Exception to be used when an invalid date/time is passed.\n     *\n     * @param {string} message The error message.\n     * @param {string} date The date that is invalid.\n     * @class\n     * @memberOf Utils/Date\n     * @private\n     */\n    InvalidException: function(message, date) {\n        this.name = 'InvalidException';\n        this.message = message;\n        this.date = date;\n    },\n\n    /**\n     * Cached formats of converted date/time formats from server to client.\n     *\n     * This cache is populated by {@link Utils/Date#convertFormat}.\n     *\n     * @type {Object}\n     * @private\n     */\n    _cachedFormats: {},\n\n    /**\n     * Server date format according to moment.js.\n     * This is exactly the same as the server is expecting `Y-m-d`.\n     *\n     * @type {string}\n     * @private\n     */\n    _serverDateFormat: 'YYYY-MM-DD',\n\n    /**\n     * Server's locale to get correct encoding\n     *\n     * @type {string}\n     * @private\n     */\n    _serverLocale: 'en',\n\n    /**\n     * Converts PHP date/time format preference to JS.\n     *\n     * Momentjs uses a different formatting tokens:\n     * {@link http://momentjs.com/docs/#/parsing/string-format/}\n     *\n     * Known possible values to convert (out of the box):\n     *\n     * ```\n     * // dates\n     * 'Y-m-d'\n     * 'd-m-Y'\n     * 'm-d-Y'\n     * 'Y/m/d'\n     * 'd/m/Y'\n     * 'm/d/Y'\n     * 'Y.m.d'\n     * 'd.m.Y'\n     * 'm.d.Y'\n     *\n     * // time\n     * 'H:i'\n     * 'h:ia'\n     * 'h:iA'\n     * 'H.i'\n     * 'h.ia'\n     * 'h.iA'\n     * 'G:i'\n     * 'g:ia'\n     * 'G.i'\n     * 'g.ia'\n     * 'g.iA'\n     * ```\n     *\n     * @param {string} server The server format preference to convert.\n     * @return {string} The converted format that momentjs understands.\n     * @private\n     * @memberOf Utils/Date\n     */\n    convertFormat: function(server) {\n        if (date._cachedFormats[server]) {\n            return date._cachedFormats[server];\n        }\n\n        let convertTable = [\n            // date\n            ['d', 'DD'],  // day of the month w\\ leading zeros\n            ['m', 'MM'],  // numeric month w\\ leading zeros\n            ['Y', 'YYYY'],  // full numeric year\n            // time\n            ['H', 'HH'], // 24-hour format w\\ leading zeros\n            ['h', 'hh'], // 12-hour format w\\ leading zeros\n            ['G', 'H'], // 24-hour format without leading zeros\n            ['g', 'h'], // 12-hour format without leading zeros\n            ['i', 'mm'], // minutes w\\ leading zeros\n        ];\n\n        var client = server;\n        _.each(convertTable, conversion => {\n            let [from, to] = conversion;\n            client = client.replace(from, to);\n        });\n        date._cachedFormats[server] = client;\n        return client;\n    },\n\n    /**\n     * Performs a three-way comparison between two dates.\n     * Compatible with `Array.sort` and similar functions.\n     *\n     * @param {string} date1 The first date to compare.\n     * @param {string} date2 The second date to compare.\n     * @return {number} The result of comparing `date1` to `date2`:\n     * * `-1` if date1 < date2\n     * * `0` if date1 = date2\n     * * `1` if date1 > date2\n     *\n     * @throws if any of the given dates are invalid.\n     * @memberOf Utils/Date\n     */\n    compare: function(date1, date2) {\n        var mDate1 = moment(date1),\n            mDate2 = moment(date2);\n\n        if (!mDate1.isValid()) {\n            throw new date.InvalidException('Invalid date passed for comparison.', date1);\n        }\n        if (!mDate2.isValid()) {\n            throw new date.InvalidException('Invalid date passed for comparison.', date2);\n        }\n\n        if (mDate1.isBefore(mDate2)) {\n            return -1;\n        }\n        if (mDate1.isAfter(mDate2)) {\n            return 1;\n        }\n        return 0;\n    },\n\n    /**\n     * Gets the date format preference for the given user.\n     *\n     * @param {Data/Bean|Object} [user=Core.User] The user whose date format\n     *   you want.\n     * @return {string} A format string for the user's preferred date format.\n     * @memberOf Utils/Date\n     */\n    getUserDateFormat: function(user) {\n        user = user || User;\n        return this.convertFormat(user.getPreference('datepref'));\n    },\n\n    /**\n     * Gets the time format preference for the given user.\n     *\n     * @param {Data/Bean|Object} [user=Core.User] The user whose time format\n     *   you want.\n     * @return {string} A format string for the user's preferred time format.\n     * @memberOf Utils/Date\n     */\n    getUserTimeFormat: function(user) {\n        user = user || User;\n        return this.convertFormat(user.getPreference('timepref'));\n    },\n});\n\n// hash table of the datetime formats that have already been parsed\n// FIXME: this is only used by deprecated code\nvar _formatStringCache = {};\n\n// Deprecated functionality will be kept in the old singleton prototype.\n_.extend(date, {\n    /**\n     * Parses date strings into JavaScript Dates.\n     *\n     * @param {string} date The date string to parse.\n     * @param {string} [oldFormat] Date format string. If not specified,\n     *   this function will guess the date format.\n     * @return {Date} A Date object corresponding to the given `date`.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    parse: function(date, oldFormat) {\n        SUGAR.App.logger.warn('The function `Utils.Date.parse()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        var jsDate     = new Date(\"Jan 1, 1970 00:00:00\"),\n            part       = \"\",\n            dateRemain, j, c, i, v, timeformat;\n\n        //if already a Date return it\n        if (date instanceof Date) return date;\n\n        // TODO add user prefs support\n\n        if (!oldFormat) {\n            oldFormat = this.guessFormat(date);\n        }\n\n        if (oldFormat === false) {\n            //Check if date is a timestamp\n            if (/^\\d+$/.test(date)) {\n                return new Date(date);\n            }\n\n            //we cant figure out the format so return false\n            return false;\n        }\n\n        dateRemain = date.trim();\n        oldFormat = oldFormat.trim() + \" \"; // Trailing space to read as last separator.\n        for (j = 0; j < oldFormat.length; j++) {\n            c = oldFormat.charAt(j);\n            if (c === ':' || c === '/' || c === '-' || c === '.' || c === \" \" || c === 'a' || c === \"A\") {\n                i = dateRemain.indexOf(c);\n                if (i === -1) i = dateRemain.length;\n                v = dateRemain.substring(0, i);\n                dateRemain = dateRemain.substring(i + 1);\n                switch (part) {\n                    case 'm':\n                        if (!(v > 0 && v < 13)) return false;\n                        jsDate.setMonth(v - 1);\n                        break;\n                    case 'd':\n                        if (!(v > 0 && v < 32)) return false;\n                        jsDate.setDate(v);\n                        break;\n                    case 'Y':\n                        if (v > 0 === false) return false;\n                        jsDate.setYear(v);\n                        break;\n                    case 'h':\n                        //Read time, assume minutes are at end of date string (we do not accept seconds)\n                        timeformat = oldFormat.substring(oldFormat.length - 4);\n                        v = parseInt(v, 10);\n                        var timeFormatString = (timeformat.toLowerCase()).trim();\n                        if (timeFormatString === \"i a\" || timeFormatString === c + \"ia\") {\n                            var postfix = dateRemain.substring(dateRemain.length - 2).toLowerCase();\n                            if (postfix === 'pm') {\n                                if (v < 12) {\n                                    v += 12;\n                                }\n                            }\n                            // 12:00am => 00:00:00\n                            else if (postfix === 'am' && v === 12) {\n                                v = 0;\n                            }\n                        }\n                        jsDate.setHours(v);\n                        break;\n                    case 'H':\n                        jsDate.setHours(v);\n                        break;\n                    case 'i':\n                        v = v.substring(0, 2);\n                        jsDate.setMinutes(v);\n                        break;\n                    case 's':\n                        jsDate.setSeconds(v);\n                        break;\n                }\n                part = \"\";\n            } else {\n                part = c;\n            }\n        }\n        return jsDate;\n    },\n\n    /**\n     * Guesses the format of a date string.\n     *\n     * @param {string} date A date string.\n     * @return {string|boolean} A string encoding the date/time format used by\n     *   `date`, or `false` if `date` is invalid.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    guessFormat: function(date) {\n        SUGAR.App.logger.warn('The function `Utils.Date.guessFormat()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        if (typeof date !== \"string\")\n            return false;\n        //Is there a time\n        var time = \"\", dateSep, dateParts, dateFormat, timeFormat, timeParts,\n            timeSep, ampmCase, timeEnd;\n\n        if (date.indexOf(\" \") !== -1) {\n            time = date.substring(date.indexOf(\" \") + 1, date.length);\n            date = date.substring(0, date.indexOf(\" \"));\n        }\n\n        //First detect if the date contains \"-\" or \"/\"\n        dateSep = \"/\";\n        if (date.indexOf(\"/\") !== -1) {\n        }\n        else if (date.indexOf(\"-\") !== -1) {\n            dateSep = \"-\";\n        }\n        else if (date.indexOf(\".\") !== -1) {\n            dateSep = \".\";\n        }\n        else {\n            return false;\n        }\n\n        dateParts = date.split(dateSep);\n        dateFormat = \"\";\n\n        if (dateParts[0].length === 4) {\n            dateFormat = \"Y\" + dateSep + \"m\" + dateSep + \"d\";\n        }\n        else if (dateParts[2].length === 4) {\n            dateFormat = \"m\" + dateSep + \"d\" + dateSep + \"Y\";\n        }\n        else {\n            return false;\n        }\n\n        timeFormat = \"\";\n        timeParts = [];\n\n        // Check for time\n        if (time !== \"\") {\n\n            // start at the i, we always have minutes\n            timeParts.push(\"i\");\n\n            timeSep = \":\";\n\n            if (time.indexOf(\".\") === 2) {\n                timeSep = \".\";\n            }\n\n            // if its long we have seconds\n            if (time.split(timeSep).length === 3) {\n                timeParts.push(\"s\");\n            }\n            ampmCase = '';\n\n            // check for am/pm\n            timeEnd = time.substring(time.length - 2, time.length);\n            if (timeEnd.toLowerCase() === \"am\" || timeEnd.toLowerCase() === \"pm\") {\n                timeParts.unshift(\"h\");\n                if (timeEnd.toLowerCase() === timeEnd) {\n                    ampmCase = 'lower';\n                } else {\n                    ampmCase = 'upper';\n                }\n            } else {\n                timeParts.unshift(\"H\");\n            }\n\n            timeFormat = timeParts.join(timeSep);\n\n            // check for space between am/pm and time\n            if (time.indexOf(\" \") !== -1) {\n                timeFormat += \" \";\n            }\n\n            // deal with upper and lowercase am pm\n            if (ampmCase && ampmCase === 'upper') {\n                timeFormat += \"A\";\n            } else if (ampmCase && ampmCase === 'lower') {\n                timeFormat += \"a\";\n            }\n\n            dateFormat = dateFormat + \" \" + timeFormat;\n        }\n\n        return dateFormat;\n    },\n\n    /**\n     * Parses a date format string into each of its individual representations.\n     * Supports only the options that are supported by the `date.format`\n     * function.\n     *\n     * @param {string} format A date format string such as 'Y-m-d H:i:s'.\n     * @return {Object} Object with properties representing each piece of a\n     *   format.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    parseFormat: function(format) {\n        SUGAR.App.logger.warn('The function `Utils.Date.parseFormat()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        // if this format has been seen before then don't bother parsing it again\n        if (!(format in _formatStringCache)) {\n            var parts = {},\n                i,\n                c;\n\n            for (i = 0; i < format.length; i++) {\n                c = format.charAt(i);\n                switch (c) {\n                    case 'm':\n                    case 'n':\n                        parts.month = c;\n                        break;\n                    case 'd':\n                    case 'j':\n                        parts.day = c;\n                        break;\n                    case 'Y':\n                        parts.year = c;\n                        break;\n                    case 'H':\n                    case 'h':\n                    case 'g':\n                        parts.hours = c;\n                        break;\n                    case 'i':\n                        parts.minutes = c;\n                        break;\n                    case 's':\n                        parts.seconds = c;\n                        break;\n                    case 'A':\n                    case 'a':\n                        parts.amPm = c;\n                        break;\n                    default:\n                        break;\n                }\n            }\n\n            // cache the result so it doesn't have to be parsed again\n            _formatStringCache[format] = parts;\n        }\n\n        return _formatStringCache[format];\n    },\n\n    /**\n     * Formats JavaScript Date objects into date strings.\n     *\n     * @param {Date} date The date to format.\n     * @param {string} format Date format string such as 'Y-m-d H:i:s'.\n     * @return {string} The formatted date string.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    format: function(date, format) {\n        SUGAR.App.logger.warn('The function `Utils.Date.format()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        if (!_.isDate(date)) return \"\";\n        // TODO: add support for userPrefs\n        var out = \"\", i, c, d, h, m, s;\n        for (i = 0; i < format.length; i++) {\n            c = format.charAt(i);\n            switch (c) {\n                case '\\\\':\n                    out += format.charAt(i+1);\n                    // skip next character\n                    i++;\n                    break;\n                case 'm':\n                case 'n':\n                    m = date.getMonth() + 1;\n                    out += (m < 10 && c === \"m\") ? \"0\" + m : m;\n                    break;\n                case 'd':\n                case 'j':\n                    d = date.getDate();\n                    out += (d < 10 && c === \"d\") ? \"0\" + d : d;\n                    break;\n                case 'Y':\n                    out += date.getFullYear();\n                    break;\n                case 'H':\n                case 'h':\n                case 'g':\n                    h = date.getHours();\n                    if (c === \"h\" || c === \"g\") {\n                        h = h > 12 ? h - 12 : h;\n                        //Convert 0 to 12 for 12 hour formats\n                        h = h === 0 ? 12 : h;\n                    }\n                    out += (h < 10 && c !== \"g\") ? \"0\" + h : h;\n                    break;\n                case 'i':\n                    m = date.getMinutes();\n                    out += m < 10 ? \"0\" + m : m;\n                    break;\n                case 's':\n                    s = date.getSeconds();\n                    out += s < 10 ? \"0\" + s : s;\n                    break;\n                case 'a':\n                case 'A':\n                    if (date.getHours() < 12)\n                        out += (c === \"a\") ? \"am\" : \"AM\";\n                    else\n                        out += (c === \"a\") ? \"pm\" : \"PM\";\n                    break;\n                default :\n                    out += c;\n            }\n        }\n        return out;\n    },\n\n    /**\n     * Rounds a date to the nearest 15 minutes.\n     *\n     * @param {Date} date A date to round.\n     * @return {Date} Rounded date.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    roundTime: function(date) {\n        SUGAR.App.logger.warn('The function `Utils.Date.roundTime()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        if (!date.getMinutes) return 0;\n        var min = date.getMinutes();\n\n        if (min < 1) {\n            min = 0;\n        }\n        else if (min < 16) {\n            min = 15;\n        }\n        else if (min < 31) {\n            min = 30;\n        }\n        else if (min < 46) {\n            min = 45;\n        }\n        else {\n            min = 0;\n            date.setHours(date.getHours() + 1);\n        }\n\n        date.setMinutes(min);\n\n        return date;\n    },\n\n    /**\n     * Converts a UTC date to a local time date.\n     *\n     * @param {Date} date A UTC date.\n     * @return {Date} Date converted to local time.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    UTCtoLocalTime: function(date) {\n        SUGAR.App.logger.warn('The function `Utils.Date.UTCtoLocalTime()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        //if not a Date return it\n        if (!(date instanceof Date)) return date;\n\n        // Push the UTC tag to convert the date into local date\n        return new Date(this.toUTC(date));\n    },\n\n    /**\n     * Converts a UTC date to a date in the timezone represented by the offset.\n     *\n     * @param {Date} date A UTC date.\n     * @param {number} offset The timezone's UTC offset in hours.\n     * @return {Date} Converted date.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    UTCtoTimezone: function(date, offset) {\n        SUGAR.App.logger.warn('The function `Utils.Date.UTCtoTimezone()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        // if date is not a Date or there is no offset then return date\n        if (!(date instanceof Date) || undefined === offset || null === offset) {\n            return date;\n        }\n\n        // convert the offset to milliseconds\n        // parseFloat is used to guarantee that offset is numerical before converting it\n        offset = parseFloat(offset) * 60 * 60 * 1000;\n\n        // the offset really needs to be the difference between the local time offset and the user's\n        // preferred offset since javascript always represents dates in local time\n        // javascript uses +7 hours while the api uses -7 hours to represent the same timezone offset,\n        // so the javascript offset must be negated\n        offset -= date.getTimezoneOffset() * 60 * 1000 * -1;\n\n        return new Date(this.toUTC(date) + offset);\n    },\n\n    /**\n     * Converts the date from local time to UTC.\n     *\n     * @param {Date} date A UTC date.\n     * @return {number} The given `date` as milliseconds since the Unix epoch\n     *   in UTC.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    toUTC: function(date) {\n        SUGAR.App.logger.warn('The function `Utils.Date.toUTC()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        //if not a Date return it\n        if (!(date instanceof Date)) {\n            return date;\n        }\n\n        var year = date.getFullYear(),\n            month = date.getMonth(),\n            day = date.getDate(),\n            hours = date.getHours(),\n            minutes = date.getMinutes(),\n            seconds = date.getSeconds(),\n            milliseconds = date.getMilliseconds();\n\n        return Date.UTC(year, month, day, hours, minutes, seconds, milliseconds);\n    },\n\n    /**\n     * Converts a Date object into a relative time.\n     *\n     * @param {Date} date Date object to convert.\n     * @return {Object} Object containing relative time key string and value\n     *     suitable for passing to a Handlebars template.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    getRelativeTimeLabel: function(date) {\n        SUGAR.App.logger.warn('The function `Utils.Date.getRelativeTimeLabel()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        var rightNow = new Date();\n        var isFuture = rightNow.getTime() < date.getTime();\n        //If incoming date is future we want to flip the calculation\n        var diff = isFuture ? date - rightNow : rightNow - date;\n        var second = 1000,\n            minute = second * 60,\n            hour = minute * 60,\n            day = hour * 24,\n            ctx = { str : \"\", value: undefined};\n\n        if (isNaN(diff) || diff < 0) {\n            return ctx; // return blank string if unknown\n        }\n        if (diff < second * 2) {\n            // within 2 seconds\n            ctx.str = 'LBL_TIME_AGO_NOW';\n            return ctx;\n        }\n\n        if (diff < minute) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_SECONDS' : 'LBL_TIME_AGO_SECONDS';\n            ctx.value = Math.floor(diff / second);\n            return ctx;\n        }\n        if (diff < minute * 2) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_MINUTE' : 'LBL_TIME_AGO_MINUTE';\n            return ctx;\n        }\n        if (diff < hour) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_MINUTES' : 'LBL_TIME_AGO_MINUTES';\n            ctx.value = Math.floor(diff / minute);\n            return ctx;\n        }\n        if (diff < hour * 2) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_HOUR' : 'LBL_TIME_AGO_HOUR';\n            return ctx;\n        }\n        if (diff < day) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_HOURS' : 'LBL_TIME_AGO_HOURS';\n            ctx.value = Math.floor(diff / hour);\n            return ctx;\n        }\n        if (diff > day && diff < day * 2) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_DAY' : 'LBL_TIME_AGO_DAY';\n            return ctx;\n        }\n        if (diff < day * 365) {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_DAYS' : 'LBL_TIME_AGO_DAYS';\n            ctx.value = Math.floor(diff / day);\n            return ctx;\n        }\n        else {\n            ctx.str = isFuture ? 'LBL_TIME_UNTIL_YEAR' : 'LBL_TIME_AGO_YEAR';\n            return ctx;\n        }\n    },\n\n    /**\n     * Parses the `display_default` property which the server returns for\n     * datetimecombo metadata, etc. (for example, if the user sets the default\n     * in Studio).\n     *\n     * Examples:\n     * ```\n     * const DateManager = require('./date');\n     * DateManager.parseDisplayDefault('+1 day&06:00pm');\n     * DateManager.parseDisplayDefault('-1 day&06:00pm');\n     * DateManager.parseDisplayDefault('+1 week&06:00pm');\n     * DateManager.parseDisplayDefault('+1 month&06:00pm');\n     * DateManager.parseDisplayDefault('+1 year&06:00pm');\n     * DateManager.parseDisplayDefault('now&06:00pm');\n     * DateManager.parseDisplayDefault('next monday&06:00pm');\n     * DateManager.parseDisplayDefault('next friday&06:00pm');\n     * DateManager.parseDisplayDefault('first of next month@06:00pm');\n     * ```\n     *\n     * @param {string} displayDefault The value of the `display_default`\n     *   property.\n     * @param {Date} [now=new Date()] An optional date to use as a point of\n     *   reference (since we essentially convert \"+1 day\", etc., to an\n     *   adjusted date). This is mainly for testing odd dates like adding a\n     *   month specifically to January 31, etc.\n     * @return {Date|undefined} The date created by evaluating `displayDefault`\n     *   relative to `now`.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    parseDisplayDefault: function(displayDefault, now) {\n        SUGAR.App.logger.warn('The function `Utils.Date.parseDisplayDefault()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        var dateMap, d, dt, humanDate, defaultTime, addMonths, next, setTimePart;\n        var dateObj = now ? now : new Date(), op, timeAway, parts;\n\n        if(!displayDefault) return displayDefault;\n\n        // This adds months from 'd' date passed in. 'n' is the number of months to add.\n        // Of course, you can use a negative sign to subtract months.\n        addMonths = function(d, n) {\n            var day = d.getDate();\n            d.setMonth(d.getMonth()+n);\n            if (d.getDate() < day) {\n                d.setDate(1);\n                d.setDate(d.getDate()-1);\n            }\n            return d;\n        };\n\n        // Helper to return the number of days from now to 'day' (see dateObj initialization above)\n        next = function(day) {\n            var days, todayDay, daysUntilNext;\n            days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n            todayDay = dateObj.getDay();\n            day = day.toLowerCase();\n\n            for (var i = 7; i--;) {\n                if (day === days[i]) {\n                    day = (i <= todayDay) ? (i + 7) : i;\n                    break;\n                }\n            }\n            daysUntilNext = day - todayDay;\n            return daysUntilNext;\n        };\n\n        // Maps keys with functions that converts human date as appropriate per key (e.g. +1 day, etc.)\n        dateMap = {\n            day: function(operator) {\n                return new Date(dateObj.setDate(dateObj.getDate() + operator));\n            },\n            week: function(operator) {\n                return new Date(dateObj.setDate(dateObj.getDate() + (operator * 7)));\n            },\n            month: function(operator) {\n                return addMonths(dateObj, operator);\n            },\n            year: function(operator) {\n                return addMonths(dateObj, (operator*12));\n            },\n            'now': function() { return dateObj; },\n            'next monday': function() {\n                return new Date(dateObj.setDate(dateObj.getDate() + next(\"monday\")));\n            },\n            'next friday': function() {\n                return new Date(dateObj.setDate(dateObj.getDate() + next(\"friday\")));\n            },\n            'first of next month': function() {\n                // First set date to first day of \"this month\" so we don't have a potential\n                // date overrun (e.g. today's Oct 31 and we +1 month but no Nov 31 so Dec 1!)\n                dateObj.setDate(1);\n                // Now it's safe to add +1 months\n                var sinceEpoch = dateObj.setMonth(dateObj.getMonth() + 1);\n                return new Date(sinceEpoch);\n            }\n        };\n\n        // Main entry point - parses displayDefault and calls correspondingly\n        // mapped function to resolve to suitable date string for date.parse\n        if(displayDefault && displayDefault.indexOf('&') >= 0) {\n            dt = displayDefault.split(\"&\"); //e.g. +1 day&06:00pm\n            humanDate = dt[0];\n            defaultTime = dt[1];\n        } else {\n            humanDate = displayDefault; // assume no time part e.g. for type date\n        }\n\n        if(humanDate.match(/\\b(now|day|week|month|year)/g)) {\n            if(humanDate.indexOf('now') === 0) {\n                timeAway = 'now';\n            } else if(humanDate.indexOf(\"first day of next month\") !== -1) {\n                timeAway = 'firstnextmonth';\n            } else {\n                parts = humanDate.split(' ');\n                op = parts[0];\n                timeAway = parts[1];\n            }\n            if(timeAway.match('now')) {\n                d = dateMap.now();\n            }\n            else if(timeAway.match('firstnextmonth')) {\n                d = dateMap['first of next month']();\n            }\n            else if(timeAway.match('days?')) {\n                d = dateMap.day(parseInt(op, 10));\n            }\n            else if(timeAway.match('weeks?')) {\n                d = dateMap.week(parseInt(op, 10));\n            }\n            else if(timeAway.match('months?')) {\n                d = dateMap.month(parseInt(op, 10));\n            }\n            else if(timeAway.match('years?')) {\n                d = dateMap.year(parseInt(op, 10));\n            }\n            else {\n                if (!dateMap[humanDate]) {\n                    return;\n                }\n                // TODO Better to log error???\n                d = dateMap[humanDate]();\n            }\n        } else {\n            if (!dateMap[humanDate]) {\n                return;\n            }\n            d = dateMap[humanDate]();\n        }\n\n        setTimePart = (function(d) {\n            var timeParts, hours, minutes;\n\n            //Fixes bug SP-1280: Turns out hours in displayDefault can be either of single/double digits\n            timeParts = /^(\\d\\d?).(\\d{2}).?([ap]m)?$/.exec(defaultTime);\n            if (timeParts && timeParts.length > 2) {\n                hours = timeParts[1];\n\n                if (hours) {\n\n                    if (timeParts[3] === 'pm') {\n                        if (hours < 12) {\n                            hours = (parseInt(hours, 10) + 12);\n                        }\n                    } else {\n\n                        // Set 12am to 00\n                        if (hours === '12') {\n                            hours = '0';\n                        }\n                    }\n\n                    d.setHours(parseInt(hours, 10));\n                }\n\n                minutes = timeParts[2];\n                if (minutes) {\n                    d.setMinutes(parseInt(minutes, 10));\n                }\n            }\n        }(d));\n\n        return d;\n    },\n\n    /**\n     * Converts a PHP date format string to its Bootstrap Datepicker equivalent.\n     *\n     * @param {string} formatSpec The original SugarCRM (PHP) date format.\n     * @return {string} Format spec passed in normalized for the Bootstrap\n     *   Datepicker widget. If falsy, returns empty string.\n     * @memberOf Utils/Date\n     */\n    toDatepickerFormat: function(formatSpec) {\n        if(_.isUndefined(formatSpec) || !formatSpec) return '';\n        var normalizedFormatSpec,\n            sugarToDatepickerMap = {\n                'y': 'yy',\n                'Y': 'yyyy',\n                'm': 'mm',\n                'd': 'dd'\n            };\n        normalizedFormatSpec = formatSpec.replace(/[yYmd]/g, function(s) {\n            return sugarToDatepickerMap[s];\n        });\n        return normalizedFormatSpec;\n    },\n\n    /**\n     * Strips out the 'T' and either the 'Z' or +00:00 from a date string.\n     *\n     * @param {string} value The date string to strip in ISO 8601 format.\n     * @return {string} The result of removing the time delimiter and time zone\n     *   indicator from `value`.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    stripIsoTimeDelimterAndTZ: function(value) {\n        SUGAR.App.logger.warn('The function `Utils.Date.stripIsoTimeDelimterAndTZ()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        if(!_.isUndefined(value) && value) {\n            // Since s.replace('T', ' ').replace('Z','') assumes we have Z it's better to do:\n            // str.replace('T', ' ').substr(0, 19) ... which works for both of following formats:\n            // '2012-11-07T04:28:52+00:00'.replace('T', ' ').substr(0, 19)\n            // \"2012-11-06 20:00:06.651Z\".replace('T', ' ').substring(0, 19)\n            return value.replace(\"T\", \" \").substr(0, 19);\n        }\n    },\n\n    /**\n     * Determines if a date string is in ISO 8601 format.\n     *\n     * @param {string} val The date string to check.\n     * @return {boolean} `true` if `val` is compliant with ISO 8601.\n     * @deprecated since 7.2.0.\n     * @memberOf Utils/Date\n     */\n    isIso: function(val) {\n        SUGAR.App.logger.warn('The function `Utils.Date.isIso()` is deprecated and will be removed in a future release. ' +\n            'Please do not use it');\n        var yyyymmddExact,\n                yyyymmddLooseMatch;\n\n        // First match most nominal case yyyy-mm-dd\n        yyyymmddExact = val.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])$/);\n        if (yyyymmddExact) {\n            return true;\n        }\n        // If we have any of the iso 8601 chars and still starts with yyyy-mm-dd\n        if (val.match(/[T\\+Z ]/g)) {\n            yyyymmddLooseMatch = val.match(/^([0-9]{4})-?(1[0-2]|0[1-9])-?(3[0-1]|0[1-9]|[1-2][0-9])/);\n            if (yyyymmddLooseMatch) return true;\n        }\n        return false;\n    }\n});\n\n_.extend(date.fn, {\n    /**\n     * Formats this date to a string based on user preferences.\n     *\n     * @param {boolean} [dateOnly=false] Pass `true` to only get the date.\n     * @param {Data/Bean|Object} [user=Core.User] The user bean or the\n     *   current logged in user object.\n     * @return {string} The formatted date based on `user`'s preference.\n     * @memberOf Utils/Date\n     * @instance\n     */\n    formatUser: function(dateOnly, user) {\n        var format = date.getUserDateFormat(user);\n\n        if (!dateOnly) {\n            format += ' ' + date.getUserTimeFormat(user);\n        }\n        return this.format(format);\n    },\n\n    /**\n     * Formats this date to a string according to the server date format and locale.\n     *\n     * @param {boolean} [dateOnly=false] Pass `true` to only get the date.\n     * @return {string} This date formatted according to the server date format.\n     * @memberOf Utils/Date\n     * @instance\n     */\n    formatServer: function(dateOnly) {\n        var format = dateOnly && date._serverDateFormat;\n        let originalLocale = this.locale();\n\n        this.locale(date._serverLocale);\n        let formatted = this.format(format);\n        this.locale(originalLocale);\n\n        return formatted;\n    },\n\n    /**\n     * Returns `true` if this date is between the given `startDate` and\n     * `endDate`.\n     *\n     * @param {string} startDate The start date of the period to test.\n     * @param {string} endDate The end date of the period to test.\n     * @param {boolean} [inclusive=true] If `true`, include `startDate` and\n     *   `endDate` in the range of acceptable dates.\n     * @return {boolean} `true` if this date is between `startDate` and `endDate`;\n     *   `false` otherwise.\n     * @memberOf Utils/Date\n     * @instance\n     */\n    isBetween: function(startDate, endDate, inclusive) {\n        // inclusive should default to true unless explicitly sent false as the param\n        inclusive = _.isUndefined(inclusive) ? true : inclusive;\n\n        var isInRange = (this.isAfter(startDate) && this.isBefore(endDate));\n\n        // if we're including start and end dates and date1 hasn't been found to be inside the range yet\n        if (inclusive && !isInRange) {\n            // check if date1 is on the start or end dates\n            isInRange = (this.isSame(startDate) || this.isSame(endDate));\n        }\n        return isInRange;\n    }\n\n});\n\n/**\n * Extends\n * {@link https://momentjs.com/docs/#/durations/|moment.js' Duration class}.\n *\n * @class Utils/Date.duration\n */\n_.extend(date.duration.fn, {\n    /**\n     * Gets the display string for this duration.\n     * Note: It only supports days, hours, and minutes.\n     *\n     * @return {string} This `duration` formatted as a human-readable string.\n     *   (eg. '8 minutes').\n     * @memberOf Utils/Date.duration\n     * @instance\n     */\n    format: function() {\n        var duration = [],\n            minutes = this.minutes(),\n            hours = this.hours(),\n            days = Math.floor(this.asDays());\n\n        if (days > 0) {\n            duration.push(days);\n            duration.push(Language.get(days === 1 ? 'LBL_DURATION_DAY' : 'LBL_DURATION_DAYS'));\n        }\n\n        if (hours > 0) {\n            duration.push(hours);\n            duration.push(Language.get(hours === 1 ? 'LBL_DURATION_HOUR' : 'LBL_DURATION_HOURS'));\n        }\n\n        if (minutes > 0) {\n            duration.push(minutes);\n            duration.push(Language.get(minutes === 1 ? 'LBL_DURATION_MINUTE' : 'LBL_DURATION_MINUTES'));\n        }\n\n        return duration.join(' ');\n    }\n});\n\nmodule.exports = date;\n\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * Application logger.\n *\n * Usage example:\n *\n * ```\n * const logger = require('./logger')({\n *     level: 'DEBUG',\n * });\n *\n * // Log a string message\n * logger.debug('Some debug message');\n *\n * // Log an object\n * let obj = { foo: 'bar' };\n * logger.info(obj);\n *\n * // Log a closure.\n * let a = 1;\n * logger.error(function() { return a; });\n * ```\n *\n * @module Core/Logger\n */\n\nlet config =  {\n    level: 'error',\n    formatter: 'SimpleFormatter',\n    consoleWriter: 'ConsoleWriter',\n    serverWriter: 'ServerWriter',\n};\n\nconst writers = {\n    /**\n     * Default client-side log writer.\n     * Outputs messages onto browser's console object.\n     *\n     * @private\n     */\n    ConsoleWriter: {\n        /**\n         * Writes a message with the given log level to the browser console.\n         * The writer uses:\n         *\n         *  - `console.info`: `TRACE`, `DEBUG` and `INFO`.\n         *  - `console.warn`: `WARN`.\n         *  - `console.error`: `ERROR` and `FATAL`.\n         *\n         * @param {Utils.Logger.levels} level A logger level from logger.levels\n         * @param {string} message The message to write.\n         * @method\n         */\n         write: function(level, message) {\n            // work around for browsers without console\n            if (!window.console) window.console = {};\n            if (!window.console.log) window.console.log = function() { };\n            if (level.value <= Logger.levels.INFO.value) {\n                console.log(message);\n            }\n            else if (level.value == Logger.levels.WARN.value) {\n                console.warn(message);\n            }\n            else {\n                console.error(message);\n            }\n        },\n    },\n\n    /**\n     * Default server-side log writer.\n     * Writes log messages to the server.\n     *\n     * @private\n     */\n    ServerWriter: {\n        /**\n         * Writes a log message with a given {@link Utils.Logger.levels}\n         * level onto the server.\n         *\n         * @param {Utils.Logger.levels} level Logger level.\n         * @param {string} message Log message.\n         * @throws {string} Exceptions are thrown whether the returned\n         *   status is `false` or an error occurred while processing the\n         *   request.\n         */\n        write: function(level, message) {\n            // FIXME: add support for other logger levels (SC-5483).\n            if (level.value < Logger.levels.WARN.value) {\n                return;\n            }\n\n            if (!SUGAR.App.api.isAuthenticated()) {\n                return;\n            }\n\n            let write = config.writeToServer || false;\n            if (!write || !message.trim().length) {\n                return;\n            }\n\n            let url = SUGAR.App.api.buildURL(undefined, 'logger');\n            let params = {\n                level: level.name.toLowerCase(),\n                message: message,\n            };\n\n            SUGAR.App.api.call('create', url, params, {\n                success: function(data) {\n                    if (!data.status) {\n                        throw 'Failed to write log message {' + message + '} onto server';\n                    }\n                },\n                error: function(e) {\n                    throw e;\n                }\n            });\n        },\n    },\n};\n\nconst formatters = {\n    /**\n     * Default formatter for log messages.\n     * Formats a log message as a string with log level and UTC timestamp.\n     * ```\n     * const Logger = require('./logger');\n     *\n     * // Log a trace message\n     * Logger.trace('Blah-blah');\n     *\n     * // Output\n     * // TRACE[2012-1-26 2:38:23]: Blah-blah\n     * ```\n     *\n     * @private\n     */\n    SimpleFormatter: {\n        /**\n         * Formats a log message by adding log level name and UTC timestamp.\n         *\n         * @param {Object} level Logging level.\n         * @param {string} message The message to log.\n         * @param {Date} date Logging timestamp.\n         * @return {string} The formatted log message.\n         */\n        format: function(level, message, date) {\n            let dateString = date.getUTCFullYear() + '-' + (date.getUTCMonth() + 1) + '-' + date.getUTCDate() +\n                ' ' + date.getUTCHours() + ':' + date.getUTCMinutes() + ':' + date.getUTCSeconds();\n            return level.name + '[' + dateString + ']: ' + message;\n        },\n    },\n};\n\n/**\n * @alias module:Core/Logger\n */\nconst Logger = {\n    /**\n     * Logging levels.\n     *\n     * @private\n     * @type {Object}\n     */\n    levels: {\n        /**\n         * Trace log level\n         */\n        TRACE: {\n            value: 1,\n            name: 'TRACE',\n        },\n        /**\n         * Debug log level\n         */\n        DEBUG: {\n            value: 2,\n            name: 'DEBUG',\n        },\n        /**\n         * Info log level\n         */\n        INFO: {\n            value: 3,\n            name: 'INFO',\n        },\n        /**\n         * Warn log level\n         */\n        WARN: {\n            value: 4,\n            name: 'WARN',\n        },\n        /**\n         * Error log level\n         */\n        ERROR: {\n            value: 5,\n            name: 'ERROR',\n        },\n        /**\n         * Fatal log level\n         */\n        FATAL: {\n            value: 6,\n            name: 'FATAL',\n        }\n    },\n\n    /**\n     * Logs a message with the TRACE log level.\n     *\n     * @method\n     * @param {string|Object|Function} message Message to log.\n     */\n    trace: function(message) {\n        this.log(this.levels.TRACE, message);\n    },\n\n    /**\n     * Logs a message with the DEBUG log level.\n     *\n     * @param {string|Object|Function} message Message to log.\n     */\n    debug: function(message) {\n        this.log(this.levels.DEBUG, message);\n    },\n\n    /**\n     * Logs a message with the INFO log level.\n     *\n     * @param {string|Object|Function} message Message to log.\n     */\n    info: function(message) {\n        this.log(this.levels.INFO, message);\n    },\n\n    /**\n     * Logs a message with the WARN log level.\n     *\n     * @param {string|Object|Function} message Message to log.\n     */\n    warn: function(message) {\n        this.log(this.levels.WARN, message);\n    },\n\n    /**\n     * Logs a message with the ERROR log level.\n     *\n     * @param {string|Object|Function} message Message to log.\n     */\n    error: function(message) {\n        this.log(this.levels.ERROR, message);\n    },\n\n    /**\n     * Logs a message with the FATAL log level.\n     *\n     * @param {string|Object|Function} message Message to log.\n     */\n    fatal: function(message) {\n        this.log(this.levels.FATAL, message);\n    },\n\n    /**\n     * Retrieves logger level based on system settings.\n     *\n     * @return {Object} Logger level or `ERROR` if none defined.\n     */\n    getLevel: function() {\n        let level = config.level;\n\n        if (!level) {\n            return this.levels.ERROR;\n        }\n\n        level = level.toUpperCase();\n\n        // FIXME this needs to be done after SC-5483 is implemented\n        /*\n        if (!this.levels[level]) {\n\n            console.error('Your logger level is set to an invalid value. ' +\n                'Please redefine it in Administration > System Settings. ' +\n                'If you continue to see this warning, please ' +\n                'contact your Admin.');\n        }\n        */\n\n        return this.levels[level] || this.levels.ERROR;\n    },\n\n    /**\n     * Logs a message with a given {@link Utils.Logger.levels} level.\n     * If the message is an object, it will be serialized into a JSON string.\n     * If the message is a function, it will evaluated in the logger's scope.\n     *\n     * @param {Utils.Logger.levels} level log level\n     * @param {string|Object|Function} message log message\n     */\n    log: function(level, message) {\n        try {\n            let currentLevel = this.getLevel();\n            if (level.value < currentLevel.value) {\n                return;\n            }\n\n            message = message || '<none>';\n\n            if (_.isFunction(message)) {\n                message = message.call(this);\n            }\n\n            if (_.isObject(message)) {\n                // Try to json-ify the object. It'll fail if it has circular\n                // dependency\n                try {\n                    message = JSON.stringify(message);\n                } catch (e) {\n                    message = message.toString();\n                }\n            }\n\n            const formatter = formatters[config.formatter] || formatters.SimpleFormatter;\n            const consoleWriter = writers[config.consoleWriter] || writers.ConsoleWriter;\n            const serverWriter = writers[config.serverWriter] || writers.ServerWriter;\n\n            message = formatter.format(level, message, new Date());\n\n            consoleWriter.write(level, message);\n            serverWriter.write(level, message);\n        } catch (e) {\n            console.log('Failed to log message {' + message + '} due to exception: ' + e);\n        }\n    }\n};\n\nObject.defineProperty(Logger, 'SimpleFormatter', {\n    get: function() {\n        SUGAR.App.logger.warn('`Utils.Logger.SimpleFormatter` has been made private since 7.10 and you will not be able ' +\n            'to access it in the next release. Please do not use it anymore');\n        return formatters.SimpleFormatter;\n    }\n});\n\nObject.defineProperty(Logger, 'ServerWriter', {\n    get: function() {\n        SUGAR.App.logger.warn('`Utils.Logger.ServerWriter` has been made private since 7.10 and you will not be able ' +\n            'to access it in the next release. Please do not use it anymore');\n        return writers.ServerWriter;\n    }\n});\n\nObject.defineProperty(Logger, 'ConsoleWriter', {\n    get: function() {\n        SUGAR.App.logger.warn('`Utils.Logger.ConsoleWriter` has been made private since 7.10 and you will not be able ' +\n            'to access it in the next release. Please do not use it anymore');\n        return writers.ConsoleWriter;\n    }\n});\n\nmodule.exports = function(options) {\n    // Config should be immutable. So we should do :\n    // config = _.extend(config, {default config}, options);\n    // For now, to keep backward compatibility with 7.9, we do the following:\n    config = options || {};\n    return Logger;\n}\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst User = require('../core/user');\n\n/**\n * Math module provides utility methods for working with basic calculations\n * that JS normally fails to do well.\n *\n * @module Utils/Math\n */\nmodule.exports = {\n    /**\n     * Do mathematical calculations in JavaScript,\n     * sans floating point errors.\n     *\n     * ex. $10.52 is really 1052 cents. Think of currency as\n     * cents and apply math that way (as integers)  and this should\n     * help keep floating point issues out of the picture.\n     *\n     * @param {string} operator The operator.\n     * @param {number} n1 The first member of the calculation.\n     * @param {number} [n2] The second number of the calculation.\n     * @param {number} [decimals=6] The number of decimal digits to keep.\n     * @param {boolean} [fixed] `true` to return the value as a fixed string\n     *   using the number of decimals specified in `decimals`.\n     * @return {string} The calculated number.\n     * @private\n     */\n    _math: function(operator, n1, n2, decimals, fixed) {\n        decimals = (_.isFinite(decimals) && decimals >= 0) ? parseInt(decimals) : 6;\n        Big.NE = -1 * (decimals + 1);\n        fixed = fixed || false;\n        var result;\n\n        // if n1 is not a number, just return it, no need to do math on it.\n        if (!_.isFinite(n1)) {\n            return n1;\n        }\n\n        try {\n            switch (operator) {\n                case 'round':\n                    result = Big(n1).round(decimals);\n                    break;\n                case 'add':\n                    result = Big(n1).plus(n2);\n                    break;\n                case 'sub':\n                    result = Big(n1).minus(n2);\n                    break;\n                case 'mul':\n                    result = Big(n1).times(n2).round(decimals);\n                    break;\n                case 'div':\n                    result = Big(n1).div(n2).round(decimals);\n                    break;\n                default:\n\n                    // no valid operator, just return number\n                    return n1;\n            }\n        } catch (error) {\n            if (error.message.startsWith('[big.js]')) {\n                return n1;\n            }\n        }\n\n        if (fixed && _.isFinite(result)) {\n            return result.toFixed(decimals);\n        } else if (_.isFinite(result)) {\n            return result.toString();\n        } else {\n            return result;\n        }\n    },\n\n    /**\n     * Rounds a number to specified decimals as integer value.\n     *\n     * @param {number} number The number to round.\n     * @param {number} [decimals] The number of decimal digits to keep.\n     * @param {boolean} [fixed] Returns value as fixed string.\n     * @return {string} The rounded number.\n     */\n    round: function(number, decimals, fixed) {\n        return this._math('round', number, null, decimals, fixed);\n    },\n\n    /**\n     * Adds two numbers as integer values.\n     *\n     * @param {number} n1 The first number.\n     * @param {number} n2 The second number.\n     * @param {number} [decimals] The number of decimal digits to keep.\n     * @param {boolean} [fixed] Returns value as fixed string using the\n     *   specified number of decimals.\n     * @return {string} The sum of the two numbers.\n     */\n    add: function(n1, n2, decimals, fixed) {\n        return this._math('add', n1, n2, decimals, fixed);\n    },\n\n    /**\n     * Subtracts two numbers as integer values.\n     *\n     * @param {number} n1 The number to subtract from.\n     * @param {number} n2 The number to subtract.\n     * @param {number} [decimals] The number of decimal digits to keep.\n     * @param {boolean} [fixed] Returns value as fixed string using the\n     *   specified number of decimals.\n     * @return {string} The difference between the two numbers.\n     */\n    sub: function(n1, n2, decimals, fixed) {\n        return this._math('sub', n1, n2, decimals, fixed);\n    },\n\n    /**\n     * Multiplies two numbers as integer values.\n     *\n     * @param {number} n1 The first number.\n     * @param {number} n2 The second number.\n     * @param {number} [decimals] The number of decimal digits to keep.\n     * @param {boolean} [fixed] Returns value as fixed string using the\n     *   specified number of decimals.\n     * @return {string} The product of the two numbers.\n     */\n    mul: function(n1, n2, decimals, fixed) {\n        return this._math('mul', n1, n2, decimals, fixed);\n    },\n\n    /**\n     * Divides two numbers as integer values.\n     *\n     * @param {number} n1 The dividend.\n     * @param {number} n2 The divisor.\n     * @param {number} [decimals] The number of decimal digits to keep.\n     * @param {boolean} [fixed] Returns value as fixed string using the\n     *   specified number of decimals.\n     * @return {string} The quotient.\n     */\n    div: function(n1, n2, decimals, fixed) {\n        return this._math('div', n1, n2, decimals, fixed);\n    },\n\n    /**\n     * Checks to see if two values are different according to the given\n     * precision.\n     *\n     * @param {string|number} newValue The new value.\n     * @param {string|number} oldValue The old value.\n     * @param {number} [precision] What precision should we use. If not\n     *   specified, falls back to the value in the user preferences.\n     * @return {boolean} `true` if the values are different according to the\n     *   given precision.\n     */\n    isDifferentWithPrecision: function(newValue, oldValue, precision) {\n        var config = SUGAR.App.metadata.getConfig();\n        var user_precision = precision || User.getPreference('decimal_precision');\n        precision = (_.isFinite(user_precision)) ? user_precision : config.defaultCurrencySignificantDigits || 2;\n        var diff = this._math('round', this.getDifference(newValue, oldValue, true), null, precision);\n        var diffPrecision = (precision === 0) ? '0' : this._math('div', 0.1, Math.pow(10, (precision-1)));\n\n        // if the diff is 0 (zero) always return false, this should only happen when precision is 0\n        return (diff === '0') ? false : (parseFloat(diff) >= parseFloat(diffPrecision));\n    },\n\n    /**\n     * Gets the difference between two numbers.\n     *\n     * @param {number} newValue The number to subtract from.\n     * @param {number} oldValue The number to subtract.\n     * @param {boolean} [absolute=false] `true` to return the absolute value\n     *   of the difference.\n     * @return {string|number} The difference between `newValue` and\n     *   `oldValue`, or the absolute value of it if `absolute` is `true`.\n     */\n    getDifference: function(newValue, oldValue, absolute) {\n        var diff = this._math('sub', newValue, oldValue);\n        absolute = _.isUndefined(absolute) ? false : absolute;\n\n        return (absolute) ? Math.abs(diff) : diff;\n    }\n};\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n/**\n * Mixin intended to be used with `_.mixin`.\n *\n * ```\n * const Mixins = require('./underscore-mixins');\n * _.mixin(Mixins);\n * ```\n * @alias Utils/UnderscoreMixins\n * @mixin\n */\nconst MIXIN = {\n    /**\n     * Checks to see if a value is empty.\n     *\n     * Returns true if:\n     *\n     * - value is `undefined` or `null`\n     * - value is an empty string\n     * - value is an empty object\n     * - value is an empty array\n     *\n     * All other values return false.\n     *\n     * @param {boolean|number|string|Object|Array} value The value to check.\n     * @return {boolean} `true` if given an empty value; `false` otherwise.\n     */\n    isEmptyValue: function(value) {\n        return !_.isNumber(value) && !_.isBoolean(value) && !_.isDate(value) && _.isEmpty(value);\n    },\n\n    /**\n     * Performs a deep-diff comparison between two objects\n     * and returns a hash mapping all keys from  `obj1`\n     * and `obj2` to whether or not they were changed.\n     * (A key is mapped to `true` if there are differences, `false` otherwise).\n     *\n     * It does not matter which order you pass the parameters in; the\n     * returned object will remain the same.\n     *\n     * Example:\n     * ```\n     * var newModelAttributes = {\n     *     a: 1,\n     *     b: {create: true, edit: false},\n     *     c: 'test',\n     *     d: {a: 'b', c: {d: true}}\n     * };\n     *\n     * var oldModelAttributes = {\n     *     a: 1,\n     *     b: {create: true},\n     *     c: undefined,\n     *     e: [1, 2]\n     * };\n     *\n     * _.changed(newModelAttributes, oldModelAttributes);\n     * // {a: false, b: true, c: true, d: true, e: true}\n     * ```\n     *\n     * @param {Object} obj1 The first of two objects to diff between.\n     * @param {Object} obj2 The second of two objects to diff between.\n     * @return {Object|undefined} The hash of differences between `obj1`\n     *   and `obj2`. Returns `undefined` if `obj1` and `obj2` are empty.\n     */\n    changed: function(obj1, obj2) {\n        if (_.isEmpty(obj1) && _.isEmpty(obj2)) {\n            return;\n        }\n\n        var result = {};\n        var allKeys = _.keys(_.extend(result, obj2, obj1));\n\n        _.each(allKeys, function(key) {\n            var changed = false;\n            if (!_.has(obj1, key) ||\n                !_.has(obj2, key) ||\n                !_.isEqual(obj1[key], obj2[key])\n            ) {\n                changed = true;\n            }\n            result[key] = changed;\n        });\n\n        return result;\n    }\n};\n\nmodule.exports = MIXIN;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst User = require('../core/user');\nconst Language = require('../core/language');\n\n/**\n * The Utils module provides several utility methods, such as those for\n * number formatting.\n *\n * @module Utils/Utils\n */\n\nvar _doWhenStack = [];\nvar _doWhenLocked = false;\nvar _doWhenInterval = false;\nvar _doWhenretryCount = 0;\n\nvar _startDoWhenInterval = function () {\n    if (!_doWhenInterval) {\n        _doWhenInterval = window.setInterval(Utils._doWhenCheck, 50);\n    }\n};\n\n/**\n * For cookie handling.\n * @class\n * @name Utils/Utils.Cookie\n */\nconst Cookie = {\n    /**\n     * Sets a cookie.\n     *\n     * @param {string} cName Cookie name.\n     * @param {string} value Cookie value.\n     * @param {number} exdays Days until expiration.\n     * @param {string} path Cookie path.\n     * @memberOf Utils/Utils.Cookie\n     */\n    setCookie: function(cName, value, exdays, path) {\n        var exdate = new Date(), c_value;\n        exdate.setDate(exdate.getDate() + exdays);\n        c_value = encodeURIComponent(value);\n        if (exdays) {\n            c_value += \"; expires=\" + exdate.toUTCString();\n        }\n        if (path) {\n            c_value += \"; path=\" + path;\n        }\n        document.cookie = cName + \"=\" + c_value;\n    },\n\n    /**\n     * Gets a cookie.\n     *\n     * @param {string} cName Cookie name.\n     * @return {string|undefined} The cookie value associated with `cName`, or\n     *   `undefined` if not found.\n     * @memberOf Utils/Utils.Cookie\n     */\n    getCookie: function(cName) {\n        var i, x, y, ARRcookies = document.cookie.split(\";\");\n        for (i = 0; i < ARRcookies.length; i++) {\n            x = ARRcookies[i].substr(0, ARRcookies[i].indexOf(\"=\"));\n            y = ARRcookies[i].substr(ARRcookies[i].indexOf(\"=\") + 1);\n            x = x.replace(/^\\s+|\\s+$/g, \"\");\n            if (x === cName) {\n                return decodeURIComponent(y);\n            }\n        }\n    }\n};\n\n/**\n * @alias module:Utils/Utils\n */\nconst Utils = {\n    /**\n     * Capitalizes a string.\n     *\n     * @param {string} s The string to capitalize.\n     * @return {string} `s` capitalized, or an empty string if `s` is\n     *   `undefined` or `null`.\n     */\n    capitalize: s => s ? (s.charAt(0).toUpperCase() + (s.length > 1 ? s.substr(1) : '')) : '',\n\n    /**\n     * Capitalizes a hyphenated string and removes the hyphens.\n     * The first letter, and all letters after a hyphen, are capitalized,\n     * so `\"my-string\"` becomes `\"MyString\"`.\n     *\n     * @param {string} s The string to capitalize.\n     * @return {string} `s` capitalized or an empty string if `s` is\n     *   `undefined` or `null`.\n     */\n    capitalizeHyphenated: function(s) {\n        return this._classify(s, '-');\n    },\n\n    /**\n     * Capitalizes an underscored string and removes the underscores.\n     * The first letter, and all letters after an underscore, are capitalized,\n     * so `\"my_string\"` becomes `\"MyString\"`.\n     *\n     * @param {string} s The string to capitalize.\n     * @return {string} `s` capitalized or an empty string if `s` is\n     *   `undefined` or `null`.\n     */\n    classify: function(s) {\n        return this._classify(s, '_');\n    },\n\n    /**\n     * Capitalizes a delimited string.\n     *\n     * `\"my_string\"` becomes `\"MyString\"`.\n     * @param {string} s The string to capitalize.\n     * @param {string} [delimiter='_'] Delimiter string.\n     * @return {string} Capitalized string or an empty string if `s` is\n     *   `undefined` or `null`.\n     * @private\n     */\n    _classify: function(s, delimiter) {\n        var self = this, result = '';\n        delimiter = delimiter || '_';\n\n        if (!s || s.lastIndexOf(delimiter) === -1) {\n            result = self.capitalize(s);\n        } else {\n            var words = s.split(delimiter);\n            _.each(words, function(word) {\n                result += self.capitalize(word);\n            });\n        }\n        return result;\n    },\n\n    /**\n     * Extends a Class based on the given controller.\n     *\n     * If the controller has an `extendsFrom` property, it will be used to\n     * define its parent class. It should be defined as a string in order\n     * for the system to detect if there is any customization on that\n     * parent (normally prefixed with `Custom` like `Custom<ClassName>`).\n     *\n     * If the parent class defined in the `extendsFrom` property doesn't\n     * exist or the controller isn't specifying one, it will fallback to\n     * the supplied `defaultBase` param which has it's own set of fallback\n     * strategy defined by the components that call this method. See\n     * {@link View.ViewManager} and {@link Data.DataManager}.\n     *\n     * @param {Object} cache Object cache to add controller to.\n     * @param {Object} defaultBase Class to be extended from if no override\n     *   (`extendsFrom`) is defined in the controller.\n     * @param {string} className Class name to be used for new Class.\n     * @param {Object} controller Properties for new Class.\n     * @param {string} platformNamespace Platform name.\n     * @return {Object} The new extended class.\n     */\n    extendClass: function(cache, defaultBase, className, controller, platformNamespace) {\n        var klass;\n\n        if (!_.isObject(controller)) {\n            // nothing to extend from, use default\n            klass = cache[className] = defaultBase;\n            return klass;\n        }\n\n        if (_.isObject(controller.extendsFrom)) {\n            //should be avoided due to chain breakage - aka custom fallback\n            klass = cache[className] = controller.extendsFrom.extend(controller);\n            return klass;\n        }\n\n        if (!controller.extendsFrom) {\n            // follow the default fallback flow\n            klass = cache[className] = defaultBase.extend(controller);\n            return klass;\n        }\n\n        // try to find the base using the name and following the fallback flow\n        var base = cache[platformNamespace + 'Custom' + controller.extendsFrom] ||\n            cache[platformNamespace + controller.extendsFrom] ||\n            cache['Custom' + controller.extendsFrom] ||\n            cache[controller.extendsFrom];\n\n        if (!base) {\n            SUGAR.App.logger.warn('The \"' + controller.extendsFrom + '\" component was not found to be used as ' +\n                'the \"' + className + '\"\\'s parent. Please update your code to point to an existing class.');\n            base = defaultBase;\n        }\n\n        klass = cache[className] = base.extend(controller);\n        return klass;\n    },\n\n    /**\n     * Formats a number.\n     *\n     * @param {number} value Number to be formatted eg 2.134.\n     * @param {number} round number of digits to right of decimal to round at.\n     * @param {number} precision number of digits to right of decimal to take\n     *   precision at.\n     * @param {string} numberGroupSeparator Character separator for number\n     *   groups of 3 digits to the left of the decimal to add.\n     * @param {string} decimalSeparator Character to replace decimal in arg\n     *   number with.\n     * @param {boolean} toStringOnly Flag for integer type field if `true`,\n     *   convert integer to string value, else rounds it.\n     * @return {string} Formatted number string OR original value if it is not\n     *   a number.\n     */\n    formatNumber: function(value, round, precision, numberGroupSeparator, decimalSeparator, toStringOnly) {\n        round = round || precision;\n        var original = value;\n        if (_.isNaN(value) || !_.isFinite(value)) {\n            return original;\n        }\n        if (_.isString(value)) {\n            value = parseFloat(value, 10);\n            if(_.isNaN(value)){\n                return original;\n            }\n        }\n        // Return original value if it is not a number\n        if(!_.isNumber(value)) {\n            if(!_.isNull(value) && !_.isUndefined(value)) {\n                // invalid variable type\n                SUGAR.App.logger.warn('formatNumber: invalid variable type ('+typeof(original)+')');\n            }\n            return original;\n        }\n\n        // make sure that the precision variable is an integer and not a string\n        // Big.js doesn't like it as a string\n        if (_.isString(precision)) {\n            precision = parseInt(precision);\n        }\n        // stop rounding if integer type field\n        value = toStringOnly === true ? value.toString() : Big(value).toFixed(precision);\n\n        return (_.isString(numberGroupSeparator) && _.isString(decimalSeparator)) ?\n            this.addNumberSeparators(value, numberGroupSeparator, decimalSeparator) : value;\n    },\n\n    /**\n     * Formats a number according to the current user locale.\n     *\n     * @param {number} value Value to format.\n     * @return {string} Formatted number.\n     */\n    formatNumberLocale:function (value) {\n        // use user locale, or decent defaults otherwise\n        return this.formatNumber(\n            value,\n            User.getPreference('decimal_precision') || 2,\n            User.getPreference('decimal_precision') || 2,\n            User.getPreference('number_grouping_separator') || ',',\n            User.getPreference('decimal_separator') || '.'\n        );\n    },\n\n    /**\n     * Formats a full name with the provided locale format.\n     *\n     * @param {Object} params Name property values.\n     * @param {string} params.first_name First name.\n     * @param {string} params.last_name Last name.\n     * @param {string} params.salutation Salutation.\n     * @param {string} format Locale format (i.e. [f l s], [s l, f]).\n     * @return {string} Formatted string.\n     */\n    formatName: function(params, format) {\n        return format.replace(/(f)|(l)|(s)/g, function(str, firstName, lastName, salutation) {\n            if (firstName) {\n                return params.first_name || '';\n            }\n            if (lastName) {\n                return params.last_name || '';\n            }\n            if (salutation && (params.last_name || params.first_name)) {\n                return params.salutation || '';\n            }\n            return '';\n        })\n            //Remove comma when last name is empty\n            .replace(/^( )?,/g, '')\n            //Remove comma when last name is provided but first name is empty\n            .replace(/, $/g, '')\n            //Remove extra spaces when middle part is missing\n            .replace(/  /g, ' ')\n            //trim spaces\n            .trim();\n    },\n\n    /**\n     * Formats a record's name (ie. full name) according to the name format\n     * passed in parameters or defined in the user preferences.\n     *\n     * Format you can pass:\n     * ```\n     * 'f l s' will output: `FirstName LastName Salutation`,\n     * 's l, f' will output: `Salutation LastName FirstName`.\n     * ```\n     *\n     * The module defines a `nameFormat` object that maps a letter to a\n     * field.\n     * ```\n     * {\n     *     s: 'salutation',\n     *     f: 'first_name',\n     *     l: 'last_name'\n     * }\n     * ```\n     *\n     * @param {string} module The module name the record belongs to.\n     * @param {Object} data The record attributes.\n     * @param {string} [format=User.getPreference('default_locale_name_format')]\n     *   The format definition.\n     * @return {string} The formatted full name string.\n     */\n    formatNameModel: function(module, data, format) {\n        format = format || User.getPreference('default_locale_name_format');\n        data = data || {};\n\n        var metadata = SUGAR.App.metadata.getModule(module) || {fields: {}};\n        var formatMap = metadata.nameFormat || {};\n\n        return _.reduce(format.split(''), function(formattedString, letter) {\n            // only letters a-z may be significant in the format,\n            // everything else is translated verbatim\n            if (letter < 'a' || letter > 'z') {\n                return formattedString + letter;\n            }\n            if (!formatMap[letter]) {\n                return formattedString;\n            }\n\n            var enumLabel,\n                isEnum = metadata.fields[formatMap[letter]] &&\n                    metadata.fields[formatMap[letter]].type === 'enum' &&\n                    !_.isEmpty(metadata.fields[formatMap[letter]].options);\n\n            if (isEnum) {\n                var list = Language.getAppListStrings(metadata.fields[formatMap[letter]].options);\n                enumLabel = list[data[formatMap[letter]]] || data[formatMap[letter]] || '';\n            }\n\n            return formattedString + (enumLabel || data[formatMap[letter]] || '');\n        }, '')\n            //Remove leading comma - i.e. \", John\"\n            .replace(/^( )?,/g, '')\n            //Remove trailing comma - i.e., \"John, \", \"John,  \", etc.\n            .replace(/, +$/g, '')\n            //Remove extra spaces when middle part is missing\n            .replace(/  /g, ' ')\n            //trim spaces\n            .trim();\n    },\n\n    /**\n     * Formats a full name according to the user's locale format.\n     *\n     * @param {Object} params Name property values.\n     * @param {string} params.first_name First name.\n     * @param {string} params.last_name Last name.\n     * @param {string} params.salutation Salutation.\n     * @return {string} Formatted string.\n     */\n    formatNameLocale: function(params) {\n        return this.formatName(params, User.getPreference('default_locale_name_format'));\n    },\n\n    /**\n     * Adds number separators to a number string.\n     *\n     * @param {string} numberString String of number to be modified of the\n     *   format nn.nnn.\n     * @param {string} numberGroupSeparator Character separator for number\n     *   groups of 3 digits to the left of the decimal to add.\n     * @param {string} decimalSeparator Character to replace decimal in arg\n     *   number with.\n     * @return {string} `numberString` with the appropriate separators added.\n     */\n    addNumberSeparators: function(numberString, numberGroupSeparator, decimalSeparator) {\n        var numberArray = numberString.split(\".\");\n        var regex = /(\\d+)(\\d{3})/;\n        while (numberGroupSeparator !== '' && regex.test(numberArray[0])) {\n            numberArray[0] = numberArray[0].toString().replace(regex, '$1' + numberGroupSeparator + '$2');\n        }\n        return numberArray[0] + (numberArray.length > 1 &&\n            numberArray[1] !== '' ? decimalSeparator + numberArray[1] : '');\n    },\n\n    /**\n     * Unformats number strings.\n     *\n     * @param {string} numberString The number string to unformat.\n     * @param {string} numberGroupSeparator The thousands separator.\n     * @param {string} decimalSeparator The string between number and decimals.\n     * @param {boolean} [toFloat=false] If `true`, convert string to float value.\n     * @return {string} Formatted number string.\n     */\n    unformatNumberString: function(numberString, numberGroupSeparator, decimalSeparator, toFloat) {\n        toFloat = toFloat || false;\n        if (typeof numberGroupSeparator === 'undefined' || typeof decimalSeparator === 'undefined') {\n            return numberString;\n        }\n\n        // if number is not as string, make it a string\n        if (!_.isString(numberString)) {\n            if (_.isFinite(numberString)) {\n                // valid number, convert to string\n                numberString = numberString.toString();\n            } else {\n                // invalid value: null, undefined, NaN, etc.\n                // set to empty string\n                numberString = '';\n            }\n        }\n\n        // parse out number group separators\n        if (numberGroupSeparator !== '') {\n            var num_grp_sep_re = new RegExp('\\\\' + numberGroupSeparator, 'g');\n            numberString = numberString.replace(num_grp_sep_re, '');\n        }\n\n        // parse out decimal separators\n        numberString = numberString.replace(decimalSeparator, '.');\n\n        // remove any invalid chars\n        //numberString = numberString.replace(/[^0-9\\.\\+\\-\\%]/g, '');\n\n        // convert to float\n        if (numberString.length > 0 && toFloat) {\n            var float = parseFloat(numberString);\n            if (float == numberString) {\n                return float;\n            }\n        }\n\n        return numberString;\n    },\n\n    /**\n     * Unformats a number string based on the current user's locale.\n     *\n     * @param {string} value The number string to unformat.\n     * @param {boolean} [toFloat=false] If `true`, convert string to float\n     *   value.\n     * @return {string} The formatted value.\n     */\n    unformatNumberStringLocale: function(value, toFloat) {\n        return this.unformatNumberString(\n            value,\n            User.getPreference('number_grouping_separator') || ',',\n            User.getPreference('decimal_separator') || '.',\n            toFloat\n        );\n    },\n\n    /**\n     * Replaces tokens like {0}, {1}, etc. with the provided arguments.\n     *\n     * @param {string} format String to format.\n     * @param {string} args Arguments to replace.\n     * @return {string} Formatted string.\n     */\n    formatString: function(format, args){\n        for(var idx in args){\n            format = format.replace('{'+idx+'}',args[idx]);\n        }\n        return format;\n    },\n\n    /**\n     * Escapes a given string for use in a JavaScript regex.\n     *\n     * @param {string} string The string to escape.\n     * @return {string} `string` escaped.\n     */\n    regexEscape: function regexEscape(string) {\n        if( typeof regexEscape.specialRegExp == 'undefined' ) {\n            var specials = [\n                '/', '.', '*', '+', '?', '|',\n                '(', ')', '[', ']', '{', '}', '\\\\',\n                '-', ',', '^', '$', '#'\n            ];\n            regexEscape.specialRegExp = new RegExp(\n                '(\\\\' + specials.join('|\\\\') + ')', 'g'\n            );\n        }\n        return string.replace(regexEscape.specialRegExp, '\\\\$1');\n    },\n\n    /**\n     * Generates and returns a UUID according to RFC 4122.\n     *\n     * @return {string} A UUID.\n     */\n    generateUUID: function() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n             /*jshint -W016 */ // \"Unexpected use of '|'.\",\n             /*jshint -W116 */ // \"Expected '===' and instead saw '=='.\"\n             var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n             return v.toString(16);\n        });\n    },\n\n    /**\n     * @type {Utils/Utils.Cookie}\n     * @name cookie\n     */\n    cookie: Cookie,\n\n    /**\n     * Checks if an email address is valid.\n     *\n     * Only performs a very basic validation because the complexity of the\n     * server-side regular expression is too great to mirror on the client,\n     * both in terms of maintenance and difficulty in porting to a different\n     * engine. Even if the light-weight validation passes, the server-side\n     * validation may fail.\n     *\n     * @param {string} address The email address to check.\n     * @return {boolean} `false` if this is definitely an invalid email\n     *   address. A return value of `true` does not guarantee that this is a\n     *   valid email address.\n     */\n    isValidEmailAddress: function(address) {\n        return /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@\\S+$/.test(address);\n    },\n\n    /**\n     *  Based on {@link https://yui.github.io/yui2/docs/yui_2.9.0_full/event/index.html#onavailable|YUI's onAvailable},\n     *  but will use any boolean function instead of an ID. Once the given\n     *  condition is met, the callback function will be executed.\n     *\n     * ```\n     * // Execute a callback once an Object is defined\n     * Utils.doWhen('SUGAR.ObjectToWaitFor', function(){\n     *     // Use the object here\n     *     console.log(SUGAR.ObjectToWaitFor);\n     * });\n     *\n     * // Use a function for condition and set parameters for the callback\n     * var el = $('#myId');\n     * var cond = function(){return el.hasClass('foo')};\n     * var callback = function(params) {\n     *     this.log(params.msg);\n     *     el.html(params.html);\n     * };\n     * Utils.doWhen(cond, callback, {\n     *     msg: 'Hello World',\n     *     html: '&lt;h1&gt;Exists!&lt;/h1&gt;'\n     * }, console);\n     * ```\n     *\n     * @param {Function|string} condition Function/evaluatable string which\n     *   must return a boolean value.\n     * @param {Function} callback Function to execute when `condition` is met.\n     * @param {Object} [params] Object to pass to `callback`.\n     * @param {Object} [scope] Object to use as `this` when executing\n     *   `callback`.\n     */\n    doWhen : function(condition, callback, params, scope){\n        _doWhenStack.push({\n            check: condition,\n            fn: callback,\n            obj: params,\n            overrideContext: scope\n        });\n\n        _doWhenretryCount = 50;\n        _startDoWhenInterval();\n    },\n\n    /**\n     * The guts of `doWhen`. Runs through the stack checking all the conditions\n     * and fires the callbacks when the conditions are met.\n     * @private\n     */\n    // FIXME: we cannot make this truly private because it is used by the metadata-manager test (ugh...)\n    _doWhenCheck : function () {\n        if (_doWhenStack.length === 0) {\n            _doWhenretryCount = 0;\n            if (_doWhenInterval) {\n                 clearInterval(_doWhenInterval);\n                _doWhenInterval = null;\n            }\n            return;\n        }\n\n        if (_doWhenLocked) {\n            return;\n        }\n\n        _doWhenLocked = true;\n\n        // keep trying until after the page is loaded.  We need to\n        // check the page load state prior to trying to bind the\n        // elements so that we can be certain all elements have been\n        // tested appropriately\n        var tryAgain = $.isReady;\n        if (!tryAgain) {\n            tryAgain = (_doWhenretryCount > 0 && _doWhenStack.length > 0);\n        }\n\n        // onAvailable\n        var notAvail = [];\n\n        var executeItem = function (context, item) {\n            if (item.overrideContext) {\n                if (item.overrideContext === true) {\n                    context = item.obj;\n                } else {\n                    context = item.overrideContext;\n                }\n            }\n            if (item.fn) {\n                item.fn.call(context, item.obj);\n            }\n        };\n\n        var i, len, item, test;\n\n        // onAvailable onContentReady\n        for (i = 0, len = _doWhenStack.length; i < len; i = i + 1) {\n            item = _doWhenStack[i];\n            if (item) {\n                test = item.check;\n                if ((typeof(test) == 'string' &&\n                     eval(test)) || // jshint ignore:line\n                    (typeof(test) == 'function' && test())\n                ) {\n                    executeItem(this, item);\n                    _doWhenStack[i] = null;\n                }\n                else {\n                    notAvail.push(item);\n                }\n            }\n        }\n\n        _doWhenretryCount--;\n\n        if (tryAgain) {\n            for (i = _doWhenStack.length - 1; i > -1; i--) {\n                item = _doWhenStack[i];\n                if (!item || !item.check) {\n                    _doWhenStack.splice(i, 1);\n                }\n            }\n            _startDoWhenInterval();\n        } else {\n            if (_doWhenInterval) {\n                clearInterval(_doWhenInterval);\n                _doWhenInterval = null;\n            }\n        }\n        _doWhenLocked = false;\n    },\n\n    /**\n     * Compares two version strings.\n     *\n     * Example:\n     * ```\n     * Utils.versionCompare('8.2.5rc', '8.2.5a'); // 1\n     * Utils.versionCompare('8.2.50', '8.2.52', '<') // true\n     * Utils.versionCompare('5.3.0-dev', '5.3.0') === -1\n     * Utils.versionCompare('4.1.0.52','4.01.0.51') === 1\n     * ```\n     *\n     * @param {string} v1 First version.\n     * @param {string} v2 Second version.\n     * @param {string} [operator] Operator argument, if specified, test for\n     *   a particular relationship. The possible operators are:\n     *   `<`, `lt`, `<=`, `le`, `>`, `gt`, `>=`, `ge`, `==`, `=`, `eq`,\n     *   `!=`, `<>`, and `ne`.\n     *   This parameter is case-sensitive, values should be lowercase.\n     *\n     * @return {number|boolean} By default, returns -1 if the first version\n     *   is lower than the second, 0 if they are equal, and 1 if the second\n     *   is lower. When using the optional operator argument, the function\n     *   will return `true` if the relationship is the one specified by the\n     *   operator, `false` otherwise.\n     */\n    versionCompare: function(v1, v2, operator) {\n        // Use php.js implementation\n        // http://phpjs.org/functions/version_compare/\n        return version_compare(v1, v2, operator);\n    },\n\n    /**\n     * Forces one class to extend from another and optionally\n     * overrides specific properties.\n     *\n     * @param {Function} subc Constructor for the subclass.\n     * @param {Function} superc Constructor for the superclass.\n     * @param {Object} overrides Properties to override on `subc`'s prototype.\n     */\n    extendFrom: function(subc, superc, overrides) {\n        subc.prototype = new superc(); // set the superclass\n        // overrides\n        _.extend(subc.prototype, overrides);\n    },\n\n    /**\n     * Creates a deep clone of an object.\n     *\n     * @param {*} obj The object to clone.\n     * @return {*} A value of the same type as the input.\n     */\n    deepCopy: function(obj) {\n        return _.isObject(obj) ? JSON.parse(JSON.stringify(obj)) : obj;\n    },\n\n    /**\n     * Compare field values in the first bean with the second bean and return\n     * the field names that have different values.\n     *\n     * @param {Data/Bean} beanA The first bean.\n     * @param {Data/Bean} beanB The second bean.\n     * @return {string[]} A list of names of fields whose values differ between\n     *   `beanA` and `beanB`.\n     */\n    compareBeans: function(beanA, beanB) {\n        var changedFields;\n\n        if (beanA.module !== beanB.module) {\n            throw Error('Only beans of the same module can be compared.');\n        }\n\n        changedFields = _.reduce(beanA.attributes, function(memo, value, attribute) {\n            // skip id field and all fields that start with an underscore\n            if ((attribute !== 'id') && (attribute.indexOf('_') !== 0)) {\n                if (\n                    !this.areBeanValuesEqual(value, beanB.get(attribute)) &&\n                        this.hasDefaultValueChanged(attribute, beanA)\n                    ) {\n                    memo.push(attribute);\n                }\n            }\n\n            return memo;\n        }, [], this);\n\n        return changedFields;\n    },\n\n    /**\n     * Checks to see if values in beans are equal to each other.\n     *\n     * @param {*} value1 The first value.\n     * @param {*} value2 The second value.\n     * @return {boolean} `true` if the values are equal; `false` otherwise.\n     */\n    areBeanValuesEqual: function(value1, value2) {\n        var getValueToCompare = function(value) {\n            if (_.isObject(value) && _.isEmpty(value)) {\n                return '';\n            } else if (!_.isObject(value) && (_.isUndefined(value) || _.isNull(value))) {\n                return '';\n            } else {\n                return value;\n            }\n        };\n\n        value1 = getValueToCompare(value1);\n        value2 = getValueToCompare(value2);\n\n        return ((_.isObject(value1) && _.isEqual(value1, value2)) || (!_.isObject(value1) && (value1 === value2)));\n    },\n\n    /**\n     * Checks to see if the default value has changed.\n     *\n     * @param {string} attribute The bean attribute you are interested in.\n     * @param {Data/Bean} bean The bean to check the value of.\n     * @return {boolean} `true` if the value of `attribute` for `bean`\n     *   is different than its default value; `false` otherwise.\n     */\n    hasDefaultValueChanged: function(attribute, bean) {\n        var defaultValue = bean._defaults ? bean._defaults[attribute] : '';\n        return !this.areBeanValuesEqual(defaultValue, bean.get(attribute));\n    },\n\n    /**\n     * Checks if the AJAX error is a network connectivity error: timeout, DNS,\n     * etc.\n     *\n     * @param {Api.HttpError} ajaxError AJAX error.\n     * @return {boolean} `true` if the error is a network error; `false`\n     *   otherwise.\n     */\n    isConnectivityError: function(ajaxError) {\n        // There can be situations when the status is not zero but the actual request times out.\n        return ((ajaxError.status === 0) ||\n                (ajaxError.textStatus === \"timeout\"));\n    },\n\n    /**\n     * Returns ISO8601 timestamp in UTC time.\n     *\n     * @param {string|number} [dateValue=new Date()] Date string or raw msec\n     *     number.\n     * @param {Object} [options={}] Extra parameters.\n     * @param {boolean} [options.msecPrecision=false] If `true`, include\n     *   milliseconds in the output.\n     * @return {string} Passed date or current date converted to UTC timezone.\n     */\n    getTimestamp: function(dateValue, options) {\n        options = options || {};\n        var date = dateValue ? new Date(dateValue) : new Date(),\n            dateString = date.toISOString();\n\n        if (!options.msecPrecision) {\n            dateString = dateString.replace(/\\.\\d{3}/, '');\n        }\n\n        //Z is replaced with +00:00 for unification with server\n        return dateString.replace(/Z/, '+00:00');\n    },\n\n    /**\n     * Builds a good url based on `siteUrl` from configuration.\n     *\n     * It is ready for the several use cases that `siteUrl` can have:\n     *\n     * - relative path (aka context);\n     * - full path;\n     * - empty path.\n     *\n     * @param {string} url The full url or a relative url without the\n     *   prepended `/`.\n     * @return {string} The constructed URL.\n     */\n    buildUrl: function(url) {\n        // Adjust relative URL: prepend it with site URL\n        if (url.indexOf(\"http\") !== 0 && !_.isEmpty(SUGAR.App.config.siteUrl)) {\n            // Strip trailing forward slashes from site URL just in case\n            url = SUGAR.App.config.siteUrl.replace(/\\/+$/, \"\") + \"/\" + url;\n        }\n        return url;\n    },\n\n    /**\n     * Gets the diff between `data1` and `data2`.\n     * Intended for comparing objects with the same properties.\n     *\n     * @param {Object} data1 Changed object\n     * @param {Object} data2 Original object\n     * @param {boolean} [strict=false] By default values are compared property\n     *   by property via non-strict comparison.\n     * @return {Object} Hash of fields from `data1` which are different from `data2`.\n     */\n    getChangedProps: function (data1, data2, strict) {\n        /**\n         * Determines the type of a given value.\n         *\n         * @param {*} value The value to check.\n         * @return {string} 'array' if `value` is an array, 'object' if it is\n         *   and object, and 'other' in all other cases.\n         * @private\n         */\n        function getType(value) {\n            if (_.isObject(value)) {\n                if (_.isArray(value)) {\n                    return 'array';\n                }\n                return 'object';\n            }\n            return 'other';\n        }\n\n        function isEqualProp (value1, value2) {\n            if (strict) return _.isEqual(value1, value2);\n\n            var value1Type = getType(value1),\n                value2Type = getType(value2);\n\n            if (value1Type === value2Type && _.contains(['object', 'array'], value1Type)) {\n                if (value1Type === 'array' && value1.length !== value2.length) {\n                    return false;\n                }\n\n                var keys1 = _.keys(value1),\n                    keys2 = _.keys(value2);\n\n                if (keys1.length !== keys2.length || !_.isEqual(keys1.sort(), keys2.sort())) {\n                    return false;\n                }\n\n                return !_.any(value1, function (val, key) {\n                    return !isEqualProp(value1[key], value2[key]);\n                });\n            }\n            else {\n                return strict ? (value1 === value2) : (value1 == value2);\n            }\n        }\n\n        var diff = {};\n\n        _.each(data1, function (value, key) {\n            if (!isEqualProp(data1[key], data2[key])) {\n                diff[key] = value;\n            }\n        });\n\n        return diff;\n    },\n\n    /**\n     * Gets the layout container for the given component.\n     *\n     * @param {View/Component} component The component whose layout you want.\n     * @return {View/Layout} The layout container for the given `component`.\n     */\n    getParentLayout: function(component) {\n        var parent;\n\n        if (component.view && component.view.layout) {\n            parent = component.view.layout;\n        } else {\n            parent = component.layout;\n        }\n\n        return parent;\n    },\n\n    /**\n     * Determines if a given module is sortable on a certain field when in a\n     * particular view.\n     *\n     * @param {string} module The module to check.\n     * @param {Object} fieldViewdef Viewdef for the field to consider.\n     * @param {string} fieldViewdef.name Name of the field; used to look up\n     *   vardefs.\n     * @param {boolean} [fieldViewdef.sortable] If not `undefined`, determines\n     *   whether the module is sortable or not, regardless of vardefs.\n     * @return {boolean} `true` if `module` can be sorted by the field given by\n     *   `fieldViewdef`; `false` otherwise.\n     */\n    isSortable: function(module, fieldViewdef) {\n        var fieldVardef = SUGAR.App.metadata.getModule(module).fields[fieldViewdef.name],\n            isSortable = true;\n\n        if (fieldVardef && !_.isUndefined(fieldVardef.sortable)) {\n            isSortable = fieldVardef.sortable;\n        }\n        if (fieldViewdef && !_.isUndefined(fieldViewdef.sortable)) {\n            isSortable = fieldViewdef.sortable;\n        }\n        return isSortable;\n    },\n\n    /**\n     * Returns a URL without the http(s):// prefix.\n     *\n     * @param {string} url Input url.\n     * @return {string} `url` without the http(s):// prefix.\n     */\n    stripHttpPrefix: function(url) {\n        return url.replace(/^https?:\\/\\//, '');\n    },\n\n    /**\n     * Performs a hard refresh of the current page.\n     */\n    hardRefresh: function() {\n        window.location.reload(true);\n    },\n\n    /**\n     * Checks if the value should be rendered in RTL.\n     *\n     * @param {string} value The value to check.\n     * @return {boolean} `true` if the string is in a RTL language.\n     */\n    isDirectionRTL: function(value) {\n        var ltrChars = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF' +\n                '\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF',\n            rtlChars = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC',\n            isRTL = new RegExp('^[^' + ltrChars + ']*[' + rtlChars + ']');\n\n        return isRTL.test(value);\n    },\n\n    /**\n     * Converts provided value to provided type. Intended to convert numbers\n     * stored as strings using the appropriate conversion function.\n     *\n     * @param {string} value The value to convert\n     * @param {string} type Abbreviated type to be converted to\n     * @returns {number} Value converted to provided type\n     */\n    convertNumericType: function (value, type) {\n        switch (type) {\n            case 'int':\n                return parseInt(value);\n            case 'float':\n            case 'decimal':\n                return parseFloat(value);\n        }\n        return Number(value);\n    }\n};\n\nmodule.exports = Utils;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\nconst Component = require('./component');\n\n/**\n * Base class for alerts.\n *\n * Extend this class to provide custom alert behavior:\n * ```\n * const AlertView = require('./alert-view');\n * const TemplateManager = require('./template');\n * let PortalAlertView = AlertView.extend({\n *    initialize: function(options) {\n *       AlertView.prototype.initialize.call(this, options);\n *\n *       // You may override and/or pre-compile alert template\n *       this.tpl = 'my-alert';\n *       TemplateManager.compile('my-alert', 'handlebars code...');\n *    },\n *\n *    render: function(options) {\n *        // Provide your custom rendering logic.\n *        // For example, switch between different templates\n *        this.tpl = 'alert2';\n *        AlertView.prototype.render.call(this, options);\n *    },\n *\n *    close: function() {\n *        // Provide your custom dismiss logic: animation, fade effects, etc.\n *    }\n * });\n * ```\n *\n * @module View/AlertView\n * @class\n * @extends View/Component\n */\nconst AlertView = Component.extend({\n    /**\n     * The default alert template.\n     *\n     * @memberOf View/AlertView\n     * @type {string}\n     * @instance\n     */\n    tpl: '<div class=\"alert alert-block\">{{#if title}}<strong>{{title}}</strong>{{/if}}{{#each messages}}{{./this}}{{/each}}</div>',\n\n    /**\n     * Renders an alert.\n     *\n     * The method executes a pre-compiled template and replaces the inner\n     * HTML of this view root DOM element.\n     * Additionally, `alert-[level]` class is added to the root element.\n     *\n     * @memberOf View/AlertView\n     * @instance\n     */\n    render: function() {\n        var tpl = Handlebars.compile(this.tpl);\n        this.$el.html(tpl(this.options));\n        this.$('.alert').addClass('alert-' + this.options.level);\n    }\n});\n\nmodule.exports = AlertView;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst AlertView = require('./alert-view');\nconst Utils = require('../utils/utils');\nconst ViewManager = require('./view-manager');\n\n/**\n * Alert.\n *\n * Interface for creating alerts via show and dismiss. Also, this module\n * keeps an internal dictionary of alerts created which can later be accessed\n * by key. This is useful so that client code can dismiss a particular alert.\n *\n * Note that the client application may provide custom implementation of the\n * {@link View/AlertView} class. This implementation will be in charge\n * of rendering the alert to its UI.\n *\n * At minimum, a client app must provide:\n *\n * 1. `#alerts` element in its `index.html`.\n * 2. A precompiled template called `alert`. The template can be compiled at\n *    application start-up:\n *    `app.template.compile('alert', 'template body...');`\n *\n * @module View/Alert\n */\n// Dictionary of alerts\nvar _alerts = {};\n\n/**\n * @alias module:View/Alert\n */\nconst Alert = {\n    //When this flag is set to true, it prevents any new alert to be shown.\n    //This is useful for `confirmation` type alerts because you want the\n    //user to focus and confirm/cancel the action and don't bother him with\n    //anything else.\n    preventAnyAlert: false,\n\n    /**\n     * Initializes this module at application start-up.\n     */\n    init: function() {\n        /**\n         * Alert element selector.\n         *\n         * The default value is `$('#alerts')`. Override using {@link Config#alertsEl} setting.\n         * @type {Object}\n         */\n        this.$alerts = $('#alerts');\n\n        /**\n         * Alert view class.\n         *\n         * The default value is {@link View/AlertView}.\n         * However, if a `ViewManager.[Capitalized-appId]AlertView` or\n         * `ViewManager.[Capitalized-platform]AlertView` class exists, it\n         * will be used instead.\n         *\n         * @type {Function}\n         * @memberOf module:View/Alert\n         * @name klass\n         */\n        this.klass = AlertView;\n\n        if (SUGAR.App.config) {\n            this.$alerts = $(SUGAR.App.config.alertsEl).length ? $(SUGAR.App.config.alertsEl) : this.$alerts;\n\n            this.klass = ViewManager[Utils.capitalize(SUGAR.App.config.appId) + 'AlertView'] ||\n                ViewManager.views[Utils.capitalize(SUGAR.App.config.platform) + 'AlertView'] ||\n                ViewManager.views.BaseAlertView ||\n                ViewManager[Utils.capitalize(SUGAR.App.config.platform) + 'AlertView'] ||\n                this.klass;\n        }\n\n        // Check for existing alerts and convert them into AlertView.\n        _.each(this.$alerts.find('.alert-wrapper'), function(el, i) {\n            var key = 'init-' + i;\n            _alerts[key] = this._create(key, { el: el });\n        }, this);\n    },\n\n    /**\n     * Displays an alert message and adds to the internal dictionary of alerts.\n     * Use supplied key later to dismiss the alert. Caller is responsible for\n     * using language translation before calling!\n     *\n     * To create and close alerts, this function instantiates the\n     * {@link View/AlertView} class specified by the\n     * {@link View.Alert#klass} property and places the alert instance in the\n     * DOM as the first element in the {@link View.Alert#$alerts} element.\n     *\n     * The {@link View/AlertView} class provides boilerplate implementation\n     * for a typical single alert view. You can customize alert behavior by\n     * extending the {@link View/AlertView} class.\n     * At minimum, you have to make sure that a pre-compiled template named\n     * `'alert'` exists.\n     *\n     * In case we are showing a `confirmation` alert, we want to dismiss all\n     * other existing alerts and prevent any other alerts.\n     *\n     * Examples:\n     * ```\n     * const Alert = require('./alert');\n     * var a1 = Alert.show('delete_warning', {\n     *     level: 'warning',\n     *     title: 'Warning',\n     *     messages: 'Are you sure you want to delete this record?',\n     *     autoclose: true\n     * });\n     *\n     * var a2 = Alert.show('internal_error', {\n     *     level: 'error',\n     *     messages: ['Internal Error', 'Response code: 500']\n     * })\n     * ```\n     *\n     * @param {string} key Index into the cache of defined alert views.\n     * @param {Object} [options] The options specified here are handled by\n     *   the framework.\n     * @param {string} [options.level] Alert level. `alert-[level]` class\n     *   will be added to the alert view.\n     * @param {boolean} [options.autoClose] Boolean flag indicating if the\n     *   alert must be closed after dismiss delay: See\n     *   {@link Config#alertAutoCloseDelay} setting.\n     * @param {string|string[]} [options.messages] Messages.\n     * @param {string} [options.title] The title of the alert.\n     *   It is displayed in bold.\n     * @return {View/AlertView} AlertView instance.\n     */\n    show: function(key, options) {\n        if (!this.$alerts || !this.$alerts.length) {\n            return null;\n        }\n\n        if (this.preventAnyAlert) return null;\n\n        options = _.extend({\n            level: 'info',\n            autoClose: false\n        }, options || {});\n\n        if (options.level === 'confirmation') {\n            this.dismissAll();\n            this.preventAnyAlert = true;\n        }\n\n        if (options.messages) {\n            options.messages = _.isString(options.messages) ? [options.messages] : options.messages;\n        }\n\n        var alert = _alerts[key];\n        // Create a new alert view if it doesn't exist\n        if (!alert) {\n            alert = this._create(key, options);\n            _alerts[key] = alert;\n        }\n\n        alert.level = options.level;\n\n        // Initialize autoclose timer\n        if (!!options.autoClose) this._setAutoCloseTimer(alert, options.onAutoClose, options.autoCloseDelay);\n\n        alert.render();\n\n        return alert;\n    },\n\n    /**\n     * Creates an instance of the {@link View/AlertView} class and places\n     * the view in the DOM.\n     *\n     * @param {string} key Alert ID.\n     * @param {Object} options Options.\n     * @return {View/AlertView} Instance of alert view class.\n     * @private\n     */\n    _create: function(key, options) {\n        var alert = new this.klass(options);\n        alert.key = key;\n        alert.$el.prependTo(this.$alerts);\n        return alert;\n    },\n\n    /**\n     * Sets the timeout to dismiss the alert view.\n     *\n     * @param {Object} alert the alert to auto close\n     * @param {Function} onAutoClose Callback to call on the autoclose.\n     * @param {number} [autoCloseDelay] The time after which the alert may be\n     *  dismissed.\n     * @private\n     */\n    _setAutoCloseTimer: function(alert, onAutoClose, autoCloseDelay) {\n        if (alert.timerId) clearTimeout(alert.timerId);\n        alert.timerId = setTimeout(_.bind(function() {\n            if(_.isFunction(onAutoClose)) {\n                onAutoClose(alert.key); //callback for when the timeout occurs and the alert is closing\n            }\n            this.dismiss(alert.key);\n\n        }, this), autoCloseDelay || SUGAR.App.config.alertAutoCloseDelay || 5000);\n    },\n\n    /**\n     * Removes an alert message by key.\n     *\n     * @param {string} key The key provided when previously calling show.\n     * @param {Object} [options] Options.\n     * @method\n     */\n    dismiss: function(key, options) {\n        this.preventAnyAlert = false;\n        var alert = _alerts[key];\n        if (!alert) return;\n        if (alert.timerId) clearTimeout(alert.timerId);\n        alert.dispose();\n        delete _alerts[key];\n    },\n\n    /**\n     * Removes all alert messages with a given level.\n     *\n     * @param {string} [level] Level of alerts to dismiss. If not specified,\n     *   all alerts are dismissed.\n     * @param {Object} [options] Dismissal options.\n     */\n    dismissAll: function(level, options) {\n        _.each(_alerts, function(alert, key) {\n            if (!level || alert.level == level) {\n                this.dismiss(key, options);\n            }\n        }, this);\n    },\n\n    /**\n     * Gets an alert with a given key.\n     *\n     * @param {string} key The key of the alert to retrieve.\n     * @return {View/AlertView} Alert view with the specified key.\n     */\n    get: function(key) {\n        return _alerts[key];\n    },\n\n    /**\n     * Gets alerts that are currently displayed.\n     *\n     * @return {Object} All alerts.\n     */\n    getAll: function() {\n        return _alerts;\n    }\n};\n\nmodule.exports = Alert;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst BeforeEvent = require('../core/before-event');\nconst User = require('../core/user');\n\n/**\n * Extends `Backbone.View`. Represents the base view class for layouts, views,\n * and fields.\n *\n * This is an abstract class.\n *\n * @module View/Component\n * @class\n * @mixes Core/BeforeEvent\n */\nconst Component = Backbone.View.extend({\n    /*\n     * FIXME SC-5690: This property will be removed when we have mixin\n     * support with an ES6-style super method.\n     */\n    /**\n     * Internal flag used to prevent {@link #events} from being delegated\n     * prior to {@link #initialize}, in {@link #delegateEvents}. Do not use\n     * this flag!\n     *\n     * @private\n     * @type {boolean}\n     * @memberOf View/Component\n     * @instance\n     */\n    _isInitialized: false,\n\n    /**\n     * Constructor for sidecar components, currently used to define the\n     * order of event delegation on {@link #events this component's events},\n     * after Backbone changed the order in which events are delegated from\n     * 0.9.10 to 1.2.0. Also temporarily defines {@link #options} on the\n     * component, as Backbone no longer does this by default.\n     *\n     * @param {Object} options The `Backbone.View` initialization options.\n     * @return {Backbone.View} The created `Backbone.View`.\n     * @memberOf View/Component\n     * @instance\n     */\n    constructor: function(options) {\n        /**\n         * Backbone view options.\n         *\n         * @deprecated Deprecated since 7.8.0 since this is no longer supported\n         *   by Backbone.\n         * @type {Object}\n         * @memberOf View/Component\n         * @name options\n         * @instance\n         */\n        this.options = options || {}; // FIXME SC-5597: delete this\n\n        this._wrapInitialize(options);\n\n        return Backbone.View.apply(this, arguments);\n    },\n\n    /**\n     * Wraps the initialize method to delegate the events on the element,\n     * after it initializes.\n     *\n     * @param {Object} options The Backbone.View initialization options.\n     * @protected\n     * @memberOf View/Component\n     * @instance\n     */\n    _wrapInitialize: function(options) {\n        this.initialize = _.wrap(this.initialize, _.bind(function (init) {\n            init.call(this, options);\n            this.initialize = init;\n            this._isInitialized = true;\n            this.delegateEvents();\n        }, this));\n    },\n\n    /**\n     * Initializes this component.\n     *\n     * @param {Object} options The `Backbone.View` initialization options.\n     * @param {Core/Context} options.context Reference to the context.\n     * @param {Object} [options.meta] Component metadata.\n     * @param {string} [options.module] Module name.\n     * @param {Data/Bean} [options.model] Reference to the model this\n     *   component is bound to.\n     * @param {Data/BeanCollection} [options.collection] Reference to the\n     *   collection this component is bound to.\n     * @memberOf View/Component\n     * @instance\n     */\n    initialize: function(options) {\n        /**\n         * Reference to the context (required).\n         * @type {Core/Context}\n         * @memberOf View/Component\n         * @name context\n         * @instance\n         */\n        this.context = options.context || SUGAR.App.controller && SUGAR.App.controller.context || new Backbone.Model();\n\n        /**\n         * Component metadata (optional).\n         * @type {Object}\n         * @memberOf View/Component\n         * @name meta\n         * @instance\n         */\n        this.meta = options.meta;\n\n        /**\n         * Module name (optional).\n         * @type {string}\n         * @memberOf View/Component\n         * @name module\n         * @instance\n         */\n        this.module = options.module || this.context.get('module');\n\n        /**\n         * Reference to the model this component is bound to.\n         * @type {Data/Bean}\n         * @memberOf View/Component\n         * @name model\n         * @instance\n         */\n        this.model = options.model || this.context.get('model');\n\n        /**\n         * Reference to the collection this component is bound to.\n         * @type {Data/BeanCollection}\n         * @memberOf View/Component\n         * @name collection\n         * @instance\n         */\n        this.collection = options.collection || this.context.get('collection');\n\n        // Adds classes to the component based on the metadata.\n        if (this.meta && this.meta.css_class) {\n            this.$el.addClass(this.meta.css_class);\n        }\n\n        this.updateVisibleState(true);\n\n        // Register last state defaults\n        User.lastState.register(this);\n    },\n\n    /**\n     * Renders this component.\n     *\n     * Override this method to provide custom logic.\n     * The default implementation does nothing.\n     * See `Backbone.View#render` for details.\n     * The convention is for {@link #_render} to always return `this`.\n     *\n     * @return {View/Component} Instance of this component.\n     * @protected\n     * @memberOf View/Component\n     * @instance\n     */\n    _render: function() {\n        return this;\n    },\n\n    /**\n     * Renders this component.\n     *\n     * **IMPORTANT**: Do not override this method.\n     * Instead, override {@link View/Component#_render} to provide render logic.\n     *\n     * @return {View/Component} Instance of this component.\n     * @memberOf View/Component\n     * @instance\n     */\n    render: function() {\n        if (this.disposed === true) {\n            SUGAR.App.logger.error(\"Unable to render component because it's disposed \" + this + '\\n');\n            return false;\n        }\n        if (!this.triggerBefore('render'))\n            return false;\n        this._render();\n\n        this.trigger('render');\n\n        return this;\n    },\n\n    /**\n     * Proxies the parent method on `Backbone.View`, but only called after\n     * {@link #initialize this view instance initializes}.\n     *\n     * @return {View/Component} Instance of this component.\n     * @memberOf View/Component\n     * @instance\n     */\n    delegateEvents: function () {\n        if (!this._isInitialized) {\n            return this;\n        }\n\n        // FIXME SC-5680: We can't call `_super` from View/Component - it\n        // would just call this method again. SC-5680 will address fixing\n        // the `_super` method.\n        return Backbone.View.prototype.delegateEvents.apply(this, arguments);\n    },\n\n    /**\n     * Sets template option.\n     *\n     * If the given option already exists it is augmented by the value of the\n     * given `option` parameter.\n     *\n     * See the Handlebars.js documentation for details.\n     *\n     * @param {string} key Option key.\n     * @param {Object} option Option value.\n     * @memberOf View/Component\n     * @instance\n     */\n    setTemplateOption: function(key, option) {\n        this.options.templateOptions = this.options.templateOptions || {};\n        this.options.templateOptions[key] = _.extend({}, this.options.templateOptions[key], option);\n    },\n\n    /**\n     * Binds data changes to this component.\n     *\n     * @abstract\n     * @memberOf View/Component\n     * @instance\n     */\n    bindDataChange: function() {\n        // Override this method to wire up model/collection events\n    },\n\n    /**\n     * Removes this component's event handlers from model and collection.\n     *\n     * Performs the opposite of what {@link View/Component#bindDataChange}\n     * method does.\n     *\n     * Override this method to provide custom logic.\n     *\n     * @memberOf View/Component\n     * @instance\n     */\n    unbindData: function() {\n        if (this.model) this.model.off(null, null, this);\n        if (this.collection) this.collection.off(null, null, this);\n    },\n\n    /**\n     * Removes all event callbacks registered within this component\n     * and undelegates Backbone events.\n     *\n     * Override this method to provide custom logic.\n     *\n     * @memberOf View/Component\n     * @instance\n     */\n    unbind: function() {\n        this.off();\n        this.offBefore();\n        this.undelegateEvents();\n        SUGAR.App.events.off(null, null, this);\n        SUGAR.App.events.unregister(this);\n        if (this.context) this.context.off(null, null, this);\n        if (this.layout) this.layout.off(null, null, this);\n    },\n\n    /**\n     * Fetches data for layout's model or collection.\n     *\n     * The default implementation does nothing.\n     * See {@link View/Layout#loadData} and {@link View/View#loadData} methods.\n     *\n     * @method\n     * @memberOf View/Component\n     * @instance\n     */\n    loadData: _.noop,\n\n    /**\n     * Disposes this component.\n     *\n     * This method:\n     *\n     * * unbinds this component from model and collection\n     * * removes all event callbacks registered within this component\n     * * removes this component from the DOM\n     *\n     * Override this method to provide custom logic:\n     * ```\n     * const ViewManager = require('./view-manager');\n     * ViewManager.views.MyView = ViewManager.View.extend({\n     *      _dispose: function() {\n     *          // Perform custom clean-up. For example, clear timeout handlers, etc.\n     *          ...\n     *          // Call super\n     *          ViewManager.View.prototype._dispose.call(this);\n     *      }\n     * });\n     * ```\n     * @protected\n     * @memberOf View/Component\n     * @instance\n     */\n    _dispose: function() {\n        this.unbindData();\n        this.unbind();\n        this.remove();\n        this.model = null;\n        this.collection = null;\n        this.context = null;\n        this.$el = null;\n        this.el = null;\n    },\n\n    /**\n     * Disposes a component.\n     *\n     * Once the component gets disposed it can not be rendered.\n     * Do not override this method. Instead override\n     * {@link View/Component#_dispose} method\n     * if you need custom disposal logic.\n     *\n     * @memberOf View/Component\n     * @instance\n     */\n    dispose: function() {\n        if (this.disposed === true) return;\n        this._dispose();\n        this.disposed = true;\n    },\n\n    /**\n     * Gets a string representation of this component.\n     *\n     * @return {string} String representation of this component.\n     * @memberOf View/Component\n     * @instance\n     */\n    toString: function() {\n        return this.cid +\n            '-' + (this.$el && this.$el.id ? this.$el.id : '<no-id>') +\n            '/' + this.module +\n            '/' + this.model +\n            '/' + this.collection;\n    },\n\n    /**\n     * Traverses upwards from the current component to find the first\n     * component that matches the name.\n     *\n     * The default implementation does nothing.\n     * See {@link View/Layout#closestComponent},\n     * {@link View/View#closestComponent} and\n     * {@link View/Field#closestComponent} methods.\n     *\n     * @param {string} name The name of the component to find.\n     * @return {View/Component} The component or `undefined` if not found.\n     * @method\n     * @memberOf View/Component\n     * @instance\n     */\n    closestComponent: _.noop,\n\n    /**\n     * Pass through function to jQuery's show to show view.\n     *\n     * @return {boolean|undefined} `false` if the BeforeEvent for `show` fails;\n     *   `undefined` otherwise.\n     * @memberOf View/Component\n     * @instance\n     */\n    show: function() {\n        if (!this.isVisible()) {\n            if (!this.triggerBefore('show')) {\n                return false;\n            }\n\n            this._show();\n            this.trigger('show');\n        }\n    },\n\n    /**\n     * Pass through function to jQuery's hide to hide view.\n     *\n     * @return {boolean|undefined} `false` if the BeforeEvent for `hide` fails;\n     *   `undefined` otherwise.\n     * @memberOf View/Component\n     * @instance\n     */\n    hide: function() {\n        if (this.isVisible()) {\n            if (!this.triggerBefore('hide')) {\n                return false;\n            }\n\n            this._hide();\n            this.trigger('hide');\n        }\n    },\n\n    /**\n     * Checks if this component is visible on the page.\n     *\n     * @return {boolean} `true` if this component is visible on the page;\n     *   `false` otherwise.\n     * @memberOf View/Component\n     * @instance\n     */\n    isVisible: function() {\n        return this._isVisible;\n    },\n\n    /**\n     * Updates this component's visibility state.\n     *\n     * **Note:** This does not show/hide the component. Please use\n     * {@link View/Component#show} and {@link View/Component#hide} to do this.\n     *\n     * @param {boolean} visible Visibility state of this component.\n     * @memberOf View/Component\n     * @instance\n     */\n    updateVisibleState: function(visible) {\n        /**\n         * Flag to indicate the visible state of the component.\n         *\n         * @type {boolean}\n         * @private\n         * @memberOf View/Component\n         * @instance\n         */\n        this._isVisible = !!visible;\n    },\n\n    /**\n     * Override this method to provide custom show logic.\n     *\n     * @protected\n     * @memberOf View/Component\n     * @instance\n     */\n    _show: function() {\n        this.$el.removeClass('hide').show();\n        this.updateVisibleState(true);\n    },\n\n    /**\n     * Override this method to provide custom show logic.\n     *\n     * @protected\n     * @memberOf View/Component\n     * @instance\n     */\n    _hide: function() {\n        this.$el.addClass('hide').hide();\n        this.updateVisibleState(false);\n    },\n\n    /**\n     *  Retrieves and invokes parent prototype functions.\n     *\n     *  Requires a method parameter to function. The method called should be\n     *  named the same as the function being called from.\n     *\n     * Examples:\n     *\n     * * Good:\n     * ```\n     * ({\n     *     initialize: function(options) {\n     *         // extend the base meta with some custom meta\n     *         options.meta = _.extend({}, myMeta, options.meta || {});\n     *         // Only call parent initialize from initialize\n     *         this._super('initialize', [options]);\n     *         this.buildFoo(options);\n     *     }\n     * });\n     * ```\n     *\n     * * Bad:\n     * ```\n     * ({\n     *     initialize: function(options) {\n     *         // extend the base meta with some custom meta\n     *         options.meta = _.extend({}, myMeta, options.meta || {});\n     *         // Calling a function like buildFoo from initialize is incorrect. Should call directly on this\n     *         this._super('buildFoo',[options]);\n     *     }\n     * });\n     * ```\n     *\n     * @param {string} method The name of the method to call (e.g.\n     *   `initialize`, `_renderHtml`).\n     * @param {Array} [args] Arguments to pass to the parent method.\n     * @return {*} The result of invoking the parent method.\n     * @protected\n     * @memberOf View/Component\n     * @instance\n     */\n    _super: function(method, args) {\n        //Must be used to invoke parent methods\n        if (!method || !_.isString(method)) {\n            return SUGAR.App.logger.error('tried to call _super without specifying a parent method in ' + this.name);\n        }\n\n        var parent, thisProto = Object.getPrototypeOf(this);\n        args = args || [];\n\n        //_lastSuperClass is used to walk the prototype chain\n        this._superStack = this._superStack || {};\n        this._superStack[method] = this._superStack[method] || [];\n        if (this._superStack[method].length > 0) {\n            parent = Object.getPrototypeOf(_.last(this._superStack[method]));\n            if (_.contains(this._superStack[method], parent)) {\n                return SUGAR.App.logger.error('Loop detected calling ' + method + ' from ' + this.name);\n            }\n        } else {\n            parent = Object.getPrototypeOf(thisProto);\n        }\n\n        //First verify that the method exists on the current object\n        if (!thisProto[method]) {\n            return SUGAR.App.logger.error('Unable to find method ' + method + ' on class ' + this.name);\n        }\n\n        //Walk up the chain until we find a parent that implements the method.\n        while (!parent.hasOwnProperty(method) && parent !== Component.prototype) {\n            parent = Object.getPrototypeOf(parent);\n        }\n\n        //Walk up the chain until we find a parent that overrode the method.\n        while (thisProto[method] === parent[method] && parent !== Component.prototype) {\n            thisProto = parent;\n            parent = Object.getPrototypeOf(parent);\n        }\n        this._superStack[method].push(parent);\n\n        //Verify that we found a valid parent that implements this method\n        if (!parent) {\n            return SUGAR.App.logger.error('Unable to find parent of component ' + this.name);\n        }\n        if (!parent[method]) {\n            return SUGAR.App.logger.error('Unable to find method ' + method + ' on parent class of ' + this.name);\n        }\n\n        //Finally make the parent call\n        var ret = parent[method].apply(this, args);\n\n        //Reset the last parent to step down the prototype chain\n        this._superStack[method].pop();\n        //When we reach the end of the chain, also remove the method name requirement\n        if (_.isEmpty(this._superStack[method])) {\n            this._superStack[method] = null;\n        }\n\n        return ret;\n    },\n\n    /**\n     * Gets the HTML placeholder for this component.\n     *\n     * @return {Handlebars.SafeString} HTML placeholder to be used in a\n     *   Handlebars template.\n     * @memberOf View/Component\n     * @instance\n     */\n    getPlaceholder: function() {\n        return new Handlebars.SafeString('<span cid=\"' + this.cid + '\"></span>');\n    }\n});\n\n//Mix in the beforeEvents\n_.extend(Component.prototype, BeforeEvent);\n\nmodule.exports = Component;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Acl = require('../core/acl');\nconst Component = require('./component');\nconst PluginManager = require('../core/plugin-manager');\nconst Language = require('../core/language');\nconst Template = require('./template');\n\n/**\n * SugarField widget. A field widget is a low level field widget. Some examples\n * of fields are text boxes, date pickers, drop down menus.\n *\n * ## Creating a SugarField\n * SugarCRM allows for customized \"fields\" which are visual representations of a type of data (e.g. url would\n * be displayed as a hyperlink).\n *\n * ### Anatomy of a SugarField\n * Field files reside in the **`sugarcrm/clients/base/fields/{field_type}`** folder.\n *\n * Inside the {field_type} directory is a set of files that define templates for different views and field controller.\n * A typical directory structure will look like the following:\n * <pre>\n * clients\n * |- base\n *    |- bool\n *       |- bool.js\n *       |- detail.hbs\n *       |- edit.hbs\n *       |- list.hbs\n *    |- int\n *       ...\n *    |- text\n *       ...\n * |- portal\n *    |- portal specific overrides\n * |- mobile\n *    |- mobile specific overrides\n * </pre>\n * **`[sugarFieldType].js`** files are optional.\n * Sometimes a SugarField needs to do more than just display a simple input element, other times input elements\n * need additional data such as drop down menu choices. To support advanced functionality, just add your additional\n * controller logic to **`[sugarFieldType].js`** javascript file where sugarFieldType is the type of the SugarField.\n * Example for `bool.js` controller:\n * ```\n * const ViewManager = require('./view-manager');\n * ({\n *    events: {\n *         handler: function() {\n *             // Actions\n *         }\n *    },\n *\n *    initialize: function(options) {\n *       ViewManager.Field.prototype.initialize(options);\n *       // Your constructor code here follows...\n *    },\n *\n *    unformat: function(value) {\n *        value = this.el.children[0].children[1].checked ? '1' : '0';\n *        return value;\n *    },\n *\n *    format: function(value) {\n *        value = (value == '1') ? true : false;\n *        return value;\n *    }\n * })\n * ```\n *\n * **`.hbs`** files contain your templates corresponding to the type of {@link View/View} the field is to be displayed on.\n * Sugar uses Handlebars.js as its client side template of choice. At this time no other templating engines are\n * supported. Sample:\n * ```\n * &lt;span name=\"{{name}}\"&gt;{{value}}&lt;/span&gt;\n * ```\n *\n * These files will be used by the metadata manager to generate metadata for your SugarFields and pass them onto the\n * Sugar JavaScript client.\n *\n * @module View/Field\n * @class\n * @extends View/Component\n */\nconst Field = Component.extend({\n    /**\n     * HTML tag of the field.\n     * @type {string}\n     * @memberOf View/Field\n     * @instance\n     */\n    fieldTag: \"input\",\n\n    /**\n     * Initializes this view.\n     *\n     * @param {Object} options The `Backbone.View` initialization options.\n     * @memberOf View/Field\n     * @instance\n     */\n    initialize: function(options) {\n        PluginManager.attach(this, 'field');\n        Component.prototype.initialize.call(this, options);\n\n        /**\n         * ID of the field (autogenerated).\n         * @type {number}\n         * @name sfId\n         * @memberOf View/Field\n         * @instance\n         */\n        this.sfId = options.sfId;\n\n        /**\n         * Reference to the view this field is attached to.\n         * @type {View/View}\n         * @name view\n         * @memberOf View/Field\n         * @instance\n         */\n        this.view = options.view;\n\n        /**\n         * View definitions for the field (doesn't include vardefs).\n         *\n         * The view definitions are the properties used for field rendering.\n         * Example: A `link` property can specify if the field should be\n         * displayed as a link.\n         *\n         * @type {Object}\n         * @name viewDefs\n         * @property {Object} defs A hash of properties that\n         *   will override the field definitions (vardefs).\n         * @memberOf View/Field\n         * @instance\n         */\n        this.viewDefs = options.viewDefs || {};\n\n        /**\n         * Field name.\n         * @type {string}\n         * @name name\n         * @memberOf View/Field\n         * @instance\n         */\n        this.name = this.viewDefs.name || options.def && options.def.name;\n\n        var fieldDefs = this.model && this.model.fields ? this.model.fields[this.name] : null;\n\n        /**\n         * Field definitions (vardefs).\n         *\n         * Field definitions are properties that define the field and its\n         * internal behavior.\n         *\n         * @type {Object}\n         * @name fieldDefs\n         * @memberOf View/Field\n         * @instance\n         */\n        this.fieldDefs = _.extend({}, fieldDefs, this.viewDefs.defs);\n\n        /**\n         * Field metadata definition (fieldDefs + viewdefs).\n         *\n         * Viewdef are copied over vardef.\n         * @type {Object}\n         * @name def\n         * @memberOf View/Field\n         * @deprecated\n         * @instance\n         */\n        this.def = _.extend({}, fieldDefs, options.def);\n\n        /**\n         * Widget type (text, bool, int, etc.).\n         * @type {string}\n         * @name type\n         * @memberOf View/Field\n         * @instance\n         */\n        this.type = this.viewDefs.type || this.def.type || this.fieldDefs.type;\n\n        // TODO deprecate this fallback, since label vs vname is already patched in metadata\n        var oldLabel = this.def.label || this.def.vname || this.name;\n        /**\n         * i18n-ed field label.\n         * @type {string}\n         * @name label\n         * @memberOf View/Field\n         * @instance\n         */\n        this.label = Language.get(this.viewDefs.label || oldLabel, this.module);\n\n        /**\n         * Compiled template.\n         * @type {Function}\n         * @name template\n         * @memberOf View/Field\n         * @instance\n         */\n        this.template = Template.empty;\n\n        // Bind validation error event\n        // Note we bind it regardless of which view we on (only need for edit type views)\n        if (this.model) {\n            this.model.on('error:validation:' + this.name, this.handleValidationError, this);\n            this.model.on('validation:start attributes:revert', this.removeValidationErrors, this);\n            this.model.on('acl:change:' + this.name, this.handleAclChange, this);\n        }\n    },\n\n    /**\n     * Defines fallback rules for ACL checking.\n     *\n     * For example, if a user doesn't have `edit` permission for the given field\n     * the template falls back to `detail` view template.\n     *\n     * @type {Object}\n     * @memberOf View/Field\n     */\n    viewFallbackMap: {\n        'edit': 'detail'\n    },\n\n    /**\n     * Handler for when an ACL changes at the field-level.\n     *\n     * @memberOf View/Field\n     * @instance\n     */\n    handleAclChange: function() {\n        /* FIXME SC-3363: The previous action needs to be cleared in order to\n           load the correct template when the user potentially loses access to a\n           field. SC-3363 will address this. */\n        this._resetAction();\n        this.render();\n    },\n\n    /**\n     * Sets this field's action to undefined.\n     *\n     * @memberOf View/Field\n     * @instance\n     * @protected\n     */\n    _resetAction: function () {\n        this.action = void 0;\n    },\n\n    /**\n     * Checks ACLs to see if the current user has access to action.\n     *\n     * @param {string} action Action name.\n     * @return {boolean} Flag indicating if the current user has access to the given action.\n     * @see {@link View/Field#_loadTemplate}\n     * @memberOf View/Field\n     * @instance\n     * @private\n     */\n    _checkAccessToAction: function(action) {\n        return Acl.hasAccessToModel(action, this.model, this.name);\n    },\n\n    /**\n     * Gets the fallback template for this field's view.\n     *\n     * @param {string} viewName Name of the view.\n     * @return {string} If disabled and `viewName` is 'disabled', then 'edit'.\n     *   If not, then either `this.view.fallbackFieldTemplate` or\n     *   'detail'.\n     * @protected\n     * @memberOf View/Field\n     * @instance\n     */\n    _getFallbackTemplate: function(viewName) {\n        return (this.isDisabled() && viewName === 'disabled') ? 'edit' :\n            (this.view.fallbackFieldTemplate || 'detail');\n    },\n\n    /**\n     * Loads the template for this field.\n     *\n     * @memberOf View/Field\n     * @instance\n     * @private\n     */\n    _loadTemplate: function() {\n        var fallbackFieldTemplate;\n\n        // options.viewName or view metadata type is used to override the template\n        var viewName = this.options.viewName || this.options.def.view ||\n            (this.view.meta && this.view.meta.type ? this.view.meta.type : this.view.name);\n\n        var actionName = this.action;\n        if (this.isDisabled() && viewName === 'edit') {\n            viewName = this.action;\n        } else {\n            actionName = this.action || (this.view.action && this.view.name != this.view.action ? this.view.action : viewName);\n        }\n\n        while (viewName) {\n            if (this._checkAccessToAction(actionName)) break;\n            viewName = this.viewFallbackMap[viewName];\n            actionName = viewName;\n        }\n\n        if (viewName) {\n            // Set fallback template to base/view or default.\n            var moduleName = this.module || this.context.get('module');\n\n            fallbackFieldTemplate = this._getFallbackTemplate(viewName);\n            this.template = Template.getField(this.type, viewName, moduleName, fallbackFieldTemplate) ||\n                            // Fallback to text field if template is not defined for this type\n                            Template.getField('base', viewName, moduleName, fallbackFieldTemplate) ||\n                            // Safeguard with an empty template\n                            Template.empty;\n        } else {\n            // Safeguard with an empty template\n            this.template = Template.empty;\n        }\n\n        // Update template name and action.\n        // These properties are useful for a client app to make decisions when formatting values, rendering, etc.\n        /**\n         * Template (view) name.\n         *\n         * The view name can be different from the one the field belongs to.\n         * The template is selected based on ACLs. It may also be overridden by field's metadata definition.\n         * @type {string}\n         * @memberOf View/Field\n         * @name tplName\n         * @instance\n         */\n        this.tplName = viewName;\n\n        /**\n         * Action name.\n         *\n         * The action the field is rendered for. Usually, the action name\n         * equals to {@link View/Field#tplName}.\n         *\n         * @type {string}\n         * @memberOf View/Field\n         * @name action\n         * @instance\n         */\n        this.action = actionName;\n    },\n\n    /**\n     * Overrides default Backbone.Events to also use custom handlers.\n     *\n     * The events hash is similar to Backbone.View events hash.\n     * You can specify event handler as method of field or as name of event\n     * that should be triggered. You cannot use javascript code in metadata.\n     * The framework stores the event handlers as anonymous function bound\n     * to this field as part of the field instance with the `\"callback_\"`\n     * prefix. When event is fired it calls `triggerMetadataEvent` method\n     * if it exists in field. The default behavior of `triggerMetadataEvent`\n     * is implemented in {@link MetadataEventDriven} plugin.\n     *\n     * ```\n     * events: {\n     *     handler: triggerSomeEvent;\n     * }\n     * ```\n     *\n     * triggerSomeEvent should be method of certain field.\n     *\n     * OR\n     *\n     * ```\n     * events: {\n     *     handler: 'fire:some:event';\n     * }\n     * ```\n     *\n     * @param {Object} events Hash of events and their handlers.\n     * @private\n     */\n    delegateEvents: function(events) {\n        // We may have:\n        // this.events -- comes from custom .js controllers\n        // this.def.events -- comes from metadata. See, for example, buttons section in portal.js file\n        // FIXME SC-5676: The metadata events should typically be extended\n        // or mixed-in to the events, not OR'ed with `this.events`. SC-5676\n        // should address refactoring this method.\n        events = events || _.result(this, 'events') || (this.def ? this.def.events : null);\n        if (!events) return;\n\n        events = _.clone(events);\n\n        _.each(events, function(eventHandler, handlerName) {\n            var callback = this[eventHandler];\n\n            // If our callbacks / events have not been registered in field,\n            // go ahead and registered it as method.\n            if (!callback && _.isString(eventHandler)) {\n                callback = _.bind(function(event) {\n                    if (_.isFunction(this.triggerMetadataEvent)) {\n                        this.triggerMetadataEvent(event, eventHandler);\n                    }\n                }, this);\n                this['callback_' + handlerName] = callback;\n                events[handlerName] = 'callback_' + handlerName;\n            }\n\n            if (!_.isFunction(eventHandler) && !callback) {\n                delete events[handlerName];\n            }\n        }, this);\n\n        Backbone.View.prototype.delegateEvents.call(this, events);\n    },\n\n    /**\n     * Renders a field widget.\n     *\n     * This method checks ACLs to choose the correct template.\n     * Once the template is rendered, DOM changes are bound to the model.\n     *\n     * @return {View/Field} The instance of this field.\n     * @memberOf View/Field\n     * @instance\n     * @protected\n     */\n    _render: function() {\n        this._loadTemplate();\n        if (this.model instanceof Backbone.Model) {\n            /**\n             * Model property value.\n             * @type {string}\n             * @name value\n             * @memberOf View/Field\n             * @instance\n             */\n            this.value = this.getFormattedValue();\n        }\n\n        /**\n         * Override this property with a specific direction string if the\n         * field has a set direction that it always follows.\n         *\n         * Override this property with a function if logic is needed to\n         * determine the direction of the field. The function should return\n         * either a `string` indicating the direction of the field or\n         * `undefined`. This function is only called after the value is set\n         * so that we can base the direction on the value.\n         *\n         * The default value undefined means that the field would use the\n         * inherited direction from the DOM.\n         *\n         * Example using a function:\n         *\n         * ```\n         * direction: function() {\n         *     return this.isRTL ? 'rtl' : 'ltr';\n         * }\n         * ```\n         * @type {Function|string|undefined}\n         * @name direction\n         * @memberOf View/Field\n         * @instance\n         */\n\n        /**\n         * The direction of the field. The default value `undefined` means\n         * that the field would use the inherited direction from the DOM.\n         *\n         * Do not override this property directly; override\n         * {@link View/Field#direction} instead.\n         *\n         * @type {string|undefined}\n         * @name dir\n         * @memberOf View/Field\n         * @instance\n         * @readonly\n         */\n        this.dir = _.result(this, 'direction');\n        if (Language.direction === this.dir) {\n            delete this.dir;\n        }\n\n        this.unbindDom();\n        this.$el.html(this.template(this) || '');\n\n        // Adds classes to the component based on the metadata.\n        if(this.def && this.def.css_class) {\n            this.getFieldElement().addClass(this.def.css_class);\n        }\n\n        this.$(this.fieldTag).attr('dir', this.dir);\n\n        this.bindDomChange();\n        return this;\n    },\n\n    /**\n     * Gets the corresponding field DOM element.\n     *\n     * This method will return the placeholder element.\n     * Override this method in the subclass to point the specified field\n     * element.\n     *\n     * @return {Object} DOM Element\n     * @memberOf View/Field\n     * @instance\n     */\n    getFieldElement: function() {\n        return this.$el;\n    },\n\n    /**\n     * Binds DOM changes to a model.\n     *\n     * The default implementation of this method binds value changes of\n     * {@link View/Field#fieldTag} element to model's `Backbone.Model#set`\n     * method. Override this method if you need custom binding.\n     *\n     * @memberOf View/Field\n     * @instance\n     */\n    bindDomChange: function() {\n        if (!(this.model instanceof Backbone.Model)) return;\n\n        var self = this;\n        var el = this.$el.find(this.fieldTag);\n        el.on(\"change\", function() {\n            self.model.set(self.name, self.unformat(el.val()));\n        });\n    },\n\n    /**\n     * Binds model changes to this field.\n     *\n     * The default implementation makes sure this field gets re-rendered\n     * whenever the corresponding model attribute changes.\n     *\n     * @memberOf View/Field\n     * @instance\n     */\n    bindDataChange: function() {\n        if (this.model) {\n            this.model.on(\"change:\" + this.name, function(model, value) {\n                // FIXME: we need to track the `options` send by\n                // `model.set()` and only call `this.render()` if it didn't\n                // came from `bindDomChange`\n                if (this.action === 'edit') {\n                    // Should directly set the value in edit instead of re-rendering the whole field (see MAR-1617).\n                    this.$(this.fieldTag).val(this.format(value));\n                } else {\n                    this.render();\n                }\n            }, this);\n        }\n    },\n\n    /**\n     * Checks to see if the field's value has been changed from the saved model\n     * This is not the same as {@link Backbone.Model#hasChanged} which checks\n     * if the model has changed from the last time it was set whereas this\n     * function checks if what is currently in the input field is the same as\n     * what is synced on the model\n     *\n     * @return {boolean} `true` if the value is different, `false` if field is\n     *   synced with the saved model\n     * @memberOf View/Field\n     * @instance\n     */\n    hasChanged: function() {\n        return !_.isEqual(this.format(this.model.getSynced(this.name)), this.format(this.model.get(this.name)));\n    },\n\n    /**\n     * Formats the value to be used in handlebars template and displayed on\n     * screen.\n     *\n     * The default implementation returns `value` without modifying it.\n     * Override this method to provide custom formatting in field\n     * controller (`[type].js` file).\n     *\n     * @param {Array|Object|string|number|boolean} value The value to format.\n     * @return {Array|Object|string|number|boolean} Formatted value.\n     * @memberOf View/Field\n     * @instance\n     */\n    format: function(value) {\n        return value;\n    },\n\n    /**\n     * Unformats the value for storing in a model. This should do the\n     * inverse of {@link #format}.\n     *\n     * The default implementation returns `value` without modifying it.\n     * Override this method to provide custom unformatting in field\n     * controller (`[type].js` file).\n     *\n     * @param {string} value The value to unformat.\n     * @return {Array|Object|string|number|boolean} Unformatted value.\n     * @memberOf View/Field\n     * @instance\n     */\n    unformat: function(value) {\n        return value;\n    },\n\n    /**\n     * Returns the value of this field in the associated model.\n     *\n     * If you need to override the formatted value please override\n     * {@link View/Field#format}.\n     *\n     * @return {Array|Object|string|number|boolean} The formatted data as\n     *   provided by {@link View/Field#format}.\n     * @memberOf View/Field\n     * @instance\n     */\n    getFormattedValue: function() {\n        return this.format(this.model.has(this.name) ? this.model.get(this.name) : null);\n    },\n\n    /**\n     * Handles validation errors.\n     *\n     * The default implementation does nothing.\n     * Override this method to provide custom display logic.\n     * ```\n     * ViewManager.Field = ViewManager.Field.extend({\n     *     handleValidationError: function(errors) {\n     *         // Your custom logic goes here\n     *     }\n     * });\n     * ```\n     *\n     * @param {Object} errors hash of validation errors\n     * @memberOf View/Field\n     * @instance\n     */\n    handleValidationError: function(errors) {\n        // Override this method\n    },\n\n    /**\n     * Removes the validation error properties on the field that were set by\n     * {@link #handleValidationError}.\n     *\n     * The default implementation does nothing.\n     *\n     * Override this method to provide custom logic:\n     *\n     * ```\n     * ViewManager.Field = ViewManager.Field.extend({\n     *     removeValidationErrors: function(errors) {\n     *         // Your custom logic goes here\n     *     }\n     * });\n     * ```\n     *\n     * @memberOf View/Field\n     * @instance\n     */\n    removeValidationErrors: function() {\n        // Override this method\n    },\n\n    /**\n     * Gets the HTML placeholder for a field.\n     *\n     * @return {Handlebars.SafeString} HTML placeholder for the field as\n     *   Handlebars safe string.\n     * @memberOf View/Field\n     * @instance\n     */\n    getPlaceholder: function() {\n        return new Handlebars.SafeString('<span sfuuid=\"' + this.sfId + '\"></span>');\n    },\n\n    /**\n     * Disables edit mode by switching the element as detail mode.\n     *\n     * @param {boolean} disable `true` or `undefined` to disable the edit mode\n     *   otherwise, it will restore back to the previous mode.\n     * @param {Object} [options = {}] A hash of options.\n     * @param {boolean} [options.trigger] `true` to trigger the `field:disabled`\n     *   event in the context. The event passes 2 arguments: the field name and\n     *   the `disable` boolean.\n     * @memberOf View/Field\n     * @instance\n     */\n    setDisabled: function(disable, options = {}) {\n        disable = _.isUndefined(disable) ? true : disable;\n        let swapped = false;\n        if(disable && this.isDisabled() === false) {\n            //Set disabled\n            this._previousAction = this.action;\n            this.action = 'disabled';\n            this.render();\n            swapped = true;\n        } else if(disable === false && this.isDisabled()) {\n            //disabled release\n            this.action = this._previousAction;\n            delete this._previousAction;\n            this.render();\n            swapped = true;\n        }\n\n        if (swapped && options.trigger) {\n            this.context.trigger('field:disabled', this.name, disable, this);\n        }\n    },\n\n    /**\n     * Checks if this field is disabled.\n     *\n     * @return {boolean} `true` if this field is disabled, `false` otherwise.\n     * @memberOf View/Field\n     * @instance\n     */\n    isDisabled: function() {\n        return (this.action === 'disabled');\n    },\n\n    /**\n     * Set view name of this field.\n     * This only switches the template reference.\n     *\n     * @param {string} view View name.\n     * @memberOf View/Field\n     * @instance\n     */\n    setViewName: function(view) {\n        this.options.viewName = view;\n    },\n\n    /**\n     * Set action name of this field.\n     * This switches action name as well as the template reference.\n     *\n     * @param {string} name Action name.\n     * @memberOf View/Field\n     * @instance\n     */\n    setMode: function(name) {\n        if(this.isDisabled()) {\n            this._previousAction = name;\n        } else {\n            this.action = name;\n        }\n        this.setViewName(name);\n        this.render();\n    },\n\n    /**\n     * Unbinds DOM changes from this field's element.\n     *\n     * This method performs the opposite of what\n     * {@link View/Field#bindDomChange} method does.\n     * Override this method if you need custom logic.\n     *\n     * @memberOf View/Field\n     * @instance\n     */\n    unbindDom: function() {\n        this.$el.find(this.fieldTag).off();\n    },\n\n    /**\n     * Disposes a field.\n     *\n     * Calls {@link View/Field#unbindDom} and {@link View/Component#_dispose}\n     * method of the base class.\n     *\n     * @protected\n     * @memberOf View/Field\n     * @instance\n     */\n    _dispose: function() {\n        PluginManager.detach(this, 'field');\n        this.unbindDom();\n        Component.prototype._dispose.call(this);\n    },\n\n    /**\n     * Gets a string representation of this field.\n     *\n     * @return {string} String representation of this field.\n     * @memberOf View/Field\n     * @instance\n     */\n    toString: function() {\n        return \"field-\" + this.name + \"-\" + this.sfId + \"-\" +\n            Component.prototype.toString.call(this);\n    },\n\n    /**\n     * @inheritdoc\n     * @memberOf View/Field\n     */\n    _show: function() {\n        this.getFieldElement().removeClass('hide').show();\n        this.updateVisibleState(true);\n    },\n\n    /**\n     * @inheritdoc\n     * @memberOf View/Field\n     */\n    _hide: function() {\n        this.getFieldElement().addClass('hide').hide();\n        this.updateVisibleState(false);\n    },\n\n    /**\n     * Compares formatted values for equality.\n     *\n     * @param {View/Field} other Other field component.\n     * @return {boolean} It returns `true` for equal value.\n     * @memberOf View/Field\n     * @instance\n     */\n    equals: function(other) {\n        return this.type === other.type && _.isEqual(this.getFormattedValue(), other.getFormattedValue());\n    },\n\n    // FIXME: THIS METHOD NEEDS TO BE DOCUMENTED!\n    closestComponent: function(name) {\n        if (!this.view) {\n            return;\n        }\n        if (this.view.name === name) {\n            return this.view;\n        }\n        return this.view.closestComponent(name);\n    }\n});\n\nmodule.exports = Field;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Currency = require('../utils/currency');\nconst DateUtils = require('../utils/date');\nconst Field = require('./field');\nconst Utils = require('../utils/utils');\nconst Language = require('../core/language');\nconst Layout = require('./layout');\nconst Template = require('./template');\nconst View = require('./view');\nconst ViewManager = require('./view-manager');\n\n/**\n * Handlebars helpers.\n *\n * These functions are to be used in\n * {@link http://handlebarsjs.com|Handlebars} templates.\n *\n * Example:\n * ```\n * // to register all the helpers at once\n * Handlebars.registerHelper(require('./hbs-helpers'));\n *\n * // to register a single helper\n * const HbsHelpers = require('./hbs-helpers');\n * Handlebars.registerHelper('fieldOfType', HbsHelpers.fieldOfType);\n * ```\n *\n * @module View/HbsHelpers\n */\n\n/**\n * @alias module:View/HbsHelpers\n */\nconst Helpers = {\n    /**\n     * Creates a field widget.\n     *\n     * Example:\n     * ```\n     * {{field view model=mymodel template=edit parent=fieldset}}\n     * ```\n     *\n     * @param {View/View} view Parent view\n     * @param {Object} [options] Optional params to pass to the field.\n     * @param {Backbone.Model} [options.model] The model associated with the field.\n     * @param {string} [options.template] The name of the template to be used.\n     * @param {Field} [options.parent] The parent field of this field.\n     * @return {Handlebars.SafeString} HTML placeholder for the widget.\n     */\n    field: function(view, options) {\n        var field = ViewManager.createField({\n            def: this,\n            viewDefs: this,\n            view: view,\n            model: options.hash.model,\n            viewName: options.hash.template\n        });\n\n        if (options.hash.parent && _.isArray(options.hash.parent.fields)) {\n            options.hash.parent.fields.push(field);\n        }\n\n        return field.getPlaceholder();\n    },\n\n    /**\n     * Creates a field widget.\n     *\n     * This helper is used for fields that don't have a view definition.\n     *\n     * @param {string} type Field type.\n     * @param {string} label Label key.\n     * @return {Handlebars.SafeString} HTML placeholder for the widget.\n     */\n    fieldOfType: function(type, label) {\n        var def = {\n            type: type,\n            name: type,\n            label: label\n        };\n\n        var field = ViewManager.createField({\n            def: def,\n            view: this\n        });\n\n        return field.getPlaceholder();\n    },\n\n    /**\n     * Creates a layout or a view in a given layout.\n     *\n     * @param {View/Layout} layout Layout that the new layout should be created in.\n     * @param {string} name Name of the component to be created.\n     * @return {Handlebars.SafeString} The placeholder text for the component.\n     */\n    component: function(layout, name) {\n        var viewDef,\n            newComponent,\n            placeholder = '';\n\n        viewDef = _.find(layout.meta.components, function(defs) {\n            var componentName,\n                componentDef;\n\n            componentDef = defs.layout || defs.view;\n\n            if (_.isString(componentDef)) {\n                componentName = componentDef;\n            } else {\n                componentName = componentDef.name || componentDef.type;\n            }\n\n            return componentName === name;\n        });\n\n        if (_.isObject(viewDef) && !_.isEmpty(viewDef)) {\n            newComponent = layout.initComponents([viewDef])[0];\n            viewDef.initializedInTemplate = true;\n            placeholder = newComponent.getPlaceholder();\n        }\n\n        return placeholder;\n    },\n\n    /**\n     * Iterates through options specified by a key.\n     *\n     * The options collection is retrieved from the language helper.\n     *\n     * @param {string} key Options key.\n     * @param {Function} hbsOptions HBS options.\n     * @return {string} HTML string.\n     */\n    eachOptions: function(key, hbsOptions) {\n        var options,\n            ret = \"\",\n            iterator;\n\n        // Retrieve app list strings\n        options = _.isString(key) ? Language.getAppListStrings(key) : key;\n\n        if (_.isArray(options)) {\n            iterator = function(element, index) {\n                ret = ret + hbsOptions.fn({key: index, value: element});\n            };\n        } else if (_.isObject(options)) { // Is object evaluates arrays to true, so put it second\n            iterator = function(value, key) {\n                ret = ret + hbsOptions.fn({key: key, value: value});\n            };\n        }\n        else {\n            options = null;\n        }\n\n        // Don't iterate if options is not iterable\n        if (options) _.each(options, iterator, this);\n\n        return ret;\n    },\n\n    /**\n     * Builds a route based on hashes sent on Handlebars helper.\n     *\n     * Example:\n     * ```\n     * {{buildRoute context=this.context}}\n     * {{buildRoute model=myModel action=\"create\"}}\n     * {{buildRoute module=\"Employees\" action=\"edit\"}}\n     * ```\n     *\n     * If both `module` and `model` are sent, `module` will take precedence\n     * over `model.module`. Similarly, `id` will take precedence over\n     * `model.id`.\n     *\n     * @param {Object} options Handlebars options hash.\n     * @param {Object} options.hash More parameters to be used by this helper.\n     *   It needs at least one of `options.hash.module`, `options.hash.model`\n     *   or `options.hash.context`.\n     * @param {string} [options.hash.module=options.hash.model.module]\n     *   The name of the module.\n     * @param {Data/Bean} [options.hash.model=options.hash.context.get('model')]\n     *   The model to extract the module and/or id.\n     * @param {Core/Context} [options.hash.context]\n     *   A context to extract the module from.\n     * @param {string} [options.hash.id=options.hash.model.id]\n     *   The id of the bean record.\n     * @param {string} [options.hash.action] The action name.\n     * @return {string} The built route.\n     */\n    buildRoute: function(options) {\n        var ctx = options.hash.context,\n            model = options.hash.model || ((ctx && ctx.get('model')) ? ctx.get('model') : {}),\n            module = options.hash.module || model.module || ((ctx && ctx.get('module')) ? ctx.get('module') : null),\n            id = options.hash.id || model.id,\n            action = options.hash.action;\n\n        return SUGAR.App.router.buildRoute(module, id, action);\n    },\n\n    /**\n     * Extracts the value of the given field from the given bean.\n     *\n     * @param {Data/Bean} bean Bean instance.\n     * @param {string} field Field name.\n     * @param {Object} [options] Additional options.\n     * @param {string} [options.hash.defaultValue=''] Default value to return\n     *   if field is not set on the bean.\n     * @return {string} Field value of the given bean. If field is not set the\n     *   default value or empty string.\n     */\n    fieldValue: function(bean, field, options) {\n        return bean.get(field) || options.hash.defaultValue || '';\n    },\n\n    /**\n     * Executes a given block if a given array has a value.\n     *\n     * @param {string|Object} val Value to look for.\n     * @param {Object|Array} array Array or hash object to check.\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if `val` is found.\n     * @param {Function} options.inverse The block to execute if `val` is not\n     *   found.\n     * @return {string} Result of the `block` execution if `array` contains\n     *   `val` or the result of the inverse block.\n     */\n    has: function(val, array, options) {\n        // Since we need to check both just val = val 2 and also if val is in an array, we cast\n        // non arrays into arrays\n        if (!_.isArray(array) && !_.isObject(array)) {\n            array = [array];\n        }\n\n        return _.include(array, val) ? options.fn(this) : options.inverse(this);\n    },\n\n    /**\n     * Executes a given block if a given array doesn't have a value.\n     *\n     * @param {string|Object} val Value to look for.\n     * @param {Object|Array} array Array or hash object to check.\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if `val` is not found.\n     * @param {Function} options.inverse The block to execute if `val` is\n     *   found.\n     * @return {string} Result of the `block` execution if the `array` doesn't\n     *   contain `val` or the result of the inverse block.\n     */\n    notHas: function(val, array, options) {\n        var fn = options.fn, inverse = options.inverse;\n        options.fn = inverse;\n        options.inverse = fn;\n\n        return Handlebars.helpers.has.call(this, val, array, options);\n    },\n\n    /**\n     * We require sortable to be the default if not defined in either field\n     * viewdefs or vardefs. Otherwise, we use whatever is provided in either\n     * field vardefs or fields viewdefs where the viewdef has more\n     * specificity.\n     *\n     * @param {string} module Module name.\n     * @param {Object} fieldViewdef The field view definition\n     *   (e.g. looping through meta.panels.field it will be 'this').\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if sortable.\n     * @return {string} Result of the `block` execution if sortable, otherwise\n     *   empty string.\n     */\n    isSortable: function(module, fieldViewdef, options) {\n        if (Utils.isSortable(module, fieldViewdef)) {\n            return options.fn(this);\n        } else {\n            return '';\n        }\n    },\n\n    /**\n     * Executes a given block if given values are equal.\n     *\n     * @param {string} val1 First value to compare.\n     * @param {string} val2 Second value to compare.\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if the given values\n     *   are equal.\n     * @param {Function} options.inverse The block to execute if the given\n     *   values are not equal.\n     * @return {string} Result of the `block` execution if the given values are\n     *   equal or the result of the inverse block.\n     */\n    eq: function(val1, val2, options) {\n        return val1 == val2 ? options.fn(this) : options.inverse(this);\n    },\n\n    /**\n     * Opposite of `eq` helper.\n     *\n     * @param {string} val1 first value to compare\n     * @param {string} val2 second value to compare.\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if the given values\n     *   are not equal.\n     * @param {Function} options.inverse The block to execute if the given\n     *   values are equal.\n     * @return {string} Result of the `block` execution if the given values are\n     *   not equal or the result of the inverse block.\n     */\n    notEq: function(val1, val2, options) {\n        return val1 != val2 ? options.fn(this) : options.inverse(this);\n    },\n\n    /**\n     * Same as the `eq` helper, but the second value is a (string) regex\n     * expression. This works around Handlebars' lack of support for regex\n     * literals.\n     *\n     * Note that modifiers are not supported.\n     *\n     * @param {string} val1 The string to test.\n     * @param {string} val2 The expression to match against. It will be passed\n     *   directly to the `RegExp` constructor.\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if `val1` matches\n     *   `val2`.\n     * @param {Function} options.inverse The block to execute if `val1` does\n     *   not match `val2`.\n     * @return {string} Result of the `block` execution if `val1` matches\n     *   `val2` or the result of the inverse block.\n     */\n    match: function(val1, val2, options) {\n        var re = new RegExp(val2);\n        if (re.test(val1)) {\n            return options.fn(this);\n        } else {\n            return options.inverse(this);\n        }\n    },\n\n    /**\n     * Same as the `notEq` helper but second value is a (string) regex\n     * expression. This works around Handlebars' lack of support for regex\n     * literals.\n     *\n     * Note that modifiers are not supported.\n     *\n     * @param {string} val1 The string to test.\n     * @param {string} val2 The expression to match against. It will be passed\n     *   directly to the `RegExp` constructor.\n     * @param {Object} options Additional options.\n     * @param {Function} options.fn The block to execute if `val1` does not\n     *   match `val2`.\n     * @param {Function} options.inverse The block to execute if `val` matches\n     *   `val2`.\n     * @return {string} Result of the `block` execution if the given values are\n     *   not equal or the result of the inverse block.\n     */\n    notMatch: function(val1, val2, options) {\n        var re = new RegExp(val2);\n        if (!re.test(val1)) {\n            return options.fn(this);\n        } else {\n            return options.inverse(this);\n        }\n    },\n\n    /**\n     * Logs a value.\n     *\n     * @param {*} value The value to log.\n     */\n    log: function(value) {\n        SUGAR.App.logger.debug(\"*****HBS: Current Context*****\");\n        SUGAR.App.logger.debug(this);\n        SUGAR.App.logger.debug(\"*****HBS: Current Value*****\");\n        SUGAR.App.logger.debug(value);\n        console.log(value);\n        SUGAR.App.logger.debug(\"***********************\");\n    },\n\n    /**\n     * Retrieves an i18n-ed string by key.\n     *\n     * @param {string} key Key of the label.\n     * @param {string} [module] Module name.\n     * @param {string} [content] Template content.\n     * @return {string} The string for the given label key.\n     */\n    str: function(key, module, content) {\n        module = _.isString(module) ? module : null;\n        return Language.get(key, module, content);\n    },\n\n    /**\n     * Creates a relative time element to display the human readable related\n     * time.\n     *\n     * To provide an automatic update of this relative time, use a plugin like\n     * {@link sugar.liverelativetime.js}.\n     *\n     * @param {string} iso8601 The ISO-8601 date string to be used for a new\n     *   date.\n     * @param {Object} options Handlebars options hash.\n     * @param {Object} options.hash More parameters to be used by this helper.\n     * @param {string} [options.hash.title] The title attribute. Defaults to\n     *   current user date/time preference format.\n     * @param {boolean} [options.hash.dateOnly] Setting this to `true` will\n     *   format the `title` attribute with the user-formatted date only.\n     * @return {string} The relative time like `10 minutes ago`.\n     */\n    relativeTime: function(iso8601, options) {\n        var date = DateUtils(iso8601);\n        var attrs, html;\n\n        options.hash.title = options.hash.title || date.formatUser(options.hash.dateOnly);\n\n        attrs = _.map(options.hash, function(attr, key) {\n            return key + '=\"' + Handlebars.Utils.escapeExpression(attr) + '\"';\n        }).join(' ');\n\n        // TODO we need to support dateOnly on formatNow().\n        html = '<time datetime=\"' + date.format() + '\" ' + attrs + '>' + date.fromNow() + '</time>';\n\n        return new Handlebars.SafeString(html);\n    },\n\n    /**\n     * Joins all the elements of an array by a glue string.\n     *\n     * @param {string[]} array Array of strings to join.\n     * @param {string} glue The string to join them with.\n     * @return {string} All of the strings joined with the given `glue`.\n     */\n    arrayJoin: function(array, glue) {\n        return array.join(glue);\n    },\n\n    /**\n     * Converts `\\r\\n`, `\\n\\r`, `\\r`, and `\\n` to `<br>`.\n     *\n     * @param {string} s The raw string to filter.\n     * @return {Handlebars.SafeString} The given `s` with all newline\n     *   characters converted to `<br>` tags.\n     */\n    nl2br: function(s) {\n        s = Handlebars.Utils.escapeExpression(s);\n        var nl2br = s.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + '<br>');\n        return new Handlebars.SafeString(nl2br);\n    },\n\n    /**\n     * Formats a given currency amount according to user preferences.\n     *\n     * @param {number} number The number to format.\n     * @param {string|Object} currencyId  The currency identifier.\n     * @return {string} The formatted number.\n     */\n    formatCurrency: function(number, currencyId) {\n        if (_.isObject(currencyId)) {\n            currencyId = currencyId.hash.currencyId || undefined;\n        }\n        return Currency.formatAmountLocale(number, currencyId);\n    },\n\n    /**\n     * Formats a given string by returning the first n characters.\n     *\n     * @param {string} text The text to trim.\n     * @param {number} n The number of characters to return.\n     * @return {string} The first `n` characters of `text`.\n     */\n    firstChars: function(text, n) {\n        return text.substring(0, n);\n    },\n\n    /**\n     * Formats a given date according to user preferences.\n     *\n     * @param {Date|string} date The date to format.\n     * @param {Object} [options] More attributes to be used on this element for\n     *   reuse.\n     * @param {Object} [options.hash] More parameters to be used by this helper.\n     * @param {boolean} [options.hash.dateOnly] Flag to determine whether to\n     *   return just date current user date/time preference format.\n     * @return {string} The formatted date.\n     */\n    formatDate: function(date, options) {\n        date = DateUtils(date);\n        return date.formatUser(options.hash.dateOnly);\n    },\n\n    /**\n     * Gets the translated module name (plural or singular).\n     *\n     * For instance, to get the singular version of the module name (make sure\n     * `LBL_MODULE_NAME_SINGULAR` is defined in the module language strings of\n     * your module):\n     *\n     * ```\n     * {{getModuleName 'Accounts'}}\n     * ```\n     *\n     * To get the plural version, set `plural` to true and make sure\n     * `LBL_MODULE_NAME` is defined in the module language strings of your\n     * module:\n     *\n     * ```\n     * {{getModuleName 'Accounts' plural=true}}\n     * ```\n     *\n     * You can pass a default value that will be returned in case the module\n     * language string of your module is not found. The following example will\n     * return 'Module' (since `LBL_MODULE` is defined in the module strings or\n     * the app strings):\n     *\n     * ```\n     * {{getModuleName 'undefinedModule' defaultValue='LBL_MODULE'}}\n     * ```\n     *\n     * In the worst case scenario (the module language string is not found and\n     * no default value is specified), the module key name is returned. The\n     * following example will return 'undefinedModule':\n     *\n     * ```\n     * {{getModuleName 'undefinedModule'}}\n     * ```\n     *\n     * @param {string} module The module defined in the language strings.\n     * @param {Object} [options] Optional params to pass to the helper.\n     * @param {Object} [options.hash] More parameters to be used by this helper.\n     * @param {boolean} [options.hash.plural] Returns the plural form if `true`,\n     *   singular otherwise.\n     * @param {string} [options.hash.defaultValue] Value to be returned if the\n     *   module language string is not found.\n     * @return {string} The module name.\n     */\n    getModuleName: function(module, options) {\n        var opts = {\n            plural: options.hash.plural,\n            defaultValue: options.hash.defaultValue\n        };\n        return Language.getModuleName(module, opts);\n    },\n\n    /**\n     * Helper for rendering a partial template. This helper can load a partial\n     * from the `templateOptions` or from the same relative location as the\n     * current template.\n     *\n     * ```\n     * {{partial 'partial-name' componentFrom defaultProperties dynamicProperty=value}}\n     * ```\n     *\n     * The data supplied to the partial with be an object with the list of\n     * `dynamicProperty`s merged into `defaultProperties` object (defaults to\n     * empty object if not explicitly passed).\n     *\n     * For fields:\n     *\n     * ```\n     * {{partial 'edit' this properties fallbackTemplate='detail'}}\n     * ```\n     *\n     * For layouts:\n     *\n     * ```\n     * {{partial 'ActivityStream' this properties}}\n     * ```\n     *\n     * For views:\n     *\n     * ```\n     * {{partial 'record' this properties}}\n     * ```\n     *\n     * @param {string} name Name of the partial.\n     * @param {View/Component} component The view component.\n     * @param {Object} [properties] Data supplied to the partial. `options.hash`\n     *   is merged into this before it is used for the template. This allows the\n     *   partial to provide dynamic parameters on top of the default properties.\n     *   The original component is kept as `templateComponent` in these\n     *   properties.\n     * @param {Object} [options] Optional parameters.\n     * @param {Object} [options.hash] The hash of the optional params.\n     * @param {Object} [options.hash.module=component.module] Module to use.\n     * @param {Object} [options.hash.fallbackTemplate] Fallback template for\n     *   field partials.\n     * @return {Handlebars.SafeString} The HTML of the partial template.\n     */\n    partial: function(name, component, properties, options) {\n        var module, template, data;\n\n        // `properties` is optional, so `options` is `properties` is no `properties` is passed.\n        if (!options && properties.hash) {\n            options = properties;\n            properties = {};\n        }\n\n        // Data supplied to the partial\n        data = _.extend({templateComponent: component}, properties, options.hash);\n\n        module = options.hash.module || component.module;\n        if (component && component.options && component.options.templateOptions && component.options.templateOptions.partials) {\n            template = component.options.templateOptions.partials[name];\n        }\n        // TODO: need to do recursive walk up the tree if template is not found, until we find it.\n        // see _super in component.js for an example\n        else if (component instanceof Field) {\n            var fallbackTemplate = options.hash.fallbackTemplate;\n            template = Template.getField(\n                component.type, // field type\n                name || 'detail', // template name\n                module,\n                fallbackTemplate);\n        }\n        else if (component instanceof View) {\n            var templateName = component.tplName;\n\n            //FIXME SC-3363 use the real inheritance chain when loading partial templates\n            //Try the current component first in case the template was overridden.\n            template = Template.getView(component.name + '.' + name, module) ||\n                Template.getView(component.name + '.' + name);\n\n            if (!template && templateName) {\n                template = Template.getView(templateName + '.' + name, module) ||\n                    Template.getView(templateName + '.' + name);\n            }\n        }\n        else if (component instanceof Layout) {\n            template = Template.getLayout(component.name + '.' + name, module) ||\n                Template.getLayout(component.name + '.' + name);\n        }\n        return new Handlebars.SafeString(template ? template(data) : '');\n    }\n};\n\nmodule.exports = Helpers;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Component = require('./component');\nconst PluginManager = require('../core/plugin-manager');\nconst Template = require('./template');\nconst ViewManager = require('./view-manager');\n\n/**\n * The Layout Object is a definition of views and their placement on a certain\n * 'page'.\n *\n * Use {@link module:Sidecar/View/ViewManager Sidecar/View/ViewManager} to\n * create instances of layouts.\n *\n * ### A Quick Guide for Creating a Layout Definition\n *\n * Creating Layouts is easy. All it takes is adding the appropriate metadata\n * file. Let's create a layout called **`SampleLayout`**.\n *\n * #### The Layout File and Directory Structure\n * Layouts are located in the **`modules/MODULE/metadata/layouts`** folder. Add\n * a file called **`SampleLayout.php`** in the folder and it should be picked\n * up in the next metadata sync call.\n *\n * #### The Metadata\n * ```\n * $viewdefs['MODULE']['PLATFORM (portal / mobile / base)']['layout']['samplelayout'] = array(\n *     'type' => 'columns',\n *     'components' => array(\n *         0 => array(\n *             'layout' => array(\n *             'type' => 'column',\n *             'components' => array(\n *                 array(\n *                     'view' => 'list',\n *                 ),\n *                 array(\n *                     'view' => 'list',\n *                     'context' => array(\n *                         'module' => 'Leads',\n *                     ),\n *                 ),\n *             ),\n *         ),\n *     ),\n * );\n * ```\n *\n * As you can see we are defining a column style layout with two subcomponents: A normal list view\n * of the MODULE, and also a list view of Leads.\n *\n * #### Accessing the New Layout\n * The last step is to add a route in the Router to display the new layout. // TODO: Custom routes?\n *\n * @module View/Layout\n * @class\n * @extends View/Component\n */\nconst Layout = Component.extend({\n    initialize: function(options) {\n        PluginManager.attach(this, 'layout');\n        Component.prototype.initialize.call(this, options);\n\n        this._components = [];\n\n        this.meta = this.meta || {};\n\n        this.type = this.meta.type || this.options.type;\n\n        /**\n         * Layout Name.\n         * @type {string}\n         * @memberOf View/Layout\n         * @name name\n         * @instance\n         */\n        this.name = this.meta.name || this.options.name || this.type || \"\";\n\n        /**\n         * Layout Label.\n         * @type {string}\n         * @memberOf View/Layout\n         * @name label\n         * @instance\n         */\n        if (this.meta.label) {\n            this.label = this.meta.label;\n        } else if (this.options.def && this.options.def.label) {\n            this.label = this.options.def.label;\n        } else if (this.options.label) {\n            this.label = this.options.label;\n        } else {\n            this.label = '';\n        }\n\n        /**\n         * Reference to the parent layout instance.\n         * @type {View/Layout}\n         * @memberOf View/Layout\n         * @name layout\n         * @instance\n         */\n        this.layout = this.options.layout;\n\n        this._loadTemplate(options);\n\n        if (this.template) {\n            // Need to do .append() rather than .html() because we create new components\n            // in templates. By performing .html(), we remove that component from the document.\n            this.$el.append(this.template(this, options));\n            this.placeComponentsFromTemplate();\n        }\n\n        if (this.meta.lazy_loaded) {\n            /**\n             * Holds the components metadata in case if it is a lazy loaded\n             * layout. This property should be used to to initialize\n             * components manually.\n             *\n             * @type {Array}\n             * @protected\n             * @memberOf View/Layout\n             * @name _componentsMeta\n             * @instance\n             */\n            this._componentsMeta = this.meta.components;\n            this.meta.components = [];\n        }\n\n        SUGAR.App.events.on('app:locale:change', function() {\n            this.render();\n        }, this);\n    },\n\n    /**\n     * Sets the appropriate template for this layout to {@link #template}.\n     *\n     * Gets the template from this layout's module, or falls back to the\n     * module specified in the `loadModule` meta property, or falls back to\n     * base.\n     *\n     * @param {Object} [options] A hash of options.\n     * @param {string} [options.loadModule] The fallback module to get the\n     *   template from.\n     * @private\n     * @memberOf View/Layout\n     * @instance\n     */\n    _loadTemplate: function (options) {\n        options = options || {};\n        if (this.meta.template) {\n            this.template = Template.getLayout(this.meta.template, this.module) ||\n                Template.getLayout(this.meta.template, options.loadModule);\n            return;\n        }\n\n        var tpl = Template.getLayout(this.name, this.module) ||\n            Template.getLayout(this.type, this.module);\n        if (!tpl) {\n            if (options.loadModule) {\n                tpl = Template.getLayout(this.name, options.loadModule) ||\n                    Template.getLayout(this.type, options.loadModule);\n            } else {\n                tpl = Template.getLayout(this.name) ||\n                    Template.getLayout(this.type);\n            }\n        }\n\n        this.template = tpl;\n    },\n\n    /**\n     * Move components created in templates to their appropriate placeholders.\n     *\n     * @memberOf View/Layout\n     * @instance\n     */\n    placeComponentsFromTemplate: function() {\n        var componentElems = {};\n\n        if (_.isEmpty(this._components)) {\n            return;\n        }\n\n        this.$('span[cid]').each(function() {\n            var $this = $(this),\n                cid = $this.attr('cid');\n\n            componentElems[cid] = $this;\n        });\n\n        _.each(this._components, function(component) {\n            var $placeholder = componentElems[component.cid];\n            if ($placeholder) {\n                $placeholder.replaceWith(component.el);\n            }\n        }, this);\n    },\n\n    /**\n     * Creates subcomponents in the layout and appends them to the layout's\n     * {@link #_components}. It recursively initializes all components\n     * within the specified subcomponents.\n     *\n     * Calls {@link View/Layout#_addComponentsFromDef} to help add components.\n     * Triggers `init` on this layout once all subcomponent initializes.\n     *\n     * Immediate subcomponent will default to the passed in context and\n     * module.\n     *\n     * Subsequent subcomponents will default to their parents' context and\n     * module.\n     *\n     * @param {Array} [components=this.meta.components] The definitions of\n     *   the subcomponents.\n     * @param {Object} [context] Context to pass to the new components.\n     * @param {string} [module] Module to create the components from.\n     * @return {Array} initialized components\n     * @memberOf View/Layout\n     * @instance\n     */\n    initComponents: function(components, context, module) {\n        if (this.disposed) {\n            return;\n        }\n\n        var newSubComponents, initialLength;\n        components = components || this.meta.components;\n\n        initialLength = this._components.length;\n        this._addComponentsFromDef(components, context, module);\n        newSubComponents = this._components.slice(initialLength);\n\n        _.each(newSubComponents, function(comp) {\n            if (_.isFunction(comp.initComponents)) {\n                comp.initComponents();\n            }\n        });\n\n        this.trigger('init');\n\n        return newSubComponents;\n    },\n\n    /**\n     * Creates a component based on the given metadata, context and module.\n     *\n     * @param {Object} def Metadata defining this component.\n     * @param {Core/Context} context Default context to pass to the new\n     *   component. (Will be overridden by the context in 'def' param, if\n     *   defined).\n     * @param {string} module The module to pass to the component.\n     *   (Will be overridden by the context's module in 'def' param, if\n     *   defined).\n     * @return {View/Layout|View/View} The created component.\n     * @memberOf View/Layout\n     * @instance\n     */\n    createComponentFromDef: function(def, context, module) {\n        context = context || this.context;\n        module = module || this.module;\n\n        // Switch context if necessary\n        if (def.context) {\n            if (def.context instanceof SUGAR.App.Context) {\n                context = def.context;\n            } else {\n                context = context.getChildContext(def.context);\n                context.prepare();\n            }\n\n            module = context.get('module');\n        }\n\n        // Layouts/Views can either by referenced by name or have metadata defined inline\n        if (def.view) {\n            if (_.isString(def.view)) {\n                return ViewManager.createView({\n                    context: context,\n                    name: def.view,\n                    def: def,\n                    module: module,\n                    loadModule: def.loadModule,\n                    primary: def.primary,\n                    layout: this\n                });\n            } else if (_.isObject(def.view)) {\n                //Inline definition of a sublayout\n                return ViewManager.createView({\n                    context: context,\n                    module: module,\n                    loadModule: def.loadModule,\n                    meta: def.view,\n                    type: def.view.type,\n                    name: def.view.name,\n                    primary: def.view.primary,\n                    layout: this\n                });\n            }\n        } else if (def.layout) {\n            if (_.isString(def.layout)) {\n                return ViewManager.createLayout({\n                    context: context,\n                    name: def.layout,\n                    def: def,\n                    module: module,\n                    loadModule: def.loadModule,\n                    layout: this\n                });\n            } else if (_.isObject(def.layout)) {\n                //Inline definition of a sublayout\n                return ViewManager.createLayout({\n                    context: context,\n                    module: module,\n                    loadModule: def.loadModule,\n                    meta: def.layout,\n                    type: def.layout.type,\n                    name: def.layout.name,\n                    def: def,\n                    layout: this\n                });\n            }\n        } else {\n            SUGAR.App.logger.warn('Invalid layout definition:\\n' + def.layout);\n        }\n    },\n\n    /**\n     * Creates and adds components to the current layout.\n     *\n     * Calls {@link View/Layout#addComponent} to help add components.\n     * Calls {@link View/Layout#createComponentFromDef} to help create\n     * components.\n     *\n     * @param {Array} [components=[]] The components to be created.\n     * @param {Object} [context] Context to pass to the new components.\n     * @param {string} [module] Module to create the components from.\n     * @protected\n     * @memberOf View/Layout\n     * @instance\n     */\n    _addComponentsFromDef: function(components, context, module) {\n        components = components || [];\n        _.each(components, function(def) {\n            // If component has already been initialized by the template, do\n            // not initialize again.\n            if (def.initializedInTemplate) {\n                delete def.initializedInTemplate;\n                return;\n            }\n\n            if (def.view || def.layout) {\n                this.addComponent(this.createComponentFromDef(def, context, module), def);\n            }\n        }, this);\n    },\n\n    /**\n     * Adds a component to this layout.\n     *\n     * @param {View/Layout|View/View} component Component (view or layout) to add.\n     * @param {Object} def Metadata definition.\n     * @memberOf View/Layout\n     * @instance\n     */\n    addComponent: function(component, def) {\n        if (!component.layout) component.layout = this;\n        this._components.push(component);\n        this._placeComponent(component, def); // Some implementations of placeComponent require a def\n    },\n\n    /**\n     * Places layout component in the DOM.\n     *\n     * Default implementation just appends all the components to itself.\n     * Override this method to support custom placement of components.\n     *\n     * @param {View/View|View/Layout} component View or layout component.\n     * @protected\n     * @memberOf View/Layout\n     * @instance\n     */\n    _placeComponent: function(component) {\n        this.$el.append(component.el);\n    },\n\n    /**\n     * Removes a component from this layout.\n     *\n     * @param {View/Layout|View/View|number} component The layout or view to\n     *   remove. If given as a number, remove the component at that index.\n     * @memberOf View/Layout\n     * @instance\n     */\n    removeComponent: function(component) {\n        var i = _.isNumber(component) ? component : this._components.indexOf(component);\n\n        if (i > -1) {\n            var removed = this._components.splice(i, 1);\n            removed[0].layout = null;\n        }\n    },\n\n    /**\n     * Gets a component by name.\n     *\n     * @param {string} name Component name.\n     * @return {View/View|View/Layout} Component with the given name.\n     * @memberOf View/Layout\n     * @instance\n     */\n    getComponent: function (name) {\n        return _.find(this._components, function(component) {\n            return component.name === name;\n        });\n    },\n\n    /**\n     * Renders all the components.\n     *\n     * @return {View/Layout} The instance of this layout.\n     * @protected\n     * @memberOf View/Layout\n     * @instance\n     */\n    _render: function() {\n        if (this._components && this._components.length > 0) {\n            //default layout will pass render container divs and pass down to all its views.\n            _.each(this._components, function(component) {\n                component.render();\n            }, this);\n        } else {\n            SUGAR.App.logger.info(\"Can't render anything because the layout has no components: \" + this.toString() +\n                '\\nEither supply metadata or override Layout.render method');\n        }\n        return this;\n    },\n\n    /**\n     * Fetches data for layout's model or collection.\n     *\n     * The default implementation first calls the {@link Core/Context#loadData}\n     * method for the layout's context and then iterates through the components\n     * and calls their {@link View/Component#loadData} method, setting their\n     * contexts' `fields` property beforehand.\n     *\n     * Override this method to provide a custom fetch algorithm.\n     *\n     * @param {Object} [options] Options that are passed to\n     *   collection/model's fetch method.\n     * @memberOf View/Layout\n     * @instance\n     */\n    loadData: function (options) {\n        if (this.disposed) {\n            return;\n        }\n\n        this.context.loadData(options);\n\n        _.each(this._components, function(component) {\n            component.loadData(options);\n        }, this);\n    },\n\n    /**\n     * Gets a list of all fields used on this layout and its sub layouts/views.\n     *\n     * @param {string} [module=this.module] Module name.\n     * @return {Array} The list of fields used by this layout.\n     * @memberOf View/Layout\n     * @instance\n     */\n    getFieldNames: function(module) {\n        var fields = [];\n        module = module || this.module;\n        _.each(this._components, function(component) {\n            if (component.module == module) {\n                fields = _.union(fields, component.getFieldNames(null, true));\n            }\n        }, this);\n\n        return fields;\n    },\n\n    /**\n     * Gets a hash of fields that are currently displayed on this layout.\n     *\n     * The hash has field names as keys and field definitions as values.\n     * @param {string} [module] Module name.\n     * @return {Object} The currently displayed fields.\n     * @memberOf View/Layout\n     * @instance\n     */\n    getFields: function(module) {\n        var fields = {};\n        _.each(this._components, function(component) {\n            _.extend(fields, component.getFields(module));\n        });\n        return fields;\n    },\n\n    // FIXME: this needs to be documented!\n    closestComponent: function(name) {\n        if (!this.layout) {\n            return;\n        }\n        if (this.layout.name === name) {\n            return this.layout;\n        }\n        return this.layout.closestComponent(name);\n    },\n\n\n    /**\n     * @inheritdoc\n     * @memberOf View/Layout\n     * @instance\n     */\n    _show: function() {\n        Component.prototype._show.call(this);\n        _.each(this._components, function(component) {\n            component.updateVisibleState(true);\n        });\n    },\n\n    /**\n     * @inheritdoc\n     * @memberOf View/Layout\n     * @instance\n     */\n    _hide: function() {\n        Component.prototype._hide.call(this);\n        _.each(this._components, function(component) {\n            component.updateVisibleState(true);\n        });\n    },\n\n    /**\n     * Disposes a layout.\n     *\n     * Disposes each of this layout's components and calls the\n     * {@link View/Component#_dispose} method of the base class.\n     *\n     * @protected\n     * @memberOf View/Layout\n     * @instance\n     */\n    _dispose: function() {\n        PluginManager.detach(this, 'layout');\n        this._disposeComponents();\n        Component.prototype._dispose.call(this);\n    },\n\n    /**\n     * Disposes the layout's components and empties the `_components`\n     * property.\n     *\n     * @private\n     * @memberOf View/Layout\n     * @instance\n     */\n    _disposeComponents: function() {\n        _.each(this._components, function(component) {\n            component.dispose();\n        });\n        this._components = [];\n    },\n\n    /**\n     * Gets a string representation of this layout.\n     *\n     * @return {string} String representation of this layout.\n     * @memberOf View/Layout\n     * @instance\n     */\n    toString: function() {\n        return \"layout-\" + (this.options.type || this.options.name) + \"-\" +\n            Component.prototype.toString.call(this);\n    }\n});\n\nmodule.exports = Layout;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\n//Pull the precompile header and footer from the node precompile implementation for handlebars\nvar _header = \"(function() {\\n  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};\\n\",\n    _footer = '})();',\n    _templates = {},\n    _sources = {};\n\n/**\n * Manages {@link http://handlebarsjs.com|Handlebars} templates.\n *\n * @module View/Template\n */\n\n/**\n * @alias module:View/Template\n */\nconst TemplateManager = {\n    /**\n     * Loads templates from local storage and populates the `Handlebars.templates` collection.\n     */\n    init: function() {\n        _templates = SUGAR.App.config.cacheMeta ? SUGAR.App.cache.get('templates') || {} : {};\n        var src = '';\n        _.each(_templates, function(t) {\n            src += t;\n        });\n\n        try {\n            eval(_header + src + _footer);\n        }\n        catch (e) {\n            SUGAR.App.logger.error('Failed to eval templates retrieved from local storage:\\n' + e);\n            // TODO: Trigger app:error event\n        }\n    },\n\n    /**\n     * Used to register a template src without compiling the template yet.\n     * The template will be compiled the first time it is used (requested\n     * with `getView`/`getLayout`/`getField`).\n     *\n     * @param {Array} tpl The template as `[key, compiled]` pair.\n     * @param {string} src The template content (.hbs file).\n     * @param {boolean} [force=false] `true` to force recompilation on it.\n     * @private\n     */\n    _add: function(tpl, src, force) {\n        var key = tpl[0],\n            loaded = this.get(key, false);\n        if (loaded && !force) {\n            return;\n        }\n        //If we have already loaded this template but with a different source, we need to mark it for recompilation\n        if (loaded && force && _sources[key] != src) {\n            _templates[key] = Handlebars.templates[key] = null;\n        }\n        _sources[key] = src;\n    },\n\n    /**\n     * Caches a template and compiles it if necessary.\n     *\n     * @param {Array} tpl The first item is the template key. The second item\n     *   is optional and is the precompiled template function.\n     * @param {string} src Template source code.\n     * @param {boolean} [force=false] Flag indicating if the template must\n     *   be re-compiled.\n     * @return {Function} The compiled template.\n     * @private\n     */\n    _compile: function(tpl, src, force) {\n        Handlebars.templates = Handlebars.templates || {};\n        _templates[tpl[0]] = Handlebars.templates[tpl[0]] = (force || !tpl[1]) ? this.compile(tpl[0], src) : tpl[1];\n        return _templates[tpl[0]];\n    },\n\n    /**\n     * Compiles a template.\n     *\n     * This method caches the precompiled version of the template\n     * and returns the compiled template. The template can be accessed\n     * directly via `Handlebars.templates[key]`.\n     *\n     * @param {string} key Identifier of the template to be compiled.\n     * @param {string} src The actual template source to be compiled.\n     * @return {Function} The compiled template.\n     */\n    compile: function(key, src) {\n        try {\n            _templates[key] = \"templates['\" + key + \"'] = template(\" + Handlebars.precompile(src) + \");\\n\";\n            eval(_header + _templates[key] + _footer); // jshint ignore:line\n        } catch (e) {\n            // Invalid templates will cause a JS error when they either pre-compile or compile.\n            SUGAR.App.logger.error(\"Failed to compile or eval template \" + key + \".\\n\" + e);\n        }\n        return this.get(key, false) || this.empty;\n    },\n\n    /**\n     * Retrieves a compiled Handlebars template.\n     *\n     * @param {string} key Identifier of the template to be retrieved.\n     * @param {boolean} [compile=true] Force the template to compile if we\n     *   have uncompiled source.\n     * @return {Function} The compiled template.\n     */\n    get: function(key, compile) {\n        //Undefined should default to true for compiled (not passed means compile)\n        compile = _.isUndefined(compile) || compile;\n        if (compile && !Handlebars.templates[key] && _sources[key]) {\n            this._compile([key], _sources[key]);\n        }\n        return Handlebars.templates ? Handlebars.templates[key] : null;\n    },\n\n    // Convenience private method\n    _getView: function(name, module, compile) {\n        var key = name + (module ? ('.' + module) : '');\n        return [key, this.get(key, compile)];\n    },\n\n    /**\n     * Gets the compiled template for a view.\n     *\n     * @param {string} name View name.\n     * @param {string} [module] Module name.\n     * @return {Function} The compiled template.\n     */\n    getView: function(name, module) {\n        return this._getView(name, module, true)[1];\n    },\n\n    // Convenience private method\n    _getField: function(type, view, module, fallbackTemplate, skipFallbacks, compile) {\n       var foundTemplate,\n           prefix = \"f.\" + type + \".\",\n           key = prefix + (module ? (module + \".\") : \"\") + view;\n\n        module += \".\";\n\n       // get the module specific one first, then try the base one for this view\n       foundTemplate = this.get(prefix + module + view, compile) || this.get(prefix + view, compile);\n        //skipfallbacks indicates we should only check for the requested field,\n       if (!foundTemplate && !skipFallbacks)\n       {\n           foundTemplate = this.get(prefix + module + fallbackTemplate, compile) || this.get(prefix + fallbackTemplate, compile);\n           // If we got nothing for the requested fallback, use base as the last ditch fallback\n           if (!foundTemplate) {\n               foundTemplate = this.get('f.base.' + view, compile) || this.get('f.base.' + fallbackTemplate, compile);\n           }\n       }\n       return [key, foundTemplate];\n   },\n\n    /**\n     * Gets the compiled template for a field.\n     *\n     * @param {string} type Field type.\n     * @param {string} view View name.\n     * @param {string} module The module the field is from.\n     * @param {boolean} [fallbackTemplate=true] Template name to fall back\n     *   to if the template for `view` is not found.\n     * @return {Function} The compiled template.\n     */\n    getField: function(type, view, module, fallbackTemplate) {\n        return this._getField(type, view, module, fallbackTemplate, false, true)[1];\n    },\n\n    // Convenience private method\n    _getLayout: function(name, moduleName, compile) {\n        var key = 'l.' + (moduleName ? (moduleName + '.') : '') + name;\n        return [key, this.get(key, compile)];\n    },\n\n    /**\n     * Gets the compiled template for a layout.\n     *\n     * @param {string} [name] Layout name.\n     * @param {string} [moduleName] Module name.\n     * @return {Function} The compiled template.\n     */\n    getLayout: function(name, moduleName) {\n        return this._getLayout(name, moduleName, true)[1];\n    },\n\n    /**\n     * Compiles a view template and puts it into local storage.\n     *\n     * @param {string} name View name.\n     * @param {string} module Module name.\n     * @param {string} src Template source code.\n     * @param {boolean} [force=false] Flag indicating if the template must\n     *   be re-compiled.\n     * @return {Function} The compiled template.\n     */\n    setView: function(name, module, src, force) {\n        return this._add(this._getView(name, module, false), src, force);\n    },\n\n    /**\n     * Compiles a field template and puts it into local storage.\n     *\n     * @param {string} type Field type.\n     * @param {string} view View name.\n     * @param {string} module The module the field is from.\n     * @param {string} src Template source code.\n     * @param {boolean} [force=false] Flag indicating if the template must\n     *   be re-compiled.\n     * @return {Function} The compiled template.\n     */\n    setField: function(type, view, module, src, force) {\n        // Don't fall back to default template (false flag)\n        return this._add(this._getField(type, view, module, null, true, false), src, force);\n    },\n\n    /**\n     * Compiles a layout template and puts it into local storage.\n     *\n     * @param {string} name Layout name.\n     * @param {string} [moduleName] Module Name.\n     * @param {string} src Template source code.\n     * @param {boolean} [force=false] Flag indicating if the template must\n     *   be re-compiled.\n     * @return {Function} The compiled template.\n     */\n    setLayout: function(name, moduleName, src, force) {\n        return this._add(this._getLayout(name, moduleName, false), src, force);\n    },\n\n    /**\n     * Registers view, layout, and field templates from metadata payload\n     * for later \"lazy\" on-demand compilation.\n     *\n     * The metadata must contain the following sections:\n     *\n     * ```\n     * {\n     *    // This should now be deprecated\n     *    \"view_templates\": {\n     *       \"detail\": HB template source,\n     *       \"list\": HB template source,\n     *       // etc.\n     *    },\n     *\n     *    \"sugarFields\": {\n     *        \"text\": {\n     *            \"templates\": {\n     *               \"default\": HB template source,\n     *               \"detail\": HB template source,\n     *               \"edit\": ...,\n     *               \"list\": ...\n     *            }\n     *        },\n     *        \"bool\": {\n     *           // templates for boolean field\n     *        },\n     *        // etc.\n     *    }\n     *\n     *    \"views\": {\n     *      \"text\": {\n     *          \"templates\" {\n     *              \"view\": HB template source...\n     *              \"view2\": HB template source..\n     *          }.\n     *    }\n     * }\n     * ```\n     *\n     * @param {Object} metadata Metadata payload.\n     * @param {boolean} [force=false] Flag indicating if the cache is\n     *   ignored and the templates are to be recompiled.\n     */\n    set: function(metadata, force) {\n        if (metadata.views) {\n            _.each(metadata.views, function(view, name) {\n                if (name != '_hash') {\n                    _.each(view.templates, function(src, key) {\n                        key = name == key ? key : name + '.' + key;\n                        this.setView(key, null, src, force);\n                    }, this);\n                }\n            }, this);\n        }\n\n        if (metadata.fields) {\n            _.each(metadata.fields, function(field, type) {\n                if (type != '_hash') {\n                    _.each(field.templates, function(src, view) {\n                        this.setField(type, view, null, src, force);\n                    }, this);\n                }\n            }, this);\n        }\n\n        if (metadata.layouts) {\n            _.each(metadata.layouts, function(layout, type) {\n                if (type != '_hash') {\n                    _.each(layout.templates, function(src, key) {\n                        key = type == key ? key : type + '.' + key;\n                        this.setLayout(key, null, src, force);\n                    }, this);\n                }\n            }, this);\n        }\n\n    },\n\n    /**\n     * A precompiled empty template function.\n     *\n     * @return {string} The empty string.\n     */\n    empty: function() {\n        return '';\n    }\n};\n\nmodule.exports = TemplateManager;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Utils = require('../utils/utils');\n\n/**\n * View manager is used to create views, layouts, and fields based on optional\n * metadata inputs.\n *\n * The view manager's factory methods (`createView`, `createLayout`, and\n * `createField`) first check `views`, `layouts`, and `fields` hashes\n * respectively for custom class declaration before falling back the base class.\n *\n * Note the following is deprecated in favor of putting these controllers in the\n * `sugarcrm/clients/<platform>` directory, or using one of the appropriate\n * factory methods like `createView`, `createField`, or `createLayout`. Using\n * either of these idioms, your components will be internally namespaced by\n * platform for you. If you do choose to use the following idiom of defining\n * your controller directly on `ViewManager.view.<type>`, please be forewarned\n * that you will lose any automatic namespacing benefits and possibly encounter\n * naming collisions if your controller names are not unique. If you must\n * define directly, you may choose to prefix your controller name by your\n * application or platform e.g. `MyappMyCustom<Type>` where 'Myapp' is the\n * platform prefix.\n *\n * Put declarations of your custom views, layouts, fields in the corresponding\n * hash (see note above; this is deprecated):\n * ```\n * const ViewManager = require('./view-manager');\n * ViewManager.views.MyappMyCustomView = ViewManager.View.extend({\n *  // Put your custom logic here\n * });\n *\n * ViewManager.layouts.MyappMyCustomLayout = ViewManager.Layout.extend({\n *  // Put your custom logic here\n * });\n *\n * ViewManager.view.fields.MyappMyCustomField = ViewManager.Field.extend({\n *  // Put your custom logic here\n * });\n * ```\n *\n * @module View/ViewManager\n */\n// Ever incrementing field ID\nvar _sfId = 0;\n\n/**\n * @alias module:View/ViewManager\n */\nconst ViewManager = {\n    /**\n     * Resets class declarations of custom components.\n     */\n    reset: function() {\n        _.each(this.layouts, function(layout, name) {\n            delete this.layouts[name];\n        }, this);\n        _.each(this.views, function(view, name) {\n            delete this.views[name];\n        }, this);\n        _.each(this.fields, function(field, name) {\n            delete this.fields[name];\n        }, this);\n    },\n\n    /**\n     * Gets the ID of the most recently created field.\n     *\n     * @return {number} ID of the last created field.\n     */\n    getFieldId: function() {\n        return _sfId;\n    },\n\n    /**\n     * Hash of view classes.\n     */\n    views: {},\n\n    /**\n     * Hash of layout classes.\n     */\n    layouts: {},\n\n    /**\n     * Hash of field classes.\n     */\n    fields: {},\n\n    /**\n     * Creates an instance of a component and binds data changes to it.\n     *\n     * @param {string} type Component type (`layout`, `view`, `field`).\n     * @param {string} name Component name.\n     * @param {Object} params Parameters to pass to the Component's class\n     *   constructor.\n     * @param {string} params.type The component type.\n     * @param {string} params.module The component's module.\n     * @param {string} [params.loadModule=params.module] The module to\n     *   create the component from.\n     * @return {View/Component} New instance of a component.\n     * @private\n     */\n    _createComponent: function(type, name, params) {\n        var Klass = this.declareComponent(type, params.type || name, params.loadModule || params.module,\n            params.controller, false, this._getPlatform(params));\n        var component = new Klass(params);\n        component.trigger(\"init\");\n        component.bindDataChange();\n        return component;\n    },\n\n    /**\n     * Creates an instance of a view.\n     *\n     * Examples:\n     *\n     * Create a list view. The view manager will use metadata for the view\n     * named 'list' defined in Contacts module.\n     * The controller's current context will be set on the new view instance.\n     *\n     * ```\n     * var listView = ViewManager.createView({\n     *     type: 'list',\n     *     module: 'Contacts'\n     * });\n     * ```\n     *\n     * Create a custom view class. Note the following is deprecated in favor\n     * of putting these controllers in the `sugarcrm/clients/<platform>`\n     * directory, or using one of the appropriate factory methods like\n     * `createView`, `createField`, or `createLayout`. Using that idiom, the\n     * metadata manager will declare these components and take care of\n     * namespacing by platform for you. If you do choose to use the\n     * following idiom please be forewarned that you will lose any\n     * namespacing benefits and possibly encounter naming collisions!\n     *\n     * ```\n     * // Declare your custom view class.\n     * // might cause collisions if another MyCustomView!\n     * ViewManager.views.MyCustomView = ViewManager.View.extend({\n     *     // Put your custom logic here\n     * });\n     * // if you must define directly on ViewManager.views, you may instead\n     * // prefer to do:\n     * ViewManager.views.<YOUR_PLATFORM>MyCustomView = ViewManager.View.extend({\n     *     // Put your custom logic here\n     * });\n     *\n     * var myCustomView = ViewManager.createView({\n     *     type: 'myCustom'\n     * });\n     * ```\n     *\n     * Create a view with custom metadata payload.\n     *\n     * ```\n     * var view = ViewManager.createView({\n     *     type: 'detail',\n     *         meta: { ... your custom metadata ... }\n     * });\n     * ```\n     *\n     * Look at {@link View/View}, particularly\n     * {@link View/View#_loadTemplate} for more information on how the\n     * `meta.template` property can be used.\n     *\n     * @param {Object} params View parameters.\n     * @param {string} params.type The view identifier (`default`, `base`,\n     *   etc.). Matches the controller to be used.\n     * @param {string} [params.name=params.type] View name that\n     *   distinguishes between multiple instances of the same view type. This\n     *   matches the metadata to read from {@link Core.MetadataManager} and\n     *   it is the easier way to reuse view types with different\n     *   configurations.\n     * @param {Object} [params.context=SUGAR.App.controller.context] Context to\n     *   associate the newly created view with.\n     * @param {string} [params.module] Module name.\n     * @param {string} [params.loadModule] The module that should be\n     *   considered the base.\n     * @param {Object} [params.meta] Custom metadata.\n     * @return {View/View} New instance of view.\n     */\n    createView: function(params) {\n        // context is always defined on the controller\n        params.context = params.context || SUGAR.App.controller.context;\n        params.module = params.module || params.context.get('module');\n        // name defines which metadata to load\n        params.name = params.name || params.type;\n        params.meta = params.meta || SUGAR.App.metadata.getView(params.module, params.name, params.loadModule);\n\n        if (params.def && params.def.xmeta) {\n            params.meta = _.extend({}, params.meta, params.def.xmeta);\n        }\n\n        // type defines which controller to use\n        var meta = params.meta || {};\n        params.type = params.type || meta.type || params.name;\n\n        return this._createComponent('view', params.type, params);\n    },\n\n    /**\n     * Creates an instance of a layout.\n     *\n     * Parameters define creation rules as well as layout properties.\n     * The factory needs either layout name or type. Also, the layout type\n     * must be specified. The layout type is retrieved either from the\n     * `params` hash or layout metadata.\n     *\n     * Examples:\n     *\n     * Create a list layout. The view manager will use metadata for the\n     * `list` layout defined in the Contacts module.\n     * The controller's current context will be set on the new layout\n     * instance.\n     *\n     * ```\n     * var listLayout = ViewManager.createLayout({\n     *     type: 'list',\n     *     module: 'Contacts'\n     * });\n     * ```\n     *\n     * Create a custom layout class. Note that following is deprecated in\n     * favor of using the `createLayout` factory or placing controller in\n     * `sugarcrm/clients/<platform>/layouts` in which case the metadata\n     * manager will take care of namespacing your controller by platform\n     * name for you (e.g. MyCustomLayout becomes\n     * `ViewManager.layouts.MyappMyCustomLayout`).\n     *\n     * ```\n     * // Declare your custom layout class.\n     * // might cause collisions if already a MyCustomLayout!\n     * ViewManager.layouts.MyCustomLayout = ViewManager.Layout.extend({\n     *     // Put your custom logic here\n     * });\n     * // if you must define directly on ViewManager.layouts,\n     * // you may instead prefer to do:\n     * ViewManager.layouts.<YOUR_PLATFORM>MyCustomLayout = ViewManager.Layout.extend({\n     *     // Put your custom logic here\n     * });\n     *\n     * var myCustomLayout = ViewManager.createLayout({\n     *     type: 'myCustom'\n     * });\n     * ```\n     *\n     * Create a layout with custom metadata payload.\n     *\n     * ```\n     * var layout = ViewManager.createLayout({\n     *     type: 'detail',\n     *     meta: { ... your custom metadata ... }\n     * });\n     * ```\n     *\n     * @param {Object} params layout parameters.\n     * @param {string} [params.type] Layout identifier (`default`, `base`,\n     *   etc.).\n     * @param {string} [params.name=params.type] Layout name that\n     *   distinguishes between multiple instances of the same layout type.\n     * @param {Object} [params.context=SUGAR.App.controller.context]\n     *   Context to associate the newly created layout with.\n     * @param {string} params.module Module name.\n     * @param {string} [params.loadModule] The module to load the Layout\n     *   from. Defaults to `params.module` or the context's module, in that\n     *   order.\n     * @param {Object} [params.meta] Custom metadata.\n     * @return {View/Layout} New instance of the layout.\n     */\n    createLayout: function(params) {\n        params.context = params.context || SUGAR.App.controller.context;\n        params.module = params.module || params.context.get('module');\n        // name defines which metadata to load\n        params.name = params.name || params.type;\n        params.meta = params.meta || SUGAR.App.metadata.getLayout(params.module, params.name, params.loadModule);\n\n        if (params.def && params.def.xmeta) {\n            params.meta = _.extend({}, params.meta, params.def.xmeta);\n        }\n\n        // type defines which controller to use\n        var meta = params.meta || {};\n        params.type = params.type || meta.type || params.name;\n\n        return this._createComponent('layout', params.type, params);\n    },\n\n    /**\n     * Creates an instance of a field and registers it with the parent view\n     * (`params.view`).\n     *\n     * The parameters define creation rules as well as field properties.\n     *\n     * For example,\n     *\n     * ```\n     * var params = {\n     *     view: new Backbone.View,\n     *     def: {\n     *         type: 'text',\n     *         name: 'first_name',\n     *         label: 'LBL_FIRST_NAME'\n     *     },\n     *     context: optional context,\n     *     model: optional model,\n     *     meta: optional custom metadata,\n     *     viewName: optional\n     * }\n     * ```\n     *\n     * The view manager queries the metadata manager for field type specific\n     * metadata (templates and JS controller) unless custom metadata is\n     * passed in the `params` hash.\n     *\n     * Note the following is deprecated in favor of placing custom field\n     * controllers in `sugarcrm/clients/<platform>/fields` or using the\n     * `createField` factory.\n     *\n     * To create instances of custom fields, first declare its class in the\n     * `ViewManager.fields` hash:\n     *\n     * ```\n     * // might cause collision if MyCustomField already exists!\n     * ViewManager.fields.MyCustomField = ViewManager.Field.extend({\n     *     // Put your custom logic here\n     * });\n     * // if you must define directly on ViewManager.fields\n     * // you may instead prefer to do:\n     * ViewManager.fields.<YOUR_PLATFORM>MyCustomField = ViewManager.Field.extend({ ...\n     *\n     * var myCustomField = ViewManager.createField({\n     *     view: someView,\n     *     def: {\n     *         type: 'myCustom',\n     *         name: 'my_custom'\n     *     }\n     * });\n     * ```\n     *\n     * @param {Object} params Field parameters.\n     * @param {Backbone.View} params.view Backbone View object.\n     * @param {Object} params.def Field definition.\n     * @param {Object} [params.context=`SUGAR.App.controller.context`] The\n     *   context.\n     * @param {Object} [params.model] The model to use. If not specified,\n     *   the model which is set on the context is used.\n     * @param {string} [params.viewName=params.view.name] View name to\n     *   determine the field template.\n     * @param {boolean} [params.nested] Set to `true` if the field is nested.\n     *   This means it already has a life cycle handler, and should not be\n     *   added to the view's list of fields.\n     * @return {View/Field} A new instance of field.\n     */\n    createField: function(params) {\n        var type = params.viewDefs ? params.viewDefs.type : params.def.type;\n        params.context = params.context || params.view.context || SUGAR.App.controller.context;\n        params.model = params.model || params.context.get(\"model\");\n        params.module = params.module || (params.model && params.model.module ? params.model.module : params.context.get('module')) || \"\";\n        params.sfId = ++_sfId;\n\n        var field = this._createComponent(\"field\", type, params);\n        if (!params.nested) {\n            // Register new field within its parent view.\n            params.view.fields[field.sfId] = field;\n        } else {\n            // We still keep a reference of the nested field in the parent view\n            // to be able to retrieve it using View/View#getField.\n            params.view.nestedFields[field.sfId] = field;\n        }\n\n        return field;\n    },\n\n    /**\n     * Returns the platform from the given params, falling back to\n     * `SUGAR.App.config.platform` or else 'base'.\n     *\n     * @param {Object} params Parameters.\n     * @param {string} [params.platform] The platform (`base`, `portal`, etc.).\n     * @return {string} The platform.\n     * @private\n     */\n    _getPlatform: function(params) {\n        return params.platform || (SUGAR.App.config && SUGAR.App.config.platform ? SUGAR.App.config.platform : 'base');\n    },\n\n    /**\n     * Gets a controller of type field, layout, or view.\n     *\n     * @param {Object} params Parameters for the controller.\n     * @param {string} params.type The controller type.\n     * @param {string} params.name the filename of the controller\n     *   (e.g. 'flex-list', 'record', etc.).\n     * @param {string} [params.platform] The platform, e.g. 'portal'.\n     *   Will first attempt to fall back to `SUGAR.App.config.platform`, then\n     *   'base'.\n     * @param {string} [params.module] The module name.\n     * @return {Object|null} The controller or `null` if not found.\n     * @private\n     */\n    _getController: function(params) {\n        var c = this._getBaseComponent(params.type, params.name, params.module, params.platform);\n        //Check to see if we have the module specific class; if so return that\n        if (c.cache[c.moduleBasedClassName]) {\n            return c.cache[c.moduleBasedClassName];\n        }\n        return c.baseClass;\n    },\n\n    /**\n     * Checks if a component has a certain plugin.\n     *\n     * @param {Object} params Set of parameters passed to function.\n     * @param {string} params.type Type of component to check.\n     * @param {string} params.name Name of component to check.\n     * @param {string} params.plugin Name of plugin to check.\n     * @param {string} [params.module=''] Name of module to check for custom\n     *   components in.\n     * @return {boolean|null} `true` if the specified component exists and\n     *   has that plugin, `false` if the component does not exist or lacks\n     *   that plugin, and `null` if incorrect arguments were passed.\n     */\n    componentHasPlugin: function(params) {\n        var controller;\n        if (!params.type || !params.name || !params.plugin) {\n            SUGAR.App.logger.error(\"componentHasPlugin requires type, name, and plugin parameters\");\n            return null;\n        }\n        controller = this._getController(params);\n        return controller && controller.prototype &&\n            _.contains(controller.prototype.plugins, params.plugin);\n    },\n\n    /**\n     * Retrieves class declaration for a component or creates a new\n     * component class.\n     *\n     * This method creates a subclass of the base class if controller\n     * parameter is not null and such subclass hasn't been created yet.\n     * Otherwise, the method tries to retrieve the most appropriate class by\n     * searching in the following order:\n     *\n     * - Custom class name: `<module><component-name><component-type>`.\n     * For example, for Contacts module one could have:\n     * `ContactsDetailLayout`, `ContactsFluidLayout`, `ContactsListView`.\n     *\n     * - Class name: `<component-name><component-type>`.\n     * For example: `ListLayout`, `ColumnsLayout`, `DetailView`, `IntField`.\n     *\n     * - Custom base class: `<capitalized-appId><component-type>`\n     * For example, if `SUGAR.App.config.appId == 'portal'`, custom base classes\n     * would be:\n     * `PortalLayout`, `PortalView`, `PortalField`.\n     *\n     * Declarations of such classes must be in the `ViewManager` namespace.\n     * There are use cases when an app has some common component code.\n     * In such cases, using custom base classes is beneficial. For example,\n     * any app may need to override validation error handling for fields:\n     *\n     * ```\n     * // Assuming SUGAR.App.config.appId === 'portal':\n     * ViewManager.PortalField = ViewManager.Field.extend({\n     *     initialize: function(options) {\n     *         // Call super\n     *         ViewManager.Field.prototype.initialize.call(this, options);\n     *         // Custom initialization code...\n     *     },\n     *\n     *     handleValidationError: function(errors) {\n     *         // Custom validation logic\n     *     }\n     * });\n     * ```\n     *\n     * The above declaration will make all field controllers extend\n     * `ViewManager.PortalField` instead of `ViewManager.Field`.\n     *\n     * - Base class: `<component-type>` - `Layout`, `View`, `Field`.\n     *\n     * Note 1. Although the view manager supports module specific fields\n     * like `ContactsIntField`, the server does not provide such\n     * customization.\n     *\n     * Note 2. The layouts is a special case because their class name is\n     * built both from layout name and layout type. One could have\n     * `ListLayout` or `ColumnsLayout` including their module specific\n     * counterparts like `ContactsListView` and `ContactsColumnsLayout`.\n     * The \"named\" class name is checked first.\n     *\n     * @param {string} type Lower-cased component type: `layout`, `view`, or\n     *   `field`.\n     * @param {string} name Lower-cased component name. For example, 'list'\n     *   (layout or view), or 'bool' (field).\n     * @param {string} [module] Module name.\n     * @param {string} [controller] Controller source code string.\n     * @param {boolean} [overwrite] Will overwrite if duplicate\n     *   custom class or layout is cached. Note that if no controller is\n     *   passed, overwrite is ignored since we can't create a meaningful\n     *   component without a controller.\n     * @param {string} [platform] The platform e.g. 'base', 'portal', etc.\n     * @return {Function} Component class.\n     */\n    declareComponent: function(type, name, module, controller, overwrite, platform) {\n        overwrite = !!(controller && overwrite);\n        var c = this._getBaseComponent(type, name, module, platform, overwrite);\n        if (overwrite && c.cache[c.moduleBasedClassName]) {\n            delete c.cache[c.moduleBasedClassName];\n        }\n\n        return c.cache[c.moduleBasedClassName] ||\n            Utils.extendClass(c.cache, c.baseClass, c.moduleBasedClassName, controller, c.platformNamespace) ||\n            c.baseClass;\n    },\n\n    /**\n     * Internal helper function for getting a component (controller). Do not\n     * call directly and instead use `declareComponent`, etc.\n     * depending on your needs.\n     * @param {string} type Lower-cased component type: `layout`, `view`, or\n     *   `field`.\n     * @param {string} name Lower-cased component name. For example, `list`\n     *   (layout or view), or `bool` (field).\n     * @param {string} [module] Module name.\n     * @param {string} [platform] The platform e.g. 'base', 'portal', etc.\n     * @param {boolean} [overwrite=true] When `true`, custom controller\n     *   overrides will be ignored and only components that exactly match\n     *   the name will be returned. The base class returned is `base`.\n     * @return {Object} The base component information.\n     * @return {Object} return.cache The collection of controllers of the\n     *   given component type.\n     * @return {string} return.platformNamespace The platform prefix.\n     * @return {string} return.moduleBasedClassName The prefixed class name.\n     * @return {Object} return.baseClass The class for the base component.\n     * @private\n     */\n    _getBaseComponent: function(type, name, module, platform, overwrite) {\n        platform = this._getPlatform({platform: platform});\n        // The type e.g. View, Field, Layout\n        var ucType = Utils.capitalize(type);\n\n        // The platform e.g. Base, Portal, etc.\n        var platformNamespace = Utils.capitalize(platform);\n\n        // The component name and type concatenated e.g. ListView\n        var className = Utils.capitalizeHyphenated(name) + ucType;\n\n        // The combination of platform, optional module, and className e.g. BaseAccountsListView\n        var moduleBasedClassName = platformNamespace + (module || \"\") + className,\n            customModuleBasedClassName = platformNamespace + (module || \"\") + \"Custom\" + className;\n        var cache = this[type + 's'];\n            // App id and type fallback\n        var customBaseClassName = Utils.capitalize(SUGAR.App.config.appId) + ucType;\n        // Components are now namespaced by <platform> so we must prefix className to find in cache\n        // if we don't find platform-specific, than we next look in Base<className> and so on\n        var baseClass = cache[platformNamespace + \"Custom\" + className] ||\n            cache[platformNamespace + className] ||\n            cache[\"BaseCustom\" + className] ||\n            cache[\"Base\" + className] ||\n            // For backwards compatibility, if they define ViewManager.views.MyView we should still find\n            cache[className] ||\n            cache[\"BaseBase\" + ucType] ||\n            this['Custom' + customBaseClassName] ||\n            this[customBaseClassName] ||\n            this[ucType];\n        // Override to use the custom class instead of the standard one if it exists.\n        if (cache[customModuleBasedClassName] && !overwrite) {\n            moduleBasedClassName = customModuleBasedClassName;\n        }\n        return {\n            cache: cache,\n            platformNamespace: platformNamespace,\n            moduleBasedClassName: moduleBasedClassName,\n            baseClass: baseClass\n        };\n    }\n};\n\nmodule.exports = ViewManager;\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst Acl = require('../core/acl');\nconst Component = require('./component');\nconst PluginManager = require('../core/plugin-manager');\nconst Language = require('../core/language');\nconst Template = require('./template');\n\n/**\n * Base View class. Use {@link View.ViewManager} to create instances of views.\n *\n * @module View/View\n * @class\n * @extends View/Component\n */\nconst View = Component.extend({\n    /**\n     * Initializes this view.\n     *\n     * @param {Object} options Backbone view options.\n     * @memberOf View/Field\n     * @instance\n     */\n    initialize: function(options) {\n        PluginManager.attach(this, 'view');\n        Component.prototype.initialize.call(this, options);\n\n        /**\n         * View type.\n         * @type {string}\n         * @name type\n         * @memberOf View/View\n         * @instance\n         */\n        this.type = options.type;\n\n        /**\n         * Name of the view.\n         * @type {string}\n         * @name name\n         * @memberOf View/View\n         * @instance\n         */\n        this.name = options.name || this.type;\n\n        /**\n         * Name of the action (optional).\n         *\n         * Used in acl checks for user permissions. By default, set to the view name.\n         * @type {string}\n         * @memberOf View/View\n         * @name action\n         * @instance\n         */\n        this.action = options.meta && options.meta.action ? options.meta.action : this.name;\n\n        this._loadTemplate(options);\n\n        /**\n         * Dictionary of field widgets.\n         *\n         * * keys: field IDs (sfuuid)\n         * * values: instances of {@link View/Field}\n         * @type {Object}\n         * @memberOf View/View\n         * @name fields\n         * @instance\n         */\n        this.fields = {};\n\n        /**\n         * Fields part of this view that are already managed by another\n         * lifecycle handler.\n         *\n         * @type {Object}\n         * @memberOf View/View\n         * @name nestedFields\n         * @instance\n         */\n        this.nestedFields = {};\n\n        /**\n         * A template to use for view fields if a field does not have a template defined for its parent view.\n         * Defaults to `\"default\"`.\n         *\n         * For example, if you have a subview and don't want to define subview template for all field types,\n         * you may choose to use existing templates like `detail` if your subview is in fact a detail view.\n         *\n         * @type {string}\n         * @memberOf View/View\n         * @name fallbackFieldTemplate\n         * @instance\n         */\n        this.fallbackFieldTemplate = this.fallbackFieldTemplate || \"detail\";\n\n        /**\n         * Reference to the parent layout instance.\n         * @type {View/Layout}\n         * @name layout\n         * @memberOf View/View\n         * @instance\n         */\n        this.layout = this.options.layout;\n\n        /**\n         * Flag indicating whether a view is primary or not.\n         *\n         * If the primary view is not rendered due to the access control,\n         * a warning message will be displayed.\n         *\n         * @type {boolean}\n         * @name primary\n         * @memberOf View/View\n         * @instance\n         */\n        this.primary = options.primary;\n\n        this._setLabels();\n\n        /**\n         * The view name that contains the list of fields to use when\n         * fetching the model/collection from the server.\n         *\n         * List, record or detail views might have too many fields defined\n         * in the metadata. This property avoids having to list all these\n         * fields in the request params.\n         *\n         * @type {string}\n         * @name dataView\n         * @memberOf View/View\n         * @instance\n         */\n        if (this.dataView) {\n            this.context.set('dataView', this.dataView);\n        } else {\n            this.context.addFields(this.getFieldNames());\n        }\n\n        SUGAR.App.events.on('app:locale:change', function() {\n            this._setLabels();\n        }, this);\n    },\n\n    /**\n     * Gets the template falling back using `loadModule` property when\n     * specified.\n     *\n     * @param {string} name The template's name to get.\n     * @param {string} [fallbackModule] The module to fall back to if the\n     *   template does not exist in this view's module. If undefined, the\n     *   template is grabbed in `base`.\n     * @return {Function} The desired template.\n     * @private\n     */\n    _getTemplate: function(name, fallbackModule) {\n        return Template.getView(name, this.module) || Template.getView(name, fallbackModule);\n    },\n\n    /**\n     * Sets the appropriate template for this view to {@link #template}.\n     * Sets the name of the template to {@link #tplName}.\n     *\n     * @param {Object} [options] The options that may specify the template to\n     *   load.\n     * @param {Function} [options.template] The compiled template.\n     * @param {string} [options.loadModule] The fallback module to get the\n     *   template from.\n     * @private\n     */\n    _loadTemplate: function(options) {\n        var template, templateName;\n        options = options || {};\n\n        if (options.template) {\n            template = options.template;\n            templateName = null;\n        } else if (this.meta && this.meta.template) {\n            template = this._getTemplate(this.meta.template, options.loadModule);\n            templateName = this.meta.template;\n        } else {\n            template = this._getTemplate(this.name, options.loadModule);\n            templateName = this.name;\n        }\n\n        if (!template) {\n            if (this.meta && this.meta.type) {\n                template = this._getTemplate(this.meta.type, options.loadModule);\n                templateName = this.meta.type;\n            } else {\n                template = Template.empty;\n                templateName = '';\n            }\n        }\n\n        /**\n         * The name of the template that is loaded.\n         * This is a public read-only property. This property should not be\n         * modified directly.\n         *\n         * @type {string|null}\n         * @memberOf View/View\n         * @name tplName\n         * @instance\n         */\n        this.tplName = templateName;\n\n        /**\n         * The template for this view.\n         *\n         * @type {Function}\n         * @memberOf View/View\n         * @name template\n         * @instance\n         */\n        this.template = template;\n    },\n\n    /**\n     * Renders a view onto the page.\n     *\n     * This method uses `ctx` parameter as the context for the view's\n     * Handlebars {@link View/View#template} and view's\n     * `options.templateOptions` property as template options.\n     *\n     * If no `ctx` parameter is specified, `this` is passed as the context for\n     * the template.\n     * If no `options` parameter is specified, `this.options.templateOptions`\n     * is used.\n     *\n     * You can override this method if you have custom rendering logic and\n     * don't use Handlebars templating or if you need to pass a different\n     * context object for the template.\n     *\n     * Note the following use of `ViewManager.View.extend` is deprecated in\n     * favor of putting these controllers in the sugarcrm/clients/<platform>\n     * directory. Using that idiom, the metadata manager will declare these\n     * components and take care of namespacing by platform for you\n     * (so MyCustomView will be stored internally as MyappMyCustomView).\n     * If you do choose to use the following idiom please be forewarned\n     * that you will lose any namespacing benefits and possibly encounter\n     * naming collisions!\n     *\n     * Example:\n     * ```\n     * // Note that using the following technique of defining custom views\n     * // directly on the ViewManager.views object can result in naming\n     * // collisions unless you ensure your name is unique. See note above.\n     * ViewManager.views.CustomView = ViewManager.View.extend({\n     *    _renderHtml: function() {\n     *       var ctx = {\n     *         // Your custom context for this view template\n     *       };\n     *       ViewManager.View.prototype._renderHtml.call(this, ctx);\n     *    }\n     * });\n     *\n     * // Or totally different logic that doesn't use this.template\n     * ViewManager.views.AnotherCustomView = ViewManager.View.extend({\n     *    _renderHtml: function() {\n     *       // Never do this :)\n     *       return \"&lt;div&gt;Hello, world!&lt;/div&gt;\";\n     *    }\n     * });\n     * ```\n     *\n     * This method uses this view's {@link View/View#template} property to\n     * render itself.\n     *\n     * @param {Core/Context} [ctx] Template context.\n     * @param {Object} [options] Template options.\n     * ```\n     * {\n     *    helpers: helpers,\n     *    partials: partials,\n     *    data: data\n     * }\n     * // See Handlebars.js documentation for details.\n     * ```\n     *\n     * @protected\n     * @memberOf View/View\n     * @instance\n     */\n    _renderHtml: function(ctx, options) {\n        if (this.template) {\n            try {\n                this.$el.html(this.template(ctx || this, options || this.options.templateOptions));\n            } catch (e) {\n                SUGAR.App.logger.error(\"Failed to render \" + this + \"\\n\" + e);\n                SUGAR.App.error.handleRenderError(this, '_renderHtml');\n            }\n        }\n    },\n\n    /**\n     * Renders all the fields.\n     *\n     * @protected\n     * @memberOf View/View\n     * @instance\n     */\n    _renderFields: function() {\n        var self = this;\n\n        // In terms of performance it is better to search the DOM once for\n        // all the fields, than to search the DOM for each field. That's why\n        // we cache placeholders locally and pass them to\n        // {@link View/Field#_renderField}.\n        var fieldElems = {};\n\n        this.$('span[sfuuid]').each(function() {\n            var $this = $(this),\n                sfId = $this.attr('sfuuid');\n            fieldElems[sfId] = $this;\n        });\n\n        _.each(this.fields, function(field) {\n            self._renderField(field, fieldElems[field.sfId]);\n        });\n    },\n\n    /**\n     * Sets field's view element and invokes render on the given field.\n     *\n     * @param {View/Field} field The field to render.\n     * @param {jQuery} $fieldEl The field placeholder.\n     * @protected\n     * @memberOf View/View\n     * @instance\n     */\n    _renderField: function(field, $fieldEl) {\n        field.setElement($fieldEl || this.$(\"span[sfuuid='\" + field.sfId + \"']\"));\n        try {\n            field.render();\n        } catch (e) {\n            SUGAR.App.logger.error('Failed to render ' + field + ' on ' + this + '\\n' + e);\n            SUGAR.App.error.handleRenderError(this, '_renderField', field);\n        }\n    },\n\n    /**\n     * Renders a view onto the page.\n     *\n     * The method first renders this view by calling {@link View/View#_renderHtml}\n     * and then for each field invokes {@link View/View#_renderField}.\n     *\n     * NOTE: Do not override this method, otherwise you will lose ACL check.\n     * Consider overriding {@link View/View#_renderHtml} instead.\n     *\n     * @return {View/View} The instance of this view.\n     * @protected\n     * @memberOf View/View\n     * @instance\n     */\n    _render: function() {\n        if (Acl.hasAccessToModel(this.action, this.model)) {\n            this._disposeFields();\n            this._renderHtml();\n            this._renderFields();\n\n        } else {\n\n            SUGAR.App.logger.info('Current user does not have access to this module view. name: ' + this.name +\n                ' module: ' + this.module);\n            // See Bug56941.\n            // We suppress this warning from being presented to user in situations where we're trying\n            // to display a view for a Linked module where the user does not have access.  If you clicked on\n            // a Bug and you shouldn't get warnings about Notes, etc, if you didn't have access to those other modules.\n            if(this.primary){\n                SUGAR.App.error.handleRenderError(this, 'view_render_denied');\n            }\n        }\n\n        return this;\n    },\n\n    _setLabels: function() {\n        /**\n         * Pluralized i18n-ed module name.\n         * @type {string}\n         * @memberOf View/View\n         * @name modulePlural\n         * @instance\n         */\n        this.modulePlural = Language.getAppListStrings(\"moduleList\")[this.module] || this.module;\n\n        /**\n         * Singular i18n-ed module name.\n         * @type {string}\n         * @memberOf View/View\n         * @name moduleSingular\n         * @instance\n         */\n        this.moduleSingular = Language.getAppListStrings(\"moduleListSingular\")[this.module] || this.modulePlural;\n    },\n\n    /**\n     * Fetches data for view's model or collection.\n     *\n     * This method calls view's context {@link Core/Context#loadData} method.\n     *\n     * Override this method to provide custom fetch algorithm.\n     * @param {Object} [options] Options that are passed to\n     *   collection/model's fetch method.\n     * @memberOf View/View\n     * @instance\n     */\n    loadData: function(options) {\n        if (Acl.hasAccess('read', this.module)) {\n            this.context.loadData(options);\n        }\n    },\n\n    /**\n     * Extracts the field names from the metadata for directly related\n     * views/panels.\n     *\n     * @param {string} [module] Module name. Defaults to the Context module.\n     * @return {Array} List of fields used on this view.\n     * @memberOf View/View\n     * @instance\n     */\n    getFieldNames: function(module) {\n        var fields = [];\n        module = module || this.context.get('module');\n\n        if (this.meta && this.meta.panels) {\n            fields = _.reduce(_.map(this.meta.panels, function(panel) {\n                var nestedFields = _.flatten(_.compact(_.pluck(panel.fields, \"fields\")));\n                return _.pluck(panel.fields, 'name').concat(\n                    _.pluck(nestedFields, 'name')).concat(\n                    _.flatten(_.compact(_.pluck(panel.fields, 'related_fields'))));\n            }), function(memo, field) {\n                return memo.concat(field);\n            }, []);\n        }\n\n        fields = _.compact(_.uniq(fields));\n\n        var fieldMetadata = SUGAR.App.metadata.getModule(module, 'fields');\n        if (fieldMetadata) {\n            // Filter out all fields that are not actual bean fields\n            fields = _.reject(fields, function(name) {\n                return _.isUndefined(fieldMetadata[name]);\n            });\n\n            // we need to find the relates and add the actual id fields\n            var relates = [];\n            _.each(fields, function(name) {\n                if (fieldMetadata[name].type == 'relate') {\n                    relates.push(fieldMetadata[name].id_name);\n                }\n                else if (fieldMetadata[name].type == 'parent') {\n                    relates.push(fieldMetadata[name].id_name);\n                    relates.push(fieldMetadata[name].type_name);\n                }\n                if (_.isArray(fieldMetadata[name].fields)) {\n                    relates = relates.concat(fieldMetadata[name].fields);\n                }\n            });\n\n            fields = _.union(fields, relates);\n        }\n\n        return fields;\n    },\n\n\n    /**\n     * Gets a hash of fields that are currently displayed on this view.\n     *\n     * The hash has field names as keys and field definitions as values.\n     * @param {string} [module] Module name.\n     * @param {Data/Bean} [model] Model to match fields against. Only\n     *   fields that correspond with the given model will be returned.\n     * @return {Object} The currently displayed fields.\n     * @memberOf View/View\n     * @instance\n     */\n    getFields: function(module, model) {\n        var fields = {};\n        var fieldNames = this.getFieldNames(module);\n        _.each(fieldNames, function(name) {\n            var field = this.getField(name, model);\n            if (field) {\n                fields[name] = field.def;\n            }\n        }, this);\n        return fields;\n    },\n\n    /**\n     * Returns a field by name.\n     *\n     * @param {string} name Field name.\n     * @param {Data/Bean} [model] Model to find the field for.\n     * @return {View/Field} Instance of the field widget.\n     * @memberOf View/View\n     * @instance\n     */\n    getField: function(name, model) {\n        return _.find(_.extend({}, this.fields, this.nestedFields), function(field) {\n            return field.name == name && (!model || field.model == model);\n        });\n    },\n\n    /**\n     * @inheritdoc\n     * @memberOf View/View\n     */\n    closestComponent: function(name) {\n        if (!this.layout) {\n            return;\n        }\n        if (this.layout.name === name) {\n            return this.layout;\n        }\n        return this.layout.closestComponent(name);\n    },\n\n    /**\n     * @inheritdoc\n     * @memberOf View/View\n     */\n    _show: function() {\n        Component.prototype._show.call(this);\n        _.each(_.extend({}, this.fields, this.nestedFields), function(component) {\n            component.updateVisibleState(true);\n        });\n    },\n\n    /**\n     * @inheritdoc\n     * @memberOf View/View\n     */\n    _hide: function() {\n        Component.prototype._hide.call(this);\n        _.each(_.extend({}, this.fields, this.nestedFields), function(component) {\n            component.updateVisibleState(true);\n        });\n    },\n\n    /**\n     * Disposes a view.\n     *\n     * This method disposes view fields and calls the\n     * {@link View/Component#_dispose} method of the base class.\n     * @protected\n     * @memberOf View/View\n     * @instance\n     */\n    _dispose: function() {\n        PluginManager.detach(this, 'view');\n        this._disposeFields();\n        Component.prototype._dispose.call(this);\n    },\n\n    /**\n     * Disposes all the fields.\n     *\n     * @protected\n     * @memberOf View/View\n     * @instance\n     */\n    _disposeFields: function() {\n        _.each(this.fields, function(field) {\n            field.dispose();\n        });\n        this.fields = {};\n        this.nestedFields = {};\n    },\n\n    /**\n     * Gets a string representation of this view.\n     *\n     * @return {string} String representation of this view.\n     * @memberOf View/View\n     * @instance\n     */\n    toString: function() {\n        return 'view-' + this.name + '-' + Component.prototype.toString.call(this);\n    },\n\n    /**\n     * Gets a field's metadata.\n     *\n     * @param {string} field Field name.\n     * @param {boolean} [includeChild=false] If `true`, check if this is a\n     *   child field.\n     * @return {Object} Field metadata.\n     * @memberOf View/View\n     * @instance\n     */\n    getFieldMeta : function(field, includeChild) {\n        var fields = _.flatten(_.pluck(this.meta.panels, \"fields\")),\n            ret = _.find(fields, function(def) {\n                return def.name === field;\n            });\n\n        if (!ret && includeChild) {\n            ret = _.find(_.flatten(_.pluck(fields, \"fields\")), function(def) {\n                return def && def.name === field;\n            });\n\n            if (ret) {\n                ret._isChild = true;\n            }\n        }\n\n        return ret;\n    },\n\n    /**\n     * Sets a field's metadata.\n     *\n     * @param {string} field Field name.\n     * @param {Object} meta Field metadata\n     * @memberOf View/View\n     * @instance\n     */\n    setFieldMeta : function(field, meta) {\n        _.each(this.meta.panels, function(panel) {\n            _.each(panel.fields, function(def, i) {\n                if (def.name === field) {\n                    panel.fields[i] = _.extend(def, meta);\n                } else if (_.isArray(def.fields)) {\n                    _.each(def.fields, function(childDef, j) {\n                        if (childDef.name === field) {\n                            def.fields[j] = _.extend(childDef, meta);\n                        }\n                    });\n                }\n            });\n        });\n    }\n});\n\nmodule.exports = View;\n\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nconst BeforeEvent = require('./core/before-event');\nconst Logger = require('./utils/logger');\nconst Cache = require('./core/cache');\nconst Utils = require('./utils/utils');\nconst Controller = require('./core/controller');\nconst Language = require('./core/language');\nconst Routing = require('./core/routing');\nconst MetadataManager = require('./core/metadata-manager');\n\n/**\n * SugarCRM namespace.\n *\n * @ignore\n */\nvar SUGAR = SUGAR || {};\n\nSUGAR.App = (function() {\n    var _app,\n        _modules = {};\n\n    /**\n     * Flag indicating an `app.sync` is in progress.\n     *\n     * @type {boolean}\n     * @private\n     */\n    var _isSyncing = false;\n\n    /**\n     * A list of callback functions to call whenever `sync` is completed.\n     *\n     * @type {Array}\n     * @private\n     */\n    var _syncCallbacks = [];\n\n    var _make$ = function(selector) {\n        return selector instanceof $ ? selector : $(selector);\n    };\n\n    /**\n     * Constructor class for the main framework app.\n     *\n     * `SUGAR.App` contains the core instance of the app. All related modules\n     * can be found within the `SUGAR` namespace.\n     *\n     * An uninitialized instance will exist on page load but you will need to\n     * call {@link App#init} to initialize your instance.\n     *\n     * By default, the app uses `body` element and `div#content` as root element\n     * and content element respectively.\n     *\n     * ```\n     * var app = SUGAR.App.init({\n     *     el: '#root',\n     *     contentEl: '#content'\n     * });\n     * ```\n     *\n     * If you want to initialize an app without initializing its modules,\n     *\n     * ```\n     * var app = SUGAR.App.init({el: '#root', silent: true});\n     * ```\n     *\n     * @class\n     * @name App\n     * @param {Object} [opts] Configuration options. See full list of options\n     *   in {@link #init}.\n     * @return {App} Application instance.\n     * @mixes Core/BeforeEvent\n     */\n    function App(opts) {\n        var appId = _.uniqueId('SugarApp_');\n        opts = opts || {};\n\n        return _.extend({\n            /**\n             * Unique application ID.\n             *\n             * @type {string}\n             * @memberOf App\n             * @instance\n             */\n            appId: appId,\n\n            /**\n             * Base element to use as the root of the app.\n             *\n             * @type {jQuery}\n             * @memberOf App\n             * @instance\n             */\n            $rootEl: _make$(opts.el || 'body'),\n\n            /**\n             * Content element selector.\n             *\n             * The {@link Core.Controller application controller} loads layouts\n             * into the content element.\n             *\n             * @type {jQuery}\n             * @memberOf App\n             * @instance\n             */\n            $contentEl: _make$(opts.contentEl || '#content'),\n\n            /**\n             * Additional components.\n             *\n             * These components are created and rendered only once, when the\n             * application starts.\n             *\n             * Application specific code is needed for managing the components\n             * after they have been put into DOM by the framework.\n             *\n             * @type {Object}\n             * @memberOf App\n             * @instance\n             */\n            additionalComponents: {}\n\n        }, this, Backbone.Events);\n    }\n\n    return {\n        /**\n         * Initializes the app.\n         *\n         * @param {Object} [opts] Initialization options.\n         * @param {string} [opts.el='body'] The selector for the\n         *   {@link #$rootEl base element} to use as the root of the app.\n         * @param {string} [opts.contentEl='#content'] The selector for the\n         *   {@link #$contentEl content element}.\n         * @param {boolean} [opts.silent=false] Flag to indicate if modules\n         *   should be initialized during application init process.\n         * @param {Function} [opts.defaultErrorHandler] Allows you to define a\n         *   custom error handler. Defaults to\n         *   {@link Core.Error#handleHttpError}.\n         * @return {App} Application instance\n         * @fires app:init if `opts.silent` is not `false`.\n         * @fires app:sync:error if the public metadata could not be synced.\n         * @memberOf App\n         */\n        init: function(opts) {\n            _app = _app || _.extend(this, new App(opts));\n            _.extend(_app, BeforeEvent);\n\n            // Register app specific events\n            _app.events.register(\n                /**\n                 * Fires when the app object is initialized. Modules bound to\n                 * this event will initialize.\n                 *\n                 * @event app:init\n                 * @memberOf App\n                 */\n                'app:init',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when the application has\n                 * finished loading its dependencies and should initialize\n                 * everything.\n                 *\n                 * @event app:start\n                 * @memberOf App\n                 */\n                'app:start',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when the app is beginning to sync data / metadata from\n                 * the server.\n                 *\n                 * @event app:sync\n                 * @memberOf App\n                 */\n                'app:sync',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when the app has finished its syncing process and is\n                 * ready to proceed.\n                 *\n                 * @event app:sync:complete\n                 * @memberOf App\n                 */\n                'app:sync:complete',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when a sync process failed.\n                 *\n                 * @event app:sync:error\n                 * @memberOf App\n                 */\n                'app:sync:error',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when a sync process failed during initialization of\n                 * the app.\n                 *\n                 * @event app:sync:public:error\n                 * @memberOf App\n                 */\n                'app:sync:public:error',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * * Fires when logging in.\n                 *\n                 * @event app:login\n                 * @memberOf App\n                 */\n                'app:login',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when login succeeds.\n                 *\n                 * @event app:login:success\n                 * @memberOf App\n                 */\n                'app:login:success',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when the app logs out.\n                 *\n                 * @event app:logout\n                 * @memberOf App\n                 */\n                'app:logout',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when route changes a new view has been loaded.\n                 *\n                 * @event app:view:change\n                 * @memberOf App\n                 */\n                'app:view:change',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when client application's user changes the locale, thus\n                 * indicating that the application should \"re-render\" itself.\n                 *\n                 * @event app:locale:change\n                 * @memberOf App\n                 */\n                'app:locale:change',\n                this\n            );\n\n            _app.events.register(\n                /**\n                 * Fires when the language display direction changes.\n                 *\n                 * Possible language display directions are `RTL` and `LTR`.\n                 *\n                 * @event lang:direction:change\n                 * @memberOf App\n                 */\n                'lang:direction:change',\n                this\n            );\n\n            // App cache must be initialized first\n            if (_app.cache) {\n                _app.cache.init(this);\n            }\n\n            // Instantiate controller: <Capitalized-appId>Controller or Controller.\n            var className = Utils.capitalize(_app.config ? _app.config.appId : '') + 'Controller';\n            var Klass = this[className] || Controller;\n\n            /**\n             * Reference to the main controller.\n             *\n             * @type {Core.Controller}\n             * @memberOf App\n             * @instance\n             */\n            this.controller = new Klass();\n\n            /**\n             * Reference to the API interface that the application uses to\n             * request the server.\n             *\n             * @type {SUGAR.Api}\n             * @memberOf App\n             * @instance\n             */\n            _app.api = SUGAR.Api.getInstance({\n                defaultErrorHandler: (opts && opts.defaultErrorHandler) ? opts.defaultErrorHandler : SUGAR.App.error.handleHttpError,\n                serverUrl: _app.config.serverUrl,\n                platform: _app.config.platform,\n                timeout: _app.config.serverTimeout,\n                keyValueStore: _app[_app.config.authStore || 'cache'],\n                clientID: _app.config.clientID,\n                disableBulkApi: _app.config.disableBulkApi,\n                externalLoginUICallback: opts && opts.externalLoginUICallback\n            });\n\n            this._init(opts);\n\n            return _app;\n        },\n\n        /**\n         * Initializes application.\n         *\n         * Performs loading css (only if `config.loadCss` is `true`), metadata\n         * sync and calls sync callback.\n         *\n         * @param {Object} opts Options.\n         * @param {boolean} [opts.silent=false] Flag to indicate if modules\n         *   should be initialized during application init process.\n         * @return {App} Application instance.\n         * @private\n         * @memberOf App\n         */\n        _init: function(opts) {\n            var self = this;\n            var syncCallback = function(error) {\n\n                // _app will be nulled out if destroy was called on app before we\n                // asynchronously get here. This happens when running tests (see spec-helper).\n                if (!_app) {\n                    return;\n                }\n                if (error) {\n                    self.trigger('app:sync:public:error', error);\n                    return;\n                }\n                self._initModules();\n                if (!opts.silent) {\n                    _app.controller.setElement(_app.$rootEl);\n                    _app.trigger('app:init', self);\n                }\n\n                if (opts.callback && _.isFunction(opts.callback)) {\n                    opts.callback(_app);\n                }\n            };\n            var cssCallback = function(callback) {\n                if (_app.config.loadCss) {\n                    _app.loadCss(callback);\n                } else {\n                    callback();\n                }\n            };\n            if (_app.config.syncConfig !== false) {\n                var options = {\n                    getPublic: true\n                };\n                cssCallback(function() {\n                    MetadataManager.sync(syncCallback, options);\n                });\n            } else {\n                cssCallback(function() {\n                    syncCallback();\n                });\n            }\n            return _app;\n        },\n\n        /**\n         * Initializes all modules that have an `init` function.\n         *\n         * @private\n         * @memberOf App\n         */\n        _initModules: function() {\n            _.each(_modules, function(module) {\n                if (_.isFunction(module.init)) {\n                    module.init(this);\n                }\n            }, this);\n        },\n\n        /**\n         * Extends base settings with settings from the server.\n         *\n         * @private\n         * @deprecated since 7.10. Please use {@link #setConfig} instead.\n         * @memberOf App\n         */\n        _loadConfig: function() {\n            this.logger.warn('`App._loadConfig` is deprecated since 7.10. Please use `App.setConfig` instead.');\n            _app.config = _app.config || {};\n            _app.config = _.extend(_app.config, MetadataManager.getConfig());\n        },\n\n        /**\n         * Updates the config object based on the new metadata.\n         *\n         * Reloads modules that depend on the config.\n         *\n         * @memberOf App\n         * @param {Object} [config] The config object. If not passed, we'll grab\n         *   it using {@link Core/MetadataManager#getConfig}.\n         */\n        setConfig: function(config) {\n            // extend our config with settings from local storage if we have it\n            this.config = this.config || {};\n            this.config = _.extend(this.config, config);\n\n            // Reload the modules that depend on the configuration.\n            this.logger = Logger(this.config.logger);\n            this.cache = Cache({\n                uniqueKey: this.config.uniqueKey,\n                env: this.config.env,\n                appId: this.config.appId\n            });\n        },\n\n        /**\n         * Loads application CSS.\n         *\n         * Will make an HTTP request and retrieve either a list of CSS files to\n         * load, or directly plain text css.\n         *\n         * @param {Function} [callback] Function called once CSS is loaded.\n         * @memberOf App\n         */\n        loadCss: function(callback) {\n            _app.api.css(_app.config.platform, _app.config.themeName, {\n                success: function(rsp) {\n\n                    if (_app.config.loadCss === 'url') {\n                        _.each(rsp.url, function(url) {\n                            $('<link>')\n                                .attr({\n                                    rel: 'stylesheet',\n                                    href: Utils.buildUrl(url),\n                                })\n                                .appendTo('head');\n                        });\n                    }\n                    else {\n                        _.each(rsp.text, function(text) {\n                            $('<style>').html(text).appendTo('head');\n                        });\n                    }\n\n                    if (_.isFunction(callback)) {\n                        callback();\n                    }\n                }\n            });\n        },\n\n        /**\n         * Starts the main execution phase of the application.\n         *\n         * @memberOf App\n         * @fires app:start\n         */\n        start: function() {\n            _app.events.registerAjaxEvents();\n            _app.controller.loadAdditionalComponents(_app.config.additionalComponents);\n            _app.trigger('app:start', this);\n            Routing.start();\n        },\n\n        /**\n         * Destroys the instance of the current app.\n         *\n         * @memberOf App\n         */\n        destroy: function() {\n            // TODO: Not properly implemented\n            if (Backbone.history) {\n                Backbone.history.stop();\n            }\n\n            _app = null;\n        },\n\n        /**\n         * Augments the application with a module.\n         *\n         * Module should be an object with an optional `init(app)` function.\n         * The init function is passed the current instance of\n         * the application when app's {@link App#init} method gets called.\n         * Use the `init` function to perform custom initialization logic during\n         * app initialization.\n         *\n         * @param {string} name Name of the module.\n         * @param {Object} obj Module to augment the app with.\n         * @param {boolean} [init=false] Flag indicating if the module should be\n         *   initialized immediately.\n         * @memberOf App\n         */\n        augment: function(name, obj, init) {\n            this[name] = obj;\n            _modules[name] = obj;\n\n            if (name === 'config') {\n                this.setConfig(obj);\n            }\n\n            if (init && obj.init && _.isFunction(obj.init)) {\n                obj.init.call(obj, _app);\n            }\n        },\n\n        /**\n         * Syncs an app.\n         *\n         * The events are not fired if the sync happens for public metadata.\n         *\n         * @param {Object} [options] Options. See full list of options\n         *   you can pass to {@link Core.MetadataManager#sync}.\n         * @param {Function} [options.callback] Function to be invoked when the\n         *   sync operation completes.\n         * @param {boolean} [options.getPublic=false] Flag indicating if only\n         *   public metadata should be synced.\n         *\n         * @fires app:sync when the synchronization process begins.\n         * @fires app:sync:complete when the series of synchronization\n         *   operations have finished.\n         * @fires app:sync:error if synchronization fails.\n         * @memberOf App\n         */\n        sync: function(options) {\n            var self = this;\n            options = options || {};\n\n            // For public call, we need to do just metadata sync without triggering events\n            if (options.getPublic) {\n                return self.syncPublic(options);\n            }\n\n            // Register the callback if any.\n            if (options.callback) {\n                _syncCallbacks.push(options.callback);\n            }\n\n            // If already in `sync`, we can skip as the callback is registered\n            // and will be called.\n            if (_isSyncing) {\n                return;\n            }\n            _isSyncing = true;\n\n            // 1. Update server info and run compatibility check\n            // 2. Update preferred language if it was changed\n            // 3. Load user preferences\n            // 4. Fetch metadata\n            // 5. Declare models\n            async.waterfall([function(callback) {\n                self.isSynced = false;\n                self.trigger('app:sync');\n                var doUpdateLanguage = !options.noUserUpdate && (options.language || self.cache.get('langHasChanged'));\n                if (doUpdateLanguage) {\n                    var language = options.language || Language.getLanguage();\n                    self.user.updateLanguage(language, callback);\n                    _app.cache.cut('langHasChanged');\n                }\n                else {\n                    callback();\n                }\n            }, function(cbw) {\n                async.parallel([\n                    function(callback) {\n                        self.user.load(callback);\n                    }, function(callback) {\n                        self.metadata.sync(function(err) {\n                            self.data.declareModels();\n                            callback(err);\n                        }, options);\n                    }], function(err) {\n                    cbw(err);\n                });\n            }, function(callback) {\n                var serverInfo = self.metadata.getServerInfo();\n                self.config.sugarLogic = self.config.sugarLogic || {};\n\n                if (serverInfo &&\n                    self.config.sugarLogic.enabled &&\n                    self.utils.versionCompare(serverInfo.version, self.config.sugarLogic.minServerVersion, \">=\"))\n                {\n                    self.fetchSugarLogic(callback);\n                }\n                else {\n                    self.config.sugarLogic.enabled = false;\n                    callback();\n                }\n            }],\n                function(err) {\n                    if (err) {\n                        self.trigger('app:sync:error', err);\n                    } else {\n                        self.isSynced = true;\n                        self.trigger('app:sync:complete');\n                        // TODO this will be removed by SC-5256.\n                        if (window.jQuery) {\n                            jQuery.migrateMute = self.logger.getLevel().value > self.logger.levels.WARN.value;\n                        }\n                    }\n\n                    _.each(_syncCallbacks, function(callback) {\n                        callback(err);\n                    });\n                    // Reset the properties.\n                    _isSyncing = false;\n                    _syncCallbacks = [];\n                }\n            );\n        },\n\n        /**\n         * Syncs public metadata.\n         *\n         * @param {Object} [options] Options. See full list of options\n         *   you can pass to {@link Core.MetadataManager#sync}.\n         * @param {Function} [options.callback] Function to be invoked when the\n         *   sync operation completes.\n         * @memberOf App\n         */\n        syncPublic: function(options) {\n            options = options || {};\n            options.getPublic = true;\n            this.metadata.sync(options.callback, options);\n        },\n\n        /**\n         * Navigates to a new route.\n         *\n         * @param {Core/Context} [context] Context object to extract the module\n         *   from.\n         * @param {Data/Bean} [model] Model object to route with.\n         * @param {string} [action] Action name.\n         * @memberOf App\n         */\n        navigate: function(context, model, action) {\n            var route, id, module;\n            context = context || _app.controller.context;\n            model = model || context.get('model');\n            id = model.id;\n            module = context.get('module') || model.module;\n\n            route = this.router.buildRoute(module, id, action);\n            this.router.navigate(route, {trigger: true});\n        },\n\n        /**\n         * Logs in to the app.\n         *\n         * @param {Object} credentials User credentials.\n         * @param {Object} credentials.username User name.\n         * @param {Object} credentials.password User password.\n         * @param {Object} [info] Extra data to be passed in login request such\n         *   as client user agent, etc.\n         * @param {Object} [callbacks] Object containing the callbacks.\n         * @param {Function} [callbacks.success] The success callback.\n         * @param {Function} [callbacks.error] The error callback.\n         * @param {Function} [callbacks.complete] The complete callback.\n         * @memberOf App\n         * @fires app:login:success on successful login.\n         */\n        login: function(credentials, info, callbacks) {\n            callbacks = callbacks || {};\n\n            info = info || {};\n            info.current_language = Language.getLanguage();\n            _app.api.login(credentials, info, {\n                success: function(data) {\n                    _app.trigger('app:login:success', data, credentials.username);\n                    if (callbacks.success) callbacks.success(data);\n                },\n                error: function(error) {\n                    _app.error.handleHttpError(error);\n                    if (callbacks.error) callbacks.error(error);\n                },\n                complete: callbacks.complete\n            });\n        },\n\n        /**\n         * Logs out of this app.\n         *\n         * @param {Object} [callbacks] Object containing the callbacks.\n         * @param {Function} [callbacks.success] The success callback.\n         * @param {Function} [callbacks.error] The error callback.\n         * @param {Function} [callbacks.complete] The complete callback.\n         * @param {boolean} [clear=false] Flag indicating if user information\n         *   must be deleted from cache.\n         * @param {Object} [options={}] jQuery/Zepto request options.\n         * @return {SUGAR.HttpRequest} XHR request object.\n         * @fires app:logout\n         * @memberOf App\n         */\n        logout: function(callbacks, clear, options) {\n            var originalComplete, originalError;\n            callbacks = callbacks || {};\n            originalComplete = callbacks.complete;\n            originalError = callbacks.error;\n\n            callbacks.complete = function(data) {\n                // The 'clear' comes from the logout URL (see router.js)\n                _app.trigger('app:logout', clear);\n                if (originalComplete) {\n                    originalComplete(data);\n                }\n            };\n            callbacks.error = function(error) {\n                _app.error.handleHttpError(error);\n                if (originalError) originalError(error);\n            };\n\n            return _app.api.logout(callbacks, options);\n        },\n\n        fetchSugarLogic: function(callback) {\n            if (_app.config.sugarLogic.isDynamic) {\n                _app.api.call(\n                    'read',\n                    _app.api.buildURL('ExpressionEngine', 'functions'),\n                    null,\n                    {\n                        success: function(expressions) {\n                            _app.cacheSugarLogicExpressions(expressions);\n                            _app.loadSugarLogic(expressions, callback);\n                        },\n                        error: function(err) {\n                            // TODO: Consider turning off SL altogether\n                            callback(err);\n                        }\n                    },\n                    { dataType: 'application/text' }\n                );\n            }\n            else callback();\n\n        },\n\n        cacheSugarLogicExpressions: function(expressions) {\n            _app.cache.set(\"sugarlogic\", expressions);\n        },\n\n        _loadSugarLogic: function() {\n            return _app.cache.get(\"sugarlogic\");\n        },\n\n        loadSugarLogic: function(expressions, callback) {\n            return _app.compileJs(expressions || _app._loadSugarLogic(), callback);\n        },\n\n        compileJs: function(js, callback) {\n            try {\n                eval.call(window, js); // jshint ignore:line\n                if (callback) callback();\n            }\n            catch (e) {\n                Logger.fatal(\"Failed to compile js\");\n                // TODO: Consider turning off SL altogether\n                if (callback) callback(e);\n                return e;\n            }\n\n            return null;\n        },\n\n        /**\n         * Checks if the server version and flavor are compatible.\n         *\n         * @param {Object} data Server information.\n         * @return {boolean|Object} `true` if server is compatible and an error\n         *   object if not.\n         * @memberOf App\n         */\n        isServerCompatible: function(data) {\n            var flavors = this.config.supportedServerFlavors,\n                minVersion = this.config.minServerVersion,\n                isSupportedFlavor,\n                isSupportedVersion,\n                error;\n\n            // We assume the app is not interested in the compatibility check if it doesn't have compatibility config.\n            if (_.isEmpty(flavors) && !minVersion) {\n                return true;\n            }\n\n            // Undefined or null data with defined compatibility config means the server is incompatible\n\n            isSupportedFlavor = !!((_.isEmpty(flavors)) || (data && _.contains(flavors, data.flavor)));\n            isSupportedVersion = !!(!minVersion || (data && this.utils.versionCompare(data.version, minVersion, '>=')));\n\n            if (isSupportedFlavor && isSupportedVersion) {\n                return true;\n            } else if (!isSupportedVersion) {\n                error = {\n                    code: 'server_version_incompatible',\n                    label: 'ERR_SERVER_VERSION_INCOMPATIBLE'\n                };\n            } else {\n                error = {\n                    code: 'server_flavor_incompatible',\n                    label: 'ERR_SERVER_FLAVOR_INCOMPATIBLE'\n                };\n            }\n\n            error.server_info = data;\n            return error;\n        },\n\n        modules: _modules\n    };\n\n}());\n\n// The assignments below are temporary since components should just require the\n// mixins/components they need instead of relying on the global variable.\nconst Context = require('./core/context');\nSUGAR.App.Context = Context;\nconst ctxFactory = {\n    /**\n     * Gets a new instance of the context object.\n     *\n     * @param {Object} [attributes] Any parameters and state properties to\n     *   attach to the context.\n     * @return {Core/Context} New context instance.\n     * @deprecated since 7.10.\n     */\n    getContext: function (attributes) {\n        SUGAR.App.logger.warn('The function `app.context.getContext()` is deprecated in 7.10. ' +\n            'Please use the `new` keyword to create a context.');\n        return new Context(attributes);\n    }\n};\n\nSUGAR.App.augment('Bean', require('./data/bean'));\nSUGAR.App.augment('BeanCollection', require('./data/bean-collection'));\nSUGAR.App.augment('MixedBeanCollection', require('./data/mixed-bean-collection'));\nSUGAR.App.augment('error', require('./core/error'));\nSUGAR.App.augment('context', ctxFactory);\nSUGAR.App.augment('utils', Utils);\nSUGAR.App.augment('cookie', require('./utils/cookie'));\nSUGAR.App.augment('Controller', Controller);\nSUGAR.App.augment('events', require('./core/events'));\nSUGAR.App.augment('acl', require('./core/acl'));\nSUGAR.App.augment('metadata', MetadataManager);\nSUGAR.App.augment('currency', require('./utils/currency'));\nSUGAR.App.augment('date', require('./utils/date'));\nSUGAR.App.augment('math', require('./utils/math'));\nSUGAR.App.augment('plugins', require('./core/plugin-manager'));\n_.mixin(require('./utils/underscore-mixins'));\nSUGAR.App.augment('user', require('./core/user'));\nHandlebars.registerHelper(require('./view/hbs-helpers'));\nSUGAR.App.augment('validation', require('./data/validation'));\nSUGAR.App.augment('data', require('./data/data-manager'));\nSUGAR.App.augment('lang', Language);\nSUGAR.App.augment('template', require('./view/template'));\nSUGAR.App.Router = require('./core/router');\nSUGAR.App.augment('routing', Routing);\nconst ViewManager = require('./view/view-manager');\nSUGAR.App.augment('view', ViewManager);\nViewManager.Component = require('./view/component');\nSUGAR.App.augment('alert', require('./view/alert'));\nViewManager.AlertView = require('./view/alert-view');\nViewManager.Field = require('./view/field');\nViewManager.Layout = require('./view/layout');\nViewManager.View = require('./view/view');\n","module.exports = \"/*\\n * Your installation or use of this SugarCRM file is subject to the applicable\\n * terms available at\\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\\n * If you do not agree to all of the applicable terms or do not have the\\n * authority to bind the entity as an authorized representative, then do not\\n * install or use this SugarCRM file.\\n *\\n * Copyright (C) SugarCRM Inc. All rights reserved.\\n */\\nfunction version_compare(v1, v2, operator) {\\n  // http://kevin.vanzonneveld.net\\n  // +      original by: Philippe Jausions (http://pear.php.net/user/jausions)\\n  // +      original by: Aidan Lister (http://aidanlister.com/)\\n  // + reimplemented by: Kankrelune (http://www.webfaktory.info/)\\n  // +      improved by: Brett Zamir (http://brett-zamir.me)\\n  // +      improved by: Scott Baker\\n  // +      improved by: Theriault\\n  // *        example 1: version_compare('8.2.5rc', '8.2.5a');\\n  // *        returns 1: 1\\n  // *        example 2: version_compare('8.2.50', '8.2.52', '<');\\n  // *        returns 2: true\\n  // *        example 3: version_compare('5.3.0-dev', '5.3.0');\\n  // *        returns 3: -1\\n  // *        example 4: version_compare('4.1.0.52','4.01.0.51');\\n  // *        returns 4: 1\\n  // BEGIN REDUNDANT\\n  this.php_js = this.php_js || {};\\n  this.php_js.ENV = this.php_js.ENV || {};\\n  // END REDUNDANT\\n  // Important: compare must be initialized at 0.\\n  var i = 0,\\n    x = 0,\\n    compare = 0,\\n    // vm maps textual PHP versions to negatives so they're less than 0.\\n    // PHP currently defines these as CASE-SENSITIVE. It is important to\\n    // leave these as negatives so that they can come before numerical versions\\n    // and as if no letters were there to begin with.\\n    // (1alpha is < 1 and < 1.1 but > 1dev1)\\n    // If a non-numerical value can't be mapped to this table, it receives\\n    // -7 as its value.\\n    vm = {\\n      'dev': -6,\\n      'alpha': -5,\\n      'a': -5,\\n      'beta': -4,\\n      'b': -4,\\n      'RC': -3,\\n      'rc': -3,\\n      '#': -2,\\n      'p': -1,\\n      'pl': -1\\n    },\\n    // This function will be called to prepare each version argument.\\n    // It replaces every _, -, and + with a dot.\\n    // It surrounds any nonsequence of numbers/dots with dots.\\n    // It replaces sequences of dots with a single dot.\\n    //    version_compare('4..0', '4.0') == 0\\n    // Important: A string of 0 length needs to be converted into a value\\n    // even less than an unexisting value in vm (-7), hence [-8].\\n    // It's also important to not strip spaces because of this.\\n    //   version_compare('', ' ') == 1\\n    prepVersion = function prepVersion(v) {\\n      v = ('' + v).replace(/[_\\\\-+]/g, '.');\\n      v = v.replace(/([^.\\\\d]+)/g, '.$1.').replace(/\\\\.{2,}/g, '.');\\n      return !v.length ? [-8] : v.split('.');\\n    },\\n    // This converts a version component to a number.\\n    // Empty component becomes 0.\\n    // Non-numerical component becomes a negative number.\\n    // Numerical component becomes itself as an integer.\\n    numVersion = function numVersion(v) {\\n      return !v ? 0 : isNaN(v) ? vm[v] || -7 : parseInt(v, 10);\\n    };\\n  v1 = prepVersion(v1);\\n  v2 = prepVersion(v2);\\n  x = Math.max(v1.length, v2.length);\\n  for (i = 0; i < x; i++) {\\n    if (v1[i] == v2[i]) {\\n      continue;\\n    }\\n    v1[i] = numVersion(v1[i]);\\n    v2[i] = numVersion(v2[i]);\\n    if (v1[i] < v2[i]) {\\n      compare = -1;\\n      break;\\n    } else if (v1[i] > v2[i]) {\\n      compare = 1;\\n      break;\\n    }\\n  }\\n  if (!operator) {\\n    return compare;\\n  }\\n\\n  // Important: operator is CASE-SENSITIVE.\\n  // \\\"No operator\\\" seems to be treated as \\\"<.\\\"\\n  // Any other values seem to make the function return null.\\n  switch (operator) {\\n    case '>':\\n    case 'gt':\\n      return compare > 0;\\n    case '>=':\\n    case 'ge':\\n      return compare >= 0;\\n    case '<=':\\n    case 'le':\\n      return compare <= 0;\\n    case '==':\\n    case '=':\\n    case 'eq':\\n      return compare === 0;\\n    case '<>':\\n    case '!=':\\n    case 'ne':\\n      return compare !== 0;\\n    case '':\\n    case '<':\\n    case 'lt':\\n      return compare < 0;\\n    default:\\n      return null;\\n  }\\n}\"","module.exports = \"//     Backbone.js 1.4.1\\n\\n//     (c) 2010-2022 Jeremy Ashkenas and DocumentCloud\\n//     Backbone may be freely distributed under the MIT license.\\n//     For all details and documentation:\\n//     http://backbonejs.org\\n\\n(function(factory) {\\n\\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\\n  // We use `self` instead of `window` for `WebWorker` support.\\n  var root = typeof self == 'object' && self.self === self && self ||\\n            typeof global == 'object' && global.global === global && global;\\n\\n  // Set up Backbone appropriately for the environment. Start with AMD.\\n  if (typeof define === 'function' && define.amd) {\\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\\n      // Export global even in AMD case in case this script is loaded with\\n      // others that may still expect a global Backbone.\\n      root.Backbone = factory(root, exports, _, $);\\n    });\\n\\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\\n  } else if (typeof exports !== 'undefined') {\\n    var _ = require('underscore'), $;\\n    try { $ = require('jquery'); } catch (e) {}\\n    factory(root, exports, _, $);\\n\\n  // Finally, as a browser global.\\n  } else {\\n    root.Backbone = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);\\n  }\\n\\n})(function(root, Backbone, _, $) {\\n\\n  // Initial Setup\\n  // -------------\\n\\n  // Save the previous value of the `Backbone` variable, so that it can be\\n  // restored later on, if `noConflict` is used.\\n  var previousBackbone = root.Backbone;\\n\\n  // Create a local reference to a common array method we'll want to use later.\\n  var slice = Array.prototype.slice;\\n\\n  // Current version of the library. Keep in sync with `package.json`.\\n  Backbone.VERSION = '1.4.1';\\n\\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\\n  // the `$` variable.\\n  Backbone.$ = $;\\n\\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\\n  // to its previous owner. Returns a reference to this Backbone object.\\n  Backbone.noConflict = function() {\\n    root.Backbone = previousBackbone;\\n    return this;\\n  };\\n\\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\\n  // will fake `\\\"PATCH\\\"`, `\\\"PUT\\\"` and `\\\"DELETE\\\"` requests via the `_method` parameter and\\n  // set a `X-Http-Method-Override` header.\\n  Backbone.emulateHTTP = false;\\n\\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\\n  // `application/json` requests ... this will encode the body as\\n  // `application/x-www-form-urlencoded` instead and will send the model in a\\n  // form param named `model`.\\n  Backbone.emulateJSON = false;\\n\\n  // Backbone.Events\\n  // ---------------\\n\\n  // A module that can be mixed in to *any object* in order to provide it with\\n  // a custom event channel. You may bind a callback to an event with `on` or\\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\\n  // succession.\\n  //\\n  //     var object = {};\\n  //     _.extend(object, Backbone.Events);\\n  //     object.on('expand', function(){ alert('expanded'); });\\n  //     object.trigger('expand');\\n  //\\n  var Events = Backbone.Events = {};\\n\\n  // Regular expression used to split event strings.\\n  var eventSplitter = /\\\\s+/;\\n\\n  // A private global variable to share between listeners and listenees.\\n  var _listening;\\n\\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\\n  // space-separated events `\\\"change blur\\\", callback` and jQuery-style event\\n  // maps `{event: callback}`).\\n  var eventsApi = function(iteratee, events, name, callback, opts) {\\n    var i = 0, names;\\n    if (name && typeof name === 'object') {\\n      // Handle event maps.\\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\\n      for (names = _.keys(name); i < names.length ; i++) {\\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\\n      }\\n    } else if (name && eventSplitter.test(name)) {\\n      // Handle space-separated event names by delegating them individually.\\n      for (names = name.split(eventSplitter); i < names.length; i++) {\\n        events = iteratee(events, names[i], callback, opts);\\n      }\\n    } else {\\n      // Finally, standard events.\\n      events = iteratee(events, name, callback, opts);\\n    }\\n    return events;\\n  };\\n\\n  // Bind an event to a `callback` function. Passing `\\\"all\\\"` will bind\\n  // the callback to all events fired.\\n  Events.on = function(name, callback, context) {\\n    this._events = eventsApi(onApi, this._events || {}, name, callback, {\\n      context: context,\\n      ctx: this,\\n      listening: _listening\\n    });\\n\\n    if (_listening) {\\n      var listeners = this._listeners || (this._listeners = {});\\n      listeners[_listening.id] = _listening;\\n      // Allow the listening to use a counter, instead of tracking\\n      // callbacks for library interop\\n      _listening.interop = false;\\n    }\\n\\n    return this;\\n  };\\n\\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\\n  // an event in another object... keeping track of what it's listening to\\n  // for easier unbinding later.\\n  Events.listenTo = function(obj, name, callback) {\\n    if (!obj) return this;\\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\\n    var listening = _listening = listeningTo[id];\\n\\n    // This object is not listening to any other events on `obj` yet.\\n    // Setup the necessary references to track the listening callbacks.\\n    if (!listening) {\\n      this._listenId || (this._listenId = _.uniqueId('l'));\\n      listening = _listening = listeningTo[id] = new Listening(this, obj);\\n    }\\n\\n    // Bind callbacks on obj.\\n    var error = tryCatchOn(obj, name, callback, this);\\n    _listening = void 0;\\n\\n    if (error) throw error;\\n    // If the target obj is not Backbone.Events, track events manually.\\n    if (listening.interop) listening.on(name, callback);\\n\\n    return this;\\n  };\\n\\n  // The reducing API that adds a callback to the `events` object.\\n  var onApi = function(events, name, callback, options) {\\n    if (callback) {\\n      var handlers = events[name] || (events[name] = []);\\n      var context = options.context, ctx = options.ctx, listening = options.listening;\\n      if (listening) listening.count++;\\n\\n      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\\n    }\\n    return events;\\n  };\\n\\n  // An try-catch guarded #on function, to prevent poisoning the global\\n  // `_listening` variable.\\n  var tryCatchOn = function(obj, name, callback, context) {\\n    try {\\n      obj.on(name, callback, context);\\n    } catch (e) {\\n      return e;\\n    }\\n  };\\n\\n  // Remove one or many callbacks. If `context` is null, removes all\\n  // callbacks with that function. If `callback` is null, removes all\\n  // callbacks for the event. If `name` is null, removes all bound\\n  // callbacks for all events.\\n  Events.off = function(name, callback, context) {\\n    if (!this._events) return this;\\n    this._events = eventsApi(offApi, this._events, name, callback, {\\n      context: context,\\n      listeners: this._listeners\\n    });\\n\\n    return this;\\n  };\\n\\n  // Tell this object to stop listening to either specific events ... or\\n  // to every object it's currently listening to.\\n  Events.stopListening = function(obj, name, callback) {\\n    var listeningTo = this._listeningTo;\\n    if (!listeningTo) return this;\\n\\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\\n    for (var i = 0; i < ids.length; i++) {\\n      var listening = listeningTo[ids[i]];\\n\\n      // If listening doesn't exist, this object is not currently\\n      // listening to obj. Break out early.\\n      if (!listening) break;\\n\\n      listening.obj.off(name, callback, this);\\n      if (listening.interop) listening.off(name, callback);\\n    }\\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\\n\\n    return this;\\n  };\\n\\n  // The reducing API that removes a callback from the `events` object.\\n  var offApi = function(events, name, callback, options) {\\n    if (!events) return;\\n\\n    var context = options.context, listeners = options.listeners;\\n    var i = 0, names;\\n\\n    // Delete all event listeners and \\\"drop\\\" events.\\n    if (!name && !context && !callback) {\\n      for (names = _.keys(listeners); i < names.length; i++) {\\n        listeners[names[i]].cleanup();\\n      }\\n      return;\\n    }\\n\\n    names = name ? [name] : _.keys(events);\\n    for (; i < names.length; i++) {\\n      name = names[i];\\n      var handlers = events[name];\\n\\n      // Bail out if there are no events stored.\\n      if (!handlers) break;\\n\\n      // Find any remaining events.\\n      var remaining = [];\\n      for (var j = 0; j < handlers.length; j++) {\\n        var handler = handlers[j];\\n        if (\\n          callback && callback !== handler.callback &&\\n            callback !== handler.callback._callback ||\\n              context && context !== handler.context\\n        ) {\\n          remaining.push(handler);\\n        } else {\\n          var listening = handler.listening;\\n          if (listening) listening.off(name, callback);\\n        }\\n      }\\n\\n      // Replace events if there are any remaining.  Otherwise, clean up.\\n      if (remaining.length) {\\n        events[name] = remaining;\\n      } else {\\n        delete events[name];\\n      }\\n    }\\n\\n    return events;\\n  };\\n\\n  // Bind an event to only be triggered a single time. After the first time\\n  // the callback is invoked, its listener will be removed. If multiple events\\n  // are passed in using the space-separated syntax, the handler will fire\\n  // once for each event, not once for a combination of all events.\\n  Events.once = function(name, callback, context) {\\n    // Map the event into a `{event: once}` object.\\n    var events = eventsApi(onceMap, {}, name, callback, this.off.bind(this));\\n    if (typeof name === 'string' && context == null) callback = void 0;\\n    return this.on(events, callback, context);\\n  };\\n\\n  // Inversion-of-control versions of `once`.\\n  Events.listenToOnce = function(obj, name, callback) {\\n    // Map the event into a `{event: once}` object.\\n    var events = eventsApi(onceMap, {}, name, callback, this.stopListening.bind(this, obj));\\n    return this.listenTo(obj, events);\\n  };\\n\\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\\n  // `offer` unbinds the `onceWrapper` after it has been called.\\n  var onceMap = function(map, name, callback, offer) {\\n    if (callback) {\\n      var once = map[name] = _.once(function() {\\n        offer(name, once);\\n        callback.apply(this, arguments);\\n      });\\n      once._callback = callback;\\n    }\\n    return map;\\n  };\\n\\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\\n  // passed the same arguments as `trigger` is, apart from the event name\\n  // (unless you're listening on `\\\"all\\\"`, which will cause your callback to\\n  // receive the true name of the event as the first argument).\\n  Events.trigger = function(name) {\\n    if (!this._events) return this;\\n\\n    var length = Math.max(0, arguments.length - 1);\\n    var args = Array(length);\\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\\n\\n    eventsApi(triggerApi, this._events, name, void 0, args);\\n    return this;\\n  };\\n\\n  // Handles triggering the appropriate event callbacks.\\n  var triggerApi = function(objEvents, name, callback, args) {\\n    if (objEvents) {\\n      var events = objEvents[name];\\n      var allEvents = objEvents.all;\\n      if (events && allEvents) allEvents = allEvents.slice();\\n      if (events) triggerEvents(events, args);\\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\\n    }\\n    return objEvents;\\n  };\\n\\n  // A difficult-to-believe, but optimized internal dispatch function for\\n  // triggering events. Tries to keep the usual cases speedy (most internal\\n  // Backbone events have 3 arguments).\\n  var triggerEvents = function(events, args) {\\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\\n    switch (args.length) {\\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\\n    }\\n  };\\n\\n  // A listening class that tracks and cleans up memory bindings\\n  // when all callbacks have been offed.\\n  var Listening = function(listener, obj) {\\n    this.id = listener._listenId;\\n    this.listener = listener;\\n    this.obj = obj;\\n    this.interop = true;\\n    this.count = 0;\\n    this._events = void 0;\\n  };\\n\\n  Listening.prototype.on = Events.on;\\n\\n  // Offs a callback (or several).\\n  // Uses an optimized counter if the listenee uses Backbone.Events.\\n  // Otherwise, falls back to manual tracking to support events\\n  // library interop.\\n  Listening.prototype.off = function(name, callback) {\\n    var cleanup;\\n    if (this.interop) {\\n      this._events = eventsApi(offApi, this._events, name, callback, {\\n        context: void 0,\\n        listeners: void 0\\n      });\\n      cleanup = !this._events;\\n    } else {\\n      this.count--;\\n      cleanup = this.count === 0;\\n    }\\n    if (cleanup) this.cleanup();\\n  };\\n\\n  // Cleans up memory bindings between the listener and the listenee.\\n  Listening.prototype.cleanup = function() {\\n    delete this.listener._listeningTo[this.obj._listenId];\\n    if (!this.interop) delete this.obj._listeners[this.id];\\n  };\\n\\n  // Aliases for backwards compatibility.\\n  Events.bind   = Events.on;\\n  Events.unbind = Events.off;\\n\\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\\n  // want global \\\"pubsub\\\" in a convenient place.\\n  _.extend(Backbone, Events);\\n\\n  // Backbone.Model\\n  // --------------\\n\\n  // Backbone **Models** are the basic data object in the framework --\\n  // frequently representing a row in a table in a database on your server.\\n  // A discrete chunk of data and a bunch of useful, related methods for\\n  // performing computations and transformations on that data.\\n\\n  // Create a new model with the specified attributes. A client id (`cid`)\\n  // is automatically generated and assigned for you.\\n  var Model = Backbone.Model = function(attributes, options) {\\n    var attrs = attributes || {};\\n    options || (options = {});\\n    this.preinitialize.apply(this, arguments);\\n    this.cid = _.uniqueId(this.cidPrefix);\\n    this.attributes = {};\\n    if (options.collection) this.collection = options.collection;\\n    if (options.parse) attrs = this.parse(attrs, options) || {};\\n    var defaults = _.result(this, 'defaults');\\n    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\\n    this.set(attrs, options);\\n    this.changed = {};\\n    this.initialize.apply(this, arguments);\\n  };\\n\\n  // Attach all inheritable methods to the Model prototype.\\n  _.extend(Model.prototype, Events, {\\n\\n    // A hash of attributes whose current and previous value differ.\\n    changed: null,\\n\\n    // The value returned during the last failed validation.\\n    validationError: null,\\n\\n    // The default name for the JSON `id` attribute is `\\\"id\\\"`. MongoDB and\\n    // CouchDB users may want to set this to `\\\"_id\\\"`.\\n    idAttribute: 'id',\\n\\n    // The prefix is used to create the client id which is used to identify models locally.\\n    // You may want to override this if you're experiencing name clashes with model ids.\\n    cidPrefix: 'c',\\n\\n    // preinitialize is an empty function by default. You can override it with a function\\n    // or object.  preinitialize will run before any instantiation logic is run in the Model.\\n    preinitialize: function(){},\\n\\n    // Initialize is an empty function by default. Override it with your own\\n    // initialization logic.\\n    initialize: function(){},\\n\\n    // Return a copy of the model's `attributes` object.\\n    toJSON: function(options) {\\n      return _.clone(this.attributes);\\n    },\\n\\n    // Proxy `Backbone.sync` by default -- but override this if you need\\n    // custom syncing semantics for *this* particular model.\\n    sync: function() {\\n      return Backbone.sync.apply(this, arguments);\\n    },\\n\\n    // Get the value of an attribute.\\n    get: function(attr) {\\n      return this.attributes[attr];\\n    },\\n\\n    // Get the HTML-escaped value of an attribute.\\n    escape: function(attr) {\\n      return _.escape(this.get(attr));\\n    },\\n\\n    // Returns `true` if the attribute contains a value that is not null\\n    // or undefined.\\n    has: function(attr) {\\n      return this.get(attr) != null;\\n    },\\n\\n    // Special-cased proxy to underscore's `_.matches` method.\\n    matches: function(attrs) {\\n      return !!_.iteratee(attrs, this)(this.attributes);\\n    },\\n\\n    // Set a hash of model attributes on the object, firing `\\\"change\\\"`. This is\\n    // the core primitive operation of a model, updating the data and notifying\\n    // anyone who needs to know about the change in state. The heart of the beast.\\n    set: function(key, val, options) {\\n      if (key == null) return this;\\n\\n      // Handle both `\\\"key\\\", value` and `{key: value}` -style arguments.\\n      var attrs;\\n      if (typeof key === 'object') {\\n        attrs = key;\\n        options = val;\\n      } else {\\n        (attrs = {})[key] = val;\\n      }\\n\\n      options || (options = {});\\n\\n      // Run validation.\\n      if (!this._validate(attrs, options)) return false;\\n\\n      // Extract attributes and options.\\n      var unset      = options.unset;\\n      var silent     = options.silent;\\n      var changes    = [];\\n      var changing   = this._changing;\\n      this._changing = true;\\n\\n      if (!changing) {\\n        this._previousAttributes = _.clone(this.attributes);\\n        this.changed = {};\\n      }\\n\\n      var current = this.attributes;\\n      var changed = this.changed;\\n      var prev    = this._previousAttributes;\\n\\n      // For each `set` attribute, update or delete the current value.\\n      for (var attr in attrs) {\\n        val = attrs[attr];\\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\\n        if (!_.isEqual(prev[attr], val)) {\\n          changed[attr] = val;\\n        } else {\\n          delete changed[attr];\\n        }\\n        unset ? delete current[attr] : current[attr] = val;\\n      }\\n\\n      // Update the `id`.\\n      if (this.idAttribute in attrs) {\\n        var prevId = this.id;\\n        this.id = this.get(this.idAttribute);\\n        this.trigger('changeId', this, prevId, options);\\n      }\\n\\n      // Trigger all relevant attribute changes.\\n      if (!silent) {\\n        if (changes.length) this._pending = options;\\n        for (var i = 0; i < changes.length; i++) {\\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\\n        }\\n      }\\n\\n      // You might be wondering why there's a `while` loop here. Changes can\\n      // be recursively nested within `\\\"change\\\"` events.\\n      if (changing) return this;\\n      if (!silent) {\\n        while (this._pending) {\\n          options = this._pending;\\n          this._pending = false;\\n          this.trigger('change', this, options);\\n        }\\n      }\\n      this._pending = false;\\n      this._changing = false;\\n      return this;\\n    },\\n\\n    // Remove an attribute from the model, firing `\\\"change\\\"`. `unset` is a noop\\n    // if the attribute doesn't exist.\\n    unset: function(attr, options) {\\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\\n    },\\n\\n    // Clear all attributes on the model, firing `\\\"change\\\"`.\\n    clear: function(options) {\\n      var attrs = {};\\n      for (var key in this.attributes) attrs[key] = void 0;\\n      return this.set(attrs, _.extend({}, options, {unset: true}));\\n    },\\n\\n    // Determine if the model has changed since the last `\\\"change\\\"` event.\\n    // If you specify an attribute name, determine if that attribute has changed.\\n    hasChanged: function(attr) {\\n      if (attr == null) return !_.isEmpty(this.changed);\\n      return _.has(this.changed, attr);\\n    },\\n\\n    // Return an object containing all the attributes that have changed, or\\n    // false if there are no changed attributes. Useful for determining what\\n    // parts of a view need to be updated and/or what attributes need to be\\n    // persisted to the server. Unset attributes will be set to undefined.\\n    // You can also pass an attributes object to diff against the model,\\n    // determining if there *would be* a change.\\n    changedAttributes: function(diff) {\\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\\n      var old = this._changing ? this._previousAttributes : this.attributes;\\n      var changed = {};\\n      var hasChanged;\\n      for (var attr in diff) {\\n        var val = diff[attr];\\n        if (_.isEqual(old[attr], val)) continue;\\n        changed[attr] = val;\\n        hasChanged = true;\\n      }\\n      return hasChanged ? changed : false;\\n    },\\n\\n    // Get the previous value of an attribute, recorded at the time the last\\n    // `\\\"change\\\"` event was fired.\\n    previous: function(attr) {\\n      if (attr == null || !this._previousAttributes) return null;\\n      return this._previousAttributes[attr];\\n    },\\n\\n    // Get all of the attributes of the model at the time of the previous\\n    // `\\\"change\\\"` event.\\n    previousAttributes: function() {\\n      return _.clone(this._previousAttributes);\\n    },\\n\\n    // Fetch the model from the server, merging the response with the model's\\n    // local attributes. Any changed attributes will trigger a \\\"change\\\" event.\\n    fetch: function(options) {\\n      options = _.extend({parse: true}, options);\\n      var model = this;\\n      var success = options.success;\\n      options.success = function(resp) {\\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\\n        if (!model.set(serverAttrs, options)) return false;\\n        if (success) success.call(options.context, model, resp, options);\\n        model.trigger('sync', model, resp, options);\\n      };\\n      wrapError(this, options);\\n      return this.sync('read', this, options);\\n    },\\n\\n    // Set a hash of model attributes, and sync the model to the server.\\n    // If the server returns an attributes hash that differs, the model's\\n    // state will be `set` again.\\n    save: function(key, val, options) {\\n      // Handle both `\\\"key\\\", value` and `{key: value}` -style arguments.\\n      var attrs;\\n      if (key == null || typeof key === 'object') {\\n        attrs = key;\\n        options = val;\\n      } else {\\n        (attrs = {})[key] = val;\\n      }\\n\\n      options = _.extend({validate: true, parse: true}, options);\\n      var wait = options.wait;\\n\\n      // If we're not waiting and attributes exist, save acts as\\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\\n      // the model will be valid when the attributes, if any, are set.\\n      if (attrs && !wait) {\\n        if (!this.set(attrs, options)) return false;\\n      } else if (!this._validate(attrs, options)) {\\n        return false;\\n      }\\n\\n      // After a successful server-side save, the client is (optionally)\\n      // updated with the server-side state.\\n      var model = this;\\n      var success = options.success;\\n      var attributes = this.attributes;\\n      options.success = function(resp) {\\n        // Ensure attributes are restored during synchronous saves.\\n        model.attributes = attributes;\\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\\n        if (success) success.call(options.context, model, resp, options);\\n        model.trigger('sync', model, resp, options);\\n      };\\n      wrapError(this, options);\\n\\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\\n\\n      var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\\n      var xhr = this.sync(method, this, options);\\n\\n      // Restore attributes.\\n      this.attributes = attributes;\\n\\n      return xhr;\\n    },\\n\\n    // Destroy this model on the server if it was already persisted.\\n    // Optimistically removes the model from its collection, if it has one.\\n    // If `wait: true` is passed, waits for the server to respond before removal.\\n    destroy: function(options) {\\n      options = options ? _.clone(options) : {};\\n      var model = this;\\n      var success = options.success;\\n      var wait = options.wait;\\n\\n      var destroy = function() {\\n        model.stopListening();\\n        model.trigger('destroy', model, model.collection, options);\\n      };\\n\\n      options.success = function(resp) {\\n        if (wait) destroy();\\n        if (success) success.call(options.context, model, resp, options);\\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\\n      };\\n\\n      var xhr = false;\\n      if (this.isNew()) {\\n        _.defer(options.success);\\n      } else {\\n        wrapError(this, options);\\n        xhr = this.sync('delete', this, options);\\n      }\\n      if (!wait) destroy();\\n      return xhr;\\n    },\\n\\n    // Default URL for the model's representation on the server -- if you're\\n    // using Backbone's restful methods, override this to change the endpoint\\n    // that will be called.\\n    url: function() {\\n      var base =\\n        _.result(this, 'urlRoot') ||\\n        _.result(this.collection, 'url') ||\\n        urlError();\\n      if (this.isNew()) return base;\\n      var id = this.get(this.idAttribute);\\n      return base.replace(/[^\\\\/]$/, '$&/') + encodeURIComponent(id);\\n    },\\n\\n    // **parse** converts a response into the hash of attributes to be `set` on\\n    // the model. The default implementation is just to pass the response along.\\n    parse: function(resp, options) {\\n      return resp;\\n    },\\n\\n    // Create a new model with identical attributes to this one.\\n    clone: function() {\\n      return new this.constructor(this.attributes);\\n    },\\n\\n    // A model is new if it has never been saved to the server, and lacks an id.\\n    isNew: function() {\\n      return !this.has(this.idAttribute);\\n    },\\n\\n    // Check if the model is currently in a valid state.\\n    isValid: function(options) {\\n      return this._validate({}, _.extend({}, options, {validate: true}));\\n    },\\n\\n    // Run validation against the next complete set of model attributes,\\n    // returning `true` if all is well. Otherwise, fire an `\\\"invalid\\\"` event.\\n    _validate: function(attrs, options) {\\n      if (!options.validate || !this.validate) return true;\\n      attrs = _.extend({}, this.attributes, attrs);\\n      var error = this.validationError = this.validate(attrs, options) || null;\\n      if (!error) return true;\\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\\n      return false;\\n    }\\n\\n  });\\n\\n  // Backbone.Collection\\n  // -------------------\\n\\n  // If models tend to represent a single row of data, a Backbone Collection is\\n  // more analogous to a table full of data ... or a small slice or page of that\\n  // table, or a collection of rows that belong together for a particular reason\\n  // -- all of the messages in this particular folder, all of the documents\\n  // belonging to this particular author, and so on. Collections maintain\\n  // indexes of their models, both in order, and for lookup by `id`.\\n\\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\\n  // If a `comparator` is specified, the Collection will maintain\\n  // its models in sort order, as they're added and removed.\\n  var Collection = Backbone.Collection = function(models, options) {\\n    options || (options = {});\\n    this.preinitialize.apply(this, arguments);\\n    if (options.model) this.model = options.model;\\n    if (options.comparator !== void 0) this.comparator = options.comparator;\\n    this._reset();\\n    this.initialize.apply(this, arguments);\\n    if (models) this.reset(models, _.extend({silent: true}, options));\\n  };\\n\\n  // Default options for `Collection#set`.\\n  var setOptions = {add: true, remove: true, merge: true};\\n  var addOptions = {add: true, remove: false};\\n\\n  // Splices `insert` into `array` at index `at`.\\n  var splice = function(array, insert, at) {\\n    at = Math.min(Math.max(at, 0), array.length);\\n    var tail = Array(array.length - at);\\n    var length = insert.length;\\n    var i;\\n    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\\n  };\\n\\n  // Define the Collection's inheritable methods.\\n  _.extend(Collection.prototype, Events, {\\n\\n    // The default model for a collection is just a **Backbone.Model**.\\n    // This should be overridden in most cases.\\n    model: Model,\\n\\n\\n    // preinitialize is an empty function by default. You can override it with a function\\n    // or object.  preinitialize will run before any instantiation logic is run in the Collection.\\n    preinitialize: function(){},\\n\\n    // Initialize is an empty function by default. Override it with your own\\n    // initialization logic.\\n    initialize: function(){},\\n\\n    // The JSON representation of a Collection is an array of the\\n    // models' attributes.\\n    toJSON: function(options) {\\n      return this.map(function(model) { return model.toJSON(options); });\\n    },\\n\\n    // Proxy `Backbone.sync` by default.\\n    sync: function() {\\n      return Backbone.sync.apply(this, arguments);\\n    },\\n\\n    // Add a model, or list of models to the set. `models` may be Backbone\\n    // Models or raw JavaScript objects to be converted to Models, or any\\n    // combination of the two.\\n    add: function(models, options) {\\n      return this.set(models, _.extend({merge: false}, options, addOptions));\\n    },\\n\\n    // Remove a model, or a list of models from the set.\\n    remove: function(models, options) {\\n      options = _.extend({}, options);\\n      var singular = !_.isArray(models);\\n      models = singular ? [models] : models.slice();\\n      var removed = this._removeModels(models, options);\\n      if (!options.silent && removed.length) {\\n        options.changes = {added: [], merged: [], removed: removed};\\n        this.trigger('update', this, options);\\n      }\\n      return singular ? removed[0] : removed;\\n    },\\n\\n    // Update a collection by `set`-ing a new list of models, adding new ones,\\n    // removing models that are no longer present, and merging models that\\n    // already exist in the collection, as necessary. Similar to **Model#set**,\\n    // the core operation for updating the data contained by the collection.\\n    set: function(models, options) {\\n      if (models == null) return;\\n\\n      options = _.extend({}, setOptions, options);\\n      if (options.parse && !this._isModel(models)) {\\n        models = this.parse(models, options) || [];\\n      }\\n\\n      var singular = !_.isArray(models);\\n      models = singular ? [models] : models.slice();\\n\\n      var at = options.at;\\n      if (at != null) at = +at;\\n      if (at > this.length) at = this.length;\\n      if (at < 0) at += this.length + 1;\\n\\n      var set = [];\\n      var toAdd = [];\\n      var toMerge = [];\\n      var toRemove = [];\\n      var modelMap = {};\\n\\n      var add = options.add;\\n      var merge = options.merge;\\n      var remove = options.remove;\\n\\n      var sort = false;\\n      var sortable = this.comparator && at == null && options.sort !== false;\\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\\n\\n      // Turn bare objects into model references, and prevent invalid models\\n      // from being added.\\n      var model, i;\\n      for (i = 0; i < models.length; i++) {\\n        model = models[i];\\n\\n        // If a duplicate is found, prevent it from being added and\\n        // optionally merge it into the existing model.\\n        var existing = this.get(model);\\n        if (existing) {\\n          if (merge && model !== existing) {\\n            var attrs = this._isModel(model) ? model.attributes : model;\\n            if (options.parse) attrs = existing.parse(attrs, options);\\n            existing.set(attrs, options);\\n            toMerge.push(existing);\\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\\n          }\\n          if (!modelMap[existing.cid]) {\\n            modelMap[existing.cid] = true;\\n            set.push(existing);\\n          }\\n          models[i] = existing;\\n\\n        // If this is a new, valid model, push it to the `toAdd` list.\\n        } else if (add) {\\n          model = models[i] = this._prepareModel(model, options);\\n          if (model) {\\n            toAdd.push(model);\\n            this._addReference(model, options);\\n            modelMap[model.cid] = true;\\n            set.push(model);\\n          }\\n        }\\n      }\\n\\n      // Remove stale models.\\n      if (remove) {\\n        for (i = 0; i < this.length; i++) {\\n          model = this.models[i];\\n          if (!modelMap[model.cid]) toRemove.push(model);\\n        }\\n        if (toRemove.length) this._removeModels(toRemove, options);\\n      }\\n\\n      // See if sorting is needed, update `length` and splice in new models.\\n      var orderChanged = false;\\n      var replace = !sortable && add && remove;\\n      if (set.length && replace) {\\n        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\\n          return m !== set[index];\\n        });\\n        this.models.length = 0;\\n        splice(this.models, set, 0);\\n        this.length = this.models.length;\\n      } else if (toAdd.length) {\\n        if (sortable) sort = true;\\n        splice(this.models, toAdd, at == null ? this.length : at);\\n        this.length = this.models.length;\\n      }\\n\\n      // Silently sort the collection if appropriate.\\n      if (sort) this.sort({silent: true});\\n\\n      // Unless silenced, it's time to fire all appropriate add/sort/update events.\\n      if (!options.silent) {\\n        for (i = 0; i < toAdd.length; i++) {\\n          if (at != null) options.index = at + i;\\n          model = toAdd[i];\\n          model.trigger('add', model, this, options);\\n        }\\n        if (sort || orderChanged) this.trigger('sort', this, options);\\n        if (toAdd.length || toRemove.length || toMerge.length) {\\n          options.changes = {\\n            added: toAdd,\\n            removed: toRemove,\\n            merged: toMerge\\n          };\\n          this.trigger('update', this, options);\\n        }\\n      }\\n\\n      // Return the added (or merged) model (or models).\\n      return singular ? models[0] : models;\\n    },\\n\\n    // When you have more items than you want to add or remove individually,\\n    // you can reset the entire set with a new list of models, without firing\\n    // any granular `add` or `remove` events. Fires `reset` when finished.\\n    // Useful for bulk operations and optimizations.\\n    reset: function(models, options) {\\n      options = options ? _.clone(options) : {};\\n      for (var i = 0; i < this.models.length; i++) {\\n        this._removeReference(this.models[i], options);\\n      }\\n      options.previousModels = this.models;\\n      this._reset();\\n      models = this.add(models, _.extend({silent: true}, options));\\n      if (!options.silent) this.trigger('reset', this, options);\\n      return models;\\n    },\\n\\n    // Add a model to the end of the collection.\\n    push: function(model, options) {\\n      return this.add(model, _.extend({at: this.length}, options));\\n    },\\n\\n    // Remove a model from the end of the collection.\\n    pop: function(options) {\\n      var model = this.at(this.length - 1);\\n      return this.remove(model, options);\\n    },\\n\\n    // Add a model to the beginning of the collection.\\n    unshift: function(model, options) {\\n      return this.add(model, _.extend({at: 0}, options));\\n    },\\n\\n    // Remove a model from the beginning of the collection.\\n    shift: function(options) {\\n      var model = this.at(0);\\n      return this.remove(model, options);\\n    },\\n\\n    // Slice out a sub-array of models from the collection.\\n    slice: function() {\\n      return slice.apply(this.models, arguments);\\n    },\\n\\n    // Get a model from the set by id, cid, model object with id or cid\\n    // properties, or an attributes object that is transformed through modelId.\\n    get: function(obj) {\\n      if (obj == null) return void 0;\\n      return this._byId[obj] ||\\n        this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj, obj.idAttribute)] ||\\n        obj.cid && this._byId[obj.cid];\\n    },\\n\\n    // Returns `true` if the model is in the collection.\\n    has: function(obj) {\\n      return this.get(obj) != null;\\n    },\\n\\n    // Get the model at the given index.\\n    at: function(index) {\\n      if (index < 0) index += this.length;\\n      return this.models[index];\\n    },\\n\\n    // Return models with matching attributes. Useful for simple cases of\\n    // `filter`.\\n    where: function(attrs, first) {\\n      return this[first ? 'find' : 'filter'](attrs);\\n    },\\n\\n    // Return the first model with matching attributes. Useful for simple cases\\n    // of `find`.\\n    findWhere: function(attrs) {\\n      return this.where(attrs, true);\\n    },\\n\\n    // Force the collection to re-sort itself. You don't need to call this under\\n    // normal circumstances, as the set will maintain sort order as each item\\n    // is added.\\n    sort: function(options) {\\n      var comparator = this.comparator;\\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\\n      options || (options = {});\\n\\n      var length = comparator.length;\\n      if (_.isFunction(comparator)) comparator = comparator.bind(this);\\n\\n      // Run sort based on type of `comparator`.\\n      if (length === 1 || _.isString(comparator)) {\\n        this.models = this.sortBy(comparator);\\n      } else {\\n        this.models.sort(comparator);\\n      }\\n      if (!options.silent) this.trigger('sort', this, options);\\n      return this;\\n    },\\n\\n    // Pluck an attribute from each model in the collection.\\n    pluck: function(attr) {\\n      return this.map(attr + '');\\n    },\\n\\n    // Fetch the default set of models for this collection, resetting the\\n    // collection when they arrive. If `reset: true` is passed, the response\\n    // data will be passed through the `reset` method instead of `set`.\\n    fetch: function(options) {\\n      options = _.extend({parse: true}, options);\\n      var success = options.success;\\n      var collection = this;\\n      options.success = function(resp) {\\n        var method = options.reset ? 'reset' : 'set';\\n        collection[method](resp, options);\\n        if (success) success.call(options.context, collection, resp, options);\\n        collection.trigger('sync', collection, resp, options);\\n      };\\n      wrapError(this, options);\\n      return this.sync('read', this, options);\\n    },\\n\\n    // Create a new instance of a model in this collection. Add the model to the\\n    // collection immediately, unless `wait: true` is passed, in which case we\\n    // wait for the server to agree.\\n    create: function(model, options) {\\n      options = options ? _.clone(options) : {};\\n      var wait = options.wait;\\n      model = this._prepareModel(model, options);\\n      if (!model) return false;\\n      if (!wait) this.add(model, options);\\n      var collection = this;\\n      var success = options.success;\\n      options.success = function(m, resp, callbackOpts) {\\n        if (wait) collection.add(m, callbackOpts);\\n        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\\n      };\\n      model.save(null, options);\\n      return model;\\n    },\\n\\n    // **parse** converts a response into a list of models to be added to the\\n    // collection. The default implementation is just to pass it through.\\n    parse: function(resp, options) {\\n      return resp;\\n    },\\n\\n    // Create a new collection with an identical list of models as this one.\\n    clone: function() {\\n      return new this.constructor(this.models, {\\n        model: this.model,\\n        comparator: this.comparator\\n      });\\n    },\\n\\n    // Define how to uniquely identify models in the collection.\\n    modelId: function(attrs, idAttribute) {\\n      return attrs[idAttribute || this.model.prototype.idAttribute || 'id'];\\n    },\\n\\n    // Get an iterator of all models in this collection.\\n    values: function() {\\n      return new CollectionIterator(this, ITERATOR_VALUES);\\n    },\\n\\n    // Get an iterator of all model IDs in this collection.\\n    keys: function() {\\n      return new CollectionIterator(this, ITERATOR_KEYS);\\n    },\\n\\n    // Get an iterator of all [ID, model] tuples in this collection.\\n    entries: function() {\\n      return new CollectionIterator(this, ITERATOR_KEYSVALUES);\\n    },\\n\\n    // Private method to reset all internal state. Called when the collection\\n    // is first initialized or reset.\\n    _reset: function() {\\n      this.length = 0;\\n      this.models = [];\\n      this._byId  = {};\\n    },\\n\\n    // Prepare a hash of attributes (or other model) to be added to this\\n    // collection.\\n    _prepareModel: function(attrs, options) {\\n      if (this._isModel(attrs)) {\\n        if (!attrs.collection) attrs.collection = this;\\n        return attrs;\\n      }\\n      options = options ? _.clone(options) : {};\\n      options.collection = this;\\n\\n      var model;\\n      if (this.model.prototype) {\\n        model = new this.model(attrs, options);\\n      } else {\\n        // ES class methods didn't have prototype\\n        model = this.model(attrs, options);\\n      }\\n\\n      if (!model.validationError) return model;\\n      this.trigger('invalid', this, model.validationError, options);\\n      return false;\\n    },\\n\\n    // Internal method called by both remove and set.\\n    _removeModels: function(models, options) {\\n      var removed = [];\\n      for (var i = 0; i < models.length; i++) {\\n        var model = this.get(models[i]);\\n        if (!model) continue;\\n\\n        var index = this.indexOf(model);\\n        this.models.splice(index, 1);\\n        this.length--;\\n\\n        // Remove references before triggering 'remove' event to prevent an\\n        // infinite loop. #3693\\n        delete this._byId[model.cid];\\n        var id = this.modelId(model.attributes, model.idAttribute);\\n        if (id != null) delete this._byId[id];\\n\\n        if (!options.silent) {\\n          options.index = index;\\n          model.trigger('remove', model, this, options);\\n        }\\n\\n        removed.push(model);\\n        this._removeReference(model, options);\\n      }\\n      return removed;\\n    },\\n\\n    // Method for checking whether an object should be considered a model for\\n    // the purposes of adding to the collection.\\n    _isModel: function(model) {\\n      return model instanceof Model;\\n    },\\n\\n    // Internal method to create a model's ties to a collection.\\n    _addReference: function(model, options) {\\n      this._byId[model.cid] = model;\\n      var id = this.modelId(model.attributes, model.idAttribute);\\n      if (id != null) this._byId[id] = model;\\n      model.on('all', this._onModelEvent, this);\\n    },\\n\\n    // Internal method to sever a model's ties to a collection.\\n    _removeReference: function(model, options) {\\n      delete this._byId[model.cid];\\n      var id = this.modelId(model.attributes, model.idAttribute);\\n      if (id != null) delete this._byId[id];\\n      if (this === model.collection) delete model.collection;\\n      model.off('all', this._onModelEvent, this);\\n    },\\n\\n    // Internal method called every time a model in the set fires an event.\\n    // Sets need to update their indexes when models change ids. All other\\n    // events simply proxy through. \\\"add\\\" and \\\"remove\\\" events that originate\\n    // in other collections are ignored.\\n    _onModelEvent: function(event, model, collection, options) {\\n      if (model) {\\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\\n        if (event === 'destroy') this.remove(model, options);\\n        if (event === 'changeId') {\\n          var prevId = this.modelId(model.previousAttributes(), model.idAttribute);\\n          var id = this.modelId(model.attributes, model.idAttribute);\\n          if (prevId != null) delete this._byId[prevId];\\n          if (id != null) this._byId[id] = model;\\n        }\\n      }\\n      this.trigger.apply(this, arguments);\\n    }\\n\\n  });\\n\\n  // Defining an @@iterator method implements JavaScript's Iterable protocol.\\n  // In modern ES2015 browsers, this value is found at Symbol.iterator.\\n  /* global Symbol */\\n  var $$iterator = typeof Symbol === 'function' && Symbol.iterator;\\n  if ($$iterator) {\\n    Collection.prototype[$$iterator] = Collection.prototype.values;\\n  }\\n\\n  // CollectionIterator\\n  // ------------------\\n\\n  // A CollectionIterator implements JavaScript's Iterator protocol, allowing the\\n  // use of `for of` loops in modern browsers and interoperation between\\n  // Backbone.Collection and other JavaScript functions and third-party libraries\\n  // which can operate on Iterables.\\n  var CollectionIterator = function(collection, kind) {\\n    this._collection = collection;\\n    this._kind = kind;\\n    this._index = 0;\\n  };\\n\\n  // This \\\"enum\\\" defines the three possible kinds of values which can be emitted\\n  // by a CollectionIterator that correspond to the values(), keys() and entries()\\n  // methods on Collection, respectively.\\n  var ITERATOR_VALUES = 1;\\n  var ITERATOR_KEYS = 2;\\n  var ITERATOR_KEYSVALUES = 3;\\n\\n  // All Iterators should themselves be Iterable.\\n  if ($$iterator) {\\n    CollectionIterator.prototype[$$iterator] = function() {\\n      return this;\\n    };\\n  }\\n\\n  CollectionIterator.prototype.next = function() {\\n    if (this._collection) {\\n\\n      // Only continue iterating if the iterated collection is long enough.\\n      if (this._index < this._collection.length) {\\n        var model = this._collection.at(this._index);\\n        this._index++;\\n\\n        // Construct a value depending on what kind of values should be iterated.\\n        var value;\\n        if (this._kind === ITERATOR_VALUES) {\\n          value = model;\\n        } else {\\n          var id = this._collection.modelId(model.attributes, model.idAttribute);\\n          if (this._kind === ITERATOR_KEYS) {\\n            value = id;\\n          } else { // ITERATOR_KEYSVALUES\\n            value = [id, model];\\n          }\\n        }\\n        return {value: value, done: false};\\n      }\\n\\n      // Once exhausted, remove the reference to the collection so future\\n      // calls to the next method always return done.\\n      this._collection = void 0;\\n    }\\n\\n    return {value: void 0, done: true};\\n  };\\n\\n  // Backbone.View\\n  // -------------\\n\\n  // Backbone Views are almost more convention than they are actual code. A View\\n  // is simply a JavaScript object that represents a logical chunk of UI in the\\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\\n  // UI as a **View** allows you to define your DOM events declaratively, without\\n  // having to worry about render order ... and makes it easy for the view to\\n  // react to specific changes in the state of your models.\\n\\n  // Creating a Backbone.View creates its initial element outside of the DOM,\\n  // if an existing element is not provided...\\n  var View = Backbone.View = function(options) {\\n    this.cid = _.uniqueId('view');\\n    this.preinitialize.apply(this, arguments);\\n    _.extend(this, _.pick(options, viewOptions));\\n    this._ensureElement();\\n    this.initialize.apply(this, arguments);\\n  };\\n\\n  // Cached regex to split keys for `delegate`.\\n  var delegateEventSplitter = /^(\\\\S+)\\\\s*(.*)$/;\\n\\n  // List of view options to be set as properties.\\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\\n\\n  // Set up all inheritable **Backbone.View** properties and methods.\\n  _.extend(View.prototype, Events, {\\n\\n    // The default `tagName` of a View's element is `\\\"div\\\"`.\\n    tagName: 'div',\\n\\n    // jQuery delegate for element lookup, scoped to DOM elements within the\\n    // current view. This should be preferred to global lookups where possible.\\n    $: function(selector) {\\n      return this.$el.find(selector);\\n    },\\n\\n    // preinitialize is an empty function by default. You can override it with a function\\n    // or object.  preinitialize will run before any instantiation logic is run in the View\\n    preinitialize: function(){},\\n\\n    // Initialize is an empty function by default. Override it with your own\\n    // initialization logic.\\n    initialize: function(){},\\n\\n    // **render** is the core function that your view should override, in order\\n    // to populate its element (`this.el`), with the appropriate HTML. The\\n    // convention is for **render** to always return `this`.\\n    render: function() {\\n      return this;\\n    },\\n\\n    // Remove this view by taking the element out of the DOM, and removing any\\n    // applicable Backbone.Events listeners.\\n    remove: function() {\\n      this._removeElement();\\n      this.stopListening();\\n      return this;\\n    },\\n\\n    // Remove this view's element from the document and all event listeners\\n    // attached to it. Exposed for subclasses using an alternative DOM\\n    // manipulation API.\\n    _removeElement: function() {\\n      this.$el.remove();\\n    },\\n\\n    // Change the view's element (`this.el` property) and re-delegate the\\n    // view's events on the new element.\\n    setElement: function(element) {\\n      this.undelegateEvents();\\n      this._setElement(element);\\n      this.delegateEvents();\\n      return this;\\n    },\\n\\n    // Creates the `this.el` and `this.$el` references for this view using the\\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\\n    // context or an element. Subclasses can override this to utilize an\\n    // alternative DOM manipulation API and are only required to set the\\n    // `this.el` property.\\n    _setElement: function(el) {\\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\\n      this.el = this.$el[0];\\n    },\\n\\n    // Set callbacks, where `this.events` is a hash of\\n    //\\n    // *{\\\"event selector\\\": \\\"callback\\\"}*\\n    //\\n    //     {\\n    //       'mousedown .title':  'edit',\\n    //       'click .button':     'save',\\n    //       'click .open':       function(e) { ... }\\n    //     }\\n    //\\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\\n    // Uses event delegation for efficiency.\\n    // Omitting the selector binds the event to `this.el`.\\n    delegateEvents: function(events) {\\n      events || (events = _.result(this, 'events'));\\n      if (!events) return this;\\n      this.undelegateEvents();\\n      for (var key in events) {\\n        var method = events[key];\\n        if (!_.isFunction(method)) method = this[method];\\n        if (!method) continue;\\n        var match = key.match(delegateEventSplitter);\\n        this.delegate(match[1], match[2], method.bind(this));\\n      }\\n      return this;\\n    },\\n\\n    // Add a single event listener to the view's element (or a child element\\n    // using `selector`). This only works for delegate-able events: not `focus`,\\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\\n    delegate: function(eventName, selector, listener) {\\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\\n      return this;\\n    },\\n\\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\\n    // You usually don't need to use this, but may wish to if you have multiple\\n    // Backbone views attached to the same DOM element.\\n    undelegateEvents: function() {\\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\\n      return this;\\n    },\\n\\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\\n    // `selector` and `listener` are both optional.\\n    undelegate: function(eventName, selector, listener) {\\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\\n      return this;\\n    },\\n\\n    // Produces a DOM element to be assigned to your view. Exposed for\\n    // subclasses using an alternative DOM manipulation API.\\n    _createElement: function(tagName) {\\n      return document.createElement(tagName);\\n    },\\n\\n    // Ensure that the View has a DOM element to render into.\\n    // If `this.el` is a string, pass it through `$()`, take the first\\n    // matching element, and re-assign it to `el`. Otherwise, create\\n    // an element from the `id`, `className` and `tagName` properties.\\n    _ensureElement: function() {\\n      if (!this.el) {\\n        var attrs = _.extend({}, _.result(this, 'attributes'));\\n        if (this.id) attrs.id = _.result(this, 'id');\\n        if (this.className) attrs['class'] = _.result(this, 'className');\\n        this.setElement(this._createElement(_.result(this, 'tagName')));\\n        this._setAttributes(attrs);\\n      } else {\\n        this.setElement(_.result(this, 'el'));\\n      }\\n    },\\n\\n    // Set attributes from a hash on this view's element.  Exposed for\\n    // subclasses using an alternative DOM manipulation API.\\n    _setAttributes: function(attributes) {\\n      this.$el.attr(attributes);\\n    }\\n\\n  });\\n\\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\\n  // `attributes` object or collection's `models` array behind the scenes.\\n  //\\n  // collection.filter(function(model) { return model.get('age') > 10 });\\n  // collection.each(this.addView);\\n  //\\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\\n  var addMethod = function(base, length, method, attribute) {\\n    switch (length) {\\n      case 1: return function() {\\n        return base[method](this[attribute]);\\n      };\\n      case 2: return function(value) {\\n        return base[method](this[attribute], value);\\n      };\\n      case 3: return function(iteratee, context) {\\n        return base[method](this[attribute], cb(iteratee, this), context);\\n      };\\n      case 4: return function(iteratee, defaultVal, context) {\\n        return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\\n      };\\n      default: return function() {\\n        var args = slice.call(arguments);\\n        args.unshift(this[attribute]);\\n        return base[method].apply(base, args);\\n      };\\n    }\\n  };\\n\\n  var addUnderscoreMethods = function(Class, base, methods, attribute) {\\n    _.each(methods, function(length, method) {\\n      if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\\n    });\\n  };\\n\\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\\n  var cb = function(iteratee, instance) {\\n    if (_.isFunction(iteratee)) return iteratee;\\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\\n    return iteratee;\\n  };\\n  var modelMatcher = function(attrs) {\\n    var matcher = _.matches(attrs);\\n    return function(model) {\\n      return matcher(model.attributes);\\n    };\\n  };\\n\\n  // Underscore methods that we want to implement on the Collection.\\n  // 90% of the core usefulness of Backbone Collections is actually implemented\\n  // right here:\\n  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\\n    foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\\n    select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\\n    contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\\n    head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\\n    without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\\n    isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\\n    sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\\n\\n\\n  // Underscore methods that we want to implement on the Model, mapped to the\\n  // number of arguments they take.\\n  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\\n    omit: 0, chain: 1, isEmpty: 1};\\n\\n  // Mix in each Underscore method as a proxy to `Collection#models`.\\n\\n  _.each([\\n    [Collection, collectionMethods, 'models'],\\n    [Model, modelMethods, 'attributes']\\n  ], function(config) {\\n    var Base = config[0],\\n        methods = config[1],\\n        attribute = config[2];\\n\\n    Base.mixin = function(obj) {\\n      var mappings = _.reduce(_.functions(obj), function(memo, name) {\\n        memo[name] = 0;\\n        return memo;\\n      }, {});\\n      addUnderscoreMethods(Base, obj, mappings, attribute);\\n    };\\n\\n    addUnderscoreMethods(Base, _, methods, attribute);\\n  });\\n\\n  // Backbone.sync\\n  // -------------\\n\\n  // Override this function to change the manner in which Backbone persists\\n  // models to the server. You will be passed the type of request, and the\\n  // model in question. By default, makes a RESTful Ajax request\\n  // to the model's `url()`. Some possible customizations could be:\\n  //\\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\\n  // * Send up the models as XML instead of JSON.\\n  // * Persist models via WebSockets instead of Ajax.\\n  //\\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\\n  // instead of `application/json` with the model in a param named `model`.\\n  // Useful when interfacing with server-side languages like **PHP** that make\\n  // it difficult to read the body of `PUT` requests.\\n  Backbone.sync = function(method, model, options) {\\n    var type = methodMap[method];\\n\\n    // Default options, unless specified.\\n    _.defaults(options || (options = {}), {\\n      emulateHTTP: Backbone.emulateHTTP,\\n      emulateJSON: Backbone.emulateJSON\\n    });\\n\\n    // Default JSON-request options.\\n    var params = {type: type, dataType: 'json'};\\n\\n    // Ensure that we have a URL.\\n    if (!options.url) {\\n      params.url = _.result(model, 'url') || urlError();\\n    }\\n\\n    // Ensure that we have the appropriate request data.\\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\\n      params.contentType = 'application/json';\\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\\n    }\\n\\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\\n    if (options.emulateJSON) {\\n      params.contentType = 'application/x-www-form-urlencoded';\\n      params.data = params.data ? {model: params.data} : {};\\n    }\\n\\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\\n    // And an `X-HTTP-Method-Override` header.\\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\\n      params.type = 'POST';\\n      if (options.emulateJSON) params.data._method = type;\\n      var beforeSend = options.beforeSend;\\n      options.beforeSend = function(xhr) {\\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\\n        if (beforeSend) return beforeSend.apply(this, arguments);\\n      };\\n    }\\n\\n    // Don't process data on a non-GET request.\\n    if (params.type !== 'GET' && !options.emulateJSON) {\\n      params.processData = false;\\n    }\\n\\n    // Pass along `textStatus` and `errorThrown` from jQuery.\\n    var error = options.error;\\n    options.error = function(xhr, textStatus, errorThrown) {\\n      options.textStatus = textStatus;\\n      options.errorThrown = errorThrown;\\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\\n    };\\n\\n    // Make the request, allowing the user to override any Ajax options.\\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\\n    model.trigger('request', model, xhr, options);\\n    return xhr;\\n  };\\n\\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\\n  var methodMap = {\\n    'create': 'POST',\\n    'update': 'PUT',\\n    'patch': 'PATCH',\\n    'delete': 'DELETE',\\n    'read': 'GET'\\n  };\\n\\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\\n  // Override this if you'd like to use a different library.\\n  Backbone.ajax = function() {\\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\\n  };\\n\\n  // Backbone.Router\\n  // ---------------\\n\\n  // Routers map faux-URLs to actions, and fire events when routes are\\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\\n  var Router = Backbone.Router = function(options) {\\n    options || (options = {});\\n    this.preinitialize.apply(this, arguments);\\n    if (options.routes) this.routes = options.routes;\\n    this._bindRoutes();\\n    this.initialize.apply(this, arguments);\\n  };\\n\\n  // Cached regular expressions for matching named param parts and splatted\\n  // parts of route strings.\\n  var optionalParam = /\\\\((.*?)\\\\)/g;\\n  var namedParam    = /(\\\\(\\\\?)?:\\\\w+/g;\\n  var splatParam    = /\\\\*\\\\w+/g;\\n  var escapeRegExp  = /[\\\\-{}\\\\[\\\\]+?.,\\\\\\\\\\\\^$|#\\\\s]/g;\\n\\n  // Set up all inheritable **Backbone.Router** properties and methods.\\n  _.extend(Router.prototype, Events, {\\n\\n    // preinitialize is an empty function by default. You can override it with a function\\n    // or object.  preinitialize will run before any instantiation logic is run in the Router.\\n    preinitialize: function(){},\\n\\n    // Initialize is an empty function by default. Override it with your own\\n    // initialization logic.\\n    initialize: function(){},\\n\\n    // Manually bind a single named route to a callback. For example:\\n    //\\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\\n    //       ...\\n    //     });\\n    //\\n    route: function(route, name, callback) {\\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\\n      if (_.isFunction(name)) {\\n        callback = name;\\n        name = '';\\n      }\\n      if (!callback) callback = this[name];\\n      var router = this;\\n      Backbone.history.route(route, function(fragment) {\\n        var args = router._extractParameters(route, fragment);\\n        if (router.execute(callback, args, name) !== false) {\\n          router.trigger.apply(router, ['route:' + name].concat(args));\\n          router.trigger('route', name, args);\\n          Backbone.history.trigger('route', router, name, args);\\n        }\\n      });\\n      return this;\\n    },\\n\\n    // Execute a route handler with the provided parameters.  This is an\\n    // excellent place to do pre-route setup or post-route cleanup.\\n    execute: function(callback, args, name) {\\n      if (callback) callback.apply(this, args);\\n    },\\n\\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\\n    navigate: function(fragment, options) {\\n      Backbone.history.navigate(fragment, options);\\n      return this;\\n    },\\n\\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\\n    // order of the routes here to support behavior where the most general\\n    // routes can be defined at the bottom of the route map.\\n    _bindRoutes: function() {\\n      if (!this.routes) return;\\n      this.routes = _.result(this, 'routes');\\n      var route, routes = _.keys(this.routes);\\n      while ((route = routes.pop()) != null) {\\n        this.route(route, this.routes[route]);\\n      }\\n    },\\n\\n    // Convert a route string into a regular expression, suitable for matching\\n    // against the current location hash.\\n    _routeToRegExp: function(route) {\\n      route = route.replace(escapeRegExp, '\\\\\\\\$&')\\n      .replace(optionalParam, '(?:$1)?')\\n      .replace(namedParam, function(match, optional) {\\n        return optional ? match : '([^/?]+)';\\n      })\\n      .replace(splatParam, '([^?]*?)');\\n      return new RegExp('^' + route + '(?:\\\\\\\\?([\\\\\\\\s\\\\\\\\S]*))?$');\\n    },\\n\\n    // Given a route, and a URL fragment that it matches, return the array of\\n    // extracted decoded parameters. Empty or unmatched parameters will be\\n    // treated as `null` to normalize cross-browser behavior.\\n    _extractParameters: function(route, fragment) {\\n      var params = route.exec(fragment).slice(1);\\n      return _.map(params, function(param, i) {\\n        // Don't decode the search params.\\n        if (i === params.length - 1) return param || null;\\n        return param ? decodeURIComponent(param) : null;\\n      });\\n    }\\n\\n  });\\n\\n  // Backbone.History\\n  // ----------------\\n\\n  // Handles cross-browser history management, based on either\\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\\n  // and URL fragments. If the browser supports neither (old IE, natch),\\n  // falls back to polling.\\n  var History = Backbone.History = function() {\\n    this.handlers = [];\\n    this.checkUrl = this.checkUrl.bind(this);\\n\\n    // Ensure that `History` can be used outside of the browser.\\n    if (typeof window !== 'undefined') {\\n      this.location = window.location;\\n      this.history = window.history;\\n    }\\n  };\\n\\n  // Cached regex for stripping a leading hash/slash and trailing space.\\n  var routeStripper = /^[#\\\\/]|\\\\s+$/g;\\n\\n  // Cached regex for stripping leading and trailing slashes.\\n  var rootStripper = /^\\\\/+|\\\\/+$/g;\\n\\n  // Cached regex for stripping urls of hash.\\n  var pathStripper = /#.*$/;\\n\\n  // Has the history handling already been started?\\n  History.started = false;\\n\\n  // Set up all inheritable **Backbone.History** properties and methods.\\n  _.extend(History.prototype, Events, {\\n\\n    // The default interval to poll for hash changes, if necessary, is\\n    // twenty times a second.\\n    interval: 50,\\n\\n    // Are we at the app root?\\n    atRoot: function() {\\n      var path = this.location.pathname.replace(/[^\\\\/]$/, '$&/');\\n      return path === this.root && !this.getSearch();\\n    },\\n\\n    // Does the pathname match the root?\\n    matchRoot: function() {\\n      var path = this.decodeFragment(this.location.pathname);\\n      var rootPath = path.slice(0, this.root.length - 1) + '/';\\n      return rootPath === this.root;\\n    },\\n\\n    // Unicode characters in `location.pathname` are percent encoded so they're\\n    // decoded for comparison. `%25` should not be decoded since it may be part\\n    // of an encoded parameter.\\n    decodeFragment: function(fragment) {\\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\\n    },\\n\\n    // In IE6, the hash fragment and search params are incorrect if the\\n    // fragment contains `?`.\\n    getSearch: function() {\\n      var match = this.location.href.replace(/#.*/, '').match(/\\\\?.+/);\\n      return match ? match[0] : '';\\n    },\\n\\n    // Gets the true hash value. Cannot use location.hash directly due to bug\\n    // in Firefox where location.hash will always be decoded.\\n    getHash: function(window) {\\n      var match = (window || this).location.href.match(/#(.*)$/);\\n      return match ? match[1] : '';\\n    },\\n\\n    // Get the pathname and search params, without the root.\\n    getPath: function() {\\n      var path = this.decodeFragment(\\n        this.location.pathname + this.getSearch()\\n      ).slice(this.root.length - 1);\\n      return path.charAt(0) === '/' ? path.slice(1) : path;\\n    },\\n\\n    // Get the cross-browser normalized URL fragment from the path or hash.\\n    getFragment: function(fragment) {\\n      if (fragment == null) {\\n        if (this._usePushState || !this._wantsHashChange) {\\n          fragment = this.getPath();\\n        } else {\\n          fragment = this.getHash();\\n        }\\n      }\\n      return fragment.replace(routeStripper, '');\\n    },\\n\\n    // Start the hash change handling, returning `true` if the current URL matches\\n    // an existing route, and `false` otherwise.\\n    start: function(options) {\\n      if (History.started) throw new Error('Backbone.history has already been started');\\n      History.started = true;\\n\\n      // Figure out the initial configuration. Do we need an iframe?\\n      // Is pushState desired ... is it available?\\n      this.options          = _.extend({root: '/'}, this.options, options);\\n      this.root             = this.options.root;\\n      this._wantsHashChange = this.options.hashChange !== false;\\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\\n      this._wantsPushState  = !!this.options.pushState;\\n      this._hasPushState    = !!(this.history && this.history.pushState);\\n      this._usePushState    = this._wantsPushState && this._hasPushState;\\n      this.fragment         = this.getFragment();\\n\\n      // Normalize root to always include a leading and trailing slash.\\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\\n\\n      // Transition from hashChange to pushState or vice versa if both are\\n      // requested.\\n      if (this._wantsHashChange && this._wantsPushState) {\\n\\n        // If we've started off with a route from a `pushState`-enabled\\n        // browser, but we're currently in a browser that doesn't support it...\\n        if (!this._hasPushState && !this.atRoot()) {\\n          var rootPath = this.root.slice(0, -1) || '/';\\n          this.location.replace(rootPath + '#' + this.getPath());\\n          // Return immediately as browser will do redirect to new url\\n          return true;\\n\\n        // Or if we've started out with a hash-based route, but we're currently\\n        // in a browser where it could be `pushState`-based instead...\\n        } else if (this._hasPushState && this.atRoot()) {\\n          this.navigate(this.getHash(), {replace: true});\\n        }\\n\\n      }\\n\\n      // Proxy an iframe to handle location events if the browser doesn't\\n      // support the `hashchange` event, HTML5 history, or the user wants\\n      // `hashChange` but not `pushState`.\\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\\n        this.iframe = document.createElement('iframe');\\n        this.iframe.src = 'javascript:0';\\n        this.iframe.style.display = 'none';\\n        this.iframe.tabIndex = -1;\\n        var body = document.body;\\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\\n        iWindow.document.open();\\n        iWindow.document.close();\\n        iWindow.location.hash = '#' + this.fragment;\\n      }\\n\\n      // Add a cross-platform `addEventListener` shim for older browsers.\\n      var addEventListener = window.addEventListener || function(eventName, listener) {\\n        return attachEvent('on' + eventName, listener);\\n      };\\n\\n      // Depending on whether we're using pushState or hashes, and whether\\n      // 'onhashchange' is supported, determine how we check the URL state.\\n      if (this._usePushState) {\\n        addEventListener('popstate', this.checkUrl, false);\\n      } else if (this._useHashChange && !this.iframe) {\\n        addEventListener('hashchange', this.checkUrl, false);\\n      } else if (this._wantsHashChange) {\\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\\n      }\\n\\n      if (!this.options.silent) return this.loadUrl();\\n    },\\n\\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\\n    // but possibly useful for unit testing Routers.\\n    stop: function() {\\n      // Add a cross-platform `removeEventListener` shim for older browsers.\\n      var removeEventListener = window.removeEventListener || function(eventName, listener) {\\n        return detachEvent('on' + eventName, listener);\\n      };\\n\\n      // Remove window listeners.\\n      if (this._usePushState) {\\n        removeEventListener('popstate', this.checkUrl, false);\\n      } else if (this._useHashChange && !this.iframe) {\\n        removeEventListener('hashchange', this.checkUrl, false);\\n      }\\n\\n      // Clean up the iframe if necessary.\\n      if (this.iframe) {\\n        document.body.removeChild(this.iframe);\\n        this.iframe = null;\\n      }\\n\\n      // Some environments will throw when clearing an undefined interval.\\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\\n      History.started = false;\\n    },\\n\\n    // Add a route to be tested when the fragment changes. Routes added later\\n    // may override previous routes.\\n    route: function(route, callback) {\\n      this.handlers.unshift({route: route, callback: callback});\\n    },\\n\\n    // Checks the current URL to see if it has changed, and if it has,\\n    // calls `loadUrl`, normalizing across the hidden iframe.\\n    checkUrl: function(e) {\\n      var current = this.getFragment();\\n\\n      // If the user pressed the back button, the iframe's hash will have\\n      // changed and we should use that for comparison.\\n      if (current === this.fragment && this.iframe) {\\n        current = this.getHash(this.iframe.contentWindow);\\n      }\\n\\n      if (current === this.fragment) return false;\\n      if (this.iframe) this.navigate(current);\\n      this.loadUrl();\\n    },\\n\\n    // Attempt to load the current URL fragment. If a route succeeds with a\\n    // match, returns `true`. If no defined routes matches the fragment,\\n    // returns `false`.\\n    loadUrl: function(fragment) {\\n      // If the root doesn't match, no routes can match either.\\n      if (!this.matchRoot()) return false;\\n      fragment = this.fragment = this.getFragment(fragment);\\n      return _.some(this.handlers, function(handler) {\\n        if (handler.route.test(fragment)) {\\n          handler.callback(fragment);\\n          return true;\\n        }\\n      });\\n    },\\n\\n    // Save a fragment into the hash history, or replace the URL state if the\\n    // 'replace' option is passed. You are responsible for properly URL-encoding\\n    // the fragment in advance.\\n    //\\n    // The options object can contain `trigger: true` if you wish to have the\\n    // route callback be fired (not usually desirable), or `replace: true`, if\\n    // you wish to modify the current URL without adding an entry to the history.\\n    navigate: function(fragment, options) {\\n      if (!History.started) return false;\\n      if (!options || options === true) options = {trigger: !!options};\\n\\n      // Normalize the fragment.\\n      fragment = this.getFragment(fragment || '');\\n\\n      // Don't include a trailing slash on the root.\\n      var rootPath = this.root;\\n      if (fragment === '' || fragment.charAt(0) === '?') {\\n        rootPath = rootPath.slice(0, -1) || '/';\\n      }\\n      var url = rootPath + fragment;\\n\\n      // Strip the fragment of the query and hash for matching.\\n      fragment = fragment.replace(pathStripper, '');\\n\\n      // Decode for matching.\\n      var decodedFragment = this.decodeFragment(fragment);\\n\\n      if (this.fragment === decodedFragment) return;\\n      this.fragment = decodedFragment;\\n\\n      // If pushState is available, we use it to set the fragment as a real URL.\\n      if (this._usePushState) {\\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\\n\\n      // If hash changes haven't been explicitly disabled, update the hash\\n      // fragment to store history.\\n      } else if (this._wantsHashChange) {\\n        this._updateHash(this.location, fragment, options.replace);\\n        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\\n          var iWindow = this.iframe.contentWindow;\\n\\n          // Opening and closing the iframe tricks IE7 and earlier to push a\\n          // history entry on hash-tag change.  When replace is true, we don't\\n          // want this.\\n          if (!options.replace) {\\n            iWindow.document.open();\\n            iWindow.document.close();\\n          }\\n\\n          this._updateHash(iWindow.location, fragment, options.replace);\\n        }\\n\\n      // If you've told us that you explicitly don't want fallback hashchange-\\n      // based history, then `navigate` becomes a page refresh.\\n      } else {\\n        return this.location.assign(url);\\n      }\\n      if (options.trigger) return this.loadUrl(fragment);\\n    },\\n\\n    // Update the hash location, either replacing the current entry, or adding\\n    // a new one to the browser history.\\n    _updateHash: function(location, fragment, replace) {\\n      if (replace) {\\n        var href = location.href.replace(/(javascript:|#).*$/, '');\\n        location.replace(href + '#' + fragment);\\n      } else {\\n        // Some browsers require that `hash` contains a leading #.\\n        location.hash = '#' + fragment;\\n      }\\n    }\\n\\n  });\\n\\n  // Create the default Backbone.history.\\n  Backbone.history = new History;\\n\\n  // Helpers\\n  // -------\\n\\n  // Helper function to correctly set up the prototype chain for subclasses.\\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\\n  // class properties to be extended.\\n  var extend = function(protoProps, staticProps) {\\n    var parent = this;\\n    var child;\\n\\n    // The constructor function for the new subclass is either defined by you\\n    // (the \\\"constructor\\\" property in your `extend` definition), or defaulted\\n    // by us to simply call the parent constructor.\\n    if (protoProps && _.has(protoProps, 'constructor')) {\\n      child = protoProps.constructor;\\n    } else {\\n      child = function(){ return parent.apply(this, arguments); };\\n    }\\n\\n    // Add static properties to the constructor function, if supplied.\\n    _.extend(child, parent, staticProps);\\n\\n    // Set the prototype chain to inherit from `parent`, without calling\\n    // `parent`'s constructor function and add the prototype properties.\\n    child.prototype = _.create(parent.prototype, protoProps);\\n    child.prototype.constructor = child;\\n\\n    // Set a convenience property in case the parent's prototype is needed\\n    // later.\\n    child.__super__ = parent.prototype;\\n\\n    return child;\\n  };\\n\\n  // Set up inheritance for the model, collection, router, view and history.\\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\\n\\n  // Throw an error when a URL is needed, and none is supplied.\\n  var urlError = function() {\\n    throw new Error('A \\\"url\\\" property or function must be specified');\\n  };\\n\\n  // Wrap an optional error callback with a fallback error event.\\n  var wrapError = function(model, options) {\\n    var error = options.error;\\n    options.error = function(resp) {\\n      if (error) error.call(options.context, model, resp, options);\\n      model.trigger('error', model, resp, options);\\n    };\\n  };\\n\\n  return Backbone;\\n});\\n\"","module.exports = \"/*\\r\\n *  big.js v6.2.1\\r\\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\\r\\n *  Copyright (c) 2022 Michael Mclaughlin\\r\\n *  https://github.com/MikeMcl/big.js/LICENCE.md\\r\\n */\\r\\n;(function (GLOBAL) {\\r\\n  'use strict';\\r\\n  var Big,\\r\\n\\r\\n\\r\\n/************************************** EDITABLE DEFAULTS *****************************************/\\r\\n\\r\\n\\r\\n    // The default values below must be integers within the stated ranges.\\r\\n\\r\\n    /*\\r\\n     * The maximum number of decimal places (DP) of the results of operations involving division:\\r\\n     * div and sqrt, and pow with negative exponents.\\r\\n     */\\r\\n    DP = 20,            // 0 to MAX_DP\\r\\n\\r\\n    /*\\r\\n     * The rounding mode (RM) used when rounding to the above decimal places.\\r\\n     *\\r\\n     *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\\r\\n     *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\\r\\n     *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\\r\\n     *  3  Away from zero.                                  (ROUND_UP)\\r\\n     */\\r\\n    RM = 1,             // 0, 1, 2 or 3\\r\\n\\r\\n    // The maximum value of DP and Big.DP.\\r\\n    MAX_DP = 1E6,       // 0 to 1000000\\r\\n\\r\\n    // The maximum magnitude of the exponent argument to the pow method.\\r\\n    MAX_POWER = 1E6,    // 1 to 1000000\\r\\n\\r\\n    /*\\r\\n     * The negative exponent (NE) at and beneath which toString returns exponential notation.\\r\\n     * (JavaScript numbers: -7)\\r\\n     * -1000000 is the minimum recommended exponent value of a Big.\\r\\n     */\\r\\n    NE = -7,            // 0 to -1000000\\r\\n\\r\\n    /*\\r\\n     * The positive exponent (PE) at and above which toString returns exponential notation.\\r\\n     * (JavaScript numbers: 21)\\r\\n     * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\\r\\n     */\\r\\n    PE = 21,            // 0 to 1000000\\r\\n\\r\\n    /*\\r\\n     * When true, an error will be thrown if a primitive number is passed to the Big constructor,\\r\\n     * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\\r\\n     * primitive number without a loss of precision.\\r\\n     */\\r\\n    STRICT = false,     // true or false\\r\\n\\r\\n\\r\\n/**************************************************************************************************/\\r\\n\\r\\n\\r\\n    // Error messages.\\r\\n    NAME = '[big.js] ',\\r\\n    INVALID = NAME + 'Invalid ',\\r\\n    INVALID_DP = INVALID + 'decimal places',\\r\\n    INVALID_RM = INVALID + 'rounding mode',\\r\\n    DIV_BY_ZERO = NAME + 'Division by zero',\\r\\n\\r\\n    // The shared prototype object.\\r\\n    P = {},\\r\\n    UNDEFINED = void 0,\\r\\n    NUMERIC = /^-?(\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)(e[+-]?\\\\d+)?$/i;\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Create and return a Big constructor.\\r\\n   */\\r\\n  function _Big_() {\\r\\n\\r\\n    /*\\r\\n     * The Big constructor and exported function.\\r\\n     * Create and return a new instance of a Big number object.\\r\\n     *\\r\\n     * n {number|string|Big} A numeric value.\\r\\n     */\\r\\n    function Big(n) {\\r\\n      var x = this;\\r\\n\\r\\n      // Enable constructor usage without new.\\r\\n      if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\\r\\n\\r\\n      // Duplicate.\\r\\n      if (n instanceof Big) {\\r\\n        x.s = n.s;\\r\\n        x.e = n.e;\\r\\n        x.c = n.c.slice();\\r\\n      } else {\\r\\n        if (typeof n !== 'string') {\\r\\n          if (Big.strict === true && typeof n !== 'bigint') {\\r\\n            throw TypeError(INVALID + 'value');\\r\\n          }\\r\\n\\r\\n          // Minus zero?\\r\\n          n = n === 0 && 1 / n < 0 ? '-0' : String(n);\\r\\n        }\\r\\n\\r\\n        parse(x, n);\\r\\n      }\\r\\n\\r\\n      // Retain a reference to this Big constructor.\\r\\n      // Shadow Big.prototype.constructor which points to Object.\\r\\n      x.constructor = Big;\\r\\n    }\\r\\n\\r\\n    Big.prototype = P;\\r\\n    Big.DP = DP;\\r\\n    Big.RM = RM;\\r\\n    Big.NE = NE;\\r\\n    Big.PE = PE;\\r\\n    Big.strict = STRICT;\\r\\n    Big.roundDown = 0;\\r\\n    Big.roundHalfUp = 1;\\r\\n    Big.roundHalfEven = 2;\\r\\n    Big.roundUp = 3;\\r\\n\\r\\n    return Big;\\r\\n  }\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Parse the number or string value passed to a Big constructor.\\r\\n   *\\r\\n   * x {Big} A Big number instance.\\r\\n   * n {number|string} A numeric value.\\r\\n   */\\r\\n  function parse(x, n) {\\r\\n    var e, i, nl;\\r\\n\\r\\n    if (!NUMERIC.test(n)) {\\r\\n      throw Error(INVALID + 'number');\\r\\n    }\\r\\n\\r\\n    // Determine sign.\\r\\n    x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\\r\\n\\r\\n    // Decimal point?\\r\\n    if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\\r\\n\\r\\n    // Exponential form?\\r\\n    if ((i = n.search(/e/i)) > 0) {\\r\\n\\r\\n      // Determine exponent.\\r\\n      if (e < 0) e = i;\\r\\n      e += +n.slice(i + 1);\\r\\n      n = n.substring(0, i);\\r\\n    } else if (e < 0) {\\r\\n\\r\\n      // Integer.\\r\\n      e = n.length;\\r\\n    }\\r\\n\\r\\n    nl = n.length;\\r\\n\\r\\n    // Determine leading zeros.\\r\\n    for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\\r\\n\\r\\n    if (i == nl) {\\r\\n\\r\\n      // Zero.\\r\\n      x.c = [x.e = 0];\\r\\n    } else {\\r\\n\\r\\n      // Determine trailing zeros.\\r\\n      for (; nl > 0 && n.charAt(--nl) == '0';);\\r\\n      x.e = e - i - 1;\\r\\n      x.c = [];\\r\\n\\r\\n      // Convert string to array of digits without leading/trailing zeros.\\r\\n      for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\\r\\n    }\\r\\n\\r\\n    return x;\\r\\n  }\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Round Big x to a maximum of sd significant digits using rounding mode rm.\\r\\n   *\\r\\n   * x {Big} The Big to round.\\r\\n   * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\\r\\n   * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\\r\\n   * [more] {boolean} Whether the result of division was truncated.\\r\\n   */\\r\\n  function round(x, sd, rm, more) {\\r\\n    var xc = x.c;\\r\\n\\r\\n    if (rm === UNDEFINED) rm = x.constructor.RM;\\r\\n    if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\\r\\n      throw Error(INVALID_RM);\\r\\n    }\\r\\n\\r\\n    if (sd < 1) {\\r\\n      more =\\r\\n        rm === 3 && (more || !!xc[0]) || sd === 0 && (\\r\\n        rm === 1 && xc[0] >= 5 ||\\r\\n        rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\\r\\n      );\\r\\n\\r\\n      xc.length = 1;\\r\\n\\r\\n      if (more) {\\r\\n\\r\\n        // 1, 0.1, 0.01, 0.001, 0.0001 etc.\\r\\n        x.e = x.e - sd + 1;\\r\\n        xc[0] = 1;\\r\\n      } else {\\r\\n\\r\\n        // Zero.\\r\\n        xc[0] = x.e = 0;\\r\\n      }\\r\\n    } else if (sd < xc.length) {\\r\\n\\r\\n      // xc[sd] is the digit after the digit that may be rounded up.\\r\\n      more =\\r\\n        rm === 1 && xc[sd] >= 5 ||\\r\\n        rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\\r\\n          (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\\r\\n        rm === 3 && (more || !!xc[0]);\\r\\n\\r\\n      // Remove any digits after the required precision.\\r\\n      xc.length = sd;\\r\\n\\r\\n      // Round up?\\r\\n      if (more) {\\r\\n\\r\\n        // Rounding up may mean the previous digit has to be rounded up.\\r\\n        for (; ++xc[--sd] > 9;) {\\r\\n          xc[sd] = 0;\\r\\n          if (sd === 0) {\\r\\n            ++x.e;\\r\\n            xc.unshift(1);\\r\\n            break;\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n\\r\\n      // Remove trailing zeros.\\r\\n      for (sd = xc.length; !xc[--sd];) xc.pop();\\r\\n    }\\r\\n\\r\\n    return x;\\r\\n  }\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a string representing the value of Big x in normal or exponential notation.\\r\\n   * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\\r\\n   */\\r\\n  function stringify(x, doExponential, isNonzero) {\\r\\n    var e = x.e,\\r\\n      s = x.c.join(''),\\r\\n      n = s.length;\\r\\n\\r\\n    // Exponential notation?\\r\\n    if (doExponential) {\\r\\n      s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\\r\\n\\r\\n    // Normal notation.\\r\\n    } else if (e < 0) {\\r\\n      for (; ++e;) s = '0' + s;\\r\\n      s = '0.' + s;\\r\\n    } else if (e > 0) {\\r\\n      if (++e > n) {\\r\\n        for (e -= n; e--;) s += '0';\\r\\n      } else if (e < n) {\\r\\n        s = s.slice(0, e) + '.' + s.slice(e);\\r\\n      }\\r\\n    } else if (n > 1) {\\r\\n      s = s.charAt(0) + '.' + s.slice(1);\\r\\n    }\\r\\n\\r\\n    return x.s < 0 && isNonzero ? '-' + s : s;\\r\\n  }\\r\\n\\r\\n\\r\\n  // Prototype/instance methods\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the absolute value of this Big.\\r\\n   */\\r\\n  P.abs = function () {\\r\\n    var x = new this.constructor(this);\\r\\n    x.s = 1;\\r\\n    return x;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return 1 if the value of this Big is greater than the value of Big y,\\r\\n   *       -1 if the value of this Big is less than the value of Big y, or\\r\\n   *        0 if they have the same value.\\r\\n   */\\r\\n  P.cmp = function (y) {\\r\\n    var isneg,\\r\\n      x = this,\\r\\n      xc = x.c,\\r\\n      yc = (y = new x.constructor(y)).c,\\r\\n      i = x.s,\\r\\n      j = y.s,\\r\\n      k = x.e,\\r\\n      l = y.e;\\r\\n\\r\\n    // Either zero?\\r\\n    if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\\r\\n\\r\\n    // Signs differ?\\r\\n    if (i != j) return i;\\r\\n\\r\\n    isneg = i < 0;\\r\\n\\r\\n    // Compare exponents.\\r\\n    if (k != l) return k > l ^ isneg ? 1 : -1;\\r\\n\\r\\n    j = (k = xc.length) < (l = yc.length) ? k : l;\\r\\n\\r\\n    // Compare digit by digit.\\r\\n    for (i = -1; ++i < j;) {\\r\\n      if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\\r\\n    }\\r\\n\\r\\n    // Compare lengths.\\r\\n    return k == l ? 0 : k > l ^ isneg ? 1 : -1;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\\r\\n   * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\\r\\n   */\\r\\n  P.div = function (y) {\\r\\n    var x = this,\\r\\n      Big = x.constructor,\\r\\n      a = x.c,                  // dividend\\r\\n      b = (y = new Big(y)).c,   // divisor\\r\\n      k = x.s == y.s ? 1 : -1,\\r\\n      dp = Big.DP;\\r\\n\\r\\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\\r\\n      throw Error(INVALID_DP);\\r\\n    }\\r\\n\\r\\n    // Divisor is zero?\\r\\n    if (!b[0]) {\\r\\n      throw Error(DIV_BY_ZERO);\\r\\n    }\\r\\n\\r\\n    // Dividend is 0? Return +-0.\\r\\n    if (!a[0]) {\\r\\n      y.s = k;\\r\\n      y.c = [y.e = 0];\\r\\n      return y;\\r\\n    }\\r\\n\\r\\n    var bl, bt, n, cmp, ri,\\r\\n      bz = b.slice(),\\r\\n      ai = bl = b.length,\\r\\n      al = a.length,\\r\\n      r = a.slice(0, bl),   // remainder\\r\\n      rl = r.length,\\r\\n      q = y,                // quotient\\r\\n      qc = q.c = [],\\r\\n      qi = 0,\\r\\n      p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\\r\\n\\r\\n    q.s = k;\\r\\n    k = p < 0 ? 0 : p;\\r\\n\\r\\n    // Create version of divisor with leading zero.\\r\\n    bz.unshift(0);\\r\\n\\r\\n    // Add zeros to make remainder as long as divisor.\\r\\n    for (; rl++ < bl;) r.push(0);\\r\\n\\r\\n    do {\\r\\n\\r\\n      // n is how many times the divisor goes into current remainder.\\r\\n      for (n = 0; n < 10; n++) {\\r\\n\\r\\n        // Compare divisor and remainder.\\r\\n        if (bl != (rl = r.length)) {\\r\\n          cmp = bl > rl ? 1 : -1;\\r\\n        } else {\\r\\n          for (ri = -1, cmp = 0; ++ri < bl;) {\\r\\n            if (b[ri] != r[ri]) {\\r\\n              cmp = b[ri] > r[ri] ? 1 : -1;\\r\\n              break;\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n\\r\\n        // If divisor < remainder, subtract divisor from remainder.\\r\\n        if (cmp < 0) {\\r\\n\\r\\n          // Remainder can't be more than 1 digit longer than divisor.\\r\\n          // Equalise lengths using divisor with extra leading zero?\\r\\n          for (bt = rl == bl ? b : bz; rl;) {\\r\\n            if (r[--rl] < bt[rl]) {\\r\\n              ri = rl;\\r\\n              for (; ri && !r[--ri];) r[ri] = 9;\\r\\n              --r[ri];\\r\\n              r[rl] += 10;\\r\\n            }\\r\\n            r[rl] -= bt[rl];\\r\\n          }\\r\\n\\r\\n          for (; !r[0];) r.shift();\\r\\n        } else {\\r\\n          break;\\r\\n        }\\r\\n      }\\r\\n\\r\\n      // Add the digit n to the result array.\\r\\n      qc[qi++] = cmp ? n : ++n;\\r\\n\\r\\n      // Update the remainder.\\r\\n      if (r[0] && cmp) r[rl] = a[ai] || 0;\\r\\n      else r = [a[ai]];\\r\\n\\r\\n    } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\\r\\n\\r\\n    // Leading zero? Do not remove if result is simply zero (qi == 1).\\r\\n    if (!qc[0] && qi != 1) {\\r\\n\\r\\n      // There can't be more than one zero.\\r\\n      qc.shift();\\r\\n      q.e--;\\r\\n      p--;\\r\\n    }\\r\\n\\r\\n    // Round?\\r\\n    if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\\r\\n\\r\\n    return q;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\\r\\n   */\\r\\n  P.eq = function (y) {\\r\\n    return this.cmp(y) === 0;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return true if the value of this Big is greater than the value of Big y, otherwise return\\r\\n   * false.\\r\\n   */\\r\\n  P.gt = function (y) {\\r\\n    return this.cmp(y) > 0;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\\r\\n   * return false.\\r\\n   */\\r\\n  P.gte = function (y) {\\r\\n    return this.cmp(y) > -1;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return true if the value of this Big is less than the value of Big y, otherwise return false.\\r\\n   */\\r\\n  P.lt = function (y) {\\r\\n    return this.cmp(y) < 0;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\\r\\n   * return false.\\r\\n   */\\r\\n  P.lte = function (y) {\\r\\n    return this.cmp(y) < 1;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big minus the value of Big y.\\r\\n   */\\r\\n  P.minus = P.sub = function (y) {\\r\\n    var i, j, t, xlty,\\r\\n      x = this,\\r\\n      Big = x.constructor,\\r\\n      a = x.s,\\r\\n      b = (y = new Big(y)).s;\\r\\n\\r\\n    // Signs differ?\\r\\n    if (a != b) {\\r\\n      y.s = -b;\\r\\n      return x.plus(y);\\r\\n    }\\r\\n\\r\\n    var xc = x.c.slice(),\\r\\n      xe = x.e,\\r\\n      yc = y.c,\\r\\n      ye = y.e;\\r\\n\\r\\n    // Either zero?\\r\\n    if (!xc[0] || !yc[0]) {\\r\\n      if (yc[0]) {\\r\\n        y.s = -b;\\r\\n      } else if (xc[0]) {\\r\\n        y = new Big(x);\\r\\n      } else {\\r\\n        y.s = 1;\\r\\n      }\\r\\n      return y;\\r\\n    }\\r\\n\\r\\n    // Determine which is the bigger number. Prepend zeros to equalise exponents.\\r\\n    if (a = xe - ye) {\\r\\n\\r\\n      if (xlty = a < 0) {\\r\\n        a = -a;\\r\\n        t = xc;\\r\\n      } else {\\r\\n        ye = xe;\\r\\n        t = yc;\\r\\n      }\\r\\n\\r\\n      t.reverse();\\r\\n      for (b = a; b--;) t.push(0);\\r\\n      t.reverse();\\r\\n    } else {\\r\\n\\r\\n      // Exponents equal. Check digit by digit.\\r\\n      j = ((xlty = xc.length < yc.length) ? xc : yc).length;\\r\\n\\r\\n      for (a = b = 0; b < j; b++) {\\r\\n        if (xc[b] != yc[b]) {\\r\\n          xlty = xc[b] < yc[b];\\r\\n          break;\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n\\r\\n    // x < y? Point xc to the array of the bigger number.\\r\\n    if (xlty) {\\r\\n      t = xc;\\r\\n      xc = yc;\\r\\n      yc = t;\\r\\n      y.s = -y.s;\\r\\n    }\\r\\n\\r\\n    /*\\r\\n     * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\\r\\n     * needs to start at yc.length.\\r\\n     */\\r\\n    if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\\r\\n\\r\\n    // Subtract yc from xc.\\r\\n    for (b = i; j > a;) {\\r\\n      if (xc[--j] < yc[j]) {\\r\\n        for (i = j; i && !xc[--i];) xc[i] = 9;\\r\\n        --xc[i];\\r\\n        xc[j] += 10;\\r\\n      }\\r\\n\\r\\n      xc[j] -= yc[j];\\r\\n    }\\r\\n\\r\\n    // Remove trailing zeros.\\r\\n    for (; xc[--b] === 0;) xc.pop();\\r\\n\\r\\n    // Remove leading zeros and adjust exponent accordingly.\\r\\n    for (; xc[0] === 0;) {\\r\\n      xc.shift();\\r\\n      --ye;\\r\\n    }\\r\\n\\r\\n    if (!xc[0]) {\\r\\n\\r\\n      // n - n = +0\\r\\n      y.s = 1;\\r\\n\\r\\n      // Result must be zero.\\r\\n      xc = [ye = 0];\\r\\n    }\\r\\n\\r\\n    y.c = xc;\\r\\n    y.e = ye;\\r\\n\\r\\n    return y;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big modulo the value of Big y.\\r\\n   */\\r\\n  P.mod = function (y) {\\r\\n    var ygtx,\\r\\n      x = this,\\r\\n      Big = x.constructor,\\r\\n      a = x.s,\\r\\n      b = (y = new Big(y)).s;\\r\\n\\r\\n    if (!y.c[0]) {\\r\\n      throw Error(DIV_BY_ZERO);\\r\\n    }\\r\\n\\r\\n    x.s = y.s = 1;\\r\\n    ygtx = y.cmp(x) == 1;\\r\\n    x.s = a;\\r\\n    y.s = b;\\r\\n\\r\\n    if (ygtx) return new Big(x);\\r\\n\\r\\n    a = Big.DP;\\r\\n    b = Big.RM;\\r\\n    Big.DP = Big.RM = 0;\\r\\n    x = x.div(y);\\r\\n    Big.DP = a;\\r\\n    Big.RM = b;\\r\\n\\r\\n    return this.minus(x.times(y));\\r\\n  };\\r\\n  \\r\\n  \\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big negated.\\r\\n   */\\r\\n  P.neg = function () {\\r\\n    var x = new this.constructor(this);\\r\\n    x.s = -x.s;\\r\\n    return x;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big plus the value of Big y.\\r\\n   */\\r\\n  P.plus = P.add = function (y) {\\r\\n    var e, k, t,\\r\\n      x = this,\\r\\n      Big = x.constructor;\\r\\n\\r\\n    y = new Big(y);\\r\\n\\r\\n    // Signs differ?\\r\\n    if (x.s != y.s) {\\r\\n      y.s = -y.s;\\r\\n      return x.minus(y);\\r\\n    }\\r\\n\\r\\n    var xe = x.e,\\r\\n      xc = x.c,\\r\\n      ye = y.e,\\r\\n      yc = y.c;\\r\\n\\r\\n    // Either zero?\\r\\n    if (!xc[0] || !yc[0]) {\\r\\n      if (!yc[0]) {\\r\\n        if (xc[0]) {\\r\\n          y = new Big(x);\\r\\n        } else {\\r\\n          y.s = x.s;\\r\\n        }\\r\\n      }\\r\\n      return y;\\r\\n    }\\r\\n\\r\\n    xc = xc.slice();\\r\\n\\r\\n    // Prepend zeros to equalise exponents.\\r\\n    // Note: reverse faster than unshifts.\\r\\n    if (e = xe - ye) {\\r\\n      if (e > 0) {\\r\\n        ye = xe;\\r\\n        t = yc;\\r\\n      } else {\\r\\n        e = -e;\\r\\n        t = xc;\\r\\n      }\\r\\n\\r\\n      t.reverse();\\r\\n      for (; e--;) t.push(0);\\r\\n      t.reverse();\\r\\n    }\\r\\n\\r\\n    // Point xc to the longer array.\\r\\n    if (xc.length - yc.length < 0) {\\r\\n      t = yc;\\r\\n      yc = xc;\\r\\n      xc = t;\\r\\n    }\\r\\n\\r\\n    e = yc.length;\\r\\n\\r\\n    // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\\r\\n    for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\\r\\n\\r\\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\\r\\n\\r\\n    if (k) {\\r\\n      xc.unshift(k);\\r\\n      ++ye;\\r\\n    }\\r\\n\\r\\n    // Remove trailing zeros.\\r\\n    for (e = xc.length; xc[--e] === 0;) xc.pop();\\r\\n\\r\\n    y.c = xc;\\r\\n    y.e = ye;\\r\\n\\r\\n    return y;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a Big whose value is the value of this Big raised to the power n.\\r\\n   * If n is negative, round to a maximum of Big.DP decimal places using rounding\\r\\n   * mode Big.RM.\\r\\n   *\\r\\n   * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\\r\\n   */\\r\\n  P.pow = function (n) {\\r\\n    var x = this,\\r\\n      one = new x.constructor('1'),\\r\\n      y = one,\\r\\n      isneg = n < 0;\\r\\n\\r\\n    if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\\r\\n      throw Error(INVALID + 'exponent');\\r\\n    }\\r\\n\\r\\n    if (isneg) n = -n;\\r\\n\\r\\n    for (;;) {\\r\\n      if (n & 1) y = y.times(x);\\r\\n      n >>= 1;\\r\\n      if (!n) break;\\r\\n      x = x.times(x);\\r\\n    }\\r\\n\\r\\n    return isneg ? one.div(y) : y;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\\r\\n   * significant digits using rounding mode rm, or Big.RM if rm is not specified.\\r\\n   *\\r\\n   * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\\r\\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\\r\\n   */\\r\\n  P.prec = function (sd, rm) {\\r\\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\\r\\n      throw Error(INVALID + 'precision');\\r\\n    }\\r\\n    return round(new this.constructor(this), sd, rm);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\\r\\n   * using rounding mode rm, or Big.RM if rm is not specified.\\r\\n   * If dp is negative, round to an integer which is a multiple of 10**-dp.\\r\\n   * If dp is not specified, round to 0 decimal places.\\r\\n   *\\r\\n   * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\\r\\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\\r\\n   */\\r\\n  P.round = function (dp, rm) {\\r\\n    if (dp === UNDEFINED) dp = 0;\\r\\n    else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\\r\\n      throw Error(INVALID_DP);\\r\\n    }\\r\\n    return round(new this.constructor(this), dp + this.e + 1, rm);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the square root of the value of this Big, rounded, if\\r\\n   * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\\r\\n   */\\r\\n  P.sqrt = function () {\\r\\n    var r, c, t,\\r\\n      x = this,\\r\\n      Big = x.constructor,\\r\\n      s = x.s,\\r\\n      e = x.e,\\r\\n      half = new Big('0.5');\\r\\n\\r\\n    // Zero?\\r\\n    if (!x.c[0]) return new Big(x);\\r\\n\\r\\n    // Negative?\\r\\n    if (s < 0) {\\r\\n      throw Error(NAME + 'No square root');\\r\\n    }\\r\\n\\r\\n    // Estimate.\\r\\n    s = Math.sqrt(x + '');\\r\\n\\r\\n    // Math.sqrt underflow/overflow?\\r\\n    // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\\r\\n    if (s === 0 || s === 1 / 0) {\\r\\n      c = x.c.join('');\\r\\n      if (!(c.length + e & 1)) c += '0';\\r\\n      s = Math.sqrt(c);\\r\\n      e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\\r\\n      r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\\r\\n    } else {\\r\\n      r = new Big(s + '');\\r\\n    }\\r\\n\\r\\n    e = r.e + (Big.DP += 4);\\r\\n\\r\\n    // Newton-Raphson iteration.\\r\\n    do {\\r\\n      t = r;\\r\\n      r = half.times(t.plus(x.div(t)));\\r\\n    } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\\r\\n\\r\\n    return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a new Big whose value is the value of this Big times the value of Big y.\\r\\n   */\\r\\n  P.times = P.mul = function (y) {\\r\\n    var c,\\r\\n      x = this,\\r\\n      Big = x.constructor,\\r\\n      xc = x.c,\\r\\n      yc = (y = new Big(y)).c,\\r\\n      a = xc.length,\\r\\n      b = yc.length,\\r\\n      i = x.e,\\r\\n      j = y.e;\\r\\n\\r\\n    // Determine sign of result.\\r\\n    y.s = x.s == y.s ? 1 : -1;\\r\\n\\r\\n    // Return signed 0 if either 0.\\r\\n    if (!xc[0] || !yc[0]) {\\r\\n      y.c = [y.e = 0];\\r\\n      return y;\\r\\n    }\\r\\n\\r\\n    // Initialise exponent of result as x.e + y.e.\\r\\n    y.e = i + j;\\r\\n\\r\\n    // If array xc has fewer digits than yc, swap xc and yc, and lengths.\\r\\n    if (a < b) {\\r\\n      c = xc;\\r\\n      xc = yc;\\r\\n      yc = c;\\r\\n      j = a;\\r\\n      a = b;\\r\\n      b = j;\\r\\n    }\\r\\n\\r\\n    // Initialise coefficient array of result with zeros.\\r\\n    for (c = new Array(j = a + b); j--;) c[j] = 0;\\r\\n\\r\\n    // Multiply.\\r\\n\\r\\n    // i is initially xc.length.\\r\\n    for (i = b; i--;) {\\r\\n      b = 0;\\r\\n\\r\\n      // a is yc.length.\\r\\n      for (j = a + i; j > i;) {\\r\\n\\r\\n        // Current sum of products at this digit position, plus carry.\\r\\n        b = c[j] + yc[i] * xc[j - i - 1] + b;\\r\\n        c[j--] = b % 10;\\r\\n\\r\\n        // carry\\r\\n        b = b / 10 | 0;\\r\\n      }\\r\\n\\r\\n      c[j] = b;\\r\\n    }\\r\\n\\r\\n    // Increment result exponent if there is a final carry, otherwise remove leading zero.\\r\\n    if (b) ++y.e;\\r\\n    else c.shift();\\r\\n\\r\\n    // Remove trailing zeros.\\r\\n    for (i = c.length; !c[--i];) c.pop();\\r\\n    y.c = c;\\r\\n\\r\\n    return y;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a string representing the value of this Big in exponential notation rounded to dp fixed\\r\\n   * decimal places using rounding mode rm, or Big.RM if rm is not specified.\\r\\n   *\\r\\n   * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\\r\\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\\r\\n   */\\r\\n  P.toExponential = function (dp, rm) {\\r\\n    var x = this,\\r\\n      n = x.c[0];\\r\\n\\r\\n    if (dp !== UNDEFINED) {\\r\\n      if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\\r\\n        throw Error(INVALID_DP);\\r\\n      }\\r\\n      x = round(new x.constructor(x), ++dp, rm);\\r\\n      for (; x.c.length < dp;) x.c.push(0);\\r\\n    }\\r\\n\\r\\n    return stringify(x, true, !!n);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a string representing the value of this Big in normal notation rounded to dp fixed\\r\\n   * decimal places using rounding mode rm, or Big.RM if rm is not specified.\\r\\n   *\\r\\n   * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\\r\\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\\r\\n   *\\r\\n   * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\\r\\n   * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\\r\\n   */\\r\\n  P.toFixed = function (dp, rm) {\\r\\n    var x = this,\\r\\n      n = x.c[0];\\r\\n\\r\\n    if (dp !== UNDEFINED) {\\r\\n      if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\\r\\n        throw Error(INVALID_DP);\\r\\n      }\\r\\n      x = round(new x.constructor(x), dp + x.e + 1, rm);\\r\\n\\r\\n      // x.e may have changed if the value is rounded up.\\r\\n      for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\\r\\n    }\\r\\n\\r\\n    return stringify(x, false, !!n);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a string representing the value of this Big.\\r\\n   * Return exponential notation if this Big has a positive exponent equal to or greater than\\r\\n   * Big.PE, or a negative exponent equal to or less than Big.NE.\\r\\n   * Omit the sign for negative zero.\\r\\n   */\\r\\n  P.toJSON = P.toString = function () {\\r\\n    var x = this,\\r\\n      Big = x.constructor;\\r\\n    return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return the value of this Big as a primitve number.\\r\\n   */\\r\\n  P.toNumber = function () {\\r\\n    var n = Number(stringify(this, true, true));\\r\\n    if (this.constructor.strict === true && !this.eq(n.toString())) {\\r\\n      throw Error(NAME + 'Imprecise conversion');\\r\\n    }\\r\\n    return n;\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a string representing the value of this Big rounded to sd significant digits using\\r\\n   * rounding mode rm, or Big.RM if rm is not specified.\\r\\n   * Use exponential notation if sd is less than the number of digits necessary to represent\\r\\n   * the integer part of the value in normal notation.\\r\\n   *\\r\\n   * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\\r\\n   * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\\r\\n   */\\r\\n  P.toPrecision = function (sd, rm) {\\r\\n    var x = this,\\r\\n      Big = x.constructor,\\r\\n      n = x.c[0];\\r\\n\\r\\n    if (sd !== UNDEFINED) {\\r\\n      if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\\r\\n        throw Error(INVALID + 'precision');\\r\\n      }\\r\\n      x = round(new Big(x), sd, rm);\\r\\n      for (; x.c.length < sd;) x.c.push(0);\\r\\n    }\\r\\n\\r\\n    return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\\r\\n  };\\r\\n\\r\\n\\r\\n  /*\\r\\n   * Return a string representing the value of this Big.\\r\\n   * Return exponential notation if this Big has a positive exponent equal to or greater than\\r\\n   * Big.PE, or a negative exponent equal to or less than Big.NE.\\r\\n   * Include the sign for negative zero.\\r\\n   */\\r\\n  P.valueOf = function () {\\r\\n    var x = this,\\r\\n      Big = x.constructor;\\r\\n    if (Big.strict === true) {\\r\\n      throw Error(NAME + 'valueOf disallowed');\\r\\n    }\\r\\n    return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\\r\\n  };\\r\\n\\r\\n\\r\\n  // Export\\r\\n\\r\\n\\r\\n  Big = _Big_();\\r\\n\\r\\n  Big['default'] = Big.Big = Big;\\r\\n\\r\\n  //AMD.\\r\\n  if (typeof define === 'function' && define.amd) {\\r\\n    define(function () { return Big; });\\r\\n\\r\\n  // Node and other CommonJS-like environments that support module.exports.\\r\\n  } else if (typeof module !== 'undefined' && module.exports) {\\r\\n    module.exports = Big;\\r\\n\\r\\n  //Browser.\\r\\n  } else {\\r\\n    GLOBAL.Big = Big;\\r\\n  }\\r\\n})(this);\\r\\n\"","module.exports = \"/*!\\n * crosstab JavaScript Library v0.2.12\\n * https://github.com/tejacques/crosstab\\n *\\n * License: Apache 2.0 https://github.com/tejacques/crosstab/blob/master/LICENSE\\n *\\n *  Copyright 2015 Tom Jacques\\n *\\n *  Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n *  you may not use this file except in compliance with the License.\\n *  You may obtain a copy of the License at\\n *\\n *      http://www.apache.org/licenses/LICENSE-2.0\\n *\\n *  Unless required by applicable law or agreed to in writing, software\\n *  distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n *  See the License for the specific language governing permissions and\\n *  limitations under the License.\\n *\\n */\\n/* global define */\\n/* global global */\\n; (function (window, define) { define('crosstab', function (require, exports, module) {\\n    'use strict';\\n\\n    // --- Handle Support ---\\n    // See: http://detectmobilebrowsers.com/about\\n    var useragent = (window.navigator && (window.navigator.userAgent || window.navigator.vendor)) || window.opera || \\\"none\\\";\\n    var isMobile = (/(android|bb\\\\d+|meego).+mobile|avantgo|bada\\\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(useragent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\\\-(n|u)|c55\\\\/|capi|ccwa|cdm\\\\-|cell|chtm|cldc|cmd\\\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\\\-|_)|g1 u|g560|gene|gf\\\\-5|g\\\\-mo|go(\\\\.w|od)|gr(ad|un)|haie|hcit|hd\\\\-(m|p|t)|hei\\\\-|hi(pt|ta)|hp( i|ip)|hs\\\\-c|ht(c(\\\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\\\-(20|go|ma)|i230|iac( |\\\\-|\\\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\\\/)|klon|kpt |kwc\\\\-|kyo(c|k)|le(no|xi)|lg( g|\\\\/(k|l|u)|50|54|\\\\-[a-w])|libw|lynx|m1\\\\-w|m3ga|m50\\\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\\\-2|po(ck|rt|se)|prox|psio|pt\\\\-g|qa\\\\-a|qc(07|12|21|32|60|\\\\-[2-7]|i\\\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\\\-|oo|p\\\\-)|sdk\\\\/|se(c(\\\\-|0|1)|47|mc|nd|ri)|sgh\\\\-|shar|sie(\\\\-|m)|sk\\\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\\\-|v\\\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\\\-|tdg\\\\-|tel(i|m)|tim\\\\-|t\\\\-mo|to(pl|sh)|ts(70|m\\\\-|m3|m5)|tx\\\\-9|up(\\\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\\\-|your|zeto|zte\\\\-/i.test(useragent.substr(0, 4)));\\n\\n    var localStorage;\\n    try {\\n        localStorage = window.localStorage;\\n        localStorage = window['ie8-eventlistener/storage'] || window.localStorage;\\n    } catch (e) {\\n        // New versions of Firefox throw a Security exception\\n        // if cookies are disabled. See\\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\\n    }\\n\\n    // When Safari on OS X or iOS is in private browsing mode,\\n    // calling localStorage.setItem throws an exception.\\n    //\\n    // \\\"QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made\\n    // to add something to storage that exceeded the quota.\\\"\\n    var setItemAllowed = true;\\n    try {\\n        localStorage.setItem('__crosstab', '');\\n        localStorage.removeItem('__crosstab');\\n    } catch (e) {\\n        setItemAllowed = false;\\n    }\\n\\n    // Other reasons\\n    var frozenTabEnvironment = false;\\n\\n    function notSupported() {\\n        if (crosstab.supported) return;\\n        var errorMsg = 'crosstab not supported';\\n        var reasons = [];\\n        if (!localStorage) {\\n            reasons.push('localStorage not availabe');\\n        }\\n        if (!window.addEventListener) {\\n            reasons.push('addEventListener not available');\\n        }\\n        if (isMobile) {\\n            reasons.push('mobile browser');\\n        }\\n        if (frozenTabEnvironment) {\\n            reasons.push('frozen tab environment detected');\\n        }\\n        if (!setItemAllowed) {\\n            reasons.push('localStorage.setItem not allowed');\\n        }\\n\\n        if (reasons.length > 0) {\\n            errorMsg += ': ' + reasons.join(', ');\\n        }\\n\\n        throw new Error(errorMsg);\\n    }\\n\\n    // --- Utility ---\\n    var util = {\\n        keys: {\\n            MESSAGE_KEY: 'crosstab.MESSAGE_KEY',\\n            TABS_KEY: 'crosstab.TABS_KEY',\\n            MASTER_TAB: 'MASTER_TAB',\\n            SUPPORTED_KEY: 'crosstab.SUPPORTED',\\n            FROZEN_TAB_ENVIRONMENT: 'crosstab.FROZEN_TAB_ENVIRONMENT'\\n        }\\n    };\\n\\n    util.isArray = Array.isArray || function (arr) {\\n        return arr instanceof Array;\\n    };\\n\\n    util.isNumber = function (num) {\\n        return typeof num === 'number';\\n    };\\n\\n    util.isFunction = function (fn) {\\n        return typeof fn === 'function';\\n    };\\n\\n    util.forEachObj = function (obj, fn) {\\n        for (var key in obj) {\\n            if (obj.hasOwnProperty(key)) {\\n                fn.call(obj, obj[key], key, obj);\\n            }\\n        }\\n    };\\n\\n    util.forEachArr = function (arr, fn) {\\n        var len = arr.length;\\n        for (var i = 0; i < len; i++) {\\n            fn.call(arr, arr[i], i, arr);\\n        }\\n    };\\n\\n    util.forEach = function (thing, fn) {\\n        if (util.isArray(thing)) {\\n            util.forEachArr(thing, fn);\\n        } else {\\n            util.forEachObj(thing, fn);\\n        }\\n    };\\n\\n    util.map = function (thing, fn) {\\n        var res = [];\\n        util.forEach(thing, function (item, key, obj) {\\n            res.push(fn(item, key, obj));\\n        });\\n\\n        return res;\\n    };\\n\\n    util.filter = function (thing, fn) {\\n        var isArr = util.isArray(thing);\\n        var res = isArr ? [] : {};\\n\\n        if (isArr) {\\n            util.forEachArr(thing, function (value, key) {\\n                if (fn(value, key)) {\\n                    res.push(value);\\n                }\\n            });\\n        } else {\\n            util.forEachObj(thing, function (value, key) {\\n                if (fn(value, key)) {\\n                    res[key] = value;\\n                }\\n            });\\n        }\\n\\n        return res;\\n    };\\n\\n    util.reduce = function (thing, fn, accumulator) {\\n        var first = arguments.length < 3;\\n\\n        util.forEach(thing, function (item, key, obj) {\\n            if (first) {\\n                accumulator = item;\\n                first = false;\\n            } else {\\n                accumulator = fn(accumulator, item, key, obj);\\n            }\\n        });\\n\\n        return accumulator;\\n    };\\n\\n    util.now = function () {\\n        return (new Date()).getTime();\\n    };\\n\\n    util.tabs = getStoredTabs();\\n\\n    util.eventTypes = {\\n        becomeMaster: 'becomeMaster',\\n        demoteFromMaster: 'demotedFromMaster',\\n        tabUpdated: 'tabUpdated',\\n        tabClosed: 'tabClosed',\\n        tabPromoted: 'tabPromoted'\\n    };\\n\\n    util.storageEventKeys = util.reduce(util.keys, function (keys, val) {\\n        keys[val] = 1;\\n        return keys;\\n    }, {});\\n\\n    // --- Events ---\\n    // node.js style events, with the main difference being able\\n    // to add/remove events by key.\\n    util.createEventHandler = function () {\\n        var events = {};\\n        var subscribeKeyToListener = {};\\n\\n        var findHandlerByKey = function(event, key) {\\n            var handler;\\n            if (subscribeKeyToListener[event]) {\\n                handler = subscribeKeyToListener[event][key];\\n            }\\n            return handler;\\n        };\\n\\n        var findHandlerIndex = function (event, listener) {\\n            var listenerIndex = -1;\\n            var eventList = events[event];\\n            if (eventList && listener) {\\n                var len = eventList.length || 0;\\n                for(var i = 0; i < len; i++) {\\n                    if (eventList[i] === listener) {\\n                        listenerIndex = i;\\n                        break;\\n                    }\\n                }\\n            }\\n            return listenerIndex;\\n        };\\n\\n        var addListener = function (event, listener, key) {\\n            var handlers = listeners(event);\\n\\n            var storedHandler = findHandlerByKey(event, key);\\n            var listenerIndex;\\n\\n            if (storedHandler === undefined) {\\n                listenerIndex = handlers.length;\\n                handlers[listenerIndex] = listener;\\n\\n                if (!subscribeKeyToListener[event]) {\\n                    (subscribeKeyToListener[event] = {});\\n                }\\n\\n                if (key) {\\n                    subscribeKeyToListener[event][key] = listener;\\n                }\\n            } else {\\n                listenerIndex = findHandlerIndex(event, storedHandler);\\n                handlers[listenerIndex] = listener;\\n            }\\n\\n            return key || listener;\\n        };\\n\\n        var removeListener = function (event, key) {\\n            var handler = util.isFunction(key)\\n                ? key\\n                : findHandlerByKey(event, key);\\n\\n            var listenerIndex = findHandlerIndex(event, handler);\\n            if (listenerIndex === -1) return false;\\n\\n            if (events[event] && events[event][listenerIndex]) {\\n                events[event].splice(listenerIndex, 1);\\n                delete subscribeKeyToListener[event][key];\\n                return true;\\n            }\\n            return false;\\n        };\\n\\n        var removeAllListeners = function (event) {\\n            var successful = false;\\n            if (event) {\\n                if (events[event]) {\\n                    delete events[event];\\n                    successful = true;\\n                }\\n                if (subscribeKeyToListener[event]) {\\n                    delete subscribeKeyToListener[event];\\n                    successful = successful && true;\\n                }\\n            } else {\\n                events = {};\\n                subscribeKeyToListener = {};\\n                successful = true;\\n            }\\n            return successful;\\n        };\\n\\n        var emit = function (event) {\\n            var args = Array.prototype.slice.call(arguments, 1);\\n            var handlers = listeners(event);\\n\\n            util.forEach(handlers, function (listener) {\\n                if (util.isFunction(listener)) {\\n                    listener.apply(this, args);\\n                }\\n            });\\n        };\\n\\n        var once = function (event, listener, key) {\\n            // Generate a unique id for this listener\\n            while (!key || (findHandlerByKey(event, key) !== undefined)) {\\n                key = util.generateId();\\n            }\\n\\n            addListener(event, function () {\\n                removeListener(event, key);\\n                var args = Array.prototype.slice.call(arguments);\\n                listener.apply(this, args);\\n            }, key);\\n\\n            return key;\\n        };\\n\\n        var listeners = function (event) {\\n            var handlers = events[event] = events[event] || [];\\n            return handlers;\\n        };\\n\\n        var destructor = function() {\\n            removeAllListeners();\\n        };\\n\\n        return {\\n            addListener: addListener,\\n            destructor: destructor,\\n            on: addListener,\\n            off: function(event, key) {\\n                var argsLen = arguments.length;\\n                if (!argsLen) {\\n                    return removeAllListeners();\\n                } else if (argsLen === 1) {\\n                    return removeAllListeners(event);\\n                } else {\\n                    return removeListener(event, key);\\n                }\\n            },\\n            once: once,\\n            emit: emit,\\n            listeners: listeners,\\n            removeListener: removeListener,\\n            removeAllListeners: removeAllListeners\\n        };\\n    };\\n\\n    // --- Setup Events ---\\n    var eventHandler = util.createEventHandler();\\n\\n    // wrap eventHandler so that setting it will not blow up\\n    // any of the internal workings\\n    util.events = {\\n        addListener: eventHandler.addListener,\\n        on: eventHandler.on,\\n        off: eventHandler.off,\\n        once: eventHandler.once,\\n        emit: eventHandler.emit,\\n        listeners: eventHandler.listeners,\\n        removeListener: eventHandler.removeListener,\\n        removeAllListeners: eventHandler.removeAllListeners,\\n        destructor: eventHandler.destructor\\n    };\\n\\n    var lastNewValue;\\n    var lastOldValue;\\n    function onStorageEvent(event) {\\n        // Only handle crosstab events\\n        if (!event || !(event.key in util.storageEventKeys)) {\\n            return;\\n        }\\n\\n        var eventValue;\\n        try {\\n            eventValue = event.newValue ? JSON.parse(event.newValue) : {};\\n        } catch (e) {\\n            eventValue = {};\\n        }\\n        if (!eventValue || !eventValue.id || eventValue.id === crosstab.id) {\\n            // This is to force IE to behave properly\\n            return;\\n        }\\n        if (event.newValue === lastNewValue && event.oldValue === lastOldValue) {\\n            // Fix bug in IE11 where StorageEvents in iframes are sent twice.\\n            return;\\n        }\\n        lastNewValue = event.newValue;\\n        lastOldValue = event.oldValue;\\n        if (event.key === util.keys.MESSAGE_KEY) {\\n            var message = eventValue.data;\\n            // only handle if this message was meant for this tab.\\n            if (!message.destination || message.destination === crosstab.id) {\\n                eventHandler.emit(message.event, message);\\n            }\\n        } else if (event.key === util.keys.FROZEN_TAB_ENVIRONMENT) {\\n            frozenTabEnvironment = eventValue.data;\\n            crosstab.supported = crosstab.supported && !eventValue.data;\\n        } else if (event.key === util.keys.SUPPORTED_KEY) {\\n            crosstab.supported = crosstab.supported && eventValue.data;\\n        }\\n    }\\n\\n    function setLocalStorageItem(key, data) {\\n        var storageItem = {\\n            id: crosstab.id,\\n            data: data,\\n            timestamp: util.now()\\n        };\\n\\n        localStorage.setItem(key, JSON.stringify(storageItem));\\n    }\\n\\n    function getLocalStorageItem(key) {\\n        var item = getLocalStorageRaw(key);\\n        return item.data;\\n    }\\n\\n    function getLocalStorageRaw(key) {\\n        var json = localStorage ? localStorage.getItem(key) : null;\\n        var item = json ? JSON.parse(json) : {};\\n        return item;\\n    }\\n\\n    function unload() {\\n        crosstab.stopKeepalive = true;\\n        var numTabs = 0;\\n        util.forEach(util.tabs, function (tab, key) {\\n            if (key !== util.keys.MASTER_TAB) {\\n                numTabs++;\\n            }\\n        });\\n\\n        if (numTabs === 1) {\\n            util.tabs = {};\\n            setStoredTabs();\\n        } else {\\n            broadcast(util.eventTypes.tabClosed, crosstab.id);\\n        }\\n\\n    }\\n\\n    function restoreLoop() {\\n        crosstab.stopKeepalive = false;\\n        keepaliveLoop();\\n    }\\n\\n    function swapUnloadEvents() {\\n        // `beforeunload` replaced by `unload` (IE11 will be smart now)\\n        window.removeEventListener('beforeunload', unload, false);\\n        window.addEventListener('unload', unload, false);\\n        restoreLoop();\\n    }\\n\\n    function getMaster() {\\n        return util.tabs[util.keys.MASTER_TAB];\\n    }\\n\\n    function setMaster(newMaster) {\\n        util.tabs[util.keys.MASTER_TAB] = newMaster;\\n    }\\n\\n    function deleteMaster() {\\n        delete util.tabs[util.keys.MASTER_TAB];\\n    }\\n\\n    function getMasterId() {\\n        var master = getMaster();\\n\\n        return master ? master.id : 0;\\n    }\\n\\n    function isMaster() {\\n        return getMasterId() === crosstab.id;\\n    }\\n\\n    function masterTabElection() {\\n        var maxId = null;\\n        util.forEach(util.tabs, function (tab) {\\n            if (!maxId || tab.id < maxId) {\\n                maxId = tab.id;\\n            }\\n        });\\n\\n        // only broadcast the promotion if I am the new master\\n        if (maxId === crosstab.id) {\\n            broadcast(util.eventTypes.tabPromoted, crosstab.id);\\n        } else {\\n            // this is done so that in the case where multiple tabs are being\\n            // started at the same time, and there is no current saved tab\\n            // information, we will still have a value set for the master tab\\n            setMaster({\\n                id: maxId,\\n                lastUpdated: util.now()\\n            });\\n        }\\n    }\\n\\n    // Handle other tabs closing by updating internal tab model, and promoting\\n    // self if we are the lowest tab id\\n    eventHandler.addListener(util.eventTypes.tabClosed, function (message) {\\n        var id = message.data;\\n        if (id in util.tabs) {\\n            delete util.tabs[id];\\n        }\\n\\n        var master = getMaster();\\n        if (!master || master.id === id) {\\n            // If the master was the closed tab, delete it and the highest\\n            // tab ID becomes the new master, which will save the tabs\\n            if (master) {\\n                deleteMaster();\\n            }\\n            masterTabElection();\\n        } else if (master.id === crosstab.id) {\\n            // If I am master, save the new tabs out\\n            setStoredTabs();\\n        }\\n    });\\n\\n    eventHandler.addListener(util.eventTypes.tabUpdated, function (message) {\\n        var tab = message.data;\\n        util.tabs[tab.id] = tab;\\n\\n        // If there is no master, hold an election\\n        if (!getMaster()) {\\n            masterTabElection();\\n        }\\n\\n        if (getMasterId() === tab.id) {\\n            setMaster(tab);\\n        }\\n        if (isMaster()) {\\n            // If I am master, save the new tabs out\\n            setStoredTabs();\\n        }\\n    });\\n\\n    var bullying;\\n    eventHandler.addListener(util.eventTypes.tabPromoted, function (message) {\\n        var id = message.data;\\n        var lastUpdated = message.timestamp;\\n        var previousMaster = getMasterId();\\n\\n        // Bully out competing broadcasts if our id is lower\\n        if (crosstab.id < id) {\\n            if (!bullying) {\\n                bullying = setTimeout(function() {\\n                    bullying = 0;\\n                    broadcast(util.eventTypes.tabPromoted, crosstab.id);\\n                }, 0);\\n            }\\n            return;\\n        }\\n\\n        setMaster({\\n            id: id,\\n            lastUpdated: lastUpdated\\n        });\\n\\n        if (isMaster()) {\\n            // set the tabs in localStorage\\n            setStoredTabs();\\n        }\\n        if (isMaster()\\n            && previousMaster !== crosstab.id) {\\n            // emit the become master event so we can handle it accordingly\\n            util.events.emit(util.eventTypes.becomeMaster);\\n        } else if (!isMaster()\\n            && previousMaster === crosstab.id) {\\n            // emit the demoted from master event so we can clean up resources\\n            util.events.emit(util.eventTypes.demoteFromMaster);\\n        }\\n    });\\n\\n    function pad(num, width, padChar) {\\n        padChar = padChar || '0';\\n        var numStr = (num.toString());\\n\\n        if (numStr.length >= width) {\\n            return numStr;\\n        }\\n\\n        return new Array(width - numStr.length + 1).join(padChar) + numStr;\\n    }\\n\\n    util.generateId = function () {\\n        /*jshint bitwise: false*/\\n        return util.now().toString() + pad((Math.random() * 0x7FFFFFFF) | 0, 10);\\n    };\\n\\n    // --- Setup message sending and handling ---\\n    function broadcast(event, data, destination) {\\n        if (!crosstab.supported) {\\n            notSupported();\\n        }\\n\\n        var message = {\\n            id: util.generateId(),\\n            event: event,\\n            data: data,\\n            destination: destination,\\n            origin: crosstab.id,\\n            timestamp: util.now()\\n        };\\n\\n        // If the destination differs from the origin send it out, otherwise\\n        // handle it locally\\n        if (message.destination !== message.origin) {\\n            setLocalStorageItem(util.keys.MESSAGE_KEY, message);\\n        }\\n\\n        if (!message.destination || message.destination === message.origin) {\\n            eventHandler.emit(event, message);\\n        }\\n    }\\n\\n    function broadcastMaster(event, data) {\\n        broadcast(event, data, getMaster().id);\\n    }\\n\\n    // ---- Return ----\\n    var setupComplete = false;\\n    util.events.once('setupComplete', function () {\\n        setupComplete = true;\\n    });\\n\\n    var crosstab = function (fn) {\\n        if (setupComplete) {\\n            fn();\\n        } else {\\n            util.events.once('setupComplete', fn);\\n        }\\n    };\\n\\n    crosstab.id = util.generateId();\\n    crosstab.supported = !!localStorage && window.addEventListener && !isMobile && setItemAllowed;\\n    crosstab.util = util;\\n    crosstab.broadcast = broadcast;\\n    crosstab.broadcastMaster = broadcastMaster;\\n    crosstab.on = util.events.on;\\n    crosstab.once = util.events.once;\\n    crosstab.off = util.events.off;\\n\\n    // 10 minute timeout\\n    var CACHE_TIMEOUT = 10 * 60 * 1000;\\n\\n    // --- Crosstab supported ---\\n    // Check to see if the global frozen tab environment key or supported key has been set.\\n    if (!setupComplete && crosstab.supported) {\\n        var frozenTabsRaw = getLocalStorageRaw(util.keys.FROZEN_TAB_ENVIRONMENT);\\n\\n        if (frozenTabsRaw.timestamp) {\\n            var frozenTabs = frozenTabsRaw.data;\\n            if (util.now() - frozenTabsRaw.timestamp > CACHE_TIMEOUT) {\\n                localStorage.removeItem(util.keys.FROZEN_TAB_ENVIRONMENT);\\n            } else if (frozenTabs === true) {\\n                frozenTabEnvironmentDetected();\\n            }\\n        }\\n\\n        var supportedRaw = getLocalStorageRaw(util.keys.SUPPORTED_KEY);\\n\\n        if (supportedRaw.timestamp) {\\n            var supported = supportedRaw.data;\\n\\n            if (util.now() - supportedRaw.timestamp > CACHE_TIMEOUT) {\\n                localStorage.removeItem(util.keys.SUPPORTED_KEY);\\n            } else if (supported === false || supported === true) {\\n                // As long as it is explicitely set, use the value\\n                crosstab.supported = supported;\\n                util.events.emit('setupComplete');\\n            }\\n        }\\n    }\\n\\n    function frozenTabEnvironmentDetected() {\\n        crosstab.supported = false;\\n        frozenTabEnvironment = true;\\n        setLocalStorageItem(util.keys.FROZEN_TAB_ENVIRONMENT, true);\\n        setLocalStorageItem(util.keys.SUPPORTED_KEY, false);\\n    }\\n\\n    // --- Tab Setup ---\\n    // 3 second keepalive\\n    var TAB_KEEPALIVE = 3 * 1000;\\n    // 5 second timeout\\n    var TAB_TIMEOUT = 5 * 1000;\\n    // 500 ms ping timeout\\n    var PING_TIMEOUT = 500;\\n\\n    function getStoredTabs() {\\n        var storedTabs = getLocalStorageItem(util.keys.TABS_KEY);\\n        util.tabs = storedTabs || util.tabs || {};\\n        return util.tabs;\\n    }\\n\\n    function setStoredTabs() {\\n        setLocalStorageItem(util.keys.TABS_KEY, util.tabs);\\n    }\\n\\n    function keepalive() {\\n        var now = util.now();\\n\\n        var myTab = {\\n            id: crosstab.id,\\n            lastUpdated: now\\n        };\\n\\n        // broadcast tabUpdated event\\n        broadcast(util.eventTypes.tabUpdated, myTab);\\n\\n        // broadcast tabClosed event for each tab that timed out\\n        function stillAlive(tab) {\\n            return now - tab.lastUpdated < TAB_TIMEOUT;\\n        }\\n\\n        function notAlive(tab, key) {\\n            return key !== util.keys.MASTER_TAB && !stillAlive(tab);\\n        }\\n\\n        var deadTabs = util.filter(util.tabs, notAlive);\\n        util.forEach(deadTabs, function (tab) {\\n            broadcast(util.eventTypes.tabClosed, tab.id);\\n        });\\n\\n        // check to see if setup is complete\\n        if (!setupComplete) {\\n            var master = getMaster();\\n            // ping master\\n            if (master && master.id !== myTab.id) {\\n                var timeout;\\n                var start;\\n\\n                crosstab.util.events.once('PONG', function () {\\n                    if (!setupComplete) {\\n                        clearTimeout(timeout);\\n                        // set supported to true / frozen to false\\n                        setLocalStorageItem(\\n                            util.keys.SUPPORTED_KEY,\\n                            true);\\n                        setLocalStorageItem(\\n                            util.keys.FROZEN_TAB_ENVIRONMENT,\\n                            false);\\n                        util.events.emit('setupComplete');\\n                    }\\n                });\\n\\n                start = util.now();\\n\\n                // There is a nested timeout here. We'll give it 100ms\\n                // timeout, with iters \\\"yields\\\" to the event loop. So at least\\n                // iters number of blocks of javascript will be able to run\\n                // covering at least 100ms\\n                var recursiveTimeout = function (iters) {\\n                    var diff = util.now() - start;\\n\\n                    if (!setupComplete) {\\n                        if (iters <= 0 && diff > PING_TIMEOUT) {\\n                            frozenTabEnvironmentDetected();\\n                            util.events.emit('setupComplete');\\n                        } else {\\n                            timeout = setTimeout(function () {\\n                                recursiveTimeout(iters - 1);\\n                            }, 5);\\n                        }\\n                    }\\n                };\\n\\n                var iterations = 5;\\n                timeout = setTimeout(function () {\\n                    recursiveTimeout(5);\\n                }, PING_TIMEOUT - 5 * iterations);\\n                crosstab.broadcastMaster('PING');\\n            } else if (master && master.id === myTab.id) {\\n                util.events.emit('setupComplete');\\n            }\\n        }\\n    }\\n\\n    function keepaliveLoop() {\\n        if (crosstab.supported && !crosstab.stopKeepalive) {\\n            keepalive();\\n        }\\n    }\\n\\n    // --- Check if crosstab is supported ---\\n    if (!crosstab.supported) {\\n        crosstab.broadcast = notSupported;\\n    } else {\\n        // ---- Setup Storage Listener\\n        window.addEventListener('storage', onStorageEvent, false);\\n        // start with the `beforeunload` event due to IE11\\n        window.addEventListener('beforeunload', unload, false);\\n        // swap `beforeunload` to `unload` after DOM is loaded\\n        window.addEventListener('DOMContentLoaded', swapUnloadEvents, false);\\n\\n        util.events.on('PING', function (message) {\\n            // only handle direct messages\\n            if (!message.destination || message.destination !== crosstab.id) {\\n                return;\\n            }\\n\\n            if (util.now() - message.timestamp < PING_TIMEOUT) {\\n                crosstab.broadcast('PONG', null, message.origin);\\n            }\\n        });\\n\\n        setInterval(keepaliveLoop, TAB_KEEPALIVE);\\n        keepaliveLoop();\\n    }\\n\\n    module.exports = crosstab;\\n\\n/*!\\n * UMD/AMD/Global context Module Loader wrapper\\n *\\n * This wrapper will try to use a module loader with the\\n * following priority:\\n *\\n *  1.) AMD\\n *  2.) CommonJS\\n *  3.) Context Variable (this)\\n *    - window in the browser\\n *    - module.exports in node and browserify\\n */\\n});})(\\n    // First arg -- the global object in the browser or node\\n    typeof window == 'object' ? window : global,\\n    // Second arg -- the define object\\n    typeof define == 'function' && define.amd\\n    ? define\\n    : (function (context) {\\n        'use strict';\\n        return typeof module == 'object' ? function (name, factory) {\\n            factory(require, exports, module);\\n        }\\n        : function (name, factory) {\\n            var module = {\\n                exports: {}\\n            };\\n            var require = function (n) {\\n                if (n === 'jquery') {\\n                    n = 'jQuery';\\n                }\\n                return context[n];\\n            };\\n\\n            factory(require, module.exports, module);\\n            context[name] = module.exports;\\n        };\\n    })(this));\\n\"","module.exports = \"/*!\\n\\n handlebars v1.3.3-sugarcrm-temporary\\n\\nCopyright (C) 2011 by Yehuda Katz\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\nin the Software without restriction, including without limitation the rights\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\ncopies of the Software, and to permit persons to whom the Software is\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in\\nall copies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\\nTHE SOFTWARE.\\n\\n@license\\n*/\\n/*\\n\\n=============================== WARNING ========================================\\n\\nThis is a temporary fork that we intend to discontinue using and/or remove in\\na future version of Sugar.\\n\\nSugarCRM Inc does not recommend using this fork outside of the Sugar platform.\\nAny non-Sugar use cases will not be supported.\\n\\n================================================================================\\n*/\\n\\nvar Handlebars=function(){var a=function(){\\\"use strict\\\";function a(a){this.string=a}var b;return a.prototype.toString=function(){return\\\"\\\"+this.string},b=a}(),b=function(a){\\\"use strict\\\";function b(a){return h[a]||\\\"&amp;\\\"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=\\\"\\\"+a,j.test(a)?a.replace(i,b):a):\\\"\\\"}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={\\\"&\\\":\\\"&amp;\\\",\\\"<\\\":\\\"&lt;\\\",\\\">\\\":\\\"&gt;\\\",'\\\"':\\\"&quot;\\\",\\\"'\\\":\\\"&#x27;\\\",\\\"`\\\":\\\"&#x60;\\\",\\\"=\\\":\\\"&#x3D;\\\"},i=/[&<>\\\"'`=]/g,j=/[&<>\\\"'`=]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return\\\"function\\\"==typeof a};l(/x/)&&(l=function(a){return\\\"function\\\"==typeof a&&\\\"[object Function]\\\"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&\\\"object\\\"==typeof a?\\\"[object Array]\\\"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){\\\"use strict\\\";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=\\\" - \\\"+d+\\\":\\\"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=[\\\"description\\\",\\\"fileName\\\",\\\"lineNumber\\\",\\\"message\\\",\\\"name\\\",\\\"number\\\",\\\"stack\\\"];return a.prototype=new Error,b=a}(),d=function(a,b){\\\"use strict\\\";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper(\\\"helperMissing\\\",function(a){if(2===arguments.length)return void 0;throw new h(\\\"Missing helper: '\\\"+a+\\\"'\\\")}),a.registerHelper(\\\"blockHelperMissing\\\",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper(\\\"each\\\",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g=\\\"\\\";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&\\\"object\\\"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper(\\\"if\\\",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper(\\\"unless\\\",function(b,c){return a.helpers[\\\"if\\\"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper(\\\"with\\\",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper(\\\"log\\\",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i=\\\"1.3.0\\\";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:\\\"<= 1.0.rc.2\\\",2:\\\"== 1.0.0-rc.3\\\",3:\\\"== 1.0.0-rc.4\\\",4:\\\">= 1.0.0\\\"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o=\\\"[object Object]\\\";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h(\\\"Arg not supported with multiple helpers\\\");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:\\\"debug\\\",1:\\\"info\\\",2:\\\"warn\\\",3:\\\"error\\\"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];\\\"undefined\\\"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){\\\"use strict\\\";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l(\\\"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (\\\"+d+\\\") or downgrade your runtime to an older version (\\\"+e+\\\").\\\")}throw new l(\\\"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (\\\"+a[1]+\\\").\\\")}}function e(a,b){if(!b)throw new l(\\\"No environment passed to template\\\");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l(\\\"The partial \\\"+c+\\\" could not be compiled when running in runtime-only mode\\\")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l(\\\"The partial \\\"+b+\\\" could not be found\\\");return a instanceof Function?a(c,g):void 0}function i(){return\\\"\\\"}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){\\\"use strict\\\";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e),g=function(a){\\\"use strict\\\";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d,f){var g,h;3===arguments.length?(f=d,d=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type=\\\"program\\\",this.statements=a,this.strip={},d?(h=d[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new e.ProgramNode(d,c,g)):this.inverse=new e.ProgramNode(d,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type=\\\"mustache\\\",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped=\\\"{\\\"!==h&&\\\"&\\\"!==h}else this.escaped=!!d;a instanceof e.SexprNode?this.sexpr=a:this.sexpr=new e.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type=\\\"sexpr\\\",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type=\\\"partial\\\",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,c,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new d(a.sexpr.id.original+\\\" doesn't match \\\"+f.path.original,this);this.type=\\\"block\\\",this.mustache=a,this.program=c,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(c||e).strip.left=a.strip.right,(e||c).strip.right=f.strip.left,e&&!c&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type=\\\"content\\\",this.string=a},HashNode:function(a,c){b.call(this,c),this.type=\\\"hash\\\",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type=\\\"ID\\\";for(var e=\\\"\\\",f=[],g=0,h=0,i=a.length;i>h;h++){var j=a[h].part;if(e+=(a[h].separator||\\\"\\\")+j,\\\"..\\\"===j||\\\".\\\"===j||\\\"this\\\"===j){if(f.length>0)throw new d(\\\"Invalid path: \\\"+e,this);\\\"..\\\"===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join(\\\".\\\"),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type=\\\"PARTIAL_NAME\\\",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type=\\\"DATA\\\",this.id=a},StringNode:function(a,c){b.call(this,c),this.type=\\\"STRING\\\",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type=\\\"INTEGER\\\",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type=\\\"BOOLEAN\\\",this.bool=a,this.stringModeValue=\\\"true\\\"===a},CommentNode:function(a,c){b.call(this,c),this.type=\\\"comment\\\",this.comment=a}};return c=e}(c),h=function(){\\\"use strict\\\";var a,b=function(){function a(a,b){return{left:\\\"~\\\"===a.charAt(2),right:\\\"~\\\"===b.charAt(0)||\\\"~\\\"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:\\\"error\\\",5:\\\"EOF\\\",14:\\\"CONTENT\\\",15:\\\"COMMENT\\\",16:\\\"OPEN_BLOCK\\\",18:\\\"CLOSE\\\",19:\\\"OPEN_INVERSE\\\",20:\\\"OPEN_ENDBLOCK\\\",22:\\\"OPEN\\\",23:\\\"OPEN_UNESCAPED\\\",24:\\\"CLOSE_UNESCAPED\\\",25:\\\"OPEN_PARTIAL\\\",32:\\\"STRING\\\",33:\\\"INTEGER\\\",34:\\\"BOOLEAN\\\",35:\\\"OPEN_SEXPR\\\",36:\\\"CLOSE_SEXPR\\\",40:\\\"ID\\\",41:\\\"EQUALS\\\",42:\\\"DATA\\\",44:\\\"SEP\\\"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[i-1],g[i],this._$);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i],this._$);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[],this._$);break;case 6:this.$=new e.ProgramNode(g[i],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i],this._$);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i],this._$);break;case 13:this.$=g[i];break;case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i],this._$);break;case 16:this.$=new e.CommentNode(g[i],this._$);break;case 17:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 18:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 21:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]),this._$);break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=new e.SexprNode([g[i-2]].concat(g[i-1]),g[i],this._$);break;case 25:this.$=new e.SexprNode([g[i]],null,this._$);break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i],this._$);break;case 28:this.$=new e.IntegerNode(g[i],this._$);break;case 29:this.$=new e.BooleanNode(g[i],this._$);break;case 30:this.$=g[i];break;case 31:g[i-1].isHelper=!0,this.$=g[i-1];break;case 32:this.$=new e.HashNode(g[i],this._$);break;case 33:this.$=[g[i-2],g[i]];break;case 34:this.$=new e.PartialNameNode(g[i],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[i],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[i],this._$));break;case 37:this.$=new e.DataNode(g[i],this._$);break;case 38:this.$=new e.IdNode(g[i],this._$);break;case 39:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 40:this.$=[{part:g[i]}];break;case 43:this.$=[];break;case 44:g[i-1].push(g[i]);break;case 47:this.$=[g[i]];break;case 48:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,\\\"number\\\"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h=\\\"\\\",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,\\\"undefined\\\"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;\\\"function\\\"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||\\\"undefined\\\"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),\\\"undefined\\\"==typeof q||!q.length||!q[0]){var x=\\\"\\\";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push(\\\"'\\\"+this.terminals_[s]+\\\"'\\\");x=this.lexer.showPosition?\\\"Parse error on line \\\"+(i+1)+\\\":\\\\n\\\"+this.lexer.showPosition()+\\\"\\\\nExpecting \\\"+v.join(\\\", \\\")+\\\", got '\\\"+(this.terminals_[n]||n)+\\\"'\\\":\\\"Parse error on line \\\"+(i+1)+\\\": Unexpected \\\"+(1==n?\\\"end of input\\\":\\\"'\\\"+(this.terminals_[n]||n)+\\\"'\\\"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error(\\\"Parse Error: multiple actions possible at state: \\\"+p+\\\", token: \\\"+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),\\\"undefined\\\"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match=\\\"\\\",this.conditionStack=[\\\"INITIAL\\\"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\\\\r\\\\n?|\\\\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\\\\r\\\\n?|\\\\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\\\\r\\\\n?|\\\\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?\\\"...\\\":\\\"\\\")+a.substr(-20).replace(/\\\\n/g,\\\"\\\")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?\\\"...\\\":\\\"\\\")).replace(/\\\\n/g,\\\"\\\")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join(\\\"-\\\");return a+this.upcomingInput()+\\\"\\\\n\\\"+b+\\\"^\\\"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext=\\\"\\\",this.match=\\\"\\\");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\\\\r\\\\n?|\\\\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\\\\r?\\\\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):\\\"\\\"===this._input?this.EOF:this.parseError(\\\"Lexical error on line \\\"+(this.yylineno+1)+\\\". Unrecognized text.\\\\n\\\"+this.showPosition(),{text:\\\"\\\",token:null,line:this.yylineno})},lex:function(){var a=this.next();return\\\"undefined\\\"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if(\\\"\\\\\\\\\\\\\\\\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin(\\\"mu\\\")):\\\"\\\\\\\\\\\"===b.yytext.slice(-1)?(e(0,1),this.begin(\\\"emu\\\")):this.begin(\\\"mu\\\"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin(\\\"com\\\");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\\\\\\\\\\"/g,'\\\"'),32;case 24:return b.yytext=e(1,2).replace(/\\\\\\\\'/g,\\\"'\\\"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return\\\"INVALID\\\";case 32:return 5}},a.rules=[/^(?:[^\\\\x00]*?(?=(\\\\{\\\\{)))/,/^(?:[^\\\\x00]+)/,/^(?:[^\\\\x00]{2,}?(?=(\\\\{\\\\{|\\\\\\\\\\\\{\\\\{|\\\\\\\\\\\\\\\\\\\\{\\\\{|$)))/,/^(?:[\\\\s\\\\S]*?--\\\\}\\\\})/,/^(?:\\\\()/,/^(?:\\\\))/,/^(?:\\\\{\\\\{(~)?>)/,/^(?:\\\\{\\\\{(~)?#)/,/^(?:\\\\{\\\\{(~)?\\\\/)/,/^(?:\\\\{\\\\{(~)?\\\\^)/,/^(?:\\\\{\\\\{(~)?\\\\s*else\\\\b)/,/^(?:\\\\{\\\\{(~)?\\\\{)/,/^(?:\\\\{\\\\{(~)?&)/,/^(?:\\\\{\\\\{!--)/,/^(?:\\\\{\\\\{![\\\\s\\\\S]*?\\\\}\\\\})/,/^(?:\\\\{\\\\{(~)?)/,/^(?:=)/,/^(?:\\\\.\\\\.)/,/^(?:\\\\.(?=([=~}\\\\s\\\\/.)])))/,/^(?:[\\\\/.])/,/^(?:\\\\s+)/,/^(?:\\\\}(~)?\\\\}\\\\})/,/^(?:(~)?\\\\}\\\\})/,/^(?:\\\"(\\\\\\\\[\\\"]|[^\\\"])*\\\")/,/^(?:'(\\\\\\\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\\\\s)])))/,/^(?:false(?=([~}\\\\s)])))/,/^(?:-?[0-9]+(?=([~}\\\\s)])))/,/^(?:([^\\\\s!\\\"#%-,\\\\.\\\\/;->@\\\\[-\\\\^`\\\\{-~]+(?=([=~}\\\\s\\\\/.)]))))/,/^(?:\\\\[[^\\\\]]*\\\\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();return a=b}(),i=function(a,b){\\\"use strict\\\";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){\\\"use strict\\\";function b(){}function c(a,b,c){if(null==a||\\\"string\\\"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f(\\\"You must pass a string or Handlebars AST to Handlebars.precompile. You passed \\\"+a);b=b||{},\\\"data\\\"in b||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||\\\"string\\\"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f(\\\"You must pass a string or Handlebars AST to Handlebars.compile. You passed \\\"+a);b=b||{},\\\"data\\\"in b||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],\\\"DECLARE\\\"===a.opcode)e.push(\\\"DECLARE \\\"+a.name+\\\"=\\\"+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],\\\"string\\\"==typeof c&&(c='\\\"'+c.replace(\\\"\\\\n\\\",\\\"\\\\\\\\n\\\")+'\\\"'),b.push(c);e.push(a.opcode+\\\" \\\"+b.join(\\\" \\\"))}return e.join(\\\"\\\\n\\\")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,\\\"if\\\":!0,unless:!0,\\\"with\\\":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode(\\\"strip\\\"),b=this[a.type](a),c.right&&this.opcode(\\\"strip\\\"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);\\\"helper\\\"===f?this.helperSexpr(e,c,d):\\\"simple\\\"===f?(this.simpleSexpr(e),this.opcode(\\\"pushProgram\\\",c),this.opcode(\\\"pushProgram\\\",d),this.opcode(\\\"emptyHash\\\"),this.opcode(\\\"blockValue\\\")):(this.ambiguousSexpr(e,c,d),this.opcode(\\\"pushProgram\\\",c),this.opcode(\\\"pushProgram\\\",d),this.opcode(\\\"emptyHash\\\"),this.opcode(\\\"ambiguousBlockValue\\\")),this.opcode(\\\"append\\\")},hash:function(a){var b,c,d=a.pairs;this.opcode(\\\"pushHash\\\");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode(\\\"getContext\\\",c.depth||0),this.opcode(\\\"pushStringParam\\\",c.stringModeValue,c.type),\\\"sexpr\\\"===c.type&&this.sexpr(c)):this.accept(c),this.opcode(\\\"assignToHash\\\",b[0]);this.opcode(\\\"popHash\\\")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode(\\\"push\\\",\\\"depth0\\\"),this.opcode(\\\"invokePartial\\\",b.name),this.opcode(\\\"append\\\")},content:function(a){this.opcode(\\\"appendContent\\\",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode(\\\"appendEscaped\\\"):this.opcode(\\\"append\\\")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode(\\\"getContext\\\",d.depth),this.opcode(\\\"pushProgram\\\",b),this.opcode(\\\"pushProgram\\\",c),this.opcode(\\\"invokeAmbiguous\\\",e,f)},simpleSexpr:function(a){var b=a.id;\\\"DATA\\\"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode(\\\"getContext\\\",b.depth),this.opcode(\\\"pushContext\\\")),this.opcode(\\\"resolvePossibleLambda\\\")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode(\\\"invokeKnownHelper\\\",d.length,e);else{if(this.options.knownHelpersOnly)throw new f(\\\"You specified knownHelpersOnly, but used the unknown helper \\\"+e,a);this.opcode(\\\"invokeHelper\\\",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);\\\"simple\\\"===b?this.simpleSexpr(a):\\\"helper\\\"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode(\\\"getContext\\\",a.depth);var b=a.parts[0];b?this.opcode(\\\"lookupOnContext\\\",a.parts[0]):this.opcode(\\\"pushContext\\\");for(var c=1,d=a.parts.length;d>c;c++)this.opcode(\\\"lookup\\\",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f(\\\"Scoped data references are not supported: \\\"+a.original,a);this.opcode(\\\"lookupData\\\");for(var b=a.id.parts,c=0,d=b.length;d>c;c++)this.opcode(\\\"lookup\\\",b[c])},STRING:function(a){this.opcode(\\\"pushString\\\",a.string)},INTEGER:function(a){this.opcode(\\\"pushLiteral\\\",a.integer)},BOOLEAN:function(a){this.opcode(\\\"pushLiteral\\\",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:\\\"DECLARE\\\",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?\\\"helper\\\":c?\\\"ambiguous\\\":\\\"simple\\\"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode(\\\"getContext\\\",b.depth||0),this.opcode(\\\"pushStringParam\\\",b.stringModeValue,b.type),\\\"sexpr\\\"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode(\\\"pushProgram\\\",b),this.opcode(\\\"pushProgram\\\",c),a.hash?this.hash(a.hash):this.opcode(\\\"emptyHash\\\"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){\\\"use strict\\\";function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=a.log,i=b;d.prototype={nameLookup:function(a,b){function c(){var c,e;return 0===a.indexOf(\\\"depth\\\")&&(c=!0),e=/^[0-9]+$/.test(b)?a+\\\"[\\\"+b+\\\"]\\\":d.isValidJavaScriptVariableName(b)?a+\\\".\\\"+b:a+\\\"['\\\"+b+\\\"']\\\",c?\\\"(\\\"+a+\\\" && \\\"+e+\\\")\\\":e}const e=c(),f=[\\\"__defineGetter__\\\",\\\"__defineSetter__\\\",\\\"__lookupGetter__\\\",\\\"__proto__\\\"];if(\\\"constructor\\\"===b)return\\\"Object.prototype.hasOwnProperty.call(\\\"+a+\\\",'constructor') ? \\\"+e+\\\" : undefined\\\";if(-1!==f.indexOf(b))throw new i(\\\"For security reasons, you cannot use \\\"+b);return e},compilerInfo:function(){var a=f,b=g[a];return\\\"this.compilerInfo = [\\\"+a+\\\",'\\\"+b+\\\"'];\\\\n\\\"},appendToBuffer:function(a){return this.environment.isSimple?\\\"return \\\"+a+\\\";\\\":{appendToBuffer:!0,content:a,toString:function(){return\\\"buffer += \\\"+a+\\\";\\\"}}},initializeBuffer:function(){return this.quotedString(\\\"\\\")},namespace:\\\"Handlebars\\\",compile:function(a,b,c,d){\\nthis.environment=a,this.options=b||{},h(\\\"debug\\\",this.environment.disassemble()+\\\"\\\\n\\\\n\\\"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var g=f.length;this.i<g;this.i++)e=f[this.i],\\\"DECLARE\\\"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(\\\"\\\"),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i(\\\"Compile completed with content left on stack\\\");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push(\\\"\\\");else{var b=this.namespace,c=\\\"helpers = this.merge(helpers, \\\"+b+\\\".helpers);\\\";this.environment.usePartial&&(c=c+\\\" partials = this.merge(partials, \\\"+b+\\\".partials);\\\"),this.options.data&&(c+=\\\" data = data || {};\\\"),a.push(c)}this.environment.isSimple?a.push(\\\"\\\"):a.push(\\\", buffer = \\\"+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+\\\", \\\"+b.join(\\\", \\\")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+\\\", \\\"+c+\\\"=\\\"+this.context.aliases[c]);this.source[1]&&(this.source[1]=\\\"var \\\"+this.source[1].substring(2)+\\\";\\\"),this.isChild||(this.source[1]+=\\\"\\\\n\\\"+this.context.programs.join(\\\"\\\\n\\\")+\\\"\\\\n\\\"),this.environment.isSimple||this.pushSource(\\\"return buffer;\\\");for(var d=this.isChild?[\\\"depth0\\\",\\\"data\\\"]:[\\\"Handlebars\\\",\\\"depth0\\\",\\\"helpers\\\",\\\"partials\\\",\\\"data\\\"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push(\\\"depth\\\"+this.environment.depths.list[e]);var g=this.mergeSource();if(this.isChild||(g=this.compilerInfo()+g),a)return d.push(g),Function.apply(this,d);var i=\\\"function \\\"+(this.name||\\\"\\\")+\\\"(\\\"+d.join(\\\",\\\")+\\\") {\\\\n  \\\"+g+\\\"}\\\";return h(\\\"debug\\\",i+\\\"\\\\n\\\\n\\\"),i},mergeSource:function(){for(var a,b=\\\"\\\",c=0,d=this.source.length;d>c;c++){var e=this.source[c];e.appendToBuffer?a=a?a+\\\"\\\\n    + \\\"+e.content:e.content:(a&&(b+=\\\"buffer += \\\"+a+\\\";\\\\n  \\\",a=void 0),b+=e+\\\"\\\\n  \\\")}return b},blockValue:function(){this.context.aliases.blockHelperMissing=\\\"helpers.blockHelperMissing\\\";var a=[\\\"depth0\\\"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),\\\"blockHelperMissing.call(\\\"+a.join(\\\", \\\")+\\\")\\\"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing=\\\"helpers.blockHelperMissing\\\";var a=[\\\"depth0\\\"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource(\\\"if (!\\\"+this.lastHelper+\\\") { \\\"+b+\\\" = blockHelperMissing.call(\\\"+a.join(\\\", \\\")+\\\"); }\\\")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\\\\s+/,\\\"\\\")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\\\\s+$/,\\\"\\\")),this.stripNext=\\\"strip\\\"},append:function(){this.flushInline();var a=this.popStack();this.pushSource(\\\"if(\\\"+a+\\\" || \\\"+a+\\\" === 0) { \\\"+this.appendToBuffer(a)+\\\" }\\\"),this.environment.isSimple&&this.pushSource(\\\"else { \\\"+this.appendToBuffer(\\\"''\\\")+\\\" }\\\")},appendEscaped:function(){this.context.aliases.escapeExpression=\\\"this.escapeExpression\\\",this.pushSource(this.appendToBuffer(\\\"escapeExpression(\\\"+this.popStack()+\\\")\\\"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup(\\\"depth\\\"+this.lastContext,a,\\\"context\\\"))},pushContext:function(){this.pushStackLiteral(\\\"depth\\\"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='\\\"function\\\"',this.replaceStack(function(a){return\\\"typeof \\\"+a+\\\" === functionType ? \\\"+a+\\\".apply(depth0) : \\\"+a})},lookup:function(a){this.replaceStack(function(b){return b+\\\" == null || \\\"+b+\\\" === false ? \\\"+b+\\\" : \\\"+this.nameLookup(b,a,\\\"context\\\")})},lookupData:function(){this.pushStackLiteral(\\\"data\\\")},pushStringParam:function(a,b){this.pushStackLiteral(\\\"depth\\\"+this.lastContext),this.pushString(b),\\\"sexpr\\\"!==b&&(\\\"string\\\"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral(\\\"{}\\\"),this.options.stringParams&&(this.push(\\\"{}\\\"),this.push(\\\"{}\\\"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push(\\\"{\\\"+a.contexts.join(\\\",\\\")+\\\"}\\\"),this.push(\\\"{\\\"+a.types.join(\\\",\\\")+\\\"}\\\")),this.push(\\\"{\\\\n    \\\"+a.values.join(\\\",\\\\n    \\\")+\\\"\\\\n  }\\\")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing=\\\"helpers.helperMissing\\\",this.useRegister(\\\"helper\\\");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup(\\\"depth\\\"+this.lastContext,b,\\\"context\\\"),f=\\\"helper = \\\"+d.name+\\\" || \\\"+e;d.paramsInit&&(f+=\\\",\\\"+d.paramsInit),this.push(\\\"(\\\"+f+\\\",helper ? helper.call(\\\"+d.callParams+\\\") : helperMissing.call(\\\"+d.helperMissingParams+\\\"))\\\"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+\\\".call(\\\"+c.callParams+\\\")\\\")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='\\\"function\\\"',this.useRegister(\\\"helper\\\"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup(\\\"helpers\\\",a,\\\"helper\\\"),e=this.nameLookup(\\\"depth\\\"+this.lastContext,a,\\\"context\\\"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource(\\\"if (helper = \\\"+d+\\\") { \\\"+f+\\\" = helper.call(\\\"+c.callParams+\\\"); }\\\"),this.pushSource(\\\"else { helper = \\\"+e+\\\"; \\\"+f+\\\" = typeof helper === functionType ? helper.call(\\\"+c.callParams+\\\") : helper; }\\\")},invokePartial:function(a){var b=[this.nameLookup(\\\"partials\\\",a,\\\"partial\\\"),\\\"'\\\"+a+\\\"'\\\",this.popStack(),\\\"helpers\\\",\\\"partials\\\"];this.options.data&&b.push(\\\"data\\\"),this.context.aliases.self=\\\"this\\\",this.push(\\\"self.invokePartial(\\\"+b.join(\\\", \\\")+\\\")\\\")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push(\\\"'\\\"+a+\\\"': \\\"+b),c&&e.types.push(\\\"'\\\"+a+\\\"': \\\"+c),e.values.push(\\\"'\\\"+a+\\\"': (\\\"+d+\\\")\\\")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(\\\"\\\"),h=this.context.programs.length,c.index=h,c.name=\\\"program\\\"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name=\\\"program\\\"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self=\\\"this\\\",null==a)return\\\"self.noop\\\";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,\\\"data\\\"],f=0,g=d.length;g>f;f++)b=d[f],1===b?e.push(\\\"depth0\\\"):e.push(\\\"depth\\\"+(b-1));return(0===d.length?\\\"self.program(\\\":\\\"self.programWithDepth(\\\")+e.join(\\\", \\\")+\\\")\\\"},register:function(a,b){this.useRegister(a),this.pushSource(a+\\\" = \\\"+b+\\\";\\\")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+\\\" = \\\"+a+\\\";\\\"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f=\\\"\\\",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f=\\\"(\\\"+this.push(i)+\\\" = \\\"+h+\\\"),\\\",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push(\\\"(\\\"+f+j+\\\")\\\")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+\\\" = (\\\"+f+j+\\\");\\\")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push(\\\"stack\\\"+this.stackSlot),this.topStackName()},topStackName:function(){return\\\"stack\\\"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;d>b;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new i(\\\"Invalid stack pop\\\");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return'\\\"'+a.replace(/\\\\\\\\/g,\\\"\\\\\\\\\\\\\\\\\\\").replace(/\\\"/g,'\\\\\\\\\\\"').replace(/\\\\n/g,\\\"\\\\\\\\n\\\").replace(/\\\\r/g,\\\"\\\\\\\\r\\\").replace(/\\\\u2028/g,\\\"\\\\\\\\u2028\\\").replace(/\\\\u2029/g,\\\"\\\\\\\\u2029\\\")+'\\\"'},setupHelper:function(a,b,c){var d=[],e=this.setupParams(a,d,c),f=this.nameLookup(\\\"helpers\\\",b,\\\"helper\\\");return{params:d,paramsInit:e,name:f,callParams:[\\\"depth0\\\"].concat(d).join(\\\", \\\"),helperMissingParams:c&&[\\\"depth0\\\",this.quotedString(b)].concat(d).join(\\\", \\\")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push(\\\"hash:\\\"+this.popStack()),this.options.stringParams&&(f.push(\\\"hashTypes:\\\"+this.popStack()),f.push(\\\"hashContexts:\\\"+this.popStack())),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self=\\\"this\\\",e=\\\"self.noop\\\"),d||(this.context.aliases.self=\\\"this\\\",d=\\\"self.noop\\\"),f.push(\\\"inverse:\\\"+d),f.push(\\\"fn:\\\"+e));for(var i=0;a>i;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push(\\\"contexts:[\\\"+g.join(\\\",\\\")+\\\"]\\\"),f.push(\\\"types:[\\\"+h.join(\\\",\\\")+\\\"]\\\")),this.options.data&&f.push(\\\"data:data\\\"),f},setupParams:function(a,b,c){var d=\\\"{\\\"+this.setupOptions(a,b).join(\\\",\\\")+\\\"}\\\";return c?(this.useRegister(\\\"options\\\"),b.push(\\\"options\\\"),\\\"options=\\\"+d):(b.push(d),\\\"\\\")}};for(var j=\\\"break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield\\\".split(\\\" \\\"),k=d.RESERVED_WORDS={},l=0,m=j.length;m>l;l++)k[j[l]]=!0;return d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)?!0:!1},e=d}(d,c),l=function(a,b,c,d,e){\\\"use strict\\\";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,f=g}(f,g,i,j,k);return l}();\"","module.exports = \"/*! jQuery Migrate v3.4.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */\\n\\\"undefined\\\"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t){\\\"use strict\\\";\\\"function\\\"==typeof define&&define.amd?define([\\\"jquery\\\"],function(e){return t(e,window)}):\\\"object\\\"==typeof module&&module.exports?module.exports=t(require(\\\"jquery\\\"),window):t(jQuery,window)}(function(s,n){\\\"use strict\\\";function e(e){return 0<=function(e,t){for(var r=/^(\\\\d+)\\\\.(\\\\d+)\\\\.(\\\\d+)/,n=r.exec(e)||[],o=r.exec(t)||[],a=1;a<=3;a++){if(+o[a]<+n[a])return 1;if(+n[a]<+o[a])return-1}return 0}(s.fn.jquery,e)}s.migrateVersion=\\\"3.4.1\\\";var t=Object.create(null);s.migrateDisablePatches=function(){for(var e=0;e<arguments.length;e++)t[arguments[e]]=!0},s.migrateEnablePatches=function(){for(var e=0;e<arguments.length;e++)delete t[arguments[e]]},s.migrateIsPatchEnabled=function(e){return!t[e]},n.console&&n.console.log&&(s&&e(\\\"3.0.0\\\")&&!e(\\\"5.0.0\\\")||n.console.log(\\\"JQMIGRATE: jQuery 3.x-4.x REQUIRED\\\"),s.migrateWarnings&&n.console.log(\\\"JQMIGRATE: Migrate plugin loaded multiple times\\\"),n.console.log(\\\"JQMIGRATE: Migrate is installed\\\"+(s.migrateMute?\\\"\\\":\\\" with logging active\\\")+\\\", version \\\"+s.migrateVersion));var o={};function u(e,t){var r=n.console;!s.migrateIsPatchEnabled(e)||s.migrateDeduplicateWarnings&&o[t]||(o[t]=!0,s.migrateWarnings.push(t+\\\" [\\\"+e+\\\"]\\\"),r&&r.warn&&!s.migrateMute&&(r.warn(\\\"JQMIGRATE: \\\"+t),s.migrateTrace&&r.trace&&r.trace()))}function r(e,t,r,n,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return u(n,o),r},set:function(e){u(n,o),r=e}})}function a(e,t,r,n,o){var a=e[t];e[t]=function(){return o&&u(n,o),(s.migrateIsPatchEnabled(n)?r:a||s.noop).apply(this,arguments)}}function c(e,t,r,n,o){if(!o)throw new Error(\\\"No warning message provided\\\");return a(e,t,r,n,o),0}function i(e,t,r,n){return a(e,t,r,n),0}s.migrateDeduplicateWarnings=!0,s.migrateWarnings=[],void 0===s.migrateTrace&&(s.migrateTrace=!0),s.migrateReset=function(){o={},s.migrateWarnings.length=0},\\\"BackCompat\\\"===n.document.compatMode&&u(\\\"quirks\\\",\\\"jQuery is not compatible with Quirks Mode\\\");var d,l,p,f={},m=s.fn.init,y=s.find,h=/\\\\[(\\\\s*[-\\\\w]+\\\\s*)([~|^$*]?=)\\\\s*([-\\\\w#]*?#[-\\\\w#]*)\\\\s*\\\\]/,g=/\\\\[(\\\\s*[-\\\\w]+\\\\s*)([~|^$*]?=)\\\\s*([-\\\\w#]*?#[-\\\\w#]*)\\\\s*\\\\]/g,v=/^[\\\\s\\\\uFEFF\\\\xA0]+|([^\\\\s\\\\uFEFF\\\\xA0])[\\\\s\\\\uFEFF\\\\xA0]+$/g;for(d in i(s.fn,\\\"init\\\",function(e){var t=Array.prototype.slice.call(arguments);return s.migrateIsPatchEnabled(\\\"selector-empty-id\\\")&&\\\"string\\\"==typeof e&&\\\"#\\\"===e&&(u(\\\"selector-empty-id\\\",\\\"jQuery( '#' ) is not a valid selector\\\"),t[0]=[]),m.apply(this,t)},\\\"selector-empty-id\\\"),s.fn.init.prototype=s.fn,i(s,\\\"find\\\",function(t){var r=Array.prototype.slice.call(arguments);if(\\\"string\\\"==typeof t&&h.test(t))try{n.document.querySelector(t)}catch(e){t=t.replace(g,function(e,t,r,n){return\\\"[\\\"+t+r+'\\\"'+n+'\\\"]'});try{n.document.querySelector(t),u(\\\"selector-hash\\\",\\\"Attribute selector with '#' must be quoted: \\\"+r[0]),r[0]=t}catch(e){u(\\\"selector-hash\\\",\\\"Attribute selector with '#' was not fixed: \\\"+r[0])}}return y.apply(this,r)},\\\"selector-hash\\\"),y)Object.prototype.hasOwnProperty.call(y,d)&&(s.find[d]=y[d]);c(s.fn,\\\"size\\\",function(){return this.length},\\\"size\\\",\\\"jQuery.fn.size() is deprecated and removed; use the .length property\\\"),c(s,\\\"parseJSON\\\",function(){return JSON.parse.apply(null,arguments)},\\\"parseJSON\\\",\\\"jQuery.parseJSON is deprecated; use JSON.parse\\\"),c(s,\\\"holdReady\\\",s.holdReady,\\\"holdReady\\\",\\\"jQuery.holdReady is deprecated\\\"),c(s,\\\"unique\\\",s.uniqueSort,\\\"unique\\\",\\\"jQuery.unique is deprecated; use jQuery.uniqueSort\\\"),r(s.expr,\\\"filters\\\",s.expr.pseudos,\\\"expr-pre-pseudos\\\",\\\"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos\\\"),r(s.expr,\\\":\\\",s.expr.pseudos,\\\"expr-pre-pseudos\\\",\\\"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos\\\"),e(\\\"3.1.1\\\")&&c(s,\\\"trim\\\",function(e){return null==e?\\\"\\\":(e+\\\"\\\").replace(v,\\\"$1\\\")},\\\"trim\\\",\\\"jQuery.trim is deprecated; use String.prototype.trim\\\"),e(\\\"3.2.0\\\")&&(c(s,\\\"nodeName\\\",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},\\\"nodeName\\\",\\\"jQuery.nodeName is deprecated\\\"),c(s,\\\"isArray\\\",Array.isArray,\\\"isArray\\\",\\\"jQuery.isArray is deprecated; use Array.isArray\\\")),e(\\\"3.3.0\\\")&&(c(s,\\\"isNumeric\\\",function(e){var t=typeof e;return(\\\"number\\\"==t||\\\"string\\\"==t)&&!isNaN(e-parseFloat(e))},\\\"isNumeric\\\",\\\"jQuery.isNumeric() is deprecated\\\"),s.each(\\\"Boolean Number String Function Array Date RegExp Object Error Symbol\\\".split(\\\" \\\"),function(e,t){f[\\\"[object \\\"+t+\\\"]\\\"]=t.toLowerCase()}),c(s,\\\"type\\\",function(e){return null==e?e+\\\"\\\":\\\"object\\\"==typeof e||\\\"function\\\"==typeof e?f[Object.prototype.toString.call(e)]||\\\"object\\\":typeof e},\\\"type\\\",\\\"jQuery.type is deprecated\\\"),c(s,\\\"isFunction\\\",function(e){return\\\"function\\\"==typeof e},\\\"isFunction\\\",\\\"jQuery.isFunction() is deprecated\\\"),c(s,\\\"isWindow\\\",function(e){return null!=e&&e===e.window},\\\"isWindow\\\",\\\"jQuery.isWindow() is deprecated\\\")),s.ajax&&(l=s.ajax,p=/(=)\\\\?(?=&|$)|\\\\?\\\\?/,i(s,\\\"ajax\\\",function(){var e=l.apply(this,arguments);return e.promise&&(c(e,\\\"success\\\",e.done,\\\"jqXHR-methods\\\",\\\"jQXHR.success is deprecated and removed\\\"),c(e,\\\"error\\\",e.fail,\\\"jqXHR-methods\\\",\\\"jQXHR.error is deprecated and removed\\\"),c(e,\\\"complete\\\",e.always,\\\"jqXHR-methods\\\",\\\"jQXHR.complete is deprecated and removed\\\")),e},\\\"jqXHR-methods\\\"),e(\\\"4.0.0\\\")||s.ajaxPrefilter(\\\"+json\\\",function(e){!1!==e.jsonp&&(p.test(e.url)||\\\"string\\\"==typeof e.data&&0===(e.contentType||\\\"\\\").indexOf(\\\"application/x-www-form-urlencoded\\\")&&p.test(e.data))&&u(\\\"jsonp-promotion\\\",\\\"JSON-to-JSONP auto-promotion is deprecated\\\")}));var j=s.fn.removeAttr,b=s.fn.toggleClass,w=/\\\\S+/g;function x(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}i(s.fn,\\\"removeAttr\\\",function(e){var r=this,n=!1;return s.each(e.match(w),function(e,t){s.expr.match.bool.test(t)&&r.each(function(){if(!1!==s(this).prop(t))return!(n=!0)}),n&&(u(\\\"removeAttr-bool\\\",\\\"jQuery.fn.removeAttr no longer sets boolean properties: \\\"+t),r.prop(t,!1))}),j.apply(this,arguments)},\\\"removeAttr-bool\\\"),i(s.fn,\\\"toggleClass\\\",function(t){return void 0!==t&&\\\"boolean\\\"!=typeof t?b.apply(this,arguments):(u(\\\"toggleClass-bool\\\",\\\"jQuery.fn.toggleClass( boolean ) is deprecated\\\"),this.each(function(){var e=this.getAttribute&&this.getAttribute(\\\"class\\\")||\\\"\\\";e&&s.data(this,\\\"__className__\\\",e),this.setAttribute&&this.setAttribute(\\\"class\\\",!e&&!1!==t&&s.data(this,\\\"__className__\\\")||\\\"\\\")}))},\\\"toggleClass-bool\\\");var Q,A,R=!1,C=/^[a-z]/,N=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;s.swap&&s.each([\\\"height\\\",\\\"width\\\",\\\"reliableMarginRight\\\"],function(e,t){var r=s.cssHooks[t]&&s.cssHooks[t].get;r&&(s.cssHooks[t].get=function(){var e;return R=!0,e=r.apply(this,arguments),R=!1,e})}),i(s,\\\"swap\\\",function(e,t,r,n){var o,a,i={};for(a in R||u(\\\"swap\\\",\\\"jQuery.swap() is undocumented and deprecated\\\"),t)i[a]=e.style[a],e.style[a]=t[a];for(a in o=r.apply(e,n||[]),t)e.style[a]=i[a];return o},\\\"swap\\\"),e(\\\"3.4.0\\\")&&\\\"undefined\\\"!=typeof Proxy&&(s.cssProps=new Proxy(s.cssProps||{},{set:function(){return u(\\\"cssProps\\\",\\\"jQuery.cssProps is deprecated\\\"),Reflect.set.apply(this,arguments)}})),e(\\\"4.0.0\\\")?(A={animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},\\\"undefined\\\"!=typeof Proxy?s.cssNumber=new Proxy(A,{get:function(){return u(\\\"css-number\\\",\\\"jQuery.cssNumber is deprecated\\\"),Reflect.get.apply(this,arguments)},set:function(){return u(\\\"css-number\\\",\\\"jQuery.cssNumber is deprecated\\\"),Reflect.set.apply(this,arguments)}}):s.cssNumber=A):A=s.cssNumber,Q=s.fn.css,i(s.fn,\\\"css\\\",function(e,t){var r,n,o=this;return e&&\\\"object\\\"==typeof e&&!Array.isArray(e)?(s.each(e,function(e,t){s.fn.css.call(o,e,t)}),this):(\\\"number\\\"==typeof t&&(r=x(e),n=r,C.test(n)&&N.test(n[0].toUpperCase()+n.slice(1))||A[r]||u(\\\"css-number\\\",'Number-typed values are deprecated for jQuery.fn.css( \\\"'+e+'\\\", value )')),Q.apply(this,arguments))},\\\"css-number\\\");var S,P,k,H,E=s.data;i(s,\\\"data\\\",function(e,t,r){var n,o,a;if(t&&\\\"object\\\"==typeof t&&2===arguments.length){for(a in n=s.hasData(e)&&E.call(this,e),o={},t)a!==x(a)?(u(\\\"data-camelCase\\\",\\\"jQuery.data() always sets/gets camelCased names: \\\"+a),n[a]=t[a]):o[a]=t[a];return E.call(this,e,o),t}return t&&\\\"string\\\"==typeof t&&t!==x(t)&&(n=s.hasData(e)&&E.call(this,e))&&t in n?(u(\\\"data-camelCase\\\",\\\"jQuery.data() always sets/gets camelCased names: \\\"+t),2<arguments.length&&(n[t]=r),n[t]):E.apply(this,arguments)},\\\"data-camelCase\\\"),s.fx&&(k=s.Tween.prototype.run,H=function(e){return e},i(s.Tween.prototype,\\\"run\\\",function(){1<s.easing[this.easing].length&&(u(\\\"easing-one-arg\\\",\\\"'jQuery.easing.\\\"+this.easing.toString()+\\\"' should use only one argument\\\"),s.easing[this.easing]=H),k.apply(this,arguments)},\\\"easing-one-arg\\\"),S=s.fx.interval,P=\\\"jQuery.fx.interval is deprecated\\\",n.requestAnimationFrame&&Object.defineProperty(s.fx,\\\"interval\\\",{configurable:!0,enumerable:!0,get:function(){return n.document.hidden||u(\\\"fx-interval\\\",P),s.migrateIsPatchEnabled(\\\"fx-interval\\\")&&void 0===S?13:S},set:function(e){u(\\\"fx-interval\\\",P),S=e}}));var M=s.fn.load,q=s.event.add,O=s.event.fix;s.event.props=[],s.event.fixHooks={},r(s.event.props,\\\"concat\\\",s.event.props.concat,\\\"event-old-patch\\\",\\\"jQuery.event.props.concat() is deprecated and removed\\\"),i(s.event,\\\"fix\\\",function(e){var t,r=e.type,n=this.fixHooks[r],o=s.event.props;if(o.length){u(\\\"event-old-patch\\\",\\\"jQuery.event.props are deprecated and removed: \\\"+o.join());while(o.length)s.event.addProp(o.pop())}if(n&&!n._migrated_&&(n._migrated_=!0,u(\\\"event-old-patch\\\",\\\"jQuery.event.fixHooks are deprecated and removed: \\\"+r),(o=n.props)&&o.length))while(o.length)s.event.addProp(o.pop());return t=O.call(this,e),n&&n.filter?n.filter(t,e):t},\\\"event-old-patch\\\"),i(s.event,\\\"add\\\",function(e,t){return e===n&&\\\"load\\\"===t&&\\\"complete\\\"===n.document.readyState&&u(\\\"load-after-event\\\",\\\"jQuery(window).on('load'...) called after load event occurred\\\"),q.apply(this,arguments)},\\\"load-after-event\\\"),s.each([\\\"load\\\",\\\"unload\\\",\\\"error\\\"],function(e,t){i(s.fn,t,function(){var e=Array.prototype.slice.call(arguments,0);return\\\"load\\\"===t&&\\\"string\\\"==typeof e[0]?M.apply(this,e):(u(\\\"shorthand-removed-v3\\\",\\\"jQuery.fn.\\\"+t+\\\"() is deprecated\\\"),e.splice(0,0,t),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))},\\\"shorthand-removed-v3\\\")}),s.each(\\\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\\\".split(\\\" \\\"),function(e,r){c(s.fn,r,function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)},\\\"shorthand-deprecated-v3\\\",\\\"jQuery.fn.\\\"+r+\\\"() event shorthand is deprecated\\\")}),s(function(){s(n.document).triggerHandler(\\\"ready\\\")}),s.event.special.ready={setup:function(){this===n.document&&u(\\\"ready-event\\\",\\\"'ready' event is deprecated\\\")}},c(s.fn,\\\"bind\\\",function(e,t,r){return this.on(e,null,t,r)},\\\"pre-on-methods\\\",\\\"jQuery.fn.bind() is deprecated\\\"),c(s.fn,\\\"unbind\\\",function(e,t){return this.off(e,null,t)},\\\"pre-on-methods\\\",\\\"jQuery.fn.unbind() is deprecated\\\"),c(s.fn,\\\"delegate\\\",function(e,t,r,n){return this.on(t,e,r,n)},\\\"pre-on-methods\\\",\\\"jQuery.fn.delegate() is deprecated\\\"),c(s.fn,\\\"undelegate\\\",function(e,t,r){return 1===arguments.length?this.off(e,\\\"**\\\"):this.off(t,e||\\\"**\\\",r)},\\\"pre-on-methods\\\",\\\"jQuery.fn.undelegate() is deprecated\\\"),c(s.fn,\\\"hover\\\",function(e,t){return this.on(\\\"mouseenter\\\",e).on(\\\"mouseleave\\\",t||e)},\\\"pre-on-methods\\\",\\\"jQuery.fn.hover() is deprecated\\\");function T(e){var t=n.document.implementation.createHTMLDocument(\\\"\\\");return t.body.innerHTML=e,t.body&&t.body.innerHTML}var F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\\\/\\\\0>\\\\x20\\\\t\\\\r\\\\n\\\\f]*)[^>]*)\\\\/>/gi;s.UNSAFE_restoreLegacyHtmlPrefilter=function(){s.migrateEnablePatches(\\\"self-closed-tags\\\")},i(s,\\\"htmlPrefilter\\\",function(e){var t,r;return(r=(t=e).replace(F,\\\"<$1></$2>\\\"))!==t&&T(t)!==T(r)&&u(\\\"self-closed-tags\\\",\\\"HTML tags must be properly nested and closed: \\\"+t),e.replace(F,\\\"<$1></$2>\\\")},\\\"self-closed-tags\\\"),s.migrateDisablePatches(\\\"self-closed-tags\\\");var D,W,_,I=s.fn.offset;return i(s.fn,\\\"offset\\\",function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?I.apply(this,arguments):(u(\\\"offset-valid-elem\\\",\\\"jQuery.fn.offset() requires a valid DOM element\\\"),arguments.length?this:void 0)},\\\"offset-valid-elem\\\"),s.ajax&&(D=s.param,i(s,\\\"param\\\",function(e,t){var r=s.ajaxSettings&&s.ajaxSettings.traditional;return void 0===t&&r&&(u(\\\"param-ajax-traditional\\\",\\\"jQuery.param() no longer uses jQuery.ajaxSettings.traditional\\\"),t=r),D.call(this,e,t)},\\\"param-ajax-traditional\\\")),c(s.fn,\\\"andSelf\\\",s.fn.addBack,\\\"andSelf\\\",\\\"jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()\\\"),s.Deferred&&(W=s.Deferred,_=[[\\\"resolve\\\",\\\"done\\\",s.Callbacks(\\\"once memory\\\"),s.Callbacks(\\\"once memory\\\"),\\\"resolved\\\"],[\\\"reject\\\",\\\"fail\\\",s.Callbacks(\\\"once memory\\\"),s.Callbacks(\\\"once memory\\\"),\\\"rejected\\\"],[\\\"notify\\\",\\\"progress\\\",s.Callbacks(\\\"memory\\\"),s.Callbacks(\\\"memory\\\")]],i(s,\\\"Deferred\\\",function(e){var a=W(),i=a.promise();function t(){var o=arguments;return s.Deferred(function(n){s.each(_,function(e,t){var r=\\\"function\\\"==typeof o[e]&&o[e];a[t[1]](function(){var e=r&&r.apply(this,arguments);e&&\\\"function\\\"==typeof e.promise?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+\\\"With\\\"](this===i?n.promise():this,r?[e]:arguments)})}),o=null}).promise()}return c(a,\\\"pipe\\\",t,\\\"deferred-pipe\\\",\\\"deferred.pipe() is deprecated\\\"),c(i,\\\"pipe\\\",t,\\\"deferred-pipe\\\",\\\"deferred.pipe() is deprecated\\\"),e&&e.call(a,a),a},\\\"deferred-pipe\\\"),s.Deferred.exceptionHook=W.exceptionHook),s});\\n//# sourceMappingURL=jquery-migrate.min.map\"","module.exports = \"// This [jQuery](https://jquery.com/) plugin implements an `<iframe>`\\n// [transport](https://api.jquery.com/jQuery.ajax/#extending-ajax) so that\\n// `$.ajax()` calls support the uploading of files using standard HTML file\\n// input fields. This is done by switching the exchange from `XMLHttpRequest`\\n// to a hidden `iframe` element containing a form that is submitted.\\n\\n// The [source for the plugin](https://github.com/cmlenz/jquery-iframe-transport)\\n// is available on [Github](https://github.com/) and licensed under the [MIT\\n// license](https://github.com/cmlenz/jquery-iframe-transport/blob/master/LICENSE).\\n\\n// ## Usage\\n\\n// To use this plugin, you simply add an `iframe` option with the value `true`\\n// to the Ajax settings an `$.ajax()` call, and specify the file fields to\\n// include in the submssion using the `files` option, which can be a selector,\\n// jQuery object, or a list of DOM elements containing one or more\\n// `<input type=\\\"file\\\">` elements:\\n\\n//     $(\\\"#myform\\\").submit(function() {\\n//         $.ajax(this.action, {\\n//             files: $(\\\":file\\\", this),\\n//             iframe: true\\n//         }).complete(function(data) {\\n//             console.log(data);\\n//         });\\n//     });\\n\\n// The plugin will construct hidden `<iframe>` and `<form>` elements, add the\\n// file field(s) to that form, submit the form, and process the response.\\n\\n// If you want to include other form fields in the form submission, include\\n// them in the `data` option, and set the `processData` option to `false`:\\n\\n//     $(\\\"#myform\\\").submit(function() {\\n//         $.ajax(this.action, {\\n//             data: $(\\\":text\\\", this).serializeArray(),\\n//             files: $(\\\":file\\\", this),\\n//             iframe: true,\\n//             processData: false\\n//         }).complete(function(data) {\\n//             console.log(data);\\n//         });\\n//     });\\n\\n// ### Response Data Types\\n\\n// As the transport does not have access to the HTTP headers of the server\\n// response, it is not as simple to make use of the automatic content type\\n// detection provided by jQuery as with regular XHR. If you can't set the\\n// expected response data type (for example because it may vary depending on\\n// the outcome of processing by the server), you will need to employ a\\n// workaround on the server side: Send back an HTML document containing just a\\n// `<textarea>` element with a `data-type` attribute that specifies the MIME\\n// type, and put the actual payload in the textarea:\\n\\n//     <textarea data-type=\\\"application/json\\\">\\n//       {\\\"ok\\\": true, \\\"message\\\": \\\"Thanks so much\\\"}\\n//     </textarea>\\n\\n// The iframe transport plugin will detect this and pass the value of the\\n// `data-type` attribute on to jQuery as if it was the \\\"Content-Type\\\" response\\n// header, thereby enabling the same kind of conversions that jQuery applies\\n// to regular responses. For the example above you should get a Javascript\\n// object as the `data` parameter of the `complete` callback, with the\\n// properties `ok: true` and `message: \\\"Thanks so much\\\"`.\\n\\n// ### Handling Server Errors\\n\\n// Another problem with using an `iframe` for file uploads is that it is\\n// impossible for the javascript code to determine the HTTP status code of the\\n// servers response. Effectively, all of the calls you make will look like they\\n// are getting successful responses, and thus invoke the `done()` or\\n// `complete()` callbacks. You can only communicate problems using the content\\n// of the response payload. For example, consider using a JSON response such as\\n// the following to indicate a problem with an uploaded file:\\n\\n//     <textarea data-type=\\\"application/json\\\">\\n//       {\\\"ok\\\": false, \\\"message\\\": \\\"Please only upload reasonably sized files.\\\"}\\n//     </textarea>\\n\\n// ### Compatibility\\n\\n// This plugin has primarily been tested on Safari 5 (or later), Firefox 4 (or\\n// later), and Internet Explorer (all the way back to version 6). While I\\n// haven't found any issues with it so far, I'm fairly sure it still doesn't\\n// work around all the quirks in all different browsers. But the code is still\\n// pretty simple overall, so you should be able to fix it and contribute a\\n// patch :)\\n\\n// ## Annotated Source\\n\\n(function($, undefined) {\\n  \\\"use strict\\\";\\n\\n  // Register a prefilter that checks whether the `iframe` option is set, and\\n  // switches to the \\\"iframe\\\" data type if it is `true`.\\n  $.ajaxPrefilter(function(options, origOptions, jqXHR) {\\n    if (options.iframe) {\\n      options.originalURL = options.url;\\n      return \\\"iframe\\\";\\n    }\\n  });\\n\\n  // Register a transport for the \\\"iframe\\\" data type. It will only activate\\n  // when the \\\"files\\\" option has been set to a non-empty list of enabled file\\n  // inputs.\\n  $.ajaxTransport(\\\"iframe\\\", function(options, origOptions, jqXHR) {\\n    var form = null,\\n        iframe = null,\\n        name = \\\"iframe-\\\" + $.now(),\\n        files = $(options.files).filter(\\\":file:enabled\\\"),\\n        markers = null,\\n        accepts = null;\\n\\n    // This function gets called after a successful submission or an abortion\\n    // and should revert all changes made to the page to enable the\\n    // submission via this transport.\\n    function cleanUp() {\\n      files.each(function(i, file) {\\n        var $file = $(file);\\n        $file.data(\\\"clone\\\").replaceWith($file);\\n      });\\n      form.remove();\\n      iframe.one(\\\"load\\\", function() { iframe.remove(); });\\n      iframe.attr(\\\"src\\\", \\\"javascript:false;\\\");\\n    }\\n\\n    // Remove \\\"iframe\\\" from the data types list so that further processing is\\n    // based on the content type returned by the server, without attempting an\\n    // (unsupported) conversion from \\\"iframe\\\" to the actual type.\\n    options.dataTypes.shift();\\n\\n    // Use the data from the original AJAX options, as it doesn't seem to be \\n    // copied over since jQuery 1.7.\\n    // See https://github.com/cmlenz/jquery-iframe-transport/issues/6\\n    options.data = origOptions.data;\\n\\n    if (files.length) {\\n      form = $(\\\"<form enctype='multipart/form-data' method='post'></form>\\\").\\n        hide().attr({action: options.originalURL, target: name});\\n\\n      // If there is any additional data specified via the `data` option,\\n      // we add it as hidden fields to the form. This (currently) requires\\n      // the `processData` option to be set to false so that the data doesn't\\n      // get serialized to a string.\\n      if (typeof(options.data) === \\\"string\\\" && options.data.length > 0) {\\n        $.error(\\\"data must not be serialized\\\");\\n      }\\n      $.each(options.data || {}, function(name, value) {\\n        if ($.isPlainObject(value)) {\\n          name = value.name;\\n          value = value.value;\\n        }\\n        $(\\\"<input type='hidden' />\\\").attr({name:  name, value: value}).\\n          appendTo(form);\\n      });\\n\\n      // Add a hidden `X-Requested-With` field with the value `IFrame` to the\\n      // field, to help server-side code to determine that the upload happened\\n      // through this transport.\\n      $(\\\"<input type='hidden' value='IFrame' name='X-Requested-With' />\\\").\\n        appendTo(form);\\n\\n      // Borrowed straight from the JQuery source.\\n      // Provides a way of specifying the accepted data type similar to the\\n      // HTTP \\\"Accept\\\" header\\n      if (options.dataTypes[0] && options.accepts[options.dataTypes[0]]) {\\n        accepts = options.accepts[options.dataTypes[0]] +\\n                  (options.dataTypes[0] !== \\\"*\\\" ? \\\", */*; q=0.01\\\" : \\\"\\\");\\n      } else {\\n        accepts = options.accepts[\\\"*\\\"];\\n      }\\n      $(\\\"<input type='hidden' name='X-HTTP-Accept'>\\\").\\n        attr(\\\"value\\\", accepts).appendTo(form);\\n\\n      // Move the file fields into the hidden form, but first remember their\\n      // original locations in the document by replacing them with disabled\\n      // clones. This should also avoid introducing unwanted changes to the\\n      // page layout during submission.\\n      markers = files.after(function(idx) {\\n        var $this = $(this),\\n            $clone = $this.clone().prop(\\\"disabled\\\", true);\\n        $this.data(\\\"clone\\\", $clone);\\n        return $clone;\\n      }).next();\\n      files.appendTo(form);\\n\\n      return {\\n\\n        // The `send` function is called by jQuery when the request should be\\n        // sent.\\n        send: function(headers, completeCallback) {\\n          iframe = $(\\\"<iframe src='javascript:false;' name='\\\" + name +\\n            \\\"' id='\\\" + name + \\\"' style='display:none'></iframe>\\\");\\n\\n          // The first load event gets fired after the iframe has been injected\\n          // into the DOM, and is used to prepare the actual submission.\\n          iframe.one(\\\"load\\\", function() {\\n\\n            // The second load event gets fired when the response to the form\\n            // submission is received. The implementation detects whether the\\n            // actual payload is embedded in a `<textarea>` element, and\\n            // prepares the required conversions to be made in that case.\\n            iframe.one(\\\"load\\\", function() {\\n              var doc = this.contentWindow ? this.contentWindow.document :\\n                (this.contentDocument ? this.contentDocument : this.document),\\n                root = doc.documentElement ? doc.documentElement : doc.body,\\n                textarea = root.getElementsByTagName(\\\"textarea\\\")[0],\\n                type = textarea && textarea.getAttribute(\\\"data-type\\\") || null,\\n                status = textarea && textarea.getAttribute(\\\"data-status\\\") || 200,\\n                statusText = textarea && textarea.getAttribute(\\\"data-statusText\\\") || \\\"OK\\\",\\n                content = {\\n                  html: root.innerHTML,\\n                  text: type ?\\n                    textarea.value :\\n                    root ? (root.textContent || root.innerText) : null\\n                };\\n              cleanUp();\\n              completeCallback(status, statusText, content, type ?\\n                (\\\"Content-Type: \\\" + type) :\\n                null);\\n            });\\n\\n            // Now that the load handler has been set up, submit the form.\\n            form[0].submit();\\n          });\\n\\n          // After everything has been set up correctly, the form and iframe\\n          // get injected into the DOM so that the submission can be\\n          // initiated.\\n          $(\\\"body\\\").append(form, iframe);\\n        },\\n\\n        // The `abort` function is called by jQuery when the request should be\\n        // aborted.\\n        abort: function() {\\n          if (iframe !== null) {\\n            iframe.unbind(\\\"load\\\").attr(\\\"src\\\", \\\"javascript:false;\\\");\\n            cleanUp();\\n          }\\n        }\\n\\n      };\\n    }\\n  });\\n\\n})(jQuery);\\n\"","module.exports = \"/*! jQuery v3.6.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */\\n!function(e,t){\\\"use strict\\\";\\\"object\\\"==typeof module&&\\\"object\\\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\\\"jQuery requires a window with a document\\\");return t(e)}:t(e)}(\\\"undefined\\\"!=typeof window?window:this,function(C,e){\\\"use strict\\\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,y=n.hasOwnProperty,a=y.toString,l=a.call(Object),v={},m=function(e){return\\\"function\\\"==typeof e&&\\\"number\\\"!=typeof e.nodeType&&\\\"function\\\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\\\"script\\\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\\\"\\\":\\\"object\\\"==typeof e||\\\"function\\\"==typeof e?n[o.call(e)]||\\\"object\\\":typeof e}var f=\\\"3.6.1\\\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\\\"length\\\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\\\"array\\\"===n||0===t||\\\"number\\\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\\\"boolean\\\"==typeof a&&(l=a,a=arguments[s]||{},s++),\\\"object\\\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\\\"__proto__\\\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\\\"jQuery\\\"+(f+Math.random()).replace(/\\\\D/g,\\\"\\\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\\\"[object Object]\\\"!==o.call(e))&&(!(t=r(e))||\\\"function\\\"==typeof(n=y.call(t,\\\"constructor\\\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\\\"string\\\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:v}),\\\"function\\\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\\\"Boolean Number String Function Array Date RegExp Object Error Symbol\\\".split(\\\" \\\"),function(e,t){n[\\\"[object \\\"+t+\\\"]\\\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,y,s,c,v,S=\\\"sizzle\\\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\\\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\\\",M=\\\"[\\\\\\\\x20\\\\\\\\t\\\\\\\\r\\\\\\\\n\\\\\\\\f]\\\",I=\\\"(?:\\\\\\\\\\\\\\\\[\\\\\\\\da-fA-F]{1,6}\\\"+M+\\\"?|\\\\\\\\\\\\\\\\[^\\\\\\\\r\\\\\\\\n\\\\\\\\f]|[\\\\\\\\w-]|[^\\\\0-\\\\\\\\x7f])+\\\",W=\\\"\\\\\\\\[\\\"+M+\\\"*(\\\"+I+\\\")(?:\\\"+M+\\\"*([*^$|!~]?=)\\\"+M+\\\"*(?:'((?:\\\\\\\\\\\\\\\\.|[^\\\\\\\\\\\\\\\\'])*)'|\\\\\\\"((?:\\\\\\\\\\\\\\\\.|[^\\\\\\\\\\\\\\\\\\\\\\\"])*)\\\\\\\"|(\\\"+I+\\\"))|)\\\"+M+\\\"*\\\\\\\\]\\\",F=\\\":(\\\"+I+\\\")(?:\\\\\\\\((('((?:\\\\\\\\\\\\\\\\.|[^\\\\\\\\\\\\\\\\'])*)'|\\\\\\\"((?:\\\\\\\\\\\\\\\\.|[^\\\\\\\\\\\\\\\\\\\\\\\"])*)\\\\\\\")|((?:\\\\\\\\\\\\\\\\.|[^\\\\\\\\\\\\\\\\()[\\\\\\\\]]|\\\"+W+\\\")*)|.*)\\\\\\\\)|)\\\",$=new RegExp(M+\\\"+\\\",\\\"g\\\"),B=new RegExp(\\\"^\\\"+M+\\\"+|((?:^|[^\\\\\\\\\\\\\\\\])(?:\\\\\\\\\\\\\\\\.)*)\\\"+M+\\\"+$\\\",\\\"g\\\"),_=new RegExp(\\\"^\\\"+M+\\\"*,\\\"+M+\\\"*\\\"),z=new RegExp(\\\"^\\\"+M+\\\"*([>+~]|\\\"+M+\\\")\\\"+M+\\\"*\\\"),U=new RegExp(M+\\\"|>\\\"),X=new RegExp(F),V=new RegExp(\\\"^\\\"+I+\\\"$\\\"),G={ID:new RegExp(\\\"^#(\\\"+I+\\\")\\\"),CLASS:new RegExp(\\\"^\\\\\\\\.(\\\"+I+\\\")\\\"),TAG:new RegExp(\\\"^(\\\"+I+\\\"|[*])\\\"),ATTR:new RegExp(\\\"^\\\"+W),PSEUDO:new RegExp(\\\"^\\\"+F),CHILD:new RegExp(\\\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\\\\\(\\\"+M+\\\"*(even|odd|(([+-]|)(\\\\\\\\d*)n|)\\\"+M+\\\"*(?:([+-]|)\\\"+M+\\\"*(\\\\\\\\d+)|))\\\"+M+\\\"*\\\\\\\\)|)\\\",\\\"i\\\"),bool:new RegExp(\\\"^(?:\\\"+R+\\\")$\\\",\\\"i\\\"),needsContext:new RegExp(\\\"^\\\"+M+\\\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\\\\\(\\\"+M+\\\"*((?:-\\\\\\\\d)?\\\\\\\\d*)\\\"+M+\\\"*\\\\\\\\)|)(?=[^-]|$)\\\",\\\"i\\\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\\\d$/i,K=/^[^{]+\\\\{\\\\s*\\\\[native \\\\w/,Z=/^(?:#([\\\\w-]+)|(\\\\w+)|\\\\.([\\\\w-]+))$/,ee=/[+~]/,te=new RegExp(\\\"\\\\\\\\\\\\\\\\[\\\\\\\\da-fA-F]{1,6}\\\"+M+\\\"?|\\\\\\\\\\\\\\\\([^\\\\\\\\r\\\\\\\\n\\\\\\\\f])\\\",\\\"g\\\"),ne=function(e,t){var n=\\\"0x\\\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\\\0-\\\\x1f\\\\x7f]|^-?\\\\d)|^-$|[^\\\\0-\\\\x1f\\\\x7f-\\\\uFFFF\\\\w-]/g,ie=function(e,t){return t?\\\"\\\\0\\\"===e?\\\"\\\\ufffd\\\":e.slice(0,-1)+\\\"\\\\\\\\\\\"+e.charCodeAt(e.length-1).toString(16)+\\\" \\\":\\\"\\\\\\\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\\\"fieldset\\\"===e.nodeName.toLowerCase()},{dir:\\\"parentNode\\\",next:\\\"legend\\\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\\\"string\\\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&v(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\\\" \\\"]&&(!y||!y.test(t))&&(1!==p||\\\"object\\\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ve(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\\\"id\\\"))?s=s.replace(re,ie):e.setAttribute(\\\"id\\\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\\\"#\\\"+s:\\\":scope\\\")+\\\" \\\"+xe(l[o]);c=l.join(\\\",\\\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\\\"id\\\")}}}return g(t.replace(B,\\\"$1\\\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\\\" \\\")>b.cacheLength&&delete e[r.shift()],e[t+\\\" \\\"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\\\"fieldset\\\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\\\"|\\\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\\\"input\\\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\\\"input\\\"===t||\\\"button\\\"===t)&&e.type===n}}function ge(t){return function(e){return\\\"form\\\"in e?e.parentNode&&!1===e.disabled?\\\"label\\\"in e?\\\"label\\\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\\\"label\\\"in e&&e.disabled===t}}function ye(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ve(e){return e&&\\\"undefined\\\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\\\"HTML\\\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\\\"unload\\\",oe,!1):n.attachEvent&&n.attachEvent(\\\"onunload\\\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\\\"div\\\")),\\\"undefined\\\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\\\":scope fieldset div\\\").length}),d.attributes=ce(function(e){return e.className=\\\"i\\\",!e.getAttribute(\\\"className\\\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\\\"\\\")),!e.getElementsByTagName(\\\"*\\\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\\\"id\\\")===t}},b.find.ID=function(e,t){if(\\\"undefined\\\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\\\"undefined\\\"!=typeof e.getAttributeNode&&e.getAttributeNode(\\\"id\\\");return t&&t.value===n}},b.find.ID=function(e,t){if(\\\"undefined\\\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\\\"id\\\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\\\"id\\\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\\\"undefined\\\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\\\"*\\\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\\\"undefined\\\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],y=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\\\"<a id='\\\"+S+\\\"'></a><select id='\\\"+S+\\\"-\\\\r\\\\\\\\' msallowcapture=''><option selected=''></option></select>\\\",e.querySelectorAll(\\\"[msallowcapture^='']\\\").length&&y.push(\\\"[*^$]=\\\"+M+\\\"*(?:''|\\\\\\\"\\\\\\\")\\\"),e.querySelectorAll(\\\"[selected]\\\").length||y.push(\\\"\\\\\\\\[\\\"+M+\\\"*(?:value|\\\"+R+\\\")\\\"),e.querySelectorAll(\\\"[id~=\\\"+S+\\\"-]\\\").length||y.push(\\\"~=\\\"),(t=C.createElement(\\\"input\\\")).setAttribute(\\\"name\\\",\\\"\\\"),e.appendChild(t),e.querySelectorAll(\\\"[name='']\\\").length||y.push(\\\"\\\\\\\\[\\\"+M+\\\"*name\\\"+M+\\\"*=\\\"+M+\\\"*(?:''|\\\\\\\"\\\\\\\")\\\"),e.querySelectorAll(\\\":checked\\\").length||y.push(\\\":checked\\\"),e.querySelectorAll(\\\"a#\\\"+S+\\\"+*\\\").length||y.push(\\\".#.+[+~]\\\"),e.querySelectorAll(\\\"\\\\\\\\\\\\f\\\"),y.push(\\\"[\\\\\\\\r\\\\\\\\n\\\\\\\\f]\\\")}),ce(function(e){e.innerHTML=\\\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\\\";var t=C.createElement(\\\"input\\\");t.setAttribute(\\\"type\\\",\\\"hidden\\\"),e.appendChild(t).setAttribute(\\\"name\\\",\\\"D\\\"),e.querySelectorAll(\\\"[name=d]\\\").length&&y.push(\\\"name\\\"+M+\\\"*[*^$|!~]?=\\\"),2!==e.querySelectorAll(\\\":enabled\\\").length&&y.push(\\\":enabled\\\",\\\":disabled\\\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\\\":disabled\\\").length&&y.push(\\\":enabled\\\",\\\":disabled\\\"),e.querySelectorAll(\\\"*,:x\\\"),y.push(\\\",.*:\\\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\\\"*\\\"),c.call(e,\\\"[s!='']:x\\\"),s.push(\\\"!=\\\",F)}),y=y.length&&new RegExp(y.join(\\\"|\\\")),s=s.length&&new RegExp(s.join(\\\"|\\\")),t=K.test(a.compareDocumentPosition),v=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&v(p,e)?-1:t==C||t.ownerDocument==p&&v(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\\\" \\\"]&&(!s||!s.test(t))&&(!y||!y.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),v(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\\\"\\\").replace(re,ie)},se.error=function(e){throw new Error(\\\"Syntax error, unrecognized expression: \\\"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\\\"\\\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\\\"string\\\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\\\">\\\":{dir:\\\"parentNode\\\",first:!0},\\\" \\\":{dir:\\\"parentNode\\\"},\\\"+\\\":{dir:\\\"previousSibling\\\",first:!0},\\\"~\\\":{dir:\\\"previousSibling\\\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\\\"\\\").replace(te,ne),\\\"~=\\\"===e[2]&&(e[3]=\\\" \\\"+e[3]+\\\" \\\"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\\\"nth\\\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\\\"even\\\"===e[3]||\\\"odd\\\"===e[3])),e[5]=+(e[7]+e[8]||\\\"odd\\\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\\\"\\\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\\\")\\\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\\\"*\\\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\\\" \\\"];return t||(t=new RegExp(\\\"(^|\\\"+M+\\\")\\\"+e+\\\"(\\\"+M+\\\"|$)\\\"))&&m(e,function(e){return t.test(\\\"string\\\"==typeof e.className&&e.className||\\\"undefined\\\"!=typeof e.getAttribute&&e.getAttribute(\\\"class\\\")||\\\"\\\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\\\"!=\\\"===r:!r||(t+=\\\"\\\",\\\"=\\\"===r?t===i:\\\"!=\\\"===r?t!==i:\\\"^=\\\"===r?i&&0===t.indexOf(i):\\\"*=\\\"===r?i&&-1<t.indexOf(i):\\\"$=\\\"===r?i&&t.slice(-i.length)===i:\\\"~=\\\"===r?-1<(\\\" \\\"+t.replace($,\\\" \\\")+\\\" \\\").indexOf(i):\\\"|=\\\"===r&&(t===i||t.slice(0,i.length+1)===i+\\\"-\\\"))}},CHILD:function(h,e,t,g,y){var v=\\\"nth\\\"!==h.slice(0,3),m=\\\"last\\\"!==h.slice(-4),x=\\\"of-type\\\"===e;return 1===g&&0===y?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=v!==m?\\\"nextSibling\\\":\\\"previousSibling\\\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(v){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\\\"only\\\"===h&&!u&&\\\"nextSibling\\\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=y)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\\\"unsupported pseudo: \\\"+e);return a[S]?a(o):1<a.length?(t=[e,e,\\\"\\\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,\\\"$1\\\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\\\"\\\")||se.error(\\\"unsupported lang: \\\"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\\\"xml:lang\\\")||e.getAttribute(\\\"lang\\\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\\\"-\\\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\\\"input\\\"===t&&!!e.checked||\\\"option\\\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\\\"input\\\"===t&&\\\"button\\\"===e.type||\\\"button\\\"===t},text:function(e){var t;return\\\"input\\\"===e.nodeName.toLowerCase()&&\\\"text\\\"===e.type&&(null==(t=e.getAttribute(\\\"type\\\"))||\\\"text\\\"===t.toLowerCase())},first:ye(function(){return[0]}),last:ye(function(e,t){return[t-1]}),eq:ye(function(e,t,n){return[n<0?n+t:n]}),even:ye(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ye(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ye(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ye(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\\\"\\\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\\\"parentNode\\\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,y,v,e){return y&&!y[S]&&(y=Ce(y)),v&&!v[S]&&(v=Ce(v,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\\\"*\\\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?v||(e?d:l||y)?[]:t:f;if(g&&g(f,p,n,r),y){i=Te(p,u),y(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(v||d){if(v){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);v(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=v?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),v?v(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\\\" \\\"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\\\" \\\"===e[s-2].type?\\\"*\\\":\\\"\\\"})).replace(B,\\\"$1\\\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\\\" \\\"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B,\\\" \\\")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,y,v,m,x,r,i=[],o=[],a=A[e+\\\" \\\"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(y=o,m=0<(v=i).length,x=0<y.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\\\"0\\\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\\\"*\\\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=y[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=v[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+v.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\\\"function\\\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\\\"ID\\\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ve(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},d.sortStable=S.split(\\\"\\\").sort(j).join(\\\"\\\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\\\"fieldset\\\"))}),ce(function(e){return e.innerHTML=\\\"<a href='#'></a>\\\",\\\"#\\\"===e.firstChild.getAttribute(\\\"href\\\")})||fe(\\\"type|href|height|width\\\",function(e,t,n){if(!n)return e.getAttribute(t,\\\"type\\\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\\\"<input/>\\\",e.firstChild.setAttribute(\\\"value\\\",\\\"\\\"),\\\"\\\"===e.firstChild.getAttribute(\\\"value\\\")})||fe(\\\"value\\\",function(e,t,n){if(!n&&\\\"input\\\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\\\"disabled\\\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\\\":\\\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\\\/\\\\0>:\\\\x20\\\\t\\\\r\\\\n\\\\f]*)[\\\\x20\\\\t\\\\r\\\\n\\\\f]*\\\\/?>(?:<\\\\/\\\\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\\\"string\\\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\\\":not(\\\"+e+\\\")\\\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\\\"string\\\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,\\\"string\\\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\\\\s*(<[\\\\w\\\\W]+>)[^>]*|#([\\\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,\\\"string\\\"==typeof e){if(!(r=\\\"<\\\"===e[0]&&\\\">\\\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\\\"string\\\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\\\"string\\\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\\\"parentNode\\\")},parentsUntil:function(e,t,n){return h(e,\\\"parentNode\\\",n)},next:function(e){return O(e,\\\"nextSibling\\\")},prev:function(e){return O(e,\\\"previousSibling\\\")},nextAll:function(e){return h(e,\\\"nextSibling\\\")},prevAll:function(e){return h(e,\\\"previousSibling\\\")},nextUntil:function(e,t,n){return h(e,\\\"nextSibling\\\",n)},prevUntil:function(e,t,n){return h(e,\\\"previousSibling\\\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\\\"template\\\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\\\"Until\\\"!==r.slice(-5)&&(t=e),t&&\\\"string\\\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\\\x20\\\\t\\\\r\\\\n\\\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\\\"string\\\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\\\"\\\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\\\"string\\\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\\\"\\\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\\\"\\\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\\\"notify\\\",\\\"progress\\\",S.Callbacks(\\\"memory\\\"),S.Callbacks(\\\"memory\\\"),2],[\\\"resolve\\\",\\\"done\\\",S.Callbacks(\\\"once memory\\\"),S.Callbacks(\\\"once memory\\\"),0,\\\"resolved\\\"],[\\\"reject\\\",\\\"fail\\\",S.Callbacks(\\\"once memory\\\"),S.Callbacks(\\\"once memory\\\"),1,\\\"rejected\\\"]],i=\\\"pending\\\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\\\"catch\\\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\\\"With\\\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\\\"Thenable self-resolution\\\");t=e&&(\\\"object\\\"==typeof e||\\\"function\\\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\\\"With\\\"](this===s?void 0:this,arguments),this},s[t[0]+\\\"With\\\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\\\"pending\\\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\\\"jQuery.Deferred exception: \\\"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function $(){E.removeEventListener(\\\"DOMContentLoaded\\\",$),C.removeEventListener(\\\"load\\\",$),S.ready()}S.fn.ready=function(e){return F.then(e)[\\\"catch\\\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\\\"complete\\\"===E.readyState||\\\"loading\\\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\\\"DOMContentLoaded\\\",$),C.addEventListener(\\\"load\\\",$));var B=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\\\"object\\\"===w(n))for(s in i=!0,n)B(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\\\"ms-\\\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\\\"string\\\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\\\"string\\\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\\\{[\\\\w\\\\W]*\\\\}|\\\\[[\\\\w\\\\W]*\\\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\\\"data-\\\"+t.replace(K,\\\"-$&\\\").toLowerCase(),\\\"string\\\"==typeof(n=e.getAttribute(r))){try{n=\\\"true\\\"===(i=n)||\\\"false\\\"!==i&&(\\\"null\\\"===i?null:i===+i+\\\"\\\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\\\"hasDataAttrs\\\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\\\"data-\\\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\\\"hasDataAttrs\\\",!0)}return i}return\\\"object\\\"==typeof n?this.each(function(){Q.set(this,n)}):B(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\\\"fx\\\")+\\\"queue\\\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\\\"fx\\\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\\\"inprogress\\\"===i&&(i=n.shift(),r--),i&&(\\\"fx\\\"===t&&n.unshift(\\\"inprogress\\\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\\\"queueHooks\\\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\\\"once memory\\\").add(function(){Y.remove(e,[t+\\\"queue\\\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\\\"string\\\"!=typeof t&&(n=t,t=\\\"fx\\\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\\\"fx\\\"===t&&\\\"inprogress\\\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\\\"fx\\\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\\\"string\\\"!=typeof e&&(t=e,e=void 0),e=e||\\\"fx\\\";while(a--)(n=Y.get(o[a],e+\\\"queueHooks\\\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\\\d*\\\\.|)\\\\d+(?:[eE][+-]?\\\\d+|)/.source,te=new RegExp(\\\"^(?:([+-])=|)(\\\"+ee+\\\")([a-z%]*)$\\\",\\\"i\\\"),ne=[\\\"Top\\\",\\\"Right\\\",\\\"Bottom\\\",\\\"Left\\\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\\\"none\\\"===(e=t||e).style.display||\\\"\\\"===e.style.display&&ie(e)&&\\\"none\\\"===S.css(e,\\\"display\\\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\\\"\\\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\\\"\\\":\\\"px\\\"),c=e.nodeType&&(S.cssNumber[t]||\\\"px\\\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\\\"none\\\"===n&&(l[c]=Y.get(r,\\\"display\\\")||null,l[c]||(r.style.display=\\\"\\\")),\\\"\\\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\\\"display\\\"),o.parentNode.removeChild(o),\\\"none\\\"===u&&(u=\\\"block\\\"),ue[s]=u)))):\\\"none\\\"!==n&&(l[c]=\\\"none\\\",Y.set(r,\\\"display\\\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\\\"boolean\\\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\\\/\\\\0>\\\\x20\\\\t\\\\r\\\\n\\\\f]*)/i,he=/^$|^module$|\\\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\\\"div\\\")),(fe=E.createElement(\\\"input\\\")).setAttribute(\\\"type\\\",\\\"radio\\\"),fe.setAttribute(\\\"checked\\\",\\\"checked\\\"),fe.setAttribute(\\\"name\\\",\\\"t\\\"),ce.appendChild(fe),v.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\\\"<textarea>x</textarea>\\\",v.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\\\"<option></option>\\\",v.option=!!ce.lastChild;var ge={thead:[1,\\\"<table>\\\",\\\"</table>\\\"],col:[2,\\\"<table><colgroup>\\\",\\\"</colgroup></table>\\\"],tr:[2,\\\"<table><tbody>\\\",\\\"</tbody></table>\\\"],td:[3,\\\"<table><tbody><tr>\\\",\\\"</tr></tbody></table>\\\"],_default:[0,\\\"\\\",\\\"\\\"]};function ye(e,t){var n;return n=\\\"undefined\\\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\\\"*\\\"):\\\"undefined\\\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\\\"*\\\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\\\"globalEval\\\",!t||Y.get(t[n],\\\"globalEval\\\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,v.option||(ge.optgroup=ge.option=[1,\\\"<select multiple='multiple'>\\\",\\\"</select>\\\"]);var me=/<|&#?\\\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\\\"object\\\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\\\"div\\\")),s=(de.exec(o)||[\\\"\\\",\\\"\\\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\\\"\\\"}else p.push(t.createTextNode(o));f.textContent=\\\"\\\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ye(f.appendChild(o),\\\"script\\\"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||\\\"\\\")&&n.push(o)}return f}var be=/^([^.]*)(?:\\\\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\\\"focus\\\"===t)}function Ee(e,t,n,r,i,o){var a,s;if(\\\"object\\\"==typeof t){for(s in\\\"string\\\"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\\\"string\\\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=y.events)||(u=y.events=Object.create(null)),(a=y.handle)||(a=y.handle=function(e){return\\\"undefined\\\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\\\"\\\").match(P)||[\\\"\\\"]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||\\\"\\\").split(\\\".\\\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\\\".\\\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=Y.hasData(e)&&Y.get(e);if(y&&(u=y.events)){l=(t=(t||\\\"\\\").match(P)||[\\\"\\\"]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||\\\"\\\").split(\\\".\\\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\\\"(^|\\\\\\\\.)\\\"+h.join(\\\"\\\\\\\\.(?:.*\\\\\\\\.|)\\\")+\\\"(\\\\\\\\.|$)\\\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\\\"**\\\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||S.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\\\"handle events\\\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\\\"events\\\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\\\"click\\\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\\\"click\\\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\\\" \\\"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\\\"input\\\")&&Se(t,\\\"click\\\",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\\\"input\\\")&&Se(t,\\\"click\\\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\\\"input\\\")&&Y.get(t,\\\"click\\\")||A(t,\\\"a\\\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\\\"char\\\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:\\\"focusin\\\",blur:\\\"focusout\\\"},function(t,e){S.event.special[t]={setup:function(){return Se(this,t,Ce),!1},trigger:function(){return Se(this,t),!0},_default:function(e){return Y.get(e.target,t)},delegateType:e}}),S.each({mouseenter:\\\"mouseover\\\",mouseleave:\\\"mouseout\\\",pointerenter:\\\"pointerover\\\",pointerleave:\\\"pointerout\\\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\\\".\\\"+r.namespace:r.origType,r.selector,r.handler),this;if(\\\"object\\\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\\\"function\\\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\\\\s*(?:[^=]|=\\\\s*.checked.)/i,Ne=/^\\\\s*<!\\\\[CDATA\\\\[|\\\\]\\\\]>\\\\s*$/g;function je(e,t){return A(e,\\\"table\\\")&&A(11!==t.nodeType?t:t.firstChild,\\\"tr\\\")&&S(e).children(\\\"tbody\\\")[0]||e}function De(e){return e.type=(null!==e.getAttribute(\\\"type\\\"))+\\\"/\\\"+e.type,e}function qe(e){return\\\"true/\\\"===(e.type||\\\"\\\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\\\"type\\\"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\\\"handle events\\\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\\\"string\\\"==typeof d&&!v.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ye(e,\\\"script\\\"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ye(u,\\\"script\\\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||\\\"\\\")&&!Y.access(u,\\\"globalEval\\\")&&S.contains(l,u)&&(u.src&&\\\"module\\\"!==(u.type||\\\"\\\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\\\"nonce\\\")},l):b(u.textContent.replace(Ne,\\\"\\\"),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ye(r)),r.parentNode&&(n&&ie(r)&&ve(ye(r,\\\"script\\\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ye(c),r=0,i=(o=ye(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\\\"input\\\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\\\"input\\\"!==l&&\\\"textarea\\\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ye(e),a=a||ye(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ye(c,\\\"script\\\")).length&&ve(a,!f&&ye(e,\\\"script\\\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return B(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ye(e,!1)),e.textContent=\\\"\\\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\\\"string\\\"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||[\\\"\\\",\\\"\\\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ye(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\\\"append\\\",prependTo:\\\"prepend\\\",insertBefore:\\\"before\\\",insertAfter:\\\"after\\\",replaceAll:\\\"replaceWith\\\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp(\\\"^(\\\"+ee+\\\")(?!px)[a-z%]+$\\\",\\\"i\\\"),Re=/^--/,Me=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Ie=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},We=new RegExp(ne.join(\\\"|\\\"),\\\"i\\\"),Fe=\\\"[\\\\\\\\x20\\\\\\\\t\\\\\\\\r\\\\\\\\n\\\\\\\\f]\\\",$e=new RegExp(\\\"^\\\"+Fe+\\\"+|((?:^|[^\\\\\\\\\\\\\\\\])(?:\\\\\\\\\\\\\\\\.)*)\\\"+Fe+\\\"+$\\\",\\\"g\\\");function Be(e,t,n){var r,i,o,a,s=Re.test(t),u=e.style;return(n=n||Me(e))&&(a=n.getPropertyValue(t)||n[t],s&&(a=a.replace($e,\\\"$1\\\")),\\\"\\\"!==a||ie(e)||(a=S.style(e,t)),!v.pixelBoxStyles()&&Pe.test(a)&&We.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+\\\"\\\":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\\\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\\\",l.style.cssText=\\\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\\\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\\\"1%\\\"!==e.top,s=12===t(e.marginLeft),l.style.right=\\\"60%\\\",o=36===t(e.right),r=36===t(e.width),l.style.position=\\\"absolute\\\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\\\"div\\\"),l=E.createElement(\\\"div\\\");l.style&&(l.style.backgroundClip=\\\"content-box\\\",l.cloneNode(!0).style.backgroundClip=\\\"\\\",v.clearCloneStyle=\\\"content-box\\\"===l.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\\\"table\\\"),t=E.createElement(\\\"tr\\\"),n=E.createElement(\\\"div\\\"),e.style.cssText=\\\"position:absolute;left:-11111px;border-collapse:separate\\\",t.style.cssText=\\\"border:1px solid\\\",t.style.height=\\\"1px\\\",n.style.height=\\\"9px\\\",n.style.display=\\\"block\\\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var ze=[\\\"Webkit\\\",\\\"Moz\\\",\\\"ms\\\"],Ue=E.createElement(\\\"div\\\").style,Xe={};function Ve(e){var t=S.cssProps[e]||Xe[e];return t||(e in Ue?e:Xe[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=ze.length;while(n--)if((e=ze[n]+t)in Ue)return e}(e)||e)}var Ge=/^(none|table(?!-c[ea]).+)/,Ye={position:\\\"absolute\\\",visibility:\\\"hidden\\\",display:\\\"block\\\"},Qe={letterSpacing:\\\"0\\\",fontWeight:\\\"400\\\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\\\"px\\\"):t}function Ke(e,t,n,r,i,o){var a=\\\"width\\\"===t?1:0,s=0,u=0;if(n===(r?\\\"border\\\":\\\"content\\\"))return 0;for(;a<4;a+=2)\\\"margin\\\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\\\"content\\\"===n&&(u-=S.css(e,\\\"padding\\\"+ne[a],!0,i)),\\\"margin\\\"!==n&&(u-=S.css(e,\\\"border\\\"+ne[a]+\\\"Width\\\",!0,i))):(u+=S.css(e,\\\"padding\\\"+ne[a],!0,i),\\\"padding\\\"!==n?u+=S.css(e,\\\"border\\\"+ne[a]+\\\"Width\\\",!0,i):s+=S.css(e,\\\"border\\\"+ne[a]+\\\"Width\\\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\\\"offset\\\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Me(e),i=(!v.boxSizingReliable()||n)&&\\\"border-box\\\"===S.css(e,\\\"boxSizing\\\",!1,r),o=i,a=Be(e,t,r),s=\\\"offset\\\"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a=\\\"auto\\\"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&A(e,\\\"tr\\\")||\\\"auto\\\"===a||!parseFloat(a)&&\\\"inline\\\"===S.css(e,\\\"display\\\",!1,r))&&e.getClientRects().length&&(i=\\\"border-box\\\"===S.css(e,\\\"boxSizing\\\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\\\"border\\\":\\\"content\\\"),o,r,a)+\\\"px\\\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\\\"opacity\\\");return\\\"\\\"===n?\\\"1\\\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Re.test(t),l=e.style;if(u||(t=Ve(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\\\"get\\\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\\\"string\\\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\\\"number\\\"),null!=n&&n==n&&(\\\"number\\\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\\\"\\\":\\\"px\\\")),v.clearCloneStyle||\\\"\\\"!==n||0!==t.indexOf(\\\"background\\\")||(l[t]=\\\"inherit\\\"),a&&\\\"set\\\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Re.test(t)||(t=Ve(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\\\"get\\\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\\\"normal\\\"===i&&t in Qe&&(i=Qe[t]),\\\"\\\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\\\"height\\\",\\\"width\\\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ge.test(S.css(e,\\\"display\\\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):Ie(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Me(e),o=!v.scrollboxSize()&&\\\"absolute\\\"===i.position,a=(o||n)&&\\\"border-box\\\"===S.css(e,\\\"boxSizing\\\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\\\"offset\\\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\\\"border\\\",!1,i)-.5)),s&&(r=te.exec(t))&&\\\"px\\\"!==(r[3]||\\\"px\\\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=_e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\\\"marginLeft\\\"))||e.getBoundingClientRect().left-Ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\\\"px\\\"}),S.each({margin:\\\"\\\",padding:\\\"\\\",border:\\\"Width\\\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\\\"string\\\"==typeof e?e.split(\\\" \\\"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\\\"margin\\\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return B(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Me(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\\\"\\\":\\\"px\\\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\\\"\\\"))&&\\\"auto\\\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Ve(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\\\"swing\\\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\\\"margin\\\"+(n=ne[r])]=i[\\\"padding\\\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\\\"*\\\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\\\"expand\\\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\\\"*\\\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\\\"*\\\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\\\"width\\\"in t||\\\"height\\\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=Y.get(e,\\\"fxshow\\\");for(r in n.queue||(null==(a=S._queueHooks(e,\\\"fx\\\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\\\"fx\\\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\\\"toggle\\\"===i,i===(g?\\\"hide\\\":\\\"show\\\")){if(\\\"show\\\"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=Y.get(e,\\\"display\\\")),\\\"none\\\"===(c=S.css(e,\\\"display\\\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\\\"display\\\"),le([e]))),(\\\"inline\\\"===c||\\\"inline-block\\\"===c&&null!=l)&&\\\"none\\\"===S.css(e,\\\"float\\\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\\\"none\\\"===c?\\\"\\\":c)),h.display=\\\"inline-block\\\")),n.overflow&&(h.overflow=\\\"hidden\\\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(y?\\\"hidden\\\"in y&&(g=y.hidden):y=Y.access(e,\\\"fxshow\\\",{display:l}),o&&(y.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\\\"fxshow\\\"),d)S.style(e,r,d[r])})),u=ct(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\\\"object\\\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\\\"number\\\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\\\"fx\\\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\\\"opacity\\\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\\\"finish\\\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\\\"string\\\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\\\"fx\\\",[]),this.each(function(){var e=!0,t=null!=i&&i+\\\"queueHooks\\\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\\\"fx\\\"),this.each(function(){var e,t=Y.get(this),n=t[a+\\\"queue\\\"],r=t[a+\\\"queueHooks\\\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\\\"toggle\\\",\\\"show\\\",\\\"hide\\\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\\\"boolean\\\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\\\"show\\\"),slideUp:lt(\\\"hide\\\"),slideToggle:lt(\\\"toggle\\\"),fadeIn:{opacity:\\\"show\\\"},fadeOut:{opacity:\\\"hide\\\"},fadeToggle:{opacity:\\\"toggle\\\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\\\"fx\\\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\\\"input\\\"),it=E.createElement(\\\"select\\\").appendChild(E.createElement(\\\"option\\\")),rt.type=\\\"checkbox\\\",v.checkOn=\\\"\\\"!==rt.value,v.optSelected=it.selected,(rt=E.createElement(\\\"input\\\")).value=\\\"t\\\",rt.type=\\\"radio\\\",v.radioValue=\\\"t\\\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return B(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\\\"undefined\\\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\\\"set\\\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\\\"\\\"),n):i&&\\\"get\\\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&\\\"radio\\\"===t&&A(e,\\\"input\\\")){var n=e.value;return e.setAttribute(\\\"type\\\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\\\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function yt(e){return(e.match(P)||[]).join(\\\" \\\")}function vt(e){return e.getAttribute&&e.getAttribute(\\\"class\\\")||\\\"\\\"}function mt(e){return Array.isArray(e)?e:\\\"string\\\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return B(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\\\"set\\\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\\\"get\\\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\\\"tabindex\\\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\\\"for\\\":\\\"htmlFor\\\",\\\"class\\\":\\\"className\\\"}}),v.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\\\"tabIndex\\\",\\\"readOnly\\\",\\\"maxLength\\\",\\\"cellSpacing\\\",\\\"cellPadding\\\",\\\"rowSpan\\\",\\\"colSpan\\\",\\\"useMap\\\",\\\"frameBorder\\\",\\\"contentEditable\\\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a;return m(t)?this.each(function(e){S(this).addClass(t.call(this,e,vt(this)))}):(e=mt(t)).length?this.each(function(){if(r=vt(this),n=1===this.nodeType&&\\\" \\\"+yt(r)+\\\" \\\"){for(o=0;o<e.length;o++)i=e[o],n.indexOf(\\\" \\\"+i+\\\" \\\")<0&&(n+=i+\\\" \\\");a=yt(n),r!==a&&this.setAttribute(\\\"class\\\",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return m(t)?this.each(function(e){S(this).removeClass(t.call(this,e,vt(this)))}):arguments.length?(e=mt(t)).length?this.each(function(){if(r=vt(this),n=1===this.nodeType&&\\\" \\\"+yt(r)+\\\" \\\"){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(\\\" \\\"+i+\\\" \\\"))n=n.replace(\\\" \\\"+i+\\\" \\\",\\\" \\\")}a=yt(n),r!==a&&this.setAttribute(\\\"class\\\",a)}}):this:this.attr(\\\"class\\\",\\\"\\\")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s=\\\"string\\\"===a||Array.isArray(t);return m(t)?this.each(function(e){S(this).toggleClass(t.call(this,e,vt(this),n),n)}):\\\"boolean\\\"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=mt(t),this.each(function(){if(s)for(o=S(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&\\\"boolean\\\"!==a||((r=vt(this))&&Y.set(this,\\\"__className__\\\",r),this.setAttribute&&this.setAttribute(\\\"class\\\",r||!1===t?\\\"\\\":Y.get(this,\\\"__className__\\\")||\\\"\\\"))}))},hasClass:function(e){var t,n,r=0;t=\\\" \\\"+e+\\\" \\\";while(n=this[r++])if(1===n.nodeType&&-1<(\\\" \\\"+yt(vt(n))+\\\" \\\").indexOf(t))return!0;return!1}});var xt=/\\\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\\\"\\\":\\\"number\\\"==typeof t?t+=\\\"\\\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\\\"\\\":e+\\\"\\\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\\\"set\\\"in r&&void 0!==r.set(this,t,\\\"value\\\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\\\"get\\\"in r&&void 0!==(e=r.get(t,\\\"value\\\"))?e:\\\"string\\\"==typeof(e=t.value)?e.replace(xt,\\\"\\\"):null==e?\\\"\\\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\\\"value\\\");return null!=t?t:yt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\\\"select-one\\\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\\\"optgroup\\\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\\\"radio\\\",\\\"checkbox\\\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\\\"value\\\")?\\\"on\\\":e.value})}),v.focusin=\\\"onfocusin\\\"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=y.call(e,\\\"type\\\")?e.type:e,h=y.call(e,\\\"namespace\\\")?e.namespace.split(\\\".\\\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\\\".\\\")&&(d=(h=d.split(\\\".\\\")).shift(),h.sort()),u=d.indexOf(\\\":\\\")<0&&\\\"on\\\"+d,(e=e[S.expando]?e:new S.Event(d,\\\"object\\\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\\\".\\\"),e.rnamespace=e.namespace?new RegExp(\\\"(^|\\\\\\\\.)\\\"+h.join(\\\"\\\\\\\\.(?:.*\\\\\\\\.|)\\\")+\\\"(\\\\\\\\.|$)\\\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\\\"events\\\")||Object.create(null))[e.type]&&Y.get(o,\\\"handle\\\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),v.focusin||S.each({focus:\\\"focusin\\\",blur:\\\"focusout\\\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\\\\?/;S.parseXML=function(e){var t,n;if(!e||\\\"string\\\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\\\"text/xml\\\")}catch(e){}return n=t&&t.getElementsByTagName(\\\"parsererror\\\")[0],t&&!n||S.error(\\\"Invalid XML: \\\"+(n?S.map(n.childNodes,function(e){return e.textContent}).join(\\\"\\\\n\\\"):e)),t};var St=/\\\\[\\\\]$/,kt=/\\\\r?\\\\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function jt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):jt(n+\\\"[\\\"+(\\\"object\\\"==typeof t&&null!=t?e:\\\"\\\")+\\\"]\\\",t,r,i)});else if(r||\\\"object\\\"!==w(e))i(n,e);else for(t in e)jt(n+\\\"[\\\"+t+\\\"]\\\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\\\"=\\\"+encodeURIComponent(null==n?\\\"\\\":n)};if(null==e)return\\\"\\\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join(\\\"&\\\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\\\"elements\\\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\\\":disabled\\\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\\\"\\\\r\\\\n\\\")}}):{name:t.name,value:n.replace(kt,\\\"\\\\r\\\\n\\\")}}).get()}});var Dt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \\\\t]*([^\\\\r\\\\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\\\\/\\\\//,Rt={},Mt={},It=\\\"*/\\\".concat(\\\"*\\\"),Wt=E.createElement(\\\"a\\\");function Ft(o){return function(e,t){\\\"string\\\"!=typeof e&&(t=e,e=\\\"*\\\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\\\"+\\\"===n[0]?(n=n.slice(1)||\\\"*\\\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function $t(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\\\"string\\\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\\\"*\\\"]&&l(\\\"*\\\")}function Bt(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\\\"GET\\\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\\\"application/x-www-form-urlencoded; charset=UTF-8\\\",accepts:{\\\"*\\\":It,text:\\\"text/plain\\\",html:\\\"text/html\\\",xml:\\\"application/xml, text/xml\\\",json:\\\"application/json, text/javascript\\\"},contents:{xml:/\\\\bxml\\\\b/,html:/\\\\bhtml/,json:/\\\\bjson\\\\b/},responseFields:{xml:\\\"responseXML\\\",text:\\\"responseText\\\",json:\\\"responseJSON\\\"},converters:{\\\"* text\\\":String,\\\"text html\\\":!0,\\\"text json\\\":JSON.parse,\\\"text xml\\\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,S.ajaxSettings),t):Bt(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\\\"object\\\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,y=S.ajaxSetup({},t),v=y.context||y,m=y.context&&(v.nodeType||v.jquery)?S(v):S.event,x=S.Deferred(),b=S.Callbacks(\\\"once memory\\\"),w=y.statusCode||{},a={},s={},u=\\\"canceled\\\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\\\" \\\"]=(n[t[1].toLowerCase()+\\\" \\\"]||[]).concat(t[2])}t=n[e.toLowerCase()+\\\" \\\"]}return null==t?null:t.join(\\\", \\\")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(y.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),y.url=((e||y.url||Tt.href)+\\\"\\\").replace(Pt,Tt.protocol+\\\"//\\\"),y.type=t.method||t.type||y.method||y.type,y.dataTypes=(y.dataType||\\\"*\\\").toLowerCase().match(P)||[\\\"\\\"],null==y.crossDomain){r=E.createElement(\\\"a\\\");try{r.href=y.url,r.href=r.href,y.crossDomain=Wt.protocol+\\\"//\\\"+Wt.host!=r.protocol+\\\"//\\\"+r.host}catch(e){y.crossDomain=!0}}if(y.data&&y.processData&&\\\"string\\\"!=typeof y.data&&(y.data=S.param(y.data,y.traditional)),$t(Rt,y,t,T),h)return T;for(i in(g=S.event&&y.global)&&0==S.active++&&S.event.trigger(\\\"ajaxStart\\\"),y.type=y.type.toUpperCase(),y.hasContent=!Ot.test(y.type),f=y.url.replace(qt,\\\"\\\"),y.hasContent?y.data&&y.processData&&0===(y.contentType||\\\"\\\").indexOf(\\\"application/x-www-form-urlencoded\\\")&&(y.data=y.data.replace(Dt,\\\"+\\\")):(o=y.url.slice(f.length),y.data&&(y.processData||\\\"string\\\"==typeof y.data)&&(f+=(Et.test(f)?\\\"&\\\":\\\"?\\\")+y.data,delete y.data),!1===y.cache&&(f=f.replace(Lt,\\\"$1\\\"),o=(Et.test(f)?\\\"&\\\":\\\"?\\\")+\\\"_=\\\"+Ct.guid+++o),y.url=f+o),y.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\\\"If-Modified-Since\\\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\\\"If-None-Match\\\",S.etag[f])),(y.data&&y.hasContent&&!1!==y.contentType||t.contentType)&&T.setRequestHeader(\\\"Content-Type\\\",y.contentType),T.setRequestHeader(\\\"Accept\\\",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+(\\\"*\\\"!==y.dataTypes[0]?\\\", \\\"+It+\\\"; q=0.01\\\":\\\"\\\"):y.accepts[\\\"*\\\"]),y.headers)T.setRequestHeader(i,y.headers[i]);if(y.beforeSend&&(!1===y.beforeSend.call(v,T,y)||h))return T.abort();if(u=\\\"abort\\\",b.add(y.complete),T.done(y.success),T.fail(y.error),c=$t(Mt,y,t,T)){if(T.readyState=1,g&&m.trigger(\\\"ajaxSend\\\",[T,y]),h)return T;y.async&&0<y.timeout&&(d=C.setTimeout(function(){T.abort(\\\"timeout\\\")},y.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\\\"No Transport\\\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\\\"\\\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\\\"*\\\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\\\"Content-Type\\\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\\\" \\\"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(y,T,n)),!i&&-1<S.inArray(\\\"script\\\",y.dataTypes)&&S.inArray(\\\"json\\\",y.dataTypes)<0&&(y.converters[\\\"text script\\\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\\\"*\\\"===o)o=u;else if(\\\"*\\\"!==u&&u!==o){if(!(a=l[u+\\\" \\\"+o]||l[\\\"* \\\"+o]))for(i in l)if((s=i.split(\\\" \\\"))[1]===o&&(a=l[u+\\\" \\\"+s[0]]||l[\\\"* \\\"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\\\"throws\\\"])t=a(t);else try{t=a(t)}catch(e){return{state:\\\"parsererror\\\",error:a?e:\\\"No conversion from \\\"+u+\\\" to \\\"+o}}}return{state:\\\"success\\\",data:t}}(y,s,T,i),i?(y.ifModified&&((u=T.getResponseHeader(\\\"Last-Modified\\\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\\\"etag\\\"))&&(S.etag[f]=u)),204===e||\\\"HEAD\\\"===y.type?l=\\\"nocontent\\\":304===e?l=\\\"notmodified\\\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\\\"error\\\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\\\"\\\",i?x.resolveWith(v,[o,l,T]):x.rejectWith(v,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\\\"ajaxSuccess\\\":\\\"ajaxError\\\",[T,y,i?o:a]),b.fireWith(v,[T,l]),g&&(m.trigger(\\\"ajaxComplete\\\",[T,y]),--S.active||S.event.trigger(\\\"ajaxStop\\\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\\\"json\\\")},getScript:function(e,t){return S.get(e,void 0,t,\\\"script\\\")}}),S.each([\\\"get\\\",\\\"post\\\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\\\"content-type\\\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\\\"\\\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\\\"GET\\\",dataType:\\\"script\\\",cache:!0,async:!1,global:!1,converters:{\\\"text script\\\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\\\"body\\\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();v.cors=!!zt&&\\\"withCredentials\\\"in zt,v.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(v.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\\\"X-Requested-With\\\"]||(e[\\\"X-Requested-With\\\"]=\\\"XMLHttpRequest\\\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\\\"abort\\\"===e?r.abort():\\\"error\\\"===e?\\\"number\\\"!=typeof r.status?t(0,\\\"error\\\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\\\"text\\\"!==(r.responseType||\\\"text\\\")||\\\"string\\\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\\\"error\\\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\\\"abort\\\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\\\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\\\"},contents:{script:/\\\\b(?:java|ecma)script\\\\b/},converters:{\\\"text script\\\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\\\"script\\\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\\\"GET\\\")}),S.ajaxTransport(\\\"script\\\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\\\"<script>\\\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\\\"load error\\\",i=function(e){r.remove(),i=null,e&&t(\\\"error\\\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\\\\?(?=&|$)|\\\\?\\\\?/;S.ajaxSetup({jsonp:\\\"callback\\\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\\\"_\\\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\\\"json jsonp\\\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\\\"url\\\":\\\"string\\\"==typeof e.data&&0===(e.contentType||\\\"\\\").indexOf(\\\"application/x-www-form-urlencoded\\\")&&Vt.test(e.data)&&\\\"data\\\");if(a||\\\"jsonp\\\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\\\"$1\\\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\\\"&\\\":\\\"?\\\")+e.jsonp+\\\"=\\\"+r),e.converters[\\\"script json\\\"]=function(){return o||S.error(r+\\\" was not called\\\"),o[0]},e.dataTypes[0]=\\\"json\\\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\\\"script\\\"}),v.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\\\"\\\").body).innerHTML=\\\"<form></form><form></form>\\\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\\\"string\\\"!=typeof e?[]:(\\\"boolean\\\"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\\\"\\\")).createElement(\\\"base\\\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\\\" \\\");return-1<s&&(r=yt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\\\"object\\\"==typeof t&&(i=\\\"POST\\\"),0<a.length&&S.ajax({url:e,type:i||\\\"GET\\\",dataType:\\\"html\\\",data:t}).done(function(e){o=arguments,a.html(r?S(\\\"<div>\\\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\\\"position\\\"),c=S(e),f={};\\\"static\\\"===l&&(e.style.position=\\\"relative\\\"),s=c.offset(),o=S.css(e,\\\"top\\\"),u=S.css(e,\\\"left\\\"),(\\\"absolute\\\"===l||\\\"fixed\\\"===l)&&-1<(o+u).indexOf(\\\"auto\\\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\\\"using\\\"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\\\"fixed\\\"===S.css(r,\\\"position\\\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\\\"static\\\"===S.css(e,\\\"position\\\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\\\"borderTopWidth\\\",!0),i.left+=S.css(e,\\\"borderLeftWidth\\\",!0))}return{top:t.top-i.top-S.css(r,\\\"marginTop\\\",!0),left:t.left-i.left-S.css(r,\\\"marginLeft\\\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\\\"static\\\"===S.css(e,\\\"position\\\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\\\"pageXOffset\\\",scrollTop:\\\"pageYOffset\\\"},function(t,i){var o=\\\"pageYOffset\\\"===i;S.fn[t]=function(e){return B(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\\\"top\\\",\\\"left\\\"],function(e,n){S.cssHooks[n]=_e(v.pixelPosition,function(e,t){if(t)return t=Be(e,n),Pe.test(t)?S(e).position()[n]+\\\"px\\\":t})}),S.each({Height:\\\"height\\\",Width:\\\"width\\\"},function(a,s){S.each({padding:\\\"inner\\\"+a,content:s,\\\"\\\":\\\"outer\\\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\\\"boolean\\\"!=typeof e),i=r||(!0===e||!0===t?\\\"margin\\\":\\\"border\\\");return B(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\\\"outer\\\")?e[\\\"inner\\\"+a]:e.document.documentElement[\\\"client\\\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\\\"scroll\\\"+a],r[\\\"scroll\\\"+a],e.body[\\\"offset\\\"+a],r[\\\"offset\\\"+a],r[\\\"client\\\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\\\"ajaxStart\\\",\\\"ajaxStop\\\",\\\"ajaxComplete\\\",\\\"ajaxError\\\",\\\"ajaxSuccess\\\",\\\"ajaxSend\\\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\\\"**\\\"):this.off(t,e||\\\"**\\\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\\\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\\\".split(\\\" \\\"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\\\\s\\\\uFEFF\\\\xA0]+|([^\\\\s\\\\uFEFF\\\\xA0])[\\\\s\\\\uFEFF\\\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\\\"string\\\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\\\"number\\\"===t||\\\"string\\\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\\\"\\\":(e+\\\"\\\").replace(Gt,\\\"$1\\\")},\\\"function\\\"==typeof define&&define.amd&&define(\\\"jquery\\\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\\\"undefined\\\"==typeof e&&(C.jQuery=C.$=S),S});\\n\"","module.exports = \"!function(e,t){\\\"object\\\"==typeof exports&&\\\"undefined\\\"!=typeof module?module.exports=t():\\\"function\\\"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){\\\"use strict\\\";var H;function f(){return H.apply(null,arguments)}function a(e){return e instanceof Array||\\\"[object Array]\\\"===Object.prototype.toString.call(e)}function F(e){return null!=e&&\\\"[object Object]\\\"===Object.prototype.toString.call(e)}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(c(e,t))return;return 1}function o(e){return void 0===e}function u(e){return\\\"number\\\"==typeof e||\\\"[object Number]\\\"===Object.prototype.toString.call(e)}function V(e){return e instanceof Date||\\\"[object Date]\\\"===Object.prototype.toString.call(e)}function G(e,t){for(var n=[],s=e.length,i=0;i<s;++i)n.push(t(e[i],i));return n}function E(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,\\\"toString\\\")&&(e.toString=t.toString),c(t,\\\"valueOf\\\")&&(e.valueOf=t.valueOf),e}function l(e,t,n,s){return Pt(e,t,n,s,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function A(e){if(null==e._isValid){var t=m(e),n=j.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function I(e){var t=l(NaN);return null!=e?E(m(t),e):m(t).userInvalidated=!0,t}var j=Array.prototype.some||function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1},Z=f.momentProperties=[],z=!1;function $(e,t){var n,s,i,r=Z.length;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=m(t)),o(t._locale)||(e._locale=t._locale),0<r)for(n=0;n<r;n++)o(i=t[s=Z[n]])||(e[s]=i);return e}function q(e){$(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===z&&(z=!0,f.updateOffset(this),z=!1)}function h(e){return e instanceof q||null!=e&&null!=e._isAMomentObject}function B(e){!1===f.suppressDeprecationWarnings&&\\\"undefined\\\"!=typeof console&&console.warn&&console.warn(\\\"Deprecation warning: \\\"+e)}function e(r,a){var o=!0;return E(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,r),o){for(var e,t,n=[],s=arguments.length,i=0;i<s;i++){if(e=\\\"\\\",\\\"object\\\"==typeof arguments[i]){for(t in e+=\\\"\\\\n[\\\"+i+\\\"] \\\",arguments[0])c(arguments[0],t)&&(e+=t+\\\": \\\"+arguments[0][t]+\\\", \\\");e=e.slice(0,-2)}else e=arguments[i];n.push(e)}B(r+\\\"\\\\nArguments: \\\"+Array.prototype.slice.call(n).join(\\\"\\\")+\\\"\\\\n\\\"+(new Error).stack),o=!1}return a.apply(this,arguments)},a)}var J={};function Q(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),J[e]||(B(t),J[e]=!0)}function d(e){return\\\"undefined\\\"!=typeof Function&&e instanceof Function||\\\"[object Function]\\\"===Object.prototype.toString.call(e)}function X(e,t){var n,s=E({},e);for(n in t)c(t,n)&&(F(e[n])&&F(t[n])?(s[n]={},E(s[n],e[n]),E(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)c(e,n)&&!c(t,n)&&F(e[n])&&(s[n]=E({},s[n]));return s}function K(e){null!=e&&this.set(e)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;var ee=Object.keys||function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};function r(e,t,n){var s=\\\"\\\"+Math.abs(e);return(0<=e?n?\\\"+\\\":\\\"\\\":\\\"-\\\")+Math.pow(10,Math.max(0,t-s.length)).toString().substr(1)+s}var te=/(\\\\[[^\\\\[]*\\\\])|(\\\\\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ne=/(\\\\[[^\\\\[]*\\\\])|(\\\\\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,se={},ie={};function s(e,t,n,s){var i=\\\"string\\\"==typeof s?function(){return this[s]()}:s;e&&(ie[e]=i),t&&(ie[t[0]]=function(){return r(i.apply(this,arguments),t[1],t[2])}),n&&(ie[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function re(e,t){return e.isValid()?(t=ae(t,e.localeData()),se[t]=se[t]||function(s){for(var e,i=s.match(te),t=0,r=i.length;t<r;t++)ie[i[t]]?i[t]=ie[i[t]]:i[t]=(e=i[t]).match(/\\\\[[\\\\s\\\\S]/)?e.replace(/^\\\\[|\\\\]$/g,\\\"\\\"):e.replace(/\\\\\\\\/g,\\\"\\\");return function(e){for(var t=\\\"\\\",n=0;n<r;n++)t+=d(i[n])?i[n].call(e,s):i[n];return t}}(t),se[t](e)):e.localeData().invalidDate()}function ae(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(ne.lastIndex=0;0<=n&&ne.test(e);)e=e.replace(ne,s),ne.lastIndex=0,--n;return e}var oe={};function t(e,t){var n=e.toLowerCase();oe[n]=oe[n+\\\"s\\\"]=oe[t]=e}function _(e){return\\\"string\\\"==typeof e?oe[e]||oe[e.toLowerCase()]:void 0}function ue(e){var t,n,s={};for(n in e)c(e,n)&&(t=_(n))&&(s[t]=e[n]);return s}var le={};function n(e,t){le[e]=t}function he(e){return e%4==0&&e%100!=0||e%400==0}function y(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function g(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?y(e):t}function de(t,n){return function(e){return null!=e?(fe(this,t,e),f.updateOffset(this,n),this):ce(this,t)}}function ce(e,t){return e.isValid()?e._d[\\\"get\\\"+(e._isUTC?\\\"UTC\\\":\\\"\\\")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&(\\\"FullYear\\\"===t&&he(e.year())&&1===e.month()&&29===e.date()?(n=g(n),e._d[\\\"set\\\"+(e._isUTC?\\\"UTC\\\":\\\"\\\")+t](n,e.month(),We(n,e.month()))):e._d[\\\"set\\\"+(e._isUTC?\\\"UTC\\\":\\\"\\\")+t](n))}var i=/\\\\d/,w=/\\\\d\\\\d/,me=/\\\\d{3}/,_e=/\\\\d{4}/,ye=/[+-]?\\\\d{6}/,p=/\\\\d\\\\d?/,ge=/\\\\d\\\\d\\\\d\\\\d?/,we=/\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d?/,pe=/\\\\d{1,3}/,ke=/\\\\d{1,4}/,ve=/[+-]?\\\\d{1,6}/,Me=/\\\\d+/,De=/[+-]?\\\\d+/,Se=/Z|[+-]\\\\d\\\\d:?\\\\d\\\\d/gi,Ye=/Z|[+-]\\\\d\\\\d(?::?\\\\d\\\\d)?/gi,k=/[0-9]{0,256}['a-z\\\\u00A0-\\\\u05FF\\\\u0700-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFF07\\\\uFF10-\\\\uFFEF]{1,256}|[\\\\u0600-\\\\u06FF\\\\/]{1,256}(\\\\s*?[\\\\u0600-\\\\u06FF]{1,256}){1,2}/i;function v(e,n,s){be[e]=d(n)?n:function(e,t){return e&&s?s:n}}function Oe(e,t){return c(be,e)?be[e](t._strict,t._locale):new RegExp(M(e.replace(\\\"\\\\\\\\\\\",\\\"\\\").replace(/\\\\\\\\(\\\\[)|\\\\\\\\(\\\\])|\\\\[([^\\\\]\\\\[]*)\\\\]|\\\\\\\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function M(e){return e.replace(/[-\\\\/\\\\\\\\^$*+?.()|[\\\\]{}]/g,\\\"\\\\\\\\$&\\\")}var be={},xe={};function D(e,n){var t,s,i=n;for(\\\"string\\\"==typeof e&&(e=[e]),u(n)&&(i=function(e,t){t[n]=g(e)}),s=e.length,t=0;t<s;t++)xe[e[t]]=i}function Te(e,i){D(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var S,Y=0,O=1,b=2,x=3,T=4,N=5,Ne=6,Pe=7,Re=8;function We(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%(n=12)+n)%n;return e+=(t-n)/12,1==n?he(e)?29:28:31-n%7%2}S=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},s(\\\"M\\\",[\\\"MM\\\",2],\\\"Mo\\\",function(){return this.month()+1}),s(\\\"MMM\\\",0,0,function(e){return this.localeData().monthsShort(this,e)}),s(\\\"MMMM\\\",0,0,function(e){return this.localeData().months(this,e)}),t(\\\"month\\\",\\\"M\\\"),n(\\\"month\\\",8),v(\\\"M\\\",p),v(\\\"MM\\\",p,w),v(\\\"MMM\\\",function(e,t){return t.monthsShortRegex(e)}),v(\\\"MMMM\\\",function(e,t){return t.monthsRegex(e)}),D([\\\"M\\\",\\\"MM\\\"],function(e,t){t[O]=g(e)-1}),D([\\\"MMM\\\",\\\"MMMM\\\"],function(e,t,n,s){s=n._locale.monthsParse(e,s,n._strict);null!=s?t[O]=s:m(n).invalidMonth=e});var Ce=\\\"January_February_March_April_May_June_July_August_September_October_November_December\\\".split(\\\"_\\\"),Ue=\\\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\\\".split(\\\"_\\\"),He=/D[oD]?(\\\\[[^\\\\[\\\\]]*\\\\]|\\\\s)+MMMM?/,Fe=k,Le=k;function Ve(e,t){var n;if(e.isValid()){if(\\\"string\\\"==typeof t)if(/^\\\\d+$/.test(t))t=g(t);else if(!u(t=e.localeData().monthsParse(t)))return;n=Math.min(e.date(),We(e.year(),t)),e._d[\\\"set\\\"+(e._isUTC?\\\"UTC\\\":\\\"\\\")+\\\"Month\\\"](t,n)}}function Ge(e){return null!=e?(Ve(this,e),f.updateOffset(this,!0),this):ce(this,\\\"Month\\\")}function Ee(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=l([2e3,r]),n.push(this.monthsShort(t,\\\"\\\")),s.push(this.months(t,\\\"\\\")),i.push(this.months(t,\\\"\\\")),i.push(this.monthsShort(t,\\\"\\\"));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=M(n[r]),s[r]=M(s[r]);for(r=0;r<24;r++)i[r]=M(i[r]);this._monthsRegex=new RegExp(\\\"^(\\\"+i.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(\\\"^(\\\"+s.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._monthsShortStrictRegex=new RegExp(\\\"^(\\\"+n.join(\\\"|\\\")+\\\")\\\",\\\"i\\\")}function Ae(e){return he(e)?366:365}s(\\\"Y\\\",0,0,function(){var e=this.year();return e<=9999?r(e,4):\\\"+\\\"+e}),s(0,[\\\"YY\\\",2],0,function(){return this.year()%100}),s(0,[\\\"YYYY\\\",4],0,\\\"year\\\"),s(0,[\\\"YYYYY\\\",5],0,\\\"year\\\"),s(0,[\\\"YYYYYY\\\",6,!0],0,\\\"year\\\"),t(\\\"year\\\",\\\"y\\\"),n(\\\"year\\\",1),v(\\\"Y\\\",De),v(\\\"YY\\\",p,w),v(\\\"YYYY\\\",ke,_e),v(\\\"YYYYY\\\",ve,ye),v(\\\"YYYYYY\\\",ve,ye),D([\\\"YYYYY\\\",\\\"YYYYYY\\\"],Y),D(\\\"YYYY\\\",function(e,t){t[Y]=2===e.length?f.parseTwoDigitYear(e):g(e)}),D(\\\"YY\\\",function(e,t){t[Y]=f.parseTwoDigitYear(e)}),D(\\\"Y\\\",function(e,t){t[Y]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return g(e)+(68<g(e)?1900:2e3)};var Ie=de(\\\"FullYear\\\",!0);function je(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}function Ze(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function ze(e,t,n){n=7+t-n;return n-(7+Ze(e,0,n).getUTCDay()-t)%7-1}function $e(e,t,n,s,i){var r,t=1+7*(t-1)+(7+n-s)%7+ze(e,s,i),n=t<=0?Ae(r=e-1)+t:t>Ae(e)?(r=e+1,t-Ae(e)):(r=e,t);return{year:r,dayOfYear:n}}function qe(e,t,n){var s,i,r=ze(e.year(),t,n),r=Math.floor((e.dayOfYear()-r-1)/7)+1;return r<1?s=r+P(i=e.year()-1,t,n):r>P(e.year(),t,n)?(s=r-P(e.year(),t,n),i=e.year()+1):(i=e.year(),s=r),{week:s,year:i}}function P(e,t,n){var s=ze(e,t,n),t=ze(e+1,t,n);return(Ae(e)-s+t)/7}s(\\\"w\\\",[\\\"ww\\\",2],\\\"wo\\\",\\\"week\\\"),s(\\\"W\\\",[\\\"WW\\\",2],\\\"Wo\\\",\\\"isoWeek\\\"),t(\\\"week\\\",\\\"w\\\"),t(\\\"isoWeek\\\",\\\"W\\\"),n(\\\"week\\\",5),n(\\\"isoWeek\\\",5),v(\\\"w\\\",p),v(\\\"ww\\\",p,w),v(\\\"W\\\",p),v(\\\"WW\\\",p,w),Te([\\\"w\\\",\\\"ww\\\",\\\"W\\\",\\\"WW\\\"],function(e,t,n,s){t[s.substr(0,1)]=g(e)});function Be(e,t){return e.slice(t,7).concat(e.slice(0,t))}s(\\\"d\\\",0,\\\"do\\\",\\\"day\\\"),s(\\\"dd\\\",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),s(\\\"ddd\\\",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),s(\\\"dddd\\\",0,0,function(e){return this.localeData().weekdays(this,e)}),s(\\\"e\\\",0,0,\\\"weekday\\\"),s(\\\"E\\\",0,0,\\\"isoWeekday\\\"),t(\\\"day\\\",\\\"d\\\"),t(\\\"weekday\\\",\\\"e\\\"),t(\\\"isoWeekday\\\",\\\"E\\\"),n(\\\"day\\\",11),n(\\\"weekday\\\",11),n(\\\"isoWeekday\\\",11),v(\\\"d\\\",p),v(\\\"e\\\",p),v(\\\"E\\\",p),v(\\\"dd\\\",function(e,t){return t.weekdaysMinRegex(e)}),v(\\\"ddd\\\",function(e,t){return t.weekdaysShortRegex(e)}),v(\\\"dddd\\\",function(e,t){return t.weekdaysRegex(e)}),Te([\\\"dd\\\",\\\"ddd\\\",\\\"dddd\\\"],function(e,t,n,s){s=n._locale.weekdaysParse(e,s,n._strict);null!=s?t.d=s:m(n).invalidWeekday=e}),Te([\\\"d\\\",\\\"e\\\",\\\"E\\\"],function(e,t,n,s){t[s]=g(e)});var Je=\\\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\\\".split(\\\"_\\\"),Qe=\\\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\\\".split(\\\"_\\\"),Xe=\\\"Su_Mo_Tu_We_Th_Fr_Sa\\\".split(\\\"_\\\"),Ke=k,et=k,tt=k;function nt(){function e(e,t){return t.length-e.length}for(var t,n,s,i=[],r=[],a=[],o=[],u=0;u<7;u++)s=l([2e3,1]).day(u),t=M(this.weekdaysMin(s,\\\"\\\")),n=M(this.weekdaysShort(s,\\\"\\\")),s=M(this.weekdays(s,\\\"\\\")),i.push(t),r.push(n),a.push(s),o.push(t),o.push(n),o.push(s);i.sort(e),r.sort(e),a.sort(e),o.sort(e),this._weekdaysRegex=new RegExp(\\\"^(\\\"+o.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(\\\"^(\\\"+a.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._weekdaysShortStrictRegex=new RegExp(\\\"^(\\\"+r.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._weekdaysMinStrictRegex=new RegExp(\\\"^(\\\"+i.join(\\\"|\\\")+\\\")\\\",\\\"i\\\")}function st(){return this.hours()%12||12}function it(e,t){s(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function rt(e,t){return t._meridiemParse}s(\\\"H\\\",[\\\"HH\\\",2],0,\\\"hour\\\"),s(\\\"h\\\",[\\\"hh\\\",2],0,st),s(\\\"k\\\",[\\\"kk\\\",2],0,function(){return this.hours()||24}),s(\\\"hmm\\\",0,0,function(){return\\\"\\\"+st.apply(this)+r(this.minutes(),2)}),s(\\\"hmmss\\\",0,0,function(){return\\\"\\\"+st.apply(this)+r(this.minutes(),2)+r(this.seconds(),2)}),s(\\\"Hmm\\\",0,0,function(){return\\\"\\\"+this.hours()+r(this.minutes(),2)}),s(\\\"Hmmss\\\",0,0,function(){return\\\"\\\"+this.hours()+r(this.minutes(),2)+r(this.seconds(),2)}),it(\\\"a\\\",!0),it(\\\"A\\\",!1),t(\\\"hour\\\",\\\"h\\\"),n(\\\"hour\\\",13),v(\\\"a\\\",rt),v(\\\"A\\\",rt),v(\\\"H\\\",p),v(\\\"h\\\",p),v(\\\"k\\\",p),v(\\\"HH\\\",p,w),v(\\\"hh\\\",p,w),v(\\\"kk\\\",p,w),v(\\\"hmm\\\",ge),v(\\\"hmmss\\\",we),v(\\\"Hmm\\\",ge),v(\\\"Hmmss\\\",we),D([\\\"H\\\",\\\"HH\\\"],x),D([\\\"k\\\",\\\"kk\\\"],function(e,t,n){e=g(e);t[x]=24===e?0:e}),D([\\\"a\\\",\\\"A\\\"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),D([\\\"h\\\",\\\"hh\\\"],function(e,t,n){t[x]=g(e),m(n).bigHour=!0}),D(\\\"hmm\\\",function(e,t,n){var s=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s)),m(n).bigHour=!0}),D(\\\"hmmss\\\",function(e,t,n){var s=e.length-4,i=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s,2)),t[N]=g(e.substr(i)),m(n).bigHour=!0}),D(\\\"Hmm\\\",function(e,t,n){var s=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s))}),D(\\\"Hmmss\\\",function(e,t,n){var s=e.length-4,i=e.length-2;t[x]=g(e.substr(0,s)),t[T]=g(e.substr(s,2)),t[N]=g(e.substr(i))});k=de(\\\"Hours\\\",!0);var at,ot={calendar:{sameDay:\\\"[Today at] LT\\\",nextDay:\\\"[Tomorrow at] LT\\\",nextWeek:\\\"dddd [at] LT\\\",lastDay:\\\"[Yesterday at] LT\\\",lastWeek:\\\"[Last] dddd [at] LT\\\",sameElse:\\\"L\\\"},longDateFormat:{LTS:\\\"h:mm:ss A\\\",LT:\\\"h:mm A\\\",L:\\\"MM/DD/YYYY\\\",LL:\\\"MMMM D, YYYY\\\",LLL:\\\"MMMM D, YYYY h:mm A\\\",LLLL:\\\"dddd, MMMM D, YYYY h:mm A\\\"},invalidDate:\\\"Invalid date\\\",ordinal:\\\"%d\\\",dayOfMonthOrdinalParse:/\\\\d{1,2}/,relativeTime:{future:\\\"in %s\\\",past:\\\"%s ago\\\",s:\\\"a few seconds\\\",ss:\\\"%d seconds\\\",m:\\\"a minute\\\",mm:\\\"%d minutes\\\",h:\\\"an hour\\\",hh:\\\"%d hours\\\",d:\\\"a day\\\",dd:\\\"%d days\\\",w:\\\"a week\\\",ww:\\\"%d weeks\\\",M:\\\"a month\\\",MM:\\\"%d months\\\",y:\\\"a year\\\",yy:\\\"%d years\\\"},months:Ce,monthsShort:Ue,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:Xe,weekdaysShort:Qe,meridiemParse:/[ap]\\\\.?m?\\\\.?/i},R={},ut={};function lt(e){return e&&e.toLowerCase().replace(\\\"_\\\",\\\"-\\\")}function ht(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=lt(e[r]).split(\\\"-\\\")).length,n=(n=lt(e[r+1]))?n.split(\\\"-\\\"):null;0<t;){if(s=dt(i.slice(0,t).join(\\\"-\\\")))return s;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return at}function dt(t){var e;if(void 0===R[t]&&\\\"undefined\\\"!=typeof module&&module&&module.exports&&null!=t.match(\\\"^[^/\\\\\\\\\\\\\\\\]*$\\\"))try{e=at._abbr,require(\\\"./locale/\\\"+t),ct(e)}catch(e){R[t]=null}return R[t]}function ct(e,t){return e&&((t=o(t)?mt(e):ft(e,t))?at=t:\\\"undefined\\\"!=typeof console&&console.warn&&console.warn(\\\"Locale \\\"+e+\\\" not found. Did you forget to load it?\\\")),at._abbr}function ft(e,t){if(null===t)return delete R[e],null;var n,s=ot;if(t.abbr=e,null!=R[e])Q(\\\"defineLocaleOverride\\\",\\\"use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info.\\\"),s=R[e]._config;else if(null!=t.parentLocale)if(null!=R[t.parentLocale])s=R[t.parentLocale]._config;else{if(null==(n=dt(t.parentLocale)))return ut[t.parentLocale]||(ut[t.parentLocale]=[]),ut[t.parentLocale].push({name:e,config:t}),null;s=n._config}return R[e]=new K(X(s,t)),ut[e]&&ut[e].forEach(function(e){ft(e.name,e.config)}),ct(e),R[e]}function mt(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return at;if(!a(e)){if(t=dt(e))return t;e=[e]}return ht(e)}function _t(e){var t=e._a;return t&&-2===m(e).overflow&&(t=t[O]<0||11<t[O]?O:t[b]<1||t[b]>We(t[Y],t[O])?b:t[x]<0||24<t[x]||24===t[x]&&(0!==t[T]||0!==t[N]||0!==t[Ne])?x:t[T]<0||59<t[T]?T:t[N]<0||59<t[N]?N:t[Ne]<0||999<t[Ne]?Ne:-1,m(e)._overflowDayOfYear&&(t<Y||b<t)&&(t=b),m(e)._overflowWeeks&&-1===t&&(t=Pe),m(e)._overflowWeekday&&-1===t&&(t=Re),m(e).overflow=t),e}var yt=/^\\\\s*((?:[+-]\\\\d{6}|\\\\d{4})-(?:\\\\d\\\\d-\\\\d\\\\d|W\\\\d\\\\d-\\\\d|W\\\\d\\\\d|\\\\d\\\\d\\\\d|\\\\d\\\\d))(?:(T| )(\\\\d\\\\d(?::\\\\d\\\\d(?::\\\\d\\\\d(?:[.,]\\\\d+)?)?)?)([+-]\\\\d\\\\d(?::?\\\\d\\\\d)?|\\\\s*Z)?)?$/,gt=/^\\\\s*((?:[+-]\\\\d{6}|\\\\d{4})(?:\\\\d\\\\d\\\\d\\\\d|W\\\\d\\\\d\\\\d|W\\\\d\\\\d|\\\\d\\\\d\\\\d|\\\\d\\\\d|))(?:(T| )(\\\\d\\\\d(?:\\\\d\\\\d(?:\\\\d\\\\d(?:[.,]\\\\d+)?)?)?)([+-]\\\\d\\\\d(?::?\\\\d\\\\d)?|\\\\s*Z)?)?$/,wt=/Z|[+-]\\\\d\\\\d(?::?\\\\d\\\\d)?/,pt=[[\\\"YYYYYY-MM-DD\\\",/[+-]\\\\d{6}-\\\\d\\\\d-\\\\d\\\\d/],[\\\"YYYY-MM-DD\\\",/\\\\d{4}-\\\\d\\\\d-\\\\d\\\\d/],[\\\"GGGG-[W]WW-E\\\",/\\\\d{4}-W\\\\d\\\\d-\\\\d/],[\\\"GGGG-[W]WW\\\",/\\\\d{4}-W\\\\d\\\\d/,!1],[\\\"YYYY-DDD\\\",/\\\\d{4}-\\\\d{3}/],[\\\"YYYY-MM\\\",/\\\\d{4}-\\\\d\\\\d/,!1],[\\\"YYYYYYMMDD\\\",/[+-]\\\\d{10}/],[\\\"YYYYMMDD\\\",/\\\\d{8}/],[\\\"GGGG[W]WWE\\\",/\\\\d{4}W\\\\d{3}/],[\\\"GGGG[W]WW\\\",/\\\\d{4}W\\\\d{2}/,!1],[\\\"YYYYDDD\\\",/\\\\d{7}/],[\\\"YYYYMM\\\",/\\\\d{6}/,!1],[\\\"YYYY\\\",/\\\\d{4}/,!1]],kt=[[\\\"HH:mm:ss.SSSS\\\",/\\\\d\\\\d:\\\\d\\\\d:\\\\d\\\\d\\\\.\\\\d+/],[\\\"HH:mm:ss,SSSS\\\",/\\\\d\\\\d:\\\\d\\\\d:\\\\d\\\\d,\\\\d+/],[\\\"HH:mm:ss\\\",/\\\\d\\\\d:\\\\d\\\\d:\\\\d\\\\d/],[\\\"HH:mm\\\",/\\\\d\\\\d:\\\\d\\\\d/],[\\\"HHmmss.SSSS\\\",/\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d\\\\.\\\\d+/],[\\\"HHmmss,SSSS\\\",/\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d,\\\\d+/],[\\\"HHmmss\\\",/\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d/],[\\\"HHmm\\\",/\\\\d\\\\d\\\\d\\\\d/],[\\\"HH\\\",/\\\\d\\\\d/]],vt=/^\\\\/?Date\\\\((-?\\\\d+)/i,Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\\\s)?(\\\\d{1,2})\\\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\\\s(\\\\d{2,4})\\\\s(\\\\d\\\\d):(\\\\d\\\\d)(?::(\\\\d\\\\d))?\\\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\\\d{4}))$/,Dt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function St(e){var t,n,s,i,r,a,o=e._i,u=yt.exec(o)||gt.exec(o),o=pt.length,l=kt.length;if(u){for(m(e).iso=!0,t=0,n=o;t<n;t++)if(pt[t][1].exec(u[1])){i=pt[t][0],s=!1!==pt[t][2];break}if(null==i)e._isValid=!1;else{if(u[3]){for(t=0,n=l;t<n;t++)if(kt[t][1].exec(u[3])){r=(u[2]||\\\" \\\")+kt[t][0];break}if(null==r)return void(e._isValid=!1)}if(s||null==r){if(u[4]){if(!wt.exec(u[4]))return void(e._isValid=!1);a=\\\"Z\\\"}e._f=i+(r||\\\"\\\")+(a||\\\"\\\"),Tt(e)}else e._isValid=!1}}else e._isValid=!1}function Yt(e,t,n,s,i,r){e=[function(e){e=parseInt(e,10);{if(e<=49)return 2e3+e;if(e<=999)return 1900+e}return e}(e),Ue.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&e.push(parseInt(r,10)),e}function Ot(e){var t,n,s,i,r=Mt.exec(e._i.replace(/\\\\([^()]*\\\\)|[\\\\n\\\\t]/g,\\\" \\\").replace(/(\\\\s\\\\s+)/g,\\\" \\\").replace(/^\\\\s\\\\s*/,\\\"\\\").replace(/\\\\s\\\\s*$/,\\\"\\\"));r?(t=Yt(r[4],r[3],r[2],r[5],r[6],r[7]),n=r[1],s=t,i=e,n&&Qe.indexOf(n)!==new Date(s[0],s[1],s[2]).getDay()?(m(i).weekdayMismatch=!0,i._isValid=!1):(e._a=t,e._tzm=(n=r[8],s=r[9],i=r[10],n?Dt[n]:s?0:60*(((n=parseInt(i,10))-(s=n%100))/100)+s),e._d=Ze.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0)):e._isValid=!1}function bt(e,t,n){return null!=e?e:null!=t?t:n}function xt(e){var t,n,s,i,r,a,o,u,l,h,d,c=[];if(!e._d){for(s=e,i=new Date(f.now()),n=s._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()],e._w&&null==e._a[b]&&null==e._a[O]&&(null!=(i=(s=e)._w).GG||null!=i.W||null!=i.E?(u=1,l=4,r=bt(i.GG,s._a[Y],qe(W(),1,4).year),a=bt(i.W,1),((o=bt(i.E,1))<1||7<o)&&(h=!0)):(u=s._locale._week.dow,l=s._locale._week.doy,d=qe(W(),u,l),r=bt(i.gg,s._a[Y],d.year),a=bt(i.w,d.week),null!=i.d?((o=i.d)<0||6<o)&&(h=!0):null!=i.e?(o=i.e+u,(i.e<0||6<i.e)&&(h=!0)):o=u),a<1||a>P(r,u,l)?m(s)._overflowWeeks=!0:null!=h?m(s)._overflowWeekday=!0:(d=$e(r,a,o,u,l),s._a[Y]=d.year,s._dayOfYear=d.dayOfYear)),null!=e._dayOfYear&&(i=bt(e._a[Y],n[Y]),(e._dayOfYear>Ae(i)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),h=Ze(i,0,e._dayOfYear),e._a[O]=h.getUTCMonth(),e._a[b]=h.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=c[t]=n[t];for(;t<7;t++)e._a[t]=c[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[x]&&0===e._a[T]&&0===e._a[N]&&0===e._a[Ne]&&(e._nextDay=!0,e._a[x]=0),e._d=(e._useUTC?Ze:je).apply(null,c),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[x]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(m(e).weekdayMismatch=!0)}}function Tt(e){if(e._f===f.ISO_8601)St(e);else if(e._f===f.RFC_2822)Ot(e);else{e._a=[],m(e).empty=!0;for(var t,n,s,i,r,a=\\\"\\\"+e._i,o=a.length,u=0,l=ae(e._f,e._locale).match(te)||[],h=l.length,d=0;d<h;d++)n=l[d],(t=(a.match(Oe(n,e))||[])[0])&&(0<(s=a.substr(0,a.indexOf(t))).length&&m(e).unusedInput.push(s),a=a.slice(a.indexOf(t)+t.length),u+=t.length),ie[n]?(t?m(e).empty=!1:m(e).unusedTokens.push(n),s=n,r=e,null!=(i=t)&&c(xe,s)&&xe[s](i,r._a,r,s)):e._strict&&!t&&m(e).unusedTokens.push(n);m(e).charsLeftOver=o-u,0<a.length&&m(e).unusedInput.push(a),e._a[x]<=12&&!0===m(e).bigHour&&0<e._a[x]&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[x]=function(e,t,n){if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t}(e._locale,e._a[x],e._meridiem),null!==(o=m(e).era)&&(e._a[Y]=e._locale.erasConvertYear(o,e._a[Y])),xt(e),_t(e)}}function Nt(e){var t,n,s,i=e._i,r=e._f;if(e._locale=e._locale||mt(e._l),null===i||void 0===r&&\\\"\\\"===i)return I({nullInput:!0});if(\\\"string\\\"==typeof i&&(e._i=i=e._locale.preparse(i)),h(i))return new q(_t(i));if(V(i))e._d=i;else if(a(r))!function(e){var t,n,s,i,r,a,o=!1,u=e._f.length;if(0===u)return m(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<u;i++)r=0,a=!1,t=$({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Tt(t),A(t)&&(a=!0),r=(r+=m(t).charsLeftOver)+10*m(t).unusedTokens.length,m(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));E(e,n||t)}(e);else if(r)Tt(e);else if(o(r=(i=e)._i))i._d=new Date(f.now());else V(r)?i._d=new Date(r.valueOf()):\\\"string\\\"==typeof r?(n=i,null!==(t=vt.exec(n._i))?n._d=new Date(+t[1]):(St(n),!1===n._isValid&&(delete n._isValid,Ot(n),!1===n._isValid&&(delete n._isValid,n._strict?n._isValid=!1:f.createFromInputFallback(n))))):a(r)?(i._a=G(r.slice(0),function(e){return parseInt(e,10)}),xt(i)):F(r)?(t=i)._d||(s=void 0===(n=ue(t._i)).day?n.date:n.day,t._a=G([n.year,n.month,s,n.hour,n.minute,n.second,n.millisecond],function(e){return e&&parseInt(e,10)}),xt(t)):u(r)?i._d=new Date(r):f.createFromInputFallback(i);return A(e)||(e._d=null),e}function Pt(e,t,n,s,i){var r={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(F(e)&&L(e)||a(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=i,r._l=n,r._i=e,r._f=t,r._strict=s,(i=new q(_t(Nt(i=r))))._nextDay&&(i.add(1,\\\"d\\\"),i._nextDay=void 0),i}function W(e,t,n,s){return Pt(e,t,n,s,!1)}f.createFromInputFallback=e(\\\"value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.\\\",function(e){e._d=new Date(e._i+(e._useUTC?\\\" UTC\\\":\\\"\\\"))}),f.ISO_8601=function(){},f.RFC_2822=function(){};ge=e(\\\"moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/\\\",function(){var e=W.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:I()}),we=e(\\\"moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/\\\",function(){var e=W.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:I()});function Rt(e,t){var n,s;if(!(t=1===t.length&&a(t[0])?t[0]:t).length)return W();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=[\\\"year\\\",\\\"quarter\\\",\\\"month\\\",\\\"week\\\",\\\"day\\\",\\\"hour\\\",\\\"minute\\\",\\\"second\\\",\\\"millisecond\\\"];function Ct(e){var e=ue(e),t=e.year||0,n=e.quarter||0,s=e.month||0,i=e.week||e.isoWeek||0,r=e.day||0,a=e.hour||0,o=e.minute||0,u=e.second||0,l=e.millisecond||0;this._isValid=function(e){var t,n,s=!1,i=Wt.length;for(t in e)if(c(e,t)&&(-1===S.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==g(e[Wt[n]])&&(s=!0)}return!0}(e),this._milliseconds=+l+1e3*u+6e4*o+1e3*a*60*60,this._days=+r+7*i,this._months=+s+3*n+12*t,this._data={},this._locale=mt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){s(e,0,0,function(){var e=this.utcOffset(),t=\\\"+\\\";return e<0&&(e=-e,t=\\\"-\\\"),t+r(~~(e/60),2)+n+r(~~e%60,2)})}Ft(\\\"Z\\\",\\\":\\\"),Ft(\\\"ZZ\\\",\\\"\\\"),v(\\\"Z\\\",Ye),v(\\\"ZZ\\\",Ye),D([\\\"Z\\\",\\\"ZZ\\\"],function(e,t,n){n._useUTC=!0,n._tzm=Vt(Ye,e)});var Lt=/([\\\\+\\\\-]|\\\\d\\\\d)/gi;function Vt(e,t){var t=(t||\\\"\\\").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+\\\"\\\").match(Lt)||[\\\"-\\\",0,0])[1]+g(e[2]))?0:\\\"+\\\"===e[0]?t:-t}function Gt(e,t){var n;return t._isUTC?(t=t.clone(),n=(h(e)||V(e)?e:W(e)).valueOf()-t.valueOf(),t._d.setTime(t._d.valueOf()+n),f.updateOffset(t,!1),t):W(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}f.updateOffset=function(){};var It=/^(-|\\\\+)?(?:(\\\\d*)[. ])?(\\\\d+):(\\\\d+)(?::(\\\\d+)(\\\\.\\\\d*)?)?$/,jt=/^(-|\\\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function C(e,t){var n,s=e,i=null;return Ut(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(i=It.exec(e))?(n=\\\"-\\\"===i[1]?-1:1,s={y:0,d:g(i[b])*n,h:g(i[x])*n,m:g(i[T])*n,s:g(i[N])*n,ms:g(Ht(1e3*i[Ne]))*n}):(i=jt.exec(e))?(n=\\\"-\\\"===i[1]?-1:1,s={y:Zt(i[2],n),M:Zt(i[3],n),w:Zt(i[4],n),d:Zt(i[5],n),h:Zt(i[6],n),m:Zt(i[7],n),s:Zt(i[8],n)}):null==s?s={}:\\\"object\\\"==typeof s&&(\\\"from\\\"in s||\\\"to\\\"in s)&&(t=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(W(s.from),W(s.to)),(s={}).ms=t.milliseconds,s.M=t.months),i=new Ct(s),Ut(e)&&c(e,\\\"_locale\\\")&&(i._locale=e._locale),Ut(e)&&c(e,\\\"_isValid\\\")&&(i._isValid=e._isValid),i}function Zt(e,t){e=e&&parseFloat(e.replace(\\\",\\\",\\\".\\\"));return(isNaN(e)?0:e)*t}function zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,\\\"M\\\").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,\\\"M\\\"),n}function $t(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Q(i,\\\"moment().\\\"+i+\\\"(period, number) is deprecated. Please use moment().\\\"+i+\\\"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.\\\"),n=e,e=t,t=n),qt(this,C(e,t),s),this}}function qt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),t=Ht(t._months);e.isValid()&&(s=null==s||s,t&&Ve(e,ce(e,\\\"Month\\\")+t*n),r&&fe(e,\\\"Date\\\",ce(e,\\\"Date\\\")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&f.updateOffset(e,r||t))}C.fn=Ct.prototype,C.invalid=function(){return C(NaN)};Ce=$t(1,\\\"add\\\"),Je=$t(-1,\\\"subtract\\\");function Bt(e){return\\\"string\\\"==typeof e||e instanceof String}function Jt(e){return h(e)||V(e)||Bt(e)||u(e)||function(t){var e=a(t),n=!1;e&&(n=0===t.filter(function(e){return!u(e)&&Bt(t)}).length);return e&&n}(e)||function(e){var t,n,s=F(e)&&!L(e),i=!1,r=[\\\"years\\\",\\\"year\\\",\\\"y\\\",\\\"months\\\",\\\"month\\\",\\\"M\\\",\\\"days\\\",\\\"day\\\",\\\"d\\\",\\\"dates\\\",\\\"date\\\",\\\"D\\\",\\\"hours\\\",\\\"hour\\\",\\\"h\\\",\\\"minutes\\\",\\\"minute\\\",\\\"m\\\",\\\"seconds\\\",\\\"second\\\",\\\"s\\\",\\\"milliseconds\\\",\\\"millisecond\\\",\\\"ms\\\"],a=r.length;for(t=0;t<a;t+=1)n=r[t],i=i||c(e,n);return s&&i}(e)||null==e}function Qt(e,t){if(e.date()<t.date())return-Qt(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,\\\"months\\\"),t=t-s<0?(t-s)/(s-e.clone().add(n-1,\\\"months\\\")):(t-s)/(e.clone().add(1+n,\\\"months\\\")-s);return-(n+t)||0}function Xt(e){return void 0===e?this._locale._abbr:(null!=(e=mt(e))&&(this._locale=e),this)}f.defaultFormat=\\\"YYYY-MM-DDTHH:mm:ssZ\\\",f.defaultFormatUtc=\\\"YYYY-MM-DDTHH:mm:ss[Z]\\\";Xe=e(\\\"moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.\\\",function(e){return void 0===e?this.localeData():this.locale(e)});function Kt(){return this._locale}var en=126227808e5;function tn(e,t){return(e%t+t)%t}function nn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-en:new Date(e,t,n).valueOf()}function sn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-en:Date.UTC(e,t,n)}function rn(e,t){return t.erasAbbrRegex(e)}function an(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(M(i[r].name)),e.push(M(i[r].abbr)),n.push(M(i[r].narrow)),s.push(M(i[r].name)),s.push(M(i[r].abbr)),s.push(M(i[r].narrow));this._erasRegex=new RegExp(\\\"^(\\\"+s.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._erasNameRegex=new RegExp(\\\"^(\\\"+t.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._erasAbbrRegex=new RegExp(\\\"^(\\\"+e.join(\\\"|\\\")+\\\")\\\",\\\"i\\\"),this._erasNarrowRegex=new RegExp(\\\"^(\\\"+n.join(\\\"|\\\")+\\\")\\\",\\\"i\\\")}function on(e,t){s(0,[e,e.length],0,t)}function un(e,t,n,s,i){var r;return null==e?qe(this,s,i).year:(r=P(e,s,i),function(e,t,n,s,i){e=$e(e,t,n,s,i),t=Ze(e.year,0,e.dayOfYear);return this.year(t.getUTCFullYear()),this.month(t.getUTCMonth()),this.date(t.getUTCDate()),this}.call(this,e,t=r<t?r:t,n,s,i))}s(\\\"N\\\",0,0,\\\"eraAbbr\\\"),s(\\\"NN\\\",0,0,\\\"eraAbbr\\\"),s(\\\"NNN\\\",0,0,\\\"eraAbbr\\\"),s(\\\"NNNN\\\",0,0,\\\"eraName\\\"),s(\\\"NNNNN\\\",0,0,\\\"eraNarrow\\\"),s(\\\"y\\\",[\\\"y\\\",1],\\\"yo\\\",\\\"eraYear\\\"),s(\\\"y\\\",[\\\"yy\\\",2],0,\\\"eraYear\\\"),s(\\\"y\\\",[\\\"yyy\\\",3],0,\\\"eraYear\\\"),s(\\\"y\\\",[\\\"yyyy\\\",4],0,\\\"eraYear\\\"),v(\\\"N\\\",rn),v(\\\"NN\\\",rn),v(\\\"NNN\\\",rn),v(\\\"NNNN\\\",function(e,t){return t.erasNameRegex(e)}),v(\\\"NNNNN\\\",function(e,t){return t.erasNarrowRegex(e)}),D([\\\"N\\\",\\\"NN\\\",\\\"NNN\\\",\\\"NNNN\\\",\\\"NNNNN\\\"],function(e,t,n,s){s=n._locale.erasParse(e,s,n._strict);s?m(n).era=s:m(n).invalidEra=e}),v(\\\"y\\\",Me),v(\\\"yy\\\",Me),v(\\\"yyy\\\",Me),v(\\\"yyyy\\\",Me),v(\\\"yo\\\",function(e,t){return t._eraYearOrdinalRegex||Me}),D([\\\"y\\\",\\\"yy\\\",\\\"yyy\\\",\\\"yyyy\\\"],Y),D([\\\"yo\\\"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Y]=n._locale.eraYearOrdinalParse(e,i):t[Y]=parseInt(e,10)}),s(0,[\\\"gg\\\",2],0,function(){return this.weekYear()%100}),s(0,[\\\"GG\\\",2],0,function(){return this.isoWeekYear()%100}),on(\\\"gggg\\\",\\\"weekYear\\\"),on(\\\"ggggg\\\",\\\"weekYear\\\"),on(\\\"GGGG\\\",\\\"isoWeekYear\\\"),on(\\\"GGGGG\\\",\\\"isoWeekYear\\\"),t(\\\"weekYear\\\",\\\"gg\\\"),t(\\\"isoWeekYear\\\",\\\"GG\\\"),n(\\\"weekYear\\\",1),n(\\\"isoWeekYear\\\",1),v(\\\"G\\\",De),v(\\\"g\\\",De),v(\\\"GG\\\",p,w),v(\\\"gg\\\",p,w),v(\\\"GGGG\\\",ke,_e),v(\\\"gggg\\\",ke,_e),v(\\\"GGGGG\\\",ve,ye),v(\\\"ggggg\\\",ve,ye),Te([\\\"gggg\\\",\\\"ggggg\\\",\\\"GGGG\\\",\\\"GGGGG\\\"],function(e,t,n,s){t[s.substr(0,2)]=g(e)}),Te([\\\"gg\\\",\\\"GG\\\"],function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)}),s(\\\"Q\\\",0,\\\"Qo\\\",\\\"quarter\\\"),t(\\\"quarter\\\",\\\"Q\\\"),n(\\\"quarter\\\",7),v(\\\"Q\\\",i),D(\\\"Q\\\",function(e,t){t[O]=3*(g(e)-1)}),s(\\\"D\\\",[\\\"DD\\\",2],\\\"Do\\\",\\\"date\\\"),t(\\\"date\\\",\\\"D\\\"),n(\\\"date\\\",9),v(\\\"D\\\",p),v(\\\"DD\\\",p,w),v(\\\"Do\\\",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),D([\\\"D\\\",\\\"DD\\\"],b),D(\\\"Do\\\",function(e,t){t[b]=g(e.match(p)[0])});ke=de(\\\"Date\\\",!0);s(\\\"DDD\\\",[\\\"DDDD\\\",3],\\\"DDDo\\\",\\\"dayOfYear\\\"),t(\\\"dayOfYear\\\",\\\"DDD\\\"),n(\\\"dayOfYear\\\",4),v(\\\"DDD\\\",pe),v(\\\"DDDD\\\",me),D([\\\"DDD\\\",\\\"DDDD\\\"],function(e,t,n){n._dayOfYear=g(e)}),s(\\\"m\\\",[\\\"mm\\\",2],0,\\\"minute\\\"),t(\\\"minute\\\",\\\"m\\\"),n(\\\"minute\\\",14),v(\\\"m\\\",p),v(\\\"mm\\\",p,w),D([\\\"m\\\",\\\"mm\\\"],T);var ln,_e=de(\\\"Minutes\\\",!1),ve=(s(\\\"s\\\",[\\\"ss\\\",2],0,\\\"second\\\"),t(\\\"second\\\",\\\"s\\\"),n(\\\"second\\\",15),v(\\\"s\\\",p),v(\\\"ss\\\",p,w),D([\\\"s\\\",\\\"ss\\\"],N),de(\\\"Seconds\\\",!1));for(s(\\\"S\\\",0,0,function(){return~~(this.millisecond()/100)}),s(0,[\\\"SS\\\",2],0,function(){return~~(this.millisecond()/10)}),s(0,[\\\"SSS\\\",3],0,\\\"millisecond\\\"),s(0,[\\\"SSSS\\\",4],0,function(){return 10*this.millisecond()}),s(0,[\\\"SSSSS\\\",5],0,function(){return 100*this.millisecond()}),s(0,[\\\"SSSSSS\\\",6],0,function(){return 1e3*this.millisecond()}),s(0,[\\\"SSSSSSS\\\",7],0,function(){return 1e4*this.millisecond()}),s(0,[\\\"SSSSSSSS\\\",8],0,function(){return 1e5*this.millisecond()}),s(0,[\\\"SSSSSSSSS\\\",9],0,function(){return 1e6*this.millisecond()}),t(\\\"millisecond\\\",\\\"ms\\\"),n(\\\"millisecond\\\",16),v(\\\"S\\\",pe,i),v(\\\"SS\\\",pe,w),v(\\\"SSS\\\",pe,me),ln=\\\"SSSS\\\";ln.length<=9;ln+=\\\"S\\\")v(ln,Me);function hn(e,t){t[Ne]=g(1e3*(\\\"0.\\\"+e))}for(ln=\\\"S\\\";ln.length<=9;ln+=\\\"S\\\")D(ln,hn);ye=de(\\\"Milliseconds\\\",!1),s(\\\"z\\\",0,0,\\\"zoneAbbr\\\"),s(\\\"zz\\\",0,0,\\\"zoneName\\\");i=q.prototype;function dn(e){return e}i.add=Ce,i.calendar=function(e,t){1===arguments.length&&(arguments[0]?Jt(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=F(e)&&!L(e),n=!1,s=[\\\"sameDay\\\",\\\"nextDay\\\",\\\"lastDay\\\",\\\"nextWeek\\\",\\\"lastWeek\\\",\\\"sameElse\\\"],i=0;i<s.length;i+=1)n=n||c(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var e=e||W(),n=Gt(e,this).startOf(\\\"day\\\"),n=f.calendarFormat(this,n)||\\\"sameElse\\\",t=t&&(d(t[n])?t[n].call(this,e):t[n]);return this.format(t||this.localeData().calendar(n,this,W(e)))},i.clone=function(){return new q(this)},i.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=_(t)){case\\\"year\\\":r=Qt(this,s)/12;break;case\\\"month\\\":r=Qt(this,s);break;case\\\"quarter\\\":r=Qt(this,s)/3;break;case\\\"second\\\":r=(this-s)/1e3;break;case\\\"minute\\\":r=(this-s)/6e4;break;case\\\"hour\\\":r=(this-s)/36e5;break;case\\\"day\\\":r=(this-s-i)/864e5;break;case\\\"week\\\":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:y(r)},i.endOf=function(e){var t,n;if(void 0===(e=_(e))||\\\"millisecond\\\"===e||!this.isValid())return this;switch(n=this._isUTC?sn:nn,e){case\\\"year\\\":t=n(this.year()+1,0,1)-1;break;case\\\"quarter\\\":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case\\\"month\\\":t=n(this.year(),this.month()+1,1)-1;break;case\\\"week\\\":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case\\\"isoWeek\\\":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case\\\"day\\\":case\\\"date\\\":t=n(this.year(),this.month(),this.date()+1)-1;break;case\\\"hour\\\":t=this._d.valueOf(),t+=36e5-tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case\\\"minute\\\":t=this._d.valueOf(),t+=6e4-tn(t,6e4)-1;break;case\\\"second\\\":t=this._d.valueOf(),t+=1e3-tn(t,1e3)-1;break}return this._d.setTime(t),f.updateOffset(this,!0),this},i.format=function(e){return e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat),e=re(this,e),this.localeData().postformat(e)},i.from=function(e,t){return this.isValid()&&(h(e)&&e.isValid()||W(e).isValid())?C({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},i.fromNow=function(e){return this.from(W(),e)},i.to=function(e,t){return this.isValid()&&(h(e)&&e.isValid()||W(e).isValid())?C({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},i.toNow=function(e){return this.to(W(),e)},i.get=function(e){return d(this[e=_(e)])?this[e]():this},i.invalidAt=function(){return m(this).overflow},i.isAfter=function(e,t){return e=h(e)?e:W(e),!(!this.isValid()||!e.isValid())&&(\\\"millisecond\\\"===(t=_(t)||\\\"millisecond\\\")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},i.isBefore=function(e,t){return e=h(e)?e:W(e),!(!this.isValid()||!e.isValid())&&(\\\"millisecond\\\"===(t=_(t)||\\\"millisecond\\\")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},i.isBetween=function(e,t,n,s){return e=h(e)?e:W(e),t=h(t)?t:W(t),!!(this.isValid()&&e.isValid()&&t.isValid())&&((\\\"(\\\"===(s=s||\\\"()\\\")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(\\\")\\\"===s[1]?this.isBefore(t,n):!this.isAfter(t,n)))},i.isSame=function(e,t){var e=h(e)?e:W(e);return!(!this.isValid()||!e.isValid())&&(\\\"millisecond\\\"===(t=_(t)||\\\"millisecond\\\")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},i.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},i.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},i.isValid=function(){return A(this)},i.lang=Xe,i.locale=Xt,i.localeData=Kt,i.max=we,i.min=ge,i.parsingFlags=function(){return E({},m(this))},i.set=function(e,t){if(\\\"object\\\"==typeof e)for(var n=function(e){var t,n=[];for(t in e)c(e,t)&&n.push({unit:t,priority:le[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=ue(e)),s=n.length,i=0;i<s;i++)this[n[i].unit](e[n[i].unit]);else if(d(this[e=_(e)]))return this[e](t);return this},i.startOf=function(e){var t,n;if(void 0===(e=_(e))||\\\"millisecond\\\"===e||!this.isValid())return this;switch(n=this._isUTC?sn:nn,e){case\\\"year\\\":t=n(this.year(),0,1);break;case\\\"quarter\\\":t=n(this.year(),this.month()-this.month()%3,1);break;case\\\"month\\\":t=n(this.year(),this.month(),1);break;case\\\"week\\\":t=n(this.year(),this.month(),this.date()-this.weekday());break;case\\\"isoWeek\\\":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case\\\"day\\\":case\\\"date\\\":t=n(this.year(),this.month(),this.date());break;case\\\"hour\\\":t=this._d.valueOf(),t-=tn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case\\\"minute\\\":t=this._d.valueOf(),t-=tn(t,6e4);break;case\\\"second\\\":t=this._d.valueOf(),t-=tn(t,1e3);break}return this._d.setTime(t),f.updateOffset(this,!0),this},i.subtract=Je,i.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},i.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},i.toDate=function(){return new Date(this.valueOf())},i.toISOString=function(e){if(!this.isValid())return null;var t=(e=!0!==e)?this.clone().utc():this;return t.year()<0||9999<t.year()?re(t,e?\\\"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]\\\":\\\"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ\\\"):d(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace(\\\"Z\\\",re(t,\\\"Z\\\")):re(t,e?\\\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\\\":\\\"YYYY-MM-DD[T]HH:mm:ss.SSSZ\\\")},i.inspect=function(){if(!this.isValid())return\\\"moment.invalid(/* \\\"+this._i+\\\" */)\\\";var e,t=\\\"moment\\\",n=\\\"\\\";return this.isLocal()||(t=0===this.utcOffset()?\\\"moment.utc\\\":\\\"moment.parseZone\\\",n=\\\"Z\\\"),t=\\\"[\\\"+t+'(\\\"]',e=0<=this.year()&&this.year()<=9999?\\\"YYYY\\\":\\\"YYYYYY\\\",this.format(t+e+\\\"-MM-DD[T]HH:mm:ss.SSS\\\"+(n+'[\\\")]'))},\\\"undefined\\\"!=typeof Symbol&&null!=Symbol.for&&(i[Symbol.for(\\\"nodejs.util.inspect.custom\\\")]=function(){return\\\"Moment<\\\"+this.format()+\\\">\\\"}),i.toJSON=function(){return this.isValid()?this.toISOString():null},i.toString=function(){return this.clone().locale(\\\"en\\\").format(\\\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\\\")},i.unix=function(){return Math.floor(this.valueOf()/1e3)},i.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},i.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},i.eraName=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf(\\\"day\\\").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return\\\"\\\"},i.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf(\\\"day\\\").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return\\\"\\\"},i.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf(\\\"day\\\").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return\\\"\\\"},i.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf(\\\"day\\\").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},i.year=Ie,i.isLeapYear=function(){return he(this.year())},i.weekYear=function(e){return un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},i.isoWeekYear=function(e){return un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},i.quarter=i.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},i.month=Ge,i.daysInMonth=function(){return We(this.year(),this.month())},i.week=i.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),\\\"d\\\")},i.isoWeek=i.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),\\\"d\\\")},i.weeksInYear=function(){var e=this.localeData()._week;return P(this.year(),e.dow,e.doy)},i.weeksInWeekYear=function(){var e=this.localeData()._week;return P(this.weekYear(),e.dow,e.doy)},i.isoWeeksInYear=function(){return P(this.year(),1,4)},i.isoWeeksInISOWeekYear=function(){return P(this.isoWeekYear(),1,4)},i.date=ke,i.day=i.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e=\\\"string\\\"!=typeof t?t:isNaN(t)?\\\"number\\\"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,\\\"d\\\")):s},i.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,\\\"d\\\")},i.isoWeekday=function(e){return this.isValid()?null!=e?(t=e,n=this.localeData(),n=\\\"string\\\"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t,this.day(this.day()%7?n:n-7)):this.day()||7:null!=e?this:NaN;var t,n},i.dayOfYear=function(e){var t=Math.round((this.clone().startOf(\\\"day\\\")-this.clone().startOf(\\\"year\\\"))/864e5)+1;return null==e?t:this.add(e-t,\\\"d\\\")},i.hour=i.hours=k,i.minute=i.minutes=_e,i.second=i.seconds=ve,i.millisecond=i.milliseconds=ye,i.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if(\\\"string\\\"==typeof e){if(null===(e=Vt(Ye,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,\\\"m\\\"),i!==e&&(!t||this._changeInProgress?qt(this,C(e-i,\\\"m\\\"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},i.utc=function(e){return this.utcOffset(0,e)},i.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),\\\"m\\\")),this},i.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):\\\"string\\\"==typeof this._i&&(null!=(e=Vt(Se,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},i.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?W(e).utcOffset():0,(this.utcOffset()-e)%60==0)},i.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},i.isLocal=function(){return!!this.isValid()&&!this._isUTC},i.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},i.isUtc=At,i.isUTC=At,i.zoneAbbr=function(){return this._isUTC?\\\"UTC\\\":\\\"\\\"},i.zoneName=function(){return this._isUTC?\\\"Coordinated Universal Time\\\":\\\"\\\"},i.dates=e(\\\"dates accessor is deprecated. Use date instead.\\\",ke),i.months=e(\\\"months accessor is deprecated. Use month instead\\\",Ge),i.years=e(\\\"years accessor is deprecated. Use year instead\\\",Ie),i.zone=e(\\\"moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/\\\",function(e,t){return null!=e?(this.utcOffset(e=\\\"string\\\"!=typeof e?-e:e,t),this):-this.utcOffset()}),i.isDSTShifted=e(\\\"isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information\\\",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return $(t,this),(t=Nt(t))._a?(e=(t._isUTC?l:W)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&g(e[a])!==g(t[a]))&&r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});w=K.prototype;function cn(e,t,n,s){var i=mt(),s=l().set(s,t);return i[n](s,e)}function fn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||\\\"\\\",null!=t)return cn(e,t,n,\\\"month\\\");for(var s=[],i=0;i<12;i++)s[i]=cn(e,i,n,\\\"month\\\");return s}function mn(e,t,n,s){t=(\\\"boolean\\\"==typeof e?u(t)&&(n=t,t=void 0):(t=e,e=!1,u(n=t)&&(n=t,t=void 0)),t||\\\"\\\");var i,r=mt(),a=e?r._week.dow:0,o=[];if(null!=n)return cn(t,(n+a)%7,s,\\\"day\\\");for(i=0;i<7;i++)o[i]=cn(t,(i+a)%7,s,\\\"day\\\");return o}w.calendar=function(e,t,n){return d(e=this._calendar[e]||this._calendar.sameElse)?e.call(t,n):e},w.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(te).map(function(e){return\\\"MMMM\\\"===e||\\\"MM\\\"===e||\\\"DD\\\"===e||\\\"dddd\\\"===e?e.slice(1):e}).join(\\\"\\\"),this._longDateFormat[e])},w.invalidDate=function(){return this._invalidDate},w.ordinal=function(e){return this._ordinal.replace(\\\"%d\\\",e)},w.preparse=dn,w.postformat=dn,w.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return d(i)?i(e,t,n,s):i.replace(/%d/i,e)},w.pastFuture=function(e,t){return d(e=this._relativeTime[0<e?\\\"future\\\":\\\"past\\\"])?e(t):e.replace(/%s/i,t)},w.set=function(e){var t,n;for(n in e)c(e,n)&&(d(t=e[n])?this[n]=t:this[\\\"_\\\"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+\\\"|\\\"+/\\\\d{1,2}/.source)},w.eras=function(e,t){for(var n,s=this._eras||mt(\\\"en\\\")._eras,i=0,r=s.length;i<r;++i){switch(typeof s[i].since){case\\\"string\\\":n=f(s[i].since).startOf(\\\"day\\\"),s[i].since=n.valueOf();break}switch(typeof s[i].until){case\\\"undefined\\\":s[i].until=1/0;break;case\\\"string\\\":n=f(s[i].until).startOf(\\\"day\\\").valueOf(),s[i].until=n.valueOf();break}}return s},w.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),n)switch(t){case\\\"N\\\":case\\\"NN\\\":case\\\"NNN\\\":if(a===e)return u[s];break;case\\\"NNNN\\\":if(r===e)return u[s];break;case\\\"NNNNN\\\":if(o===e)return u[s];break}else if(0<=[r,a,o].indexOf(e))return u[s]},w.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},w.erasAbbrRegex=function(e){return c(this,\\\"_erasAbbrRegex\\\")||an.call(this),e?this._erasAbbrRegex:this._erasRegex},w.erasNameRegex=function(e){return c(this,\\\"_erasNameRegex\\\")||an.call(this),e?this._erasNameRegex:this._erasRegex},w.erasNarrowRegex=function(e){return c(this,\\\"_erasNarrowRegex\\\")||an.call(this),e?this._erasNarrowRegex:this._erasRegex},w.months=function(e,t){return e?(a(this._months)?this._months:this._months[(this._months.isFormat||He).test(t)?\\\"format\\\":\\\"standalone\\\"])[e.month()]:a(this._months)?this._months:this._months.standalone},w.monthsShort=function(e,t){return e?(a(this._monthsShort)?this._monthsShort:this._monthsShort[He.test(t)?\\\"format\\\":\\\"standalone\\\"])[e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},w.monthsParse=function(e,t,n){var s,i;if(this._monthsParseExact)return function(e,t,n){var s,i,r,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=l([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,\\\"\\\").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,\\\"\\\").toLocaleLowerCase();return n?\\\"MMM\\\"===t?-1!==(i=S.call(this._shortMonthsParse,e))?i:null:-1!==(i=S.call(this._longMonthsParse,e))?i:null:\\\"MMM\\\"===t?-1!==(i=S.call(this._shortMonthsParse,e))||-1!==(i=S.call(this._longMonthsParse,e))?i:null:-1!==(i=S.call(this._longMonthsParse,e))||-1!==(i=S.call(this._shortMonthsParse,e))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=l([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp(\\\"^\\\"+this.months(i,\\\"\\\").replace(\\\".\\\",\\\"\\\")+\\\"$\\\",\\\"i\\\"),this._shortMonthsParse[s]=new RegExp(\\\"^\\\"+this.monthsShort(i,\\\"\\\").replace(\\\".\\\",\\\"\\\")+\\\"$\\\",\\\"i\\\")),n||this._monthsParse[s]||(i=\\\"^\\\"+this.months(i,\\\"\\\")+\\\"|^\\\"+this.monthsShort(i,\\\"\\\"),this._monthsParse[s]=new RegExp(i.replace(\\\".\\\",\\\"\\\"),\\\"i\\\")),n&&\\\"MMMM\\\"===t&&this._longMonthsParse[s].test(e))return s;if(n&&\\\"MMM\\\"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},w.monthsRegex=function(e){return this._monthsParseExact?(c(this,\\\"_monthsRegex\\\")||Ee.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,\\\"_monthsRegex\\\")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},w.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,\\\"_monthsRegex\\\")||Ee.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,\\\"_monthsShortRegex\\\")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},w.week=function(e){return qe(e,this._week.dow,this._week.doy).week},w.firstDayOfYear=function(){return this._week.doy},w.firstDayOfWeek=function(){return this._week.dow},w.weekdays=function(e,t){return t=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?\\\"format\\\":\\\"standalone\\\"],!0===e?Be(t,this._week.dow):e?t[e.day()]:t},w.weekdaysMin=function(e){return!0===e?Be(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},w.weekdaysShort=function(e){return!0===e?Be(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},w.weekdaysParse=function(e,t,n){var s,i;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=l([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,\\\"\\\").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,\\\"\\\").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,\\\"\\\").toLocaleLowerCase();return n?\\\"dddd\\\"===t?-1!==(i=S.call(this._weekdaysParse,e))?i:null:\\\"ddd\\\"===t?-1!==(i=S.call(this._shortWeekdaysParse,e))?i:null:-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:\\\"dddd\\\"===t?-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._shortWeekdaysParse,e))||-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:\\\"ddd\\\"===t?-1!==(i=S.call(this._shortWeekdaysParse,e))||-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._minWeekdaysParse,e))?i:null:-1!==(i=S.call(this._minWeekdaysParse,e))||-1!==(i=S.call(this._weekdaysParse,e))||-1!==(i=S.call(this._shortWeekdaysParse,e))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=l([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp(\\\"^\\\"+this.weekdays(i,\\\"\\\").replace(\\\".\\\",\\\"\\\\\\\\.?\\\")+\\\"$\\\",\\\"i\\\"),this._shortWeekdaysParse[s]=new RegExp(\\\"^\\\"+this.weekdaysShort(i,\\\"\\\").replace(\\\".\\\",\\\"\\\\\\\\.?\\\")+\\\"$\\\",\\\"i\\\"),this._minWeekdaysParse[s]=new RegExp(\\\"^\\\"+this.weekdaysMin(i,\\\"\\\").replace(\\\".\\\",\\\"\\\\\\\\.?\\\")+\\\"$\\\",\\\"i\\\")),this._weekdaysParse[s]||(i=\\\"^\\\"+this.weekdays(i,\\\"\\\")+\\\"|^\\\"+this.weekdaysShort(i,\\\"\\\")+\\\"|^\\\"+this.weekdaysMin(i,\\\"\\\"),this._weekdaysParse[s]=new RegExp(i.replace(\\\".\\\",\\\"\\\"),\\\"i\\\")),n&&\\\"dddd\\\"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&\\\"ddd\\\"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&\\\"dd\\\"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},w.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,\\\"_weekdaysRegex\\\")||nt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,\\\"_weekdaysRegex\\\")||(this._weekdaysRegex=Ke),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},w.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,\\\"_weekdaysRegex\\\")||nt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,\\\"_weekdaysShortRegex\\\")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},w.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,\\\"_weekdaysRegex\\\")||nt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,\\\"_weekdaysMinRegex\\\")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},w.isPM=function(e){return\\\"p\\\"===(e+\\\"\\\").toLowerCase().charAt(0)},w.meridiem=function(e,t,n){return 11<e?n?\\\"pm\\\":\\\"PM\\\":n?\\\"am\\\":\\\"AM\\\"},ct(\\\"en\\\",{eras:[{since:\\\"0001-01-01\\\",until:1/0,offset:1,name:\\\"Anno Domini\\\",narrow:\\\"AD\\\",abbr:\\\"AD\\\"},{since:\\\"0000-12-31\\\",until:-1/0,offset:1,name:\\\"Before Christ\\\",narrow:\\\"BC\\\",abbr:\\\"BC\\\"}],dayOfMonthOrdinalParse:/\\\\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===g(e%100/10)?\\\"th\\\":1==t?\\\"st\\\":2==t?\\\"nd\\\":3==t?\\\"rd\\\":\\\"th\\\")}}),f.lang=e(\\\"moment.lang is deprecated. Use moment.locale instead.\\\",ct),f.langData=e(\\\"moment.langData is deprecated. Use moment.localeData instead.\\\",mt);var _n=Math.abs;function yn(e,t,n,s){t=C(t,n);return e._milliseconds+=s*t._milliseconds,e._days+=s*t._days,e._months+=s*t._months,e._bubble()}function gn(e){return e<0?Math.floor(e):Math.ceil(e)}function wn(e){return 4800*e/146097}function pn(e){return 146097*e/4800}function kn(e){return function(){return this.as(e)}}pe=kn(\\\"ms\\\"),me=kn(\\\"s\\\"),Ce=kn(\\\"m\\\"),we=kn(\\\"h\\\"),ge=kn(\\\"d\\\"),Je=kn(\\\"w\\\"),k=kn(\\\"M\\\"),_e=kn(\\\"Q\\\"),ve=kn(\\\"y\\\");function vn(e){return function(){return this.isValid()?this._data[e]:NaN}}var ye=vn(\\\"milliseconds\\\"),ke=vn(\\\"seconds\\\"),Ie=vn(\\\"minutes\\\"),w=vn(\\\"hours\\\"),Mn=vn(\\\"days\\\"),Dn=vn(\\\"months\\\"),Sn=vn(\\\"years\\\");var Yn=Math.round,On={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function bn(e,t,n,s){var i=C(e).abs(),r=Yn(i.as(\\\"s\\\")),a=Yn(i.as(\\\"m\\\")),o=Yn(i.as(\\\"h\\\")),u=Yn(i.as(\\\"d\\\")),l=Yn(i.as(\\\"M\\\")),h=Yn(i.as(\\\"w\\\")),i=Yn(i.as(\\\"y\\\")),r=(r<=n.ss?[\\\"s\\\",r]:r<n.s&&[\\\"ss\\\",r])||a<=1&&[\\\"m\\\"]||a<n.m&&[\\\"mm\\\",a]||o<=1&&[\\\"h\\\"]||o<n.h&&[\\\"hh\\\",o]||u<=1&&[\\\"d\\\"]||u<n.d&&[\\\"dd\\\",u];return(r=(r=null!=n.w?r||h<=1&&[\\\"w\\\"]||h<n.w&&[\\\"ww\\\",h]:r)||l<=1&&[\\\"M\\\"]||l<n.M&&[\\\"MM\\\",l]||i<=1&&[\\\"y\\\"]||[\\\"yy\\\",i])[2]=t,r[3]=0<+e,r[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,r)}var xn=Math.abs;function Tn(e){return(0<e)-(e<0)||+e}function Nn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o=xn(this._milliseconds)/1e3,u=xn(this._days),l=xn(this._months),h=this.asSeconds();return h?(e=y(o/60),t=y(e/60),o%=60,e%=60,n=y(l/12),l%=12,s=o?o.toFixed(3).replace(/\\\\.?0+$/,\\\"\\\"):\\\"\\\",i=Tn(this._months)!==Tn(h)?\\\"-\\\":\\\"\\\",r=Tn(this._days)!==Tn(h)?\\\"-\\\":\\\"\\\",a=Tn(this._milliseconds)!==Tn(h)?\\\"-\\\":\\\"\\\",(h<0?\\\"-\\\":\\\"\\\")+\\\"P\\\"+(n?i+n+\\\"Y\\\":\\\"\\\")+(l?i+l+\\\"M\\\":\\\"\\\")+(u?r+u+\\\"D\\\":\\\"\\\")+(t||e||o?\\\"T\\\":\\\"\\\")+(t?a+t+\\\"H\\\":\\\"\\\")+(e?a+e+\\\"M\\\":\\\"\\\")+(o?a+s+\\\"S\\\":\\\"\\\")):\\\"P0D\\\"}var U=Ct.prototype;return U.isValid=function(){return this._isValid},U.abs=function(){var e=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),e.milliseconds=_n(e.milliseconds),e.seconds=_n(e.seconds),e.minutes=_n(e.minutes),e.hours=_n(e.hours),e.months=_n(e.months),e.years=_n(e.years),this},U.add=function(e,t){return yn(this,e,t,1)},U.subtract=function(e,t){return yn(this,e,t,-1)},U.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if(\\\"month\\\"===(e=_(e))||\\\"quarter\\\"===e||\\\"year\\\"===e)switch(t=this._days+s/864e5,n=this._months+wn(t),e){case\\\"month\\\":return n;case\\\"quarter\\\":return n/3;case\\\"year\\\":return n/12}else switch(t=this._days+Math.round(pn(this._months)),e){case\\\"week\\\":return t/7+s/6048e5;case\\\"day\\\":return t+s/864e5;case\\\"hour\\\":return 24*t+s/36e5;case\\\"minute\\\":return 1440*t+s/6e4;case\\\"second\\\":return 86400*t+s/1e3;case\\\"millisecond\\\":return Math.floor(864e5*t)+s;default:throw new Error(\\\"Unknown unit \\\"+e)}},U.asMilliseconds=pe,U.asSeconds=me,U.asMinutes=Ce,U.asHours=we,U.asDays=ge,U.asWeeks=Je,U.asMonths=k,U.asQuarters=_e,U.asYears=ve,U.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12):NaN},U._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*gn(pn(n)+t),n=t=0),s.milliseconds=e%1e3,e=y(e/1e3),s.seconds=e%60,e=y(e/60),s.minutes=e%60,e=y(e/60),s.hours=e%24,t+=y(e/24),n+=e=y(wn(t)),t-=gn(pn(e)),e=y(n/12),n%=12,s.days=t,s.months=n,s.years=e,this},U.clone=function(){return C(this)},U.get=function(e){return e=_(e),this.isValid()?this[e+\\\"s\\\"]():NaN},U.milliseconds=ye,U.seconds=ke,U.minutes=Ie,U.hours=w,U.days=Mn,U.weeks=function(){return y(this.days()/7)},U.months=Dn,U.years=Sn,U.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,s=On;return\\\"object\\\"==typeof e&&(t=e,e=!1),\\\"boolean\\\"==typeof e&&(n=e),\\\"object\\\"==typeof t&&(s=Object.assign({},On,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),e=this.localeData(),t=bn(this,!n,s,e),n&&(t=e.pastFuture(+this,t)),e.postformat(t)},U.toISOString=Nn,U.toString=Nn,U.toJSON=Nn,U.locale=Xt,U.localeData=Kt,U.toIsoString=e(\\\"toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)\\\",Nn),U.lang=Xe,s(\\\"X\\\",0,0,\\\"unix\\\"),s(\\\"x\\\",0,0,\\\"valueOf\\\"),v(\\\"x\\\",De),v(\\\"X\\\",/[+-]?\\\\d+(\\\\.\\\\d{1,3})?/),D(\\\"X\\\",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),D(\\\"x\\\",function(e,t,n){n._d=new Date(g(e))}),f.version=\\\"2.29.4\\\",H=W,f.fn=i,f.min=function(){return Rt(\\\"isBefore\\\",[].slice.call(arguments,0))},f.max=function(){return Rt(\\\"isAfter\\\",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=l,f.unix=function(e){return W(1e3*e)},f.months=function(e,t){return fn(e,t,\\\"months\\\")},f.isDate=V,f.locale=ct,f.invalid=I,f.duration=C,f.isMoment=h,f.weekdays=function(e,t,n){return mn(e,t,n,\\\"weekdays\\\")},f.parseZone=function(){return W.apply(null,arguments).parseZone()},f.localeData=mt,f.isDuration=Ut,f.monthsShort=function(e,t){return fn(e,t,\\\"monthsShort\\\")},f.weekdaysMin=function(e,t,n){return mn(e,t,n,\\\"weekdaysMin\\\")},f.defineLocale=ft,f.updateLocale=function(e,t){var n,s;return null!=t?(s=ot,null!=R[e]&&null!=R[e].parentLocale?R[e].set(X(R[e]._config,t)):(t=X(s=null!=(n=dt(e))?n._config:s,t),null==n&&(t.abbr=e),(s=new K(t)).parentLocale=R[e],R[e]=s),ct(e)):null!=R[e]&&(null!=R[e].parentLocale?(R[e]=R[e].parentLocale,e===ct()&&ct(e)):null!=R[e]&&delete R[e]),R[e]},f.locales=function(){return ee(R)},f.weekdaysShort=function(e,t,n){return mn(e,t,n,\\\"weekdaysShort\\\")},f.normalizeUnits=_,f.relativeTimeRounding=function(e){return void 0===e?Yn:\\\"function\\\"==typeof e&&(Yn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==On[e]&&(void 0===t?On[e]:(On[e]=t,\\\"s\\\"===e&&(On.ss=t-1),!0))},f.calendarFormat=function(e,t){return(e=e.diff(t,\\\"days\\\",!0))<-6?\\\"sameElse\\\":e<-1?\\\"lastWeek\\\":e<0?\\\"lastDay\\\":e<1?\\\"sameDay\\\":e<2?\\\"nextDay\\\":e<7?\\\"nextWeek\\\":\\\"sameElse\\\"},f.prototype=i,f.HTML5_FMT={DATETIME_LOCAL:\\\"YYYY-MM-DDTHH:mm\\\",DATETIME_LOCAL_SECONDS:\\\"YYYY-MM-DDTHH:mm:ss\\\",DATETIME_LOCAL_MS:\\\"YYYY-MM-DDTHH:mm:ss.SSS\\\",DATE:\\\"YYYY-MM-DD\\\",TIME:\\\"HH:mm\\\",TIME_SECONDS:\\\"HH:mm:ss\\\",TIME_MS:\\\"HH:mm:ss.SSS\\\",WEEK:\\\"GGGG-[W]WW\\\",MONTH:\\\"YYYY-MM\\\"},f});\\n//# sourceMappingURL=moment.min.js.map\"","module.exports = \"/* Copyright (c) 2010-2013 Marcus Westin */\\n\\\"use strict\\\";(function(e,t){typeof define==\\\"function\\\"&&define.amd?define([],t):typeof exports==\\\"object\\\"?module.exports=t():e.store=t()})(this,function(){function o(){try{return r in t&&t[r]}catch(e){return!1}}var e={},t=typeof window!=\\\"undefined\\\"?window:global,n=t.document,r=\\\"localStorage\\\",i=\\\"script\\\",s;e.disabled=!1,e.version=\\\"1.3.20\\\",e.set=function(e,t){},e.get=function(e,t){},e.has=function(t){return e.get(t)!==undefined},e.remove=function(e){},e.clear=function(){},e.transact=function(t,n,r){r==null&&(r=n,n=null),n==null&&(n={});var i=e.get(t,n);r(i),e.set(t,i)},e.getAll=function(){},e.forEach=function(){},e.serialize=function(e){return JSON.stringify(e)},e.deserialize=function(e){if(typeof e!=\\\"string\\\")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(o())s=t[r],e.set=function(t,n){return n===undefined?e.remove(t):(s.setItem(t,e.serialize(n)),n)},e.get=function(t,n){var r=e.deserialize(s.getItem(t));return r===undefined?n:r},e.remove=function(e){s.removeItem(e)},e.clear=function(){s.clear()},e.getAll=function(){var t={};return e.forEach(function(e,n){t[e]=n}),t},e.forEach=function(t){for(var n=0;n<s.length;n++){var r=s.key(n);t(r,e.get(r))}};else if(n&&n.documentElement.addBehavior){var u,a;try{a=new ActiveXObject(\\\"htmlfile\\\"),a.open(),a.write(\\\"<\\\"+i+\\\">document.w=window</\\\"+i+'><iframe src=\\\"/favicon.ico\\\"></iframe>'),a.close(),u=a.w.frames[0].document,s=u.createElement(\\\"div\\\")}catch(f){s=n.createElement(\\\"div\\\"),u=n.body}var l=function(t){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(s),u.appendChild(s),s.addBehavior(\\\"#default#userData\\\"),s.load(r);var i=t.apply(e,n);return u.removeChild(s),i}},c=new RegExp(\\\"[!\\\\\\\"#$%&'()*+,/\\\\\\\\\\\\\\\\:;<=>?@[\\\\\\\\]^`{|}~]\\\",\\\"g\\\"),h=function(e){return e.replace(/^d/,\\\"___$&\\\").replace(c,\\\"___\\\")};e.set=l(function(t,n,i){return n=h(n),i===undefined?e.remove(n):(t.setAttribute(n,e.serialize(i)),t.save(r),i)}),e.get=l(function(t,n,r){n=h(n);var i=e.deserialize(t.getAttribute(n));return i===undefined?r:i}),e.remove=l(function(e,t){t=h(t),e.removeAttribute(t),e.save(r)}),e.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(r)}),e.getAll=function(t){var n={};return e.forEach(function(e,t){n[e]=t}),n},e.forEach=l(function(t,n){var r=t.XMLDocument.documentElement.attributes;for(var i=0,s;s=r[i];++i)n(s.name,e.deserialize(t.getAttribute(s.name)))})}try{var p=\\\"__storejs__\\\";e.set(p,p),e.get(p)!=p&&(e.disabled=!0),e.remove(p)}catch(f){e.disabled=!0}return e.enabled=!e.disabled,e});\"","module.exports = \"!function(n,r){\\\"object\\\"==typeof exports&&\\\"undefined\\\"!=typeof module?module.exports=r():\\\"function\\\"==typeof define&&define.amd?define(\\\"underscore\\\",r):(n=\\\"undefined\\\"!=typeof globalThis?globalThis:n||self,function(){var t=n._,e=n._=r();e.noConflict=function(){return n._=t,e}}())}(this,(function(){\\n//     Underscore.js 1.13.6\\n//     https://underscorejs.org\\n//     (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and Investigative Reporters & Editors\\n//     Underscore may be freely distributed under the MIT license.\\nvar n=\\\"1.13.6\\\",r=\\\"object\\\"==typeof self&&self.self===self&&self||\\\"object\\\"==typeof global&&global.global===global&&global||Function(\\\"return this\\\")()||{},t=Array.prototype,e=Object.prototype,u=\\\"undefined\\\"!=typeof Symbol?Symbol.prototype:null,o=t.push,i=t.slice,a=e.toString,f=e.hasOwnProperty,c=\\\"undefined\\\"!=typeof ArrayBuffer,l=\\\"undefined\\\"!=typeof DataView,s=Array.isArray,p=Object.keys,v=Object.create,h=c&&ArrayBuffer.isView,y=isNaN,d=isFinite,g=!{toString:null}.propertyIsEnumerable(\\\"toString\\\"),b=[\\\"valueOf\\\",\\\"isPrototypeOf\\\",\\\"toString\\\",\\\"propertyIsEnumerable\\\",\\\"hasOwnProperty\\\",\\\"toLocaleString\\\"],m=Math.pow(2,53)-1;function j(n,r){return r=null==r?n.length-1:+r,function(){for(var t=Math.max(arguments.length-r,0),e=Array(t),u=0;u<t;u++)e[u]=arguments[u+r];switch(r){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var o=Array(r+1);for(u=0;u<r;u++)o[u]=arguments[u];return o[r]=e,n.apply(this,o)}}function _(n){var r=typeof n;return\\\"function\\\"===r||\\\"object\\\"===r&&!!n}function w(n){return void 0===n}function A(n){return!0===n||!1===n||\\\"[object Boolean]\\\"===a.call(n)}function x(n){var r=\\\"[object \\\"+n+\\\"]\\\";return function(n){return a.call(n)===r}}var S=x(\\\"String\\\"),O=x(\\\"Number\\\"),M=x(\\\"Date\\\"),E=x(\\\"RegExp\\\"),B=x(\\\"Error\\\"),N=x(\\\"Symbol\\\"),I=x(\\\"ArrayBuffer\\\"),T=x(\\\"Function\\\"),k=r.document&&r.document.childNodes;\\\"function\\\"!=typeof/./&&\\\"object\\\"!=typeof Int8Array&&\\\"function\\\"!=typeof k&&(T=function(n){return\\\"function\\\"==typeof n||!1});var D=T,R=x(\\\"Object\\\"),F=l&&R(new DataView(new ArrayBuffer(8))),V=\\\"undefined\\\"!=typeof Map&&R(new Map),P=x(\\\"DataView\\\");var q=F?function(n){return null!=n&&D(n.getInt8)&&I(n.buffer)}:P,U=s||x(\\\"Array\\\");function W(n,r){return null!=n&&f.call(n,r)}var z=x(\\\"Arguments\\\");!function(){z(arguments)||(z=function(n){return W(n,\\\"callee\\\")})}();var L=z;function $(n){return O(n)&&y(n)}function C(n){return function(){return n}}function K(n){return function(r){var t=n(r);return\\\"number\\\"==typeof t&&t>=0&&t<=m}}function J(n){return function(r){return null==r?void 0:r[n]}}var G=J(\\\"byteLength\\\"),H=K(G),Q=/\\\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\\\]/;var X=c?function(n){return h?h(n)&&!q(n):H(n)&&Q.test(a.call(n))}:C(!1),Y=J(\\\"length\\\");function Z(n,r){r=function(n){for(var r={},t=n.length,e=0;e<t;++e)r[n[e]]=!0;return{contains:function(n){return!0===r[n]},push:function(t){return r[t]=!0,n.push(t)}}}(r);var t=b.length,u=n.constructor,o=D(u)&&u.prototype||e,i=\\\"constructor\\\";for(W(n,i)&&!r.contains(i)&&r.push(i);t--;)(i=b[t])in n&&n[i]!==o[i]&&!r.contains(i)&&r.push(i)}function nn(n){if(!_(n))return[];if(p)return p(n);var r=[];for(var t in n)W(n,t)&&r.push(t);return g&&Z(n,r),r}function rn(n,r){var t=nn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function tn(n){return n instanceof tn?n:this instanceof tn?void(this._wrapped=n):new tn(n)}function en(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,G(n))}tn.VERSION=n,tn.prototype.value=function(){return this._wrapped},tn.prototype.valueOf=tn.prototype.toJSON=tn.prototype.value,tn.prototype.toString=function(){return String(this._wrapped)};var un=\\\"[object DataView]\\\";function on(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var o=typeof n;return(\\\"function\\\"===o||\\\"object\\\"===o||\\\"object\\\"==typeof r)&&function n(r,t,e,o){r instanceof tn&&(r=r._wrapped);t instanceof tn&&(t=t._wrapped);var i=a.call(r);if(i!==a.call(t))return!1;if(F&&\\\"[object Object]\\\"==i&&q(r)){if(!q(t))return!1;i=un}switch(i){case\\\"[object RegExp]\\\":case\\\"[object String]\\\":return\\\"\\\"+r==\\\"\\\"+t;case\\\"[object Number]\\\":return+r!=+r?+t!=+t:0==+r?1/+r==1/t:+r==+t;case\\\"[object Date]\\\":case\\\"[object Boolean]\\\":return+r==+t;case\\\"[object Symbol]\\\":return u.valueOf.call(r)===u.valueOf.call(t);case\\\"[object ArrayBuffer]\\\":case un:return n(en(r),en(t),e,o)}var f=\\\"[object Array]\\\"===i;if(!f&&X(r)){if(G(r)!==G(t))return!1;if(r.buffer===t.buffer&&r.byteOffset===t.byteOffset)return!0;f=!0}if(!f){if(\\\"object\\\"!=typeof r||\\\"object\\\"!=typeof t)return!1;var c=r.constructor,l=t.constructor;if(c!==l&&!(D(c)&&c instanceof c&&D(l)&&l instanceof l)&&\\\"constructor\\\"in r&&\\\"constructor\\\"in t)return!1}o=o||[];var s=(e=e||[]).length;for(;s--;)if(e[s]===r)return o[s]===t;if(e.push(r),o.push(t),f){if((s=r.length)!==t.length)return!1;for(;s--;)if(!on(r[s],t[s],e,o))return!1}else{var p,v=nn(r);if(s=v.length,nn(t).length!==s)return!1;for(;s--;)if(p=v[s],!W(t,p)||!on(r[p],t[p],e,o))return!1}return e.pop(),o.pop(),!0}(n,r,t,e)}function an(n){if(!_(n))return[];var r=[];for(var t in n)r.push(t);return g&&Z(n,r),r}function fn(n){var r=Y(n);return function(t){if(null==t)return!1;var e=an(t);if(Y(e))return!1;for(var u=0;u<r;u++)if(!D(t[n[u]]))return!1;return n!==hn||!D(t[cn])}}var cn=\\\"forEach\\\",ln=\\\"has\\\",sn=[\\\"clear\\\",\\\"delete\\\"],pn=[\\\"get\\\",ln,\\\"set\\\"],vn=sn.concat(cn,pn),hn=sn.concat(pn),yn=[\\\"add\\\"].concat(sn,cn,ln),dn=V?fn(vn):x(\\\"Map\\\"),gn=V?fn(hn):x(\\\"WeakMap\\\"),bn=V?fn(yn):x(\\\"Set\\\"),mn=x(\\\"WeakSet\\\");function jn(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function _n(n){for(var r={},t=nn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function wn(n){var r=[];for(var t in n)D(n[t])&&r.push(t);return r.sort()}function An(n,r){return function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var u=1;u<e;u++)for(var o=arguments[u],i=n(o),a=i.length,f=0;f<a;f++){var c=i[f];r&&void 0!==t[c]||(t[c]=o[c])}return t}}var xn=An(an),Sn=An(nn),On=An(an,!0);function Mn(n){if(!_(n))return{};if(v)return v(n);var r=function(){};r.prototype=n;var t=new r;return r.prototype=null,t}function En(n){return U(n)?n:[n]}function Bn(n){return tn.toPath(n)}function Nn(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}function In(n,r,t){var e=Nn(n,Bn(r));return w(e)?t:e}function Tn(n){return n}function kn(n){return n=Sn({},n),function(r){return rn(r,n)}}function Dn(n){return n=Bn(n),function(r){return Nn(r,n)}}function Rn(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return function(){return n.apply(r,arguments)}}function Fn(n,r,t){return null==n?Tn:D(n)?Rn(n,r,t):_(n)&&!U(n)?kn(n):Dn(n)}function Vn(n,r){return Fn(n,r,1/0)}function Pn(n,r,t){return tn.iteratee!==Vn?tn.iteratee(n,r):Fn(n,r,t)}function qn(){}function Un(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}tn.toPath=En,tn.iteratee=Vn;var Wn=Date.now||function(){return(new Date).getTime()};function zn(n){var r=function(r){return n[r]},t=\\\"(?:\\\"+nn(n).join(\\\"|\\\")+\\\")\\\",e=RegExp(t),u=RegExp(t,\\\"g\\\");return function(n){return n=null==n?\\\"\\\":\\\"\\\"+n,e.test(n)?n.replace(u,r):n}}var Ln={\\\"&\\\":\\\"&amp;\\\",\\\"<\\\":\\\"&lt;\\\",\\\">\\\":\\\"&gt;\\\",'\\\"':\\\"&quot;\\\",\\\"'\\\":\\\"&#x27;\\\",\\\"`\\\":\\\"&#x60;\\\"},$n=zn(Ln),Cn=zn(_n(Ln)),Kn=tn.templateSettings={evaluate:/<%([\\\\s\\\\S]+?)%>/g,interpolate:/<%=([\\\\s\\\\S]+?)%>/g,escape:/<%-([\\\\s\\\\S]+?)%>/g},Jn=/(.)^/,Gn={\\\"'\\\":\\\"'\\\",\\\"\\\\\\\\\\\":\\\"\\\\\\\\\\\",\\\"\\\\r\\\":\\\"r\\\",\\\"\\\\n\\\":\\\"n\\\",\\\"\\\\u2028\\\":\\\"u2028\\\",\\\"\\\\u2029\\\":\\\"u2029\\\"},Hn=/\\\\\\\\|'|\\\\r|\\\\n|\\\\u2028|\\\\u2029/g;function Qn(n){return\\\"\\\\\\\\\\\"+Gn[n]}var Xn=/^\\\\s*(\\\\w|\\\\$)+\\\\s*$/;var Yn=0;function Zn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=Mn(n.prototype),i=n.apply(o,u);return _(i)?i:o}var nr=j((function(n,r){var t=nr.placeholder,e=function(){for(var u=0,o=r.length,i=Array(o),a=0;a<o;a++)i[a]=r[a]===t?arguments[u++]:r[a];for(;u<arguments.length;)i.push(arguments[u++]);return Zn(n,e,this,this,i)};return e}));nr.placeholder=tn;var rr=j((function(n,r,t){if(!D(n))throw new TypeError(\\\"Bind must be called on a function\\\");var e=j((function(u){return Zn(n,e,r,this,t.concat(u))}));return e})),tr=K(Y);function er(n,r,t,e){if(e=e||[],r||0===r){if(r<=0)return e.concat(n)}else r=1/0;for(var u=e.length,o=0,i=Y(n);o<i;o++){var a=n[o];if(tr(a)&&(U(a)||L(a)))if(r>1)er(a,r-1,t,e),u=e.length;else for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else t||(e[u++]=a)}return e}var ur=j((function(n,r){var t=(r=er(r,!1,!1)).length;if(t<1)throw new Error(\\\"bindAll must be passed function names\\\");for(;t--;){var e=r[t];n[e]=rr(n[e],n)}return n}));var or=j((function(n,r,t){return setTimeout((function(){return n.apply(null,t)}),r)})),ir=nr(or,tn,1);function ar(n){return function(){return!n.apply(this,arguments)}}function fr(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var cr=nr(fr,2);function lr(n,r,t){r=Pn(r,t);for(var e,u=nn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function sr(n){return function(r,t,e){t=Pn(t,e);for(var u=Y(r),o=n>0?0:u-1;o>=0&&o<u;o+=n)if(t(r[o],o,r))return o;return-1}}var pr=sr(1),vr=sr(-1);function hr(n,r,t,e){for(var u=(t=Pn(t,e,1))(r),o=0,i=Y(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function yr(n,r,t){return function(e,u,o){var a=0,f=Y(e);if(\\\"number\\\"==typeof o)n>0?a=o>=0?o:Math.max(o+f,a):f=o>=0?Math.min(o+1,f):o+f+1;else if(t&&o&&f)return e[o=t(e,u)]===u?o:-1;if(u!=u)return(o=r(i.call(e,a,f),$))>=0?o+a:-1;for(o=n>0?a:f-1;o>=0&&o<f;o+=n)if(e[o]===u)return o;return-1}}var dr=yr(1,pr,hr),gr=yr(-1,vr);function br(n,r,t){var e=(tr(n)?pr:lr)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function mr(n,r,t){var e,u;if(r=Rn(r,t),tr(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var o=nn(n);for(e=0,u=o.length;e<u;e++)r(n[o[e]],o[e],n)}return n}function jr(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function _r(n){var r=function(r,t,e,u){var o=!tr(r)&&nn(r),i=(o||r).length,a=n>0?0:i-1;for(u||(e=r[o?o[a]:a],a+=n);a>=0&&a<i;a+=n){var f=o?o[a]:a;e=t(e,r[f],f,r)}return e};return function(n,t,e,u){var o=arguments.length>=3;return r(n,Rn(t,u,4),e,o)}}var wr=_r(1),Ar=_r(-1);function xr(n,r,t){var e=[];return r=Pn(r,t),mr(n,(function(n,t,u){r(n,t,u)&&e.push(n)})),e}function Sr(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function Or(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function Mr(n,r,t,e){return tr(n)||(n=jn(n)),(\\\"number\\\"!=typeof t||e)&&(t=0),dr(n,r,t)>=0}var Er=j((function(n,r,t){var e,u;return D(r)?u=r:(r=Bn(r),e=r.slice(0,-1),r=r[r.length-1]),jr(n,(function(n){var o=u;if(!o){if(e&&e.length&&(n=Nn(n,e)),null==n)return;o=n[r]}return null==o?o:o.apply(n,t)}))}));function Br(n,r){return jr(n,Dn(r))}function Nr(n,r,t){var e,u,o=-1/0,i=-1/0;if(null==r||\\\"number\\\"==typeof r&&\\\"object\\\"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e>o&&(o=e);else r=Pn(r,t),mr(n,(function(n,t,e){((u=r(n,t,e))>i||u===-1/0&&o===-1/0)&&(o=n,i=u)}));return o}var Ir=/[^\\\\ud800-\\\\udfff]|[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]|[\\\\ud800-\\\\udfff]/g;function Tr(n){return n?U(n)?i.call(n):S(n)?n.match(Ir):tr(n)?jr(n,Tn):jn(n):[]}function kr(n,r,t){if(null==r||t)return tr(n)||(n=jn(n)),n[Un(n.length-1)];var e=Tr(n),u=Y(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=Un(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function Dr(n,r){return function(t,e,u){var o=r?[[],[]]:{};return e=Pn(e,u),mr(t,(function(r,u){var i=e(r,u,t);n(o,r,i)})),o}}var Rr=Dr((function(n,r,t){W(n,t)?n[t].push(r):n[t]=[r]})),Fr=Dr((function(n,r,t){n[t]=r})),Vr=Dr((function(n,r,t){W(n,t)?n[t]++:n[t]=1})),Pr=Dr((function(n,r,t){n[t?0:1].push(r)}),!0);function qr(n,r,t){return r in t}var Ur=j((function(n,r){var t={},e=r[0];if(null==n)return t;D(e)?(r.length>1&&(e=Rn(e,r[1])),r=an(n)):(e=qr,r=er(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t})),Wr=j((function(n,r){var t,e=r[0];return D(e)?(e=ar(e),r.length>1&&(t=r[1])):(r=jr(er(r,!1,!1),String),e=function(n,t){return!Mr(r,t)}),Ur(n,e,t)}));function zr(n,r,t){return i.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function Lr(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[0]:zr(n,n.length-r)}function $r(n,r,t){return i.call(n,null==r||t?1:r)}var Cr=j((function(n,r){return r=er(r,!0,!0),xr(n,(function(n){return!Mr(r,n)}))})),Kr=j((function(n,r){return Cr(n,r)}));function Jr(n,r,t,e){A(r)||(e=t,t=r,r=!1),null!=t&&(t=Pn(t,e));for(var u=[],o=[],i=0,a=Y(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?Mr(o,c)||(o.push(c),u.push(f)):Mr(u,f)||u.push(f)}return u}var Gr=j((function(n){return Jr(er(n,!0,!0))}));function Hr(n){for(var r=n&&Nr(n,Y).length||0,t=Array(r),e=0;e<r;e++)t[e]=Br(n,e);return t}var Qr=j(Hr);function Xr(n,r){return n._chain?tn(r).chain():r}function Yr(n){return mr(wn(n),(function(r){var t=tn[r]=n[r];tn.prototype[r]=function(){var n=[this._wrapped];return o.apply(n,arguments),Xr(this,t.apply(tn,n))}})),tn}mr([\\\"pop\\\",\\\"push\\\",\\\"reverse\\\",\\\"shift\\\",\\\"sort\\\",\\\"splice\\\",\\\"unshift\\\"],(function(n){var r=t[n];tn.prototype[n]=function(){var t=this._wrapped;return null!=t&&(r.apply(t,arguments),\\\"shift\\\"!==n&&\\\"splice\\\"!==n||0!==t.length||delete t[0]),Xr(this,t)}})),mr([\\\"concat\\\",\\\"join\\\",\\\"slice\\\"],(function(n){var r=t[n];tn.prototype[n]=function(){var n=this._wrapped;return null!=n&&(n=r.apply(n,arguments)),Xr(this,n)}}));var Zr=Yr({__proto__:null,VERSION:n,restArguments:j,isObject:_,isNull:function(n){return null===n},isUndefined:w,isBoolean:A,isElement:function(n){return!(!n||1!==n.nodeType)},isString:S,isNumber:O,isDate:M,isRegExp:E,isError:B,isSymbol:N,isArrayBuffer:I,isDataView:q,isArray:U,isFunction:D,isArguments:L,isFinite:function(n){return!N(n)&&d(n)&&!isNaN(parseFloat(n))},isNaN:$,isTypedArray:X,isEmpty:function(n){if(null==n)return!0;var r=Y(n);return\\\"number\\\"==typeof r&&(U(n)||S(n)||L(n))?0===r:0===Y(nn(n))},isMatch:rn,isEqual:function(n,r){return on(n,r)},isMap:dn,isWeakMap:gn,isSet:bn,isWeakSet:mn,keys:nn,allKeys:an,values:jn,pairs:function(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:_n,functions:wn,methods:wn,extend:xn,extendOwn:Sn,assign:Sn,defaults:On,create:function(n,r){var t=Mn(n);return r&&Sn(t,r),t},clone:function(n){return _(n)?U(n)?n.slice():xn({},n):n},tap:function(n,r){return r(n),n},get:In,has:function(n,r){for(var t=(r=Bn(r)).length,e=0;e<t;e++){var u=r[e];if(!W(n,u))return!1;n=n[u]}return!!t},mapObject:function(n,r,t){r=Pn(r,t);for(var e=nn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},identity:Tn,constant:C,noop:qn,toPath:En,property:Dn,propertyOf:function(n){return null==n?qn:function(r){return In(n,r)}},matcher:kn,matches:kn,times:function(n,r,t){var e=Array(Math.max(0,n));r=Rn(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:Un,now:Wn,escape:$n,unescape:Cn,templateSettings:Kn,template:function(n,r,t){!r&&t&&(r=t),r=On({},r,tn.templateSettings);var e=RegExp([(r.escape||Jn).source,(r.interpolate||Jn).source,(r.evaluate||Jn).source].join(\\\"|\\\")+\\\"|$\\\",\\\"g\\\"),u=0,o=\\\"__p+='\\\";n.replace(e,(function(r,t,e,i,a){return o+=n.slice(u,a).replace(Hn,Qn),u=a+r.length,t?o+=\\\"'+\\\\n((__t=(\\\"+t+\\\"))==null?'':_.escape(__t))+\\\\n'\\\":e?o+=\\\"'+\\\\n((__t=(\\\"+e+\\\"))==null?'':__t)+\\\\n'\\\":i&&(o+=\\\"';\\\\n\\\"+i+\\\"\\\\n__p+='\\\"),r})),o+=\\\"';\\\\n\\\";var i,a=r.variable;if(a){if(!Xn.test(a))throw new Error(\\\"variable is not a bare identifier: \\\"+a)}else o=\\\"with(obj||{}){\\\\n\\\"+o+\\\"}\\\\n\\\",a=\\\"obj\\\";o=\\\"var __t,__p='',__j=Array.prototype.join,\\\"+\\\"print=function(){__p+=__j.call(arguments,'');};\\\\n\\\"+o+\\\"return __p;\\\\n\\\";try{i=new Function(a,\\\"_\\\",o)}catch(n){throw n.source=o,n}var f=function(n){return i.call(this,n,tn)};return f.source=\\\"function(\\\"+a+\\\"){\\\\n\\\"+o+\\\"}\\\",f},result:function(n,r,t){var e=(r=Bn(r)).length;if(!e)return D(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=D(o)?o.call(n):o}return n},uniqueId:function(n){var r=++Yn+\\\"\\\";return n?n+r:r},chain:function(n){var r=tn(n);return r._chain=!0,r},iteratee:Vn,partial:nr,bind:rr,bindAll:ur,memoize:function(n,r){var t=function(e){var u=t.cache,o=\\\"\\\"+(r?r.apply(this,arguments):e);return W(u,o)||(u[o]=n.apply(this,arguments)),u[o]};return t.cache={},t},delay:or,defer:ir,throttle:function(n,r,t){var e,u,o,i,a=0;t||(t={});var f=function(){a=!1===t.leading?0:Wn(),e=null,i=n.apply(u,o),e||(u=o=null)},c=function(){var c=Wn();a||!1!==t.leading||(a=c);var l=r-(c-a);return u=this,o=arguments,l<=0||l>r?(e&&(clearTimeout(e),e=null),a=c,i=n.apply(u,o),e||(u=o=null)):e||!1===t.trailing||(e=setTimeout(f,l)),i};return c.cancel=function(){clearTimeout(e),a=0,e=u=o=null},c},debounce:function(n,r,t){var e,u,o,i,a,f=function(){var c=Wn()-u;r>c?e=setTimeout(f,r-c):(e=null,t||(i=n.apply(a,o)),e||(o=a=null))},c=j((function(c){return a=this,o=c,u=Wn(),e||(e=setTimeout(f,r),t&&(i=n.apply(a,o))),i}));return c.cancel=function(){clearTimeout(e),e=o=a=null},c},wrap:function(n,r){return nr(r,n)},negate:ar,compose:function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:fr,once:cr,findKey:lr,findIndex:pr,findLastIndex:vr,sortedIndex:hr,indexOf:dr,lastIndexOf:gr,find:br,detect:br,findWhere:function(n,r){return br(n,kn(r))},each:mr,forEach:mr,map:jr,collect:jr,reduce:wr,foldl:wr,inject:wr,reduceRight:Ar,foldr:Ar,filter:xr,select:xr,reject:function(n,r,t){return xr(n,ar(Pn(r)),t)},every:Sr,all:Sr,some:Or,any:Or,contains:Mr,includes:Mr,include:Mr,invoke:Er,pluck:Br,where:function(n,r){return xr(n,kn(r))},max:Nr,min:function(n,r,t){var e,u,o=1/0,i=1/0;if(null==r||\\\"number\\\"==typeof r&&\\\"object\\\"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e<o&&(o=e);else r=Pn(r,t),mr(n,(function(n,t,e){((u=r(n,t,e))<i||u===1/0&&o===1/0)&&(o=n,i=u)}));return o},shuffle:function(n){return kr(n,1/0)},sample:kr,sortBy:function(n,r,t){var e=0;return r=Pn(r,t),Br(jr(n,(function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}})).sort((function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index})),\\\"value\\\")},groupBy:Rr,indexBy:Fr,countBy:Vr,partition:Pr,toArray:Tr,size:function(n){return null==n?0:tr(n)?n.length:nn(n).length},pick:Ur,omit:Wr,first:Lr,head:Lr,take:Lr,initial:zr,last:function(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[n.length-1]:$r(n,Math.max(0,n.length-r))},rest:$r,tail:$r,drop:$r,compact:function(n){return xr(n,Boolean)},flatten:function(n,r){return er(n,r,!1)},without:Kr,uniq:Jr,unique:Jr,union:Gr,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=Y(n);e<u;e++){var o=n[e];if(!Mr(r,o)){var i;for(i=1;i<t&&Mr(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:Cr,unzip:Hr,transpose:Hr,zip:Qr,object:function(n,r){for(var t={},e=0,u=Y(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},range:function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(i.call(n,e,e+=r));return t},mixin:Yr,default:tn});return Zr._=Zr,Zr}));\"","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nmodule.exports = function(src) {\r\n\tif (typeof execScript !== \"undefined\")\r\n\t\texecScript(src);\r\n\telse\r\n\t\teval.call(null, src);\r\n}\r\n","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/babel-loader/lib/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/lib/php-js/version_compare.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/backbone/backbone.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/big.js/big.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/crosstab/src/crosstab.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/handlebars/dist/handlebars.min.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/jquery-migrate/dist/jquery-migrate.min.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/jquery.iframe-transport/jquery.iframe-transport.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/jquery/dist/jquery.min.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/moment/min/moment.min.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/store/store.min.js\"))","require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/script-loader/addScript.js\")(require(\"!!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/raw-loader/index.js!/home/ubuntu/jenkins/workspace/14_0_Build/flavor/Ent/label_exp/docker/tmp/sugarbuild/sugarcrm/sidecar/node_modules/underscore/underscore-min.js\"))","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */\n\nif (ZEPTO) {\n    window.$ = require('exports-loader?$!zepto/src/zepto');\n    require('zepto/src/ajax');\n    require('zepto/src/detect');\n    require('zepto/src/event');\n    require('zepto/src/fx');\n    require('zepto/src/fx_methods');\n    require('zepto/src/selector');\n    require('zepto/src/touch');\n} else {\n    require('script-loader!crosstab');\n    require('script-loader!jquery/dist/jquery.min.js');\n    require('script-loader!jquery-migrate/dist/jquery-migrate.min.js');\n    require('script-loader!jquery.iframe-transport/jquery.iframe-transport.js');\n}\n\nrequire('script-loader!underscore/underscore-min.js');\nrequire('script-loader!backbone');\nrequire('script-loader!handlebars/dist/handlebars.min.js');\nwindow.async = require('async');\nrequire('script-loader!moment/min/moment.min.js');\nrequire('script-loader!store/store.min.js');\nrequire('script-loader!php-js/version_compare.js');\nrequire('script-loader!big.js');\n\nrequire('./sidecar');\n\nrequire('utils/cookie.js');\nrequire('sugaranalytics/sugaranalytics.js');\nrequire('sugaranalytics/googleanalyticsconnector.js');\nrequire('sugaranalytics/pendoconnector.js');\nrequire('sugar/sugar.liverelativedate.js');\n"],"names":["_instance","_methodsToRequest","_baseActions","_refreshTokenSuccess","c","_bulkQueues","_state","HttpError","request","textStatus","errorThrown","xhr","this","status","responseText","length","contentType","getResponseHeader","indexOf","payload","JSON","parse","code","error","message","error_message","e","_","extend","prototype","toString","HttpRequest","params","debug","state","execute","token","mdHash","upHash","headers","console","log","type","url","parsedData","data","password","p","$","ajax","bulkXHR","result","parentReq","contents","statusText","status_text","isObject","stringify","readyState","_parent","SugarApi","args","_serverUrl","_platform","_keyValueStore","_clientID","_timeout","_refreshingToken","_defaultErrorHandler","_externalLogin","_allowBulk","_externalLoginUICallback","_accessToken","_refreshToken","_downloadToken","_rqueue","_requests","_ruid","keyValueStore","serverUrl","defaultErrorHandler","platform","clientID","timeout","disableBulkApi","externalLoginUICallback","isFunction","set","get","cut","Error","init","initAsync","on","callback","_resetAuth","access_token","refresh_token","download_token","abortRequest","id","aborted","abort","getRequest","setRefreshTokenSuccessCallback","call","method","callbacks","options","getOAuthToken","triggerBulkRequest","dataType","success","complete","uid","iframe","FormData","processData","bulk","uniqueId","self","r","onError","refreshingToken","isRequestInQueue","i","_oerror","setRefreshingToken","refreshFailed","needRefreshAuthToken","_dequeuing","resetAuth","push","refreshCallbacks","shift","_ocomplete","window","crosstab","supported","login","refresh","event","off","broadcastMaster","needQueue","handleExternalLogin","_handleErrorAndRefreshToken","skipMetadataHash","getMetadataHash","getUserprefHash","isLoginRequest","isAuthRequest","bulkQueue","triggerBulkCall","apply","bulkId","queue","requests","version","last","split","each","isEmpty","substring","buildURL","o","clearBulkQueue","module","action","attributes","parts","link","isString","inArray","relatedId","field","fileId","join","value","key","param","buildFileURL","htmlJsonFormat","format","deleteIfFails","delete_if_fails","passDownloadToken","getDownloadToken","isUndefined","forceDownload","force_download","cleanCache","Date","getTime","undefined","keep","getRefreshToken","getMetadata","warn","oldOpt","arguments","types","modules","public","getPublic","type_filter","module_filter","wrap","_serverInfo","server_info","module_dependencies","records","relationships","related","relatedLeanCount","collection","favorite","follow","followed","enumOptions","fileDownload","internalCallbacks","prepend","location","href","xhrDownloadFile","XMLHttpRequest","open","responseType","onload","disposition","matches","blob","URL","downloadUrl","aEl","fileName","exec","replace","File","response","Blob","navigator","msSaveBlob","webkitURL","createObjectURL","document","createElement","download","target","body","appendChild","click","setTimeout","revokeObjectURL","setRequestHeader","send","file","$files","fd","attachedFile","files","append","count","exportRecords","$el","recordListUrl","omit","module_name","search","fetchWithPost","endpoint","useNewApi","credentials","grant_type","client_id","client_secret","username","client_info","me","css","themeName","logout","charAt","originalComplete","ping","signup","contactData","verifyPassword","password_to_verify","updatePassword","oldPassword","newPasword","new_password","old_password","info","isAuthenticated","errorCode","RegExp","test","flag","originalEvent","origin","authData","parseJSON","external_login","loginFailed","isExternalLogin","setExternalLogin","setExternalLoginUICallback","getStateProperty","setStateProperty","clearStateProperty","resetState","isResolved","h","getAllResponseHeaders","reduce","str","concat","exports","getInstance","createInstance","bind","_runningRefreshToken","broadcast","async","root","previous_async","noConflict","_forEach","arr","iterator","forEach","_map","map","results","x","a","_keys","obj","Object","keys","k","hasOwnProperty","process","nextTick","fn","completed","err","forEachSeries","iterate","forEachLimit","limit","started","running","replenish","doParallel","Array","slice","doSeries","_asyncMap","eachfn","index","v","mapSeries","memo","inject","foldl","reduceRight","reversed","reverse","foldr","_filter","sort","b","filter","filterSeries","select","selectSeries","_reject","reject","rejectSeries","_detect","main_callback","detect","detectSeries","some","any","every","all","sortBy","criteria","left","right","auto","tasks","listeners","addListener","unshift","task","Function","taskCallback","requires","Math","abs","ready","listener","splice","removeListener","waterfall","wrapIterator","next","parallel","constructor","series","makeCallback","_concat","cb","y","concatSeries","whilst","until","worker","concurrency","workers","q","saturated","empty","drain","_console_fn","name","dir","memoize","hasher","queues","memoized","pop","l","unmemoized","unmemoize","DateUtils","require","date","updateInterval","$liveDates","run","liveRelativeDateGlobal","update","el","$this","attr","from","html","to","fromNow","Event","trigger","isDefaultPrevented","not","pause","clearTimeout","resume","interval","liveRelativeDateLocal","add","destroy","removeAttr","isLiveRelativeDate","$els","tracked","liverelativedate","plugin","jQuery","Zepto","app","SUGAR","App","analytics","connectors","GoogleAnalytics","initialize","s","m","logger","getElementsByTagName","src","parentNode","insertBefore","start","gaOptions","defaults","cookieDomain","forceSSL","ga","enableIPAnonymization","optOut","trackPageView","pageUri","trackEvent","category","label","Pendo","serverInfoDefaults","apiKey","n","d","w","z","_q","configure","config","user","pendo","getPendoMetadata","visitorId","userType","language","getLanguage","rolesArray","roles","isArray","licensesArray","licenses","activityStreamsEnabled","editablePreviewEnabled","previewEdit","listMaxEntriesPerPage","maxQueryResult","listMaxEntriesPerSubpanel","maxSubpanelResult","leadConversionOptions","leadConvActivityOpt","systemDefaultCurrencyCode","currency","getBaseCurrency","iso4217","systemDefaultLanguage","lang","awsConnectInstanceName","awsConnectUrl","serverInfo","metadata","getServerInfo","accountId","site_id","siteUrl","utils","getSiteUrl","flavor","hostEnvironment","host_environment","hostDesignation","host_designation","hostDBName","db_name","accountBasicInfo","domain","edition","activity_streams_enabled","editable_preview_enabled","list_view_items_per_page","subpanel_items_per_page","lead_conversion_options","system_default_currency_code","system_default_language","aws_connect_instance_name","aws_connect_url","host_db_name","accountServerInfo","serverInfoList","visitor","user_type","account","track","trackType","trackData","has","formattedAction","toUpperCase","parsedCategory","eventName","_analytics","eventSplitter","currentViewId","_eventsHash","swipeleft","swiperight","enabled","connector","events","register","val","_parseTrackTag","isNative","web","layout","toLowerCase","build","page","currentTarget","currentLocation","pieces","actionValue","_attachEvents","hasClass","dispose","augment","User","Action2Permission","view","readonly","edit","detail","list","disabled","hasAccess","acls","access","hasAccessToField","fields","Acl","recordAcls","getAcls","fieldAcls","moduleMeta","getModule","fieldMeta","group","hasAccessToModel","model","hasAccessToAny","_hasAccess","sidecarCompatMode","_hasAccessToField","clearCache","_accessToAny","defineProperty","configurable","dummyAccessToAny","eventsApi","rest","_typeof","names","triggerEvents","ev","stop","ctx","before","context","_before","triggerBefore","allEvents","offBefore","retain","j","Events","keyPrefix","buildKey","sugarStore","store","remove","cutAll","clear","unquote","Cache","Backbone","env","appId","cache","len","localStorage","deserialize","uniqueKey","migrateStorage","clean","preserveKeys","preservedValues","union","getAll","cfg","Bean","BeanCollection","DataManager","shouldFetch","isDataFetched","Context","Model","cid","parent","children","_fetchCalled","abortFetchRequest","child","stopListening","resetLoadFlag","recursive","resetModel","resetCollection","dataFetched","isCreate","getChildContext","def","force","forceNew","find","fetch","parentModel","parentModule","prepare","prepareRelated","modelId","create","_prepareRelated","_prepare","_relatedCollectionsPopulated","_populateRelatedContexts","setFetch","models","mixed","createBean","createMixedBeanCollection","createBeanCollection","createRelatedBean","createRelatedCollection","silent","addFields","fieldsArray","loadData","forceFetch","objectToFetch","defaultOrdering","orderByDefaults","orderBy","setOption","bean","collectionFields","fieldsOfType","links","_shouldFetch","reloadData","ViewManager","View","api","additionalComponents","component","_setLabels","render","router","reset","sync","loadView","oldLayout","createLayout","createDocumentFragment","$contentEl","initComponents","skipFetch","loadAdditionalComponents","components","createView","Alert","Utils","Language","callCustomHandler","ErrorHandler","handleStatusCodesFallback","handleFineGrainedError","alternativeCallback","handlerName","classify","enableOnError","opts","statusCodes","disableOnError","handleTimeoutError","handleUnspecified400Error","handleUnauthorizedError","handleForbiddenError","_2","_x","handleNotFoundError","handleMethodNotAllowedError","handleMethodConflictError","handleHeaderPreconditionFailed","_3","_x2","_x3","handleValidationError","_4","_x4","_x5","handleMethodFailureError","handleServerError","errorName2Keys","getErrorString","errorKey","errors","dismissAll","fieldError","errorMsg","fieldName","handleHttpError","handleUnhandledError","line","fatal","handleRenderError","additionalInfo","title","messages","level","formatString","getModuleName","plural","show","handler","originalHandler","overloaded","onerror","mesg","throwErrorWithCallStack","skipThrow","stack","_callCustomHandler","_handleFineGrainedError","_deprecated","deprecated","pick","unregister","registerAjaxEvents","warnMessage","defaultLanguage","currentLanguage","Template","bundle","getStrings","sanitize","tpl","Handlebars","templates","compile","direction","getModString","getAppString","moduleString","moduleName","getAppListStrings","tuple","defaultValue","getAppListKeys","listName","setLanguage","noSync","langHasChanged","updateLanguage","noUserUpdate","forceRefresh","metadataTypes","setPreference","setCurrentLanguage","documentElement","currentLanguageForDom","first","setDefaultLanguage","getDefaultLanguage","setDirection","isRTL","contains","prevDirection","_get","_sanitize","_keyPrefix","_metadata","_mdLoaded","_syncing","externalSyncTasks","_setHash","isPublic","pKey","_hash","_cacheMeta","_getCachedMeta","_injectLabels","serverMetadata","labels","_fetchLabels","ordered_labels","Promise","langStringsUrl","userLang","buildUrl","labelsData","ex","resolve","_initCustomComponents","platforms","_metaTypeIsSeparatedByPlatform","_sortAndDeclareComponents","tplSource","tplName","setView","setLayout","template","setField","fieldTypeMap","varchar","datetime","multienum","text","decimal","_patchMetadata","_patched","views","meta","panels","panel","_patchFields","dropdownViews","fieldIndex","fieldDef","subfields","displayParams","custom_type","vname","_sortControllers","updated","nameMap","entries","updateWeights","entry","controller","capitalize","weight","extendsFrom","className","capitalizeHyphenated","eval","emptyController","getOwnPropertyNames","customExtendsFrom","declareModelClass","declareCollectionClass","declareComponent","_declareClasses","getModules","getHiddenSubpanels","hidden_subpanels","getRelationship","getField","getView","loadModule","copy","getDropdownViews","getLayout","layouts","getModuleNames","filters","moduleList","modules_info","clone","displayTabFilter","f","chain","without","oppositeList","difference","intersection","getFullModuleList","full_module_list","getConfig","getBaseCurrencyId","getCurrency","currencyId","getCurrencies","currencies","getLogoUrl","isDarkMode","logo_url_dark","logo_url","hasLicense","licenseType","hasAll","licenseMatcher","license","includes","hasSellLicense","hasServeLicense","hasSellServeLicense","hasBoth","hasConnectLicense","hasDiscoverLicense","hasHintLicense","hasMapsLicense","hasAdvancedForecastingLicense","hasPredictLicense","hasPredictAdvancedLicense","hasPredictPremierLicense","getModuleTabMap","module_tab_map","getTabMappedModule","getFilterOperators","operators","moduleData","moduleFilters","getEditableDropdownFilter","dropdown","editable_dropdown_filters","deepCopy","setConfig","getHash","overrideKeys","_override_values","cacheMeta","_dev_data","publicMetadataTypes","errorCallback","compatible","include","isServerCompatible","_loadJSSource","then","isSyncing","addSyncTask","removeSyncTask","jssource","res","scriptEl","loadJS","_checkJSSourceUpdated","hardRefresh","head","doWhen","_publicJSSourceFile","jssource_public","_jsSourceFile","bindAll","addEventListener","storageHandler","md","PluginManager","plugins","isPluginDisabled","pluginName","disabledPlugins","attach","prop","onAttach","detach","onDetach","validTypes","_isPluginDisabled","Routing","Router","_previousFragment","_currentFragment","_routeHandler","route","beforeRoute","getFragment","after","_moduleExists","_addDefaultRoutes","defaultRoutes","addRoutes","_canStoreExternalAuthLastPage","history","fragment","_routes","navigate","getPreviousFragment","goBack","back","go","steps","History","old","handlers","routes","newRoutes","loadUrl","buildRoute","moduleOrContext","customBuildRoute","redirect","externalLogin","lastPage","defaultModule","logoutComplete","reload","record","oldCollection","oldListCollection","listCollection","BeforeEvent","unsecureRoutes","isSynced","lastStates","preservedKeys","buildLastStateKeyForStorage","getLastStateId","load","useCallback","current_user","getPreference","lastState","syncTimezone","_this3","preferences","clientPref","getClientTimezonePref","serverPref","isEqual","updatePreferences","isSetupCompleted","alert","secOffset","getTimezoneOffset","tzOffsetSec","tzOffset","match","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","tz_offset","tz_offset_sec","loadLocale","preferred_language","updateProfile","currencyObj","currency_create_in_preferred","userLicenses","getProductCodes","uniq","pluck","getProductNames","hasAutomateLicense","keyParts","storedKey","lastStateId","last_state","updateDbValue","changesToSync","_syncDb","preserve","keyString","defaultState","_this","_ref","_ref2","_getPreservedKeys","ret","debounce","_this2","isUpdating","resave","values","assign","MyUser","Collection","_activeFetchRequest","_persistentOptions","_create","_delete","_add","_bindCollectionEvents","total","getFetchRequest","_decrementTotal","resetDelta","isNew","toDelete","getDelta","delta","invoke","oppositeLink","getOppositeLink","relationshipFields","getRelationFields","objToAdd","relationshipField","hasDelta","_prepareModel","searchInfo","_search","getOption","myItems","favorites","query","activeFetchRequest","resetPagination","offset","next_offset","paginate","maxSize","strictOffset","isNumber","fetchTotal","isNull","orig","parseInt","record_count","filterDef","hasAtLeast","amount","hasAtLeastAmount","properties","hasMore","has_more","parseOptionsForSync","apiOptions","getPageNumber","pageNumber","ceil","getNext","current","ind","nextFn","at","hasNextModel","getModelIndex","getPrev","hasPreviousModel","attrs","unsetOption","newCol","Validation","_addValidationError","validatorName","doValidate","isValid","setSyncedAttributes","_bindEvents","_relatedCollections","_defaults","addValidationTask","_doValidate","req","collections","getCollectionFields","_setCollectionFieldValues","MixedBeanCollection","_createMixedBeanCollectionField","object","listenTo","colOptions","linkCollections","getRelatedCollection","parentBean","collectionField","_checkAcl","changedFieldAcls","_checkFieldAcls","size","getSynced","fieldsProp","property","syncedFieldAcls","_setRelatedCollection","isValidAsync","flatten","waterfallCallback","_validationTasks","didWaterfallFail","_processValidationErrors","requiredValidator","validators","validator","taskName","validate","removeValidationTask","fieldErrors","save","fieldsToValidate","canHaveAttachments","getFiles","passOAuthToken","source","vardefs","duplicate_on_record_copy","auto_increment","isCopied","isCopy","uploadFile","temp","my_favorite","following","isFavorite","getChangeDiff","original","exclude","diff","previousValue","hasChanged","toJSON","json","linkName","revertAttributes","revert","changedAttr","changedAttributes","changed","_syncedAttributes","getDefault","setDefault","where","merge","changes","_models","_collections","getRelationshipName","relationship","beanModel","beanCollection","mixedBeanCollection","declareModel","modelController","collectionController","platformNamespace","baseProperties","superModel","BaseModel","extendClass","baseCollectionProperties","superCollection","BaseCollection","mergeModel","getModelClasses","getCollectionClasses","declareModels","getBeanClass","bean1","beanOrId2","relatedModule","getRelatedModule","canHaveMany","linkType","link_type","t","true_relationship_type","relationship_type","side","lhs_module","rhs_module","getRelateFields","parentModuleName","parentModuleDef","getRelationshipFields","ff","linkField","rel_fields","relationship_fields","fieldNames","moduleFields","rname_link","relationshipName","relatedVardefs","findWhere","getRelatedNameField","idFieldName","id_name","getEditableFields","editableFields","ignoreTypeList","fieldValue","trace","relate","getSyncCallbacks","relatedData","beanId","viewed","max_num","order_by","my_items","module_list","lastModified","getSyncSuccessCallback","getSyncErrorCallback","getSyncCompleteCallback","getSyncAbortCallback","inSync","original_assigned_user_id","xmod_aggs","tags","_updateCollectionProperties","syncedAttributes","updatedAttributes","related_record","abortCallback","previousModels","modelList","_linkedCollections","_parentBean","_collectionField","_onLinkAdd","_onLinkRemove","_onLinkReset","_module","_updating","groupedBeans","groupBy","_link","findKey","removeOptions","setOptions","modelModule","sortedBeans","coll","groupByModule","isArrayEmpty","_minMaxValue","_isBeforeAfter","validation","isFinite","parseFloat","validatableTypes","datatype","compareTo","compareto","compareToValue","isNaN","compareToLabel","maxLength","minLength","minlen","email","emails","email_address","required","isValidEmailAddress","primaryEmail","primary_address","duplicateEmail","duplicates","sep","formatParts","inRange","min","max","isIso","part","minValue","maxValue","greaterThan","lessThan","number","isBoolean","trim","isBefore","isAfter","currentValue","currentUndefined","valueEmpty","_isArrayEmpty","Api","path","pathname","getCookie","Cookie","frame","style","display","contentWindow","cookie","setCookie","math","currId","currency_id","getCurrenciesSelector","getCurrencySymbol","symbol","formatAmount","decimalPrecision","numberGroupingSeparator","decimalSeparator","symbolSeparator","defaultCurrencySignificantDigits","defaultDecimalSeparator","defaultNumberGroupingSeparator","formatNumber","formatAmountLocale","userDecimalPrecision","unformatAmount","toFloat","unformatNumberString","unformatAmountLocale","convertAmount","fromId","toId","currency1","currency2","round","convertWithRate","conversion_rate","convertToBase","convertFromBase","fromRate","toRate","mul","div","moment","InvalidException","_cachedFormats","_serverDateFormat","_serverLocale","convertFormat","server","client","conversion","_conversion","compare","date1","date2","mDate1","mDate2","getUserDateFormat","getUserTimeFormat","_formatStringCache","oldFormat","dateRemain","timeformat","jsDate","guessFormat","setMonth","setDate","setYear","timeFormatString","postfix","setHours","setMinutes","setSeconds","dateSep","dateParts","dateFormat","timeFormat","timeParts","timeSep","ampmCase","timeEnd","time","parseFormat","month","day","year","hours","minutes","seconds","amPm","isDate","out","getMonth","getDate","getFullYear","getHours","getMinutes","getSeconds","roundTime","UTCtoLocalTime","toUTC","UTCtoTimezone","milliseconds","getMilliseconds","UTC","getRelativeTimeLabel","rightNow","isFuture","hour","minute","second","floor","parseDisplayDefault","displayDefault","now","dateMap","dt","humanDate","defaultTime","addMonths","op","timeAway","dateObj","days","todayDay","getDay","operator","week","sinceEpoch","toDatepickerFormat","formatSpec","sugarToDatepickerMap","stripIsoTimeDelimterAndTZ","substr","formatUser","dateOnly","formatServer","originalLocale","locale","formatted","isBetween","startDate","endDate","inclusive","isInRange","isSame","duration","asDays","formatter","consoleWriter","serverWriter","writers","ConsoleWriter","write","Logger","levels","INFO","WARN","ServerWriter","writeToServer","formatters","SimpleFormatter","dateString","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","TRACE","DEBUG","ERROR","FATAL","getLevel","currentLevel","_math","n1","n2","decimals","fixed","Big","NE","plus","minus","times","startsWith","toFixed","sub","isDifferentWithPrecision","newValue","oldValue","precision","user_precision","getDifference","diffPrecision","pow","absolute","MIXIN","isEmptyValue","obj1","obj2","allKeys","_doWhenStack","_doWhenLocked","_doWhenInterval","_doWhenretryCount","_startDoWhenInterval","setInterval","_doWhenCheck","cName","exdays","c_value","exdate","encodeURIComponent","toUTCString","ARRcookies","decodeURIComponent","_classify","delimiter","lastIndexOf","words","word","defaultBase","base","numberGroupSeparator","toStringOnly","addNumberSeparators","formatNumberLocale","formatName","firstName","lastName","salutation","first_name","last_name","formatNameModel","formatMap","nameFormat","formattedString","letter","enumLabel","formatNameLocale","numberString","numberArray","regex","num_grp_sep_re","float","unformatNumberStringLocale","idx","regexEscape","string","specialRegExp","generateUUID","random","address","condition","scope","check","overrideContext","clearInterval","tryAgain","isReady","notAvail","executeItem","item","versionCompare","v1","v2","version_compare","extendFrom","subc","superc","overrides","compareBeans","beanA","beanB","attribute","areBeanValuesEqual","hasDefaultValueChanged","value1","value2","getValueToCompare","isConnectivityError","ajaxError","getTimestamp","dateValue","toISOString","msecPrecision","getChangedProps","data1","data2","strict","getType","isEqualProp","value1Type","keys1","keys2","getParentLayout","isSortable","fieldViewdef","fieldVardef","sortable","stripHttpPrefix","isDirectionRTL","convertNumericType","Number","AlertView","addClass","_alerts","preventAnyAlert","$alerts","klass","alertsEl","BaseAlertView","autoClose","_setAutoCloseTimer","onAutoClose","autoCloseDelay","prependTo","timerId","dismiss","alertAutoCloseDelay","Component","_isInitialized","_wrapInitialize","delegateEvents","css_class","updateVisibleState","_render","disposed","setTemplateOption","option","templateOptions","bindDataChange","unbindData","unbind","undelegateEvents","noop","_dispose","closestComponent","isVisible","_show","hide","_hide","_isVisible","visible","removeClass","_super","thisProto","getPrototypeOf","_superStack","getPlaceholder","SafeString","Field","fieldTag","sfId","viewDefs","fieldDefs","defs","oldLabel","removeValidationErrors","handleAclChange","viewFallbackMap","_resetAction","_checkAccessToAction","_getFallbackTemplate","viewName","isDisabled","fallbackFieldTemplate","_loadTemplate","actionName","eventHandler","triggerMetadataEvent","getFormattedValue","unbindDom","getFieldElement","bindDomChange","unformat","setDisabled","disable","swapped","_previousAction","setViewName","setMode","equals","other","Currency","Layout","Helpers","createField","hash","fieldOfType","viewDef","newComponent","placeholder","componentDef","initializedInTemplate","eachOptions","hbsOptions","element","array","inverse","notHas","helpers","eq","val1","val2","notEq","notMatch","content","relativeTime","iso8601","escapeExpression","arrayJoin","glue","nl2br","formatCurrency","firstChars","formatDate","partial","templateComponent","partials","fallbackTemplate","templateName","_components","placeComponentsFromTemplate","lazy_loaded","_componentsMeta","componentElems","$placeholder","replaceWith","newSubComponents","initialLength","_addComponentsFromDef","comp","createComponentFromDef","primary","addComponent","_placeComponent","removeComponent","getComponent","getFieldNames","getFields","_disposeComponents","_header","_footer","_templates","_sources","TemplateManager","loaded","_compile","precompile","_getView","_getField","skipFallbacks","foundTemplate","prefix","_getLayout","_sfId","getFieldId","_createComponent","_getPlatform","xmeta","nested","nestedFields","_getController","_getBaseComponent","moduleBasedClassName","baseClass","componentHasPlugin","overwrite","ucType","customModuleBasedClassName","customBaseClassName","dataView","_getTemplate","fallbackModule","_renderHtml","_renderFields","fieldElems","_renderField","$fieldEl","setElement","_disposeFields","modulePlural","moduleSingular","compact","fieldMetadata","relates","type_name","getFieldMeta","includeChild","_isChild","setFieldMeta","childDef","Controller","MetadataManager","_app","_modules","_isSyncing","_syncCallbacks","_make$","selector","$rootEl","contentEl","Klass","serverTimeout","authStore","_init","syncCallback","_initModules","cssCallback","loadCss","syncConfig","_loadConfig","rsp","rel","appendTo","syncPublic","cbw","sugarLogic","minServerVersion","fetchSugarLogic","migrateMute","current_language","originalError","isDynamic","expressions","cacheSugarLogicExpressions","loadSugarLogic","_loadSugarLogic","compileJs","js","isSupportedFlavor","isSupportedVersion","flavors","supportedServerFlavors","minVersion","ctxFactory","getContext","mixin","registerHelper","execScript","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}